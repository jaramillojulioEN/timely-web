(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8598],{8598:(Ns,ni,en)=>{"use strict";en.r(ni),en.d(ni,{Tab4PageModule:()=>Us});var vo=en(6814),Le=en(95),$e=en(3582),tn=en(9021),it=en(5861),_n=(Math.pow(10,8),6e4);function C(E,d){if(d.length<E)throw new TypeError(E+" argument"+(E>1?"s":"")+" required, but only "+d.length+" present")}function qn(E){if(null===E||!0===E||!1===E)return NaN;var d=Number(E);return isNaN(d)?d:d<0?Math.ceil(d):Math.floor(d)}function dt(E,d){var g;C(1,arguments);var h=qn(null!==(g=null==d?void 0:d.additionalDigits)&&void 0!==g?g:2);if(2!==h&&1!==h&&0!==h)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof E&&"[object String]"!==Object.prototype.toString.call(E))return new Date(NaN);var S,b=function zo(E){var h,d={},g=E.split(Gt.dateTimeDelimiter);if(g.length>2)return d;if(/:/.test(g[0])?h=g[0]:(d.date=g[0],h=g[1],Gt.timeZoneDelimiter.test(d.date)&&(d.date=E.split(Gt.timeZoneDelimiter)[0],h=E.substr(d.date.length,E.length))),h){var b=Gt.timezone.exec(h);b?(d.time=h.replace(b[1],""),d.timezone=b[1]):d.time=h}return d}(E);if(b.date){var R=function et(E,d){var g=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+d)+"})|(\\d{2}|[+-]\\d{"+(2+d)+"})$)"),h=E.match(g);if(!h)return{year:NaN,restDateString:""};var b=h[1]?parseInt(h[1]):null,S=h[2]?parseInt(h[2]):null;return{year:null===S?b:100*S,restDateString:E.slice((h[1]||h[2]).length)}}(b.date,h);S=function gs(E,d){if(null===d)return new Date(NaN);var g=E.match(ve);if(!g)return new Date(NaN);var h=!!g[4],b=no(g[1]),S=no(g[2])-1,R=no(g[3]),L=no(g[4]),J=no(g[5])-1;if(h)return function jt(E,d,g){return d>=1&&d<=53&&g>=0&&g<=6}(0,L,J)?function Te(E,d,g){var h=new Date(0);h.setUTCFullYear(E,0,4);var S=7*(d-1)+g+1-(h.getUTCDay()||7);return h.setUTCDate(h.getUTCDate()+S),h}(d,L,J):new Date(NaN);var te=new Date(0);return function oi(E,d,g){return d>=0&&d<=11&&g>=1&&g<=(wr[d]||(Sr(E)?29:28))}(d,S,R)&&function _r(E,d){return d>=1&&d<=(Sr(E)?366:365)}(d,b)?(te.setUTCFullYear(d,S,Math.max(b,R)),te):new Date(NaN)}(R.restDateString,R.year)}if(!S||isNaN(S.getTime()))return new Date(NaN);var te,L=S.getTime(),J=0;if(b.time&&(J=function Ce(E){var d=E.match(St);if(!d)return NaN;var g=rn(d[1]),h=rn(d[2]),b=rn(d[3]);return function an(E,d,g){return 24===E?0===d&&0===g:g>=0&&g<60&&d>=0&&d<60&&E>=0&&E<25}(g,h,b)?36e5*g+h*_n+1e3*b:NaN}(b.time),isNaN(J)))return new Date(NaN);if(!b.timezone){var ue=new Date(L+J),ke=new Date(0);return ke.setFullYear(ue.getUTCFullYear(),ue.getUTCMonth(),ue.getUTCDate()),ke.setHours(ue.getUTCHours(),ue.getUTCMinutes(),ue.getUTCSeconds(),ue.getUTCMilliseconds()),ke}return te=function Ki(E){if("Z"===E)return 0;var d=E.match(_t);if(!d)return 0;var g="+"===d[1]?-1:1,h=parseInt(d[2]),b=d[3]&&parseInt(d[3])||0;return function T(E,d){return d>=0&&d<=59}(0,b)?g*(36e5*h+b*_n):NaN}(b.timezone),isNaN(te)?new Date(NaN):new Date(L+J+te)}var Gt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ve=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,St=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,_t=/^([+-])(\d{2})(?::?(\d{2}))?$/;function no(E){return E?parseInt(E):1}function rn(E){return E&&parseFloat(E.replace(",","."))||0}var wr=[31,null,31,30,31,30,31,31,30,31,30,31];function Sr(E){return E%400==0||E%4==0&&E%100!=0}var Tr=en(1002);function qo(E){C(1,arguments);var d=Object.prototype.toString.call(E);return E instanceof Date||"object"===(0,Tr.Z)(E)&&"[object Date]"===d?new Date(E.getTime()):"number"==typeof E||"[object Number]"===d?new Date(E):(("string"==typeof E||"[object String]"===d)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function re(E){C(1,arguments);var g=qo(E),h=g.getUTCDay(),b=(h<1?7:0)+h-1;return g.setUTCDate(g.getUTCDate()-b),g.setUTCHours(0,0,0,0),g}function No(E){C(1,arguments);var d=qo(E),g=d.getUTCFullYear(),h=new Date(0);h.setUTCFullYear(g+1,0,4),h.setUTCHours(0,0,0,0);var b=re(h),S=new Date(0);S.setUTCFullYear(g,0,4),S.setUTCHours(0,0,0,0);var R=re(S);return d.getTime()>=b.getTime()?g+1:d.getTime()>=R.getTime()?g:g-1}var nn={};function Ko(){return nn}function Ze(E,d){var g,h,b,S,R,L,J,te;C(1,arguments);var ue=Ko(),ke=qn(null!==(g=null!==(h=null!==(b=null!==(S=null==d?void 0:d.weekStartsOn)&&void 0!==S?S:null==d||null===(R=d.locale)||void 0===R||null===(L=R.options)||void 0===L?void 0:L.weekStartsOn)&&void 0!==b?b:ue.weekStartsOn)&&void 0!==h?h:null===(J=ue.locale)||void 0===J||null===(te=J.options)||void 0===te?void 0:te.weekStartsOn)&&void 0!==g?g:0);if(!(ke>=0&&ke<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var We=qo(E),Re=We.getUTCDay(),Xe=(Re<ke?7:0)+Re-ke;return We.setUTCDate(We.getUTCDate()-Xe),We.setUTCHours(0,0,0,0),We}function Wn(E,d){var g,h,b,S,R,L,J,te;C(1,arguments);var ue=qo(E),ke=ue.getUTCFullYear(),We=Ko(),Re=qn(null!==(g=null!==(h=null!==(b=null!==(S=null==d?void 0:d.firstWeekContainsDate)&&void 0!==S?S:null==d||null===(R=d.locale)||void 0===R||null===(L=R.options)||void 0===L?void 0:L.firstWeekContainsDate)&&void 0!==b?b:We.firstWeekContainsDate)&&void 0!==h?h:null===(J=We.locale)||void 0===J||null===(te=J.options)||void 0===te?void 0:te.firstWeekContainsDate)&&void 0!==g?g:1);if(!(Re>=1&&Re<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Xe=new Date(0);Xe.setUTCFullYear(ke+1,0,Re),Xe.setUTCHours(0,0,0,0);var Qe=Ze(Xe,d),bt=new Date(0);bt.setUTCFullYear(ke,0,Re),bt.setUTCHours(0,0,0,0);var yt=Ze(bt,d);return ue.getTime()>=Qe.getTime()?ke+1:ue.getTime()>=yt.getTime()?ke:ke-1}function Lt(E,d){for(var g=E<0?"-":"",h=Math.abs(E).toString();h.length<d;)h="0"+h;return g+h}const Tn_y=function(d,g){var h=d.getUTCFullYear(),b=h>0?h:1-h;return Lt("yy"===g?b%100:b,g.length)},Tn_M=function(d,g){var h=d.getUTCMonth();return"M"===g?String(h+1):Lt(h+1,2)},Tn_d=function(d,g){return Lt(d.getUTCDate(),g.length)},Tn_h=function(d,g){return Lt(d.getUTCHours()%12||12,g.length)},Tn_H=function(d,g){return Lt(d.getUTCHours(),g.length)},Tn_m=function(d,g){return Lt(d.getUTCMinutes(),g.length)},Tn_s=function(d,g){return Lt(d.getUTCSeconds(),g.length)},Tn_S=function(d,g){var h=g.length,b=d.getUTCMilliseconds();return Lt(Math.floor(b*Math.pow(10,h-3)),g.length)};function ao(E,d){var g=E>0?"-":"+",h=Math.abs(E),b=Math.floor(h/60),S=h%60;if(0===S)return g+String(b);var R=d||"";return g+String(b)+R+Lt(S,2)}function Jn(E,d){return E%60==0?(E>0?"-":"+")+Lt(Math.abs(E)/60,2):Qn(E,d)}function Qn(E,d){var g=d||"",h=E>0?"-":"+",b=Math.abs(E);return h+Lt(Math.floor(b/60),2)+g+Lt(b%60,2)}const Xa={G:function(d,g,h){var b=d.getUTCFullYear()>0?1:0;switch(g){case"G":case"GG":case"GGG":return h.era(b,{width:"abbreviated"});case"GGGGG":return h.era(b,{width:"narrow"});default:return h.era(b,{width:"wide"})}},y:function(d,g,h){if("yo"===g){var b=d.getUTCFullYear();return h.ordinalNumber(b>0?b:1-b,{unit:"year"})}return Tn_y(d,g)},Y:function(d,g,h,b){var S=Wn(d,b),R=S>0?S:1-S;return"YY"===g?Lt(R%100,2):"Yo"===g?h.ordinalNumber(R,{unit:"year"}):Lt(R,g.length)},R:function(d,g){return Lt(No(d),g.length)},u:function(d,g){return Lt(d.getUTCFullYear(),g.length)},Q:function(d,g,h){var b=Math.ceil((d.getUTCMonth()+1)/3);switch(g){case"Q":return String(b);case"QQ":return Lt(b,2);case"Qo":return h.ordinalNumber(b,{unit:"quarter"});case"QQQ":return h.quarter(b,{width:"abbreviated",context:"formatting"});case"QQQQQ":return h.quarter(b,{width:"narrow",context:"formatting"});default:return h.quarter(b,{width:"wide",context:"formatting"})}},q:function(d,g,h){var b=Math.ceil((d.getUTCMonth()+1)/3);switch(g){case"q":return String(b);case"qq":return Lt(b,2);case"qo":return h.ordinalNumber(b,{unit:"quarter"});case"qqq":return h.quarter(b,{width:"abbreviated",context:"standalone"});case"qqqqq":return h.quarter(b,{width:"narrow",context:"standalone"});default:return h.quarter(b,{width:"wide",context:"standalone"})}},M:function(d,g,h){var b=d.getUTCMonth();switch(g){case"M":case"MM":return Tn_M(d,g);case"Mo":return h.ordinalNumber(b+1,{unit:"month"});case"MMM":return h.month(b,{width:"abbreviated",context:"formatting"});case"MMMMM":return h.month(b,{width:"narrow",context:"formatting"});default:return h.month(b,{width:"wide",context:"formatting"})}},L:function(d,g,h){var b=d.getUTCMonth();switch(g){case"L":return String(b+1);case"LL":return Lt(b+1,2);case"Lo":return h.ordinalNumber(b+1,{unit:"month"});case"LLL":return h.month(b,{width:"abbreviated",context:"standalone"});case"LLLLL":return h.month(b,{width:"narrow",context:"standalone"});default:return h.month(b,{width:"wide",context:"standalone"})}},w:function(d,g,h,b){var S=function Ar(E,d){C(1,arguments);var g=qo(E),h=Ze(g,d).getTime()-function yo(E,d){var g,h,b,S,R,L,J,te;C(1,arguments);var ue=Ko(),ke=qn(null!==(g=null!==(h=null!==(b=null!==(S=null==d?void 0:d.firstWeekContainsDate)&&void 0!==S?S:null==d||null===(R=d.locale)||void 0===R||null===(L=R.options)||void 0===L?void 0:L.firstWeekContainsDate)&&void 0!==b?b:ue.firstWeekContainsDate)&&void 0!==h?h:null===(J=ue.locale)||void 0===J||null===(te=J.options)||void 0===te?void 0:te.firstWeekContainsDate)&&void 0!==g?g:1),We=Wn(E,d),Re=new Date(0);return Re.setUTCFullYear(We,0,ke),Re.setUTCHours(0,0,0,0),Ze(Re,d)}(g,d).getTime();return Math.round(h/6048e5)+1}(d,b);return"wo"===g?h.ordinalNumber(S,{unit:"week"}):Lt(S,g.length)},I:function(d,g,h){var b=function Nr(E){C(1,arguments);var d=qo(E),g=re(d).getTime()-function kr(E){C(1,arguments);var d=No(E),g=new Date(0);return g.setUTCFullYear(d,0,4),g.setUTCHours(0,0,0,0),re(g)}(d).getTime();return Math.round(g/6048e5)+1}(d);return"Io"===g?h.ordinalNumber(b,{unit:"week"}):Lt(b,g.length)},d:function(d,g,h){return"do"===g?h.ordinalNumber(d.getUTCDate(),{unit:"date"}):Tn_d(d,g)},D:function(d,g,h){var b=function pt(E){C(1,arguments);var d=qo(E),g=d.getTime();d.setUTCMonth(0,1),d.setUTCHours(0,0,0,0);var h=d.getTime();return Math.floor((g-h)/864e5)+1}(d);return"Do"===g?h.ordinalNumber(b,{unit:"dayOfYear"}):Lt(b,g.length)},E:function(d,g,h){var b=d.getUTCDay();switch(g){case"E":case"EE":case"EEE":return h.day(b,{width:"abbreviated",context:"formatting"});case"EEEEE":return h.day(b,{width:"narrow",context:"formatting"});case"EEEEEE":return h.day(b,{width:"short",context:"formatting"});default:return h.day(b,{width:"wide",context:"formatting"})}},e:function(d,g,h,b){var S=d.getUTCDay(),R=(S-b.weekStartsOn+8)%7||7;switch(g){case"e":return String(R);case"ee":return Lt(R,2);case"eo":return h.ordinalNumber(R,{unit:"day"});case"eee":return h.day(S,{width:"abbreviated",context:"formatting"});case"eeeee":return h.day(S,{width:"narrow",context:"formatting"});case"eeeeee":return h.day(S,{width:"short",context:"formatting"});default:return h.day(S,{width:"wide",context:"formatting"})}},c:function(d,g,h,b){var S=d.getUTCDay(),R=(S-b.weekStartsOn+8)%7||7;switch(g){case"c":return String(R);case"cc":return Lt(R,g.length);case"co":return h.ordinalNumber(R,{unit:"day"});case"ccc":return h.day(S,{width:"abbreviated",context:"standalone"});case"ccccc":return h.day(S,{width:"narrow",context:"standalone"});case"cccccc":return h.day(S,{width:"short",context:"standalone"});default:return h.day(S,{width:"wide",context:"standalone"})}},i:function(d,g,h){var b=d.getUTCDay(),S=0===b?7:b;switch(g){case"i":return String(S);case"ii":return Lt(S,g.length);case"io":return h.ordinalNumber(S,{unit:"day"});case"iii":return h.day(b,{width:"abbreviated",context:"formatting"});case"iiiii":return h.day(b,{width:"narrow",context:"formatting"});case"iiiiii":return h.day(b,{width:"short",context:"formatting"});default:return h.day(b,{width:"wide",context:"formatting"})}},a:function(d,g,h){var S=d.getUTCHours()/12>=1?"pm":"am";switch(g){case"a":case"aa":return h.dayPeriod(S,{width:"abbreviated",context:"formatting"});case"aaa":return h.dayPeriod(S,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return h.dayPeriod(S,{width:"narrow",context:"formatting"});default:return h.dayPeriod(S,{width:"wide",context:"formatting"})}},b:function(d,g,h){var S,b=d.getUTCHours();switch(S=12===b?"noon":0===b?"midnight":b/12>=1?"pm":"am",g){case"b":case"bb":return h.dayPeriod(S,{width:"abbreviated",context:"formatting"});case"bbb":return h.dayPeriod(S,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return h.dayPeriod(S,{width:"narrow",context:"formatting"});default:return h.dayPeriod(S,{width:"wide",context:"formatting"})}},B:function(d,g,h){var S,b=d.getUTCHours();switch(S=b>=17?"evening":b>=12?"afternoon":b>=4?"morning":"night",g){case"B":case"BB":case"BBB":return h.dayPeriod(S,{width:"abbreviated",context:"formatting"});case"BBBBB":return h.dayPeriod(S,{width:"narrow",context:"formatting"});default:return h.dayPeriod(S,{width:"wide",context:"formatting"})}},h:function(d,g,h){if("ho"===g){var b=d.getUTCHours()%12;return 0===b&&(b=12),h.ordinalNumber(b,{unit:"hour"})}return Tn_h(d,g)},H:function(d,g,h){return"Ho"===g?h.ordinalNumber(d.getUTCHours(),{unit:"hour"}):Tn_H(d,g)},K:function(d,g,h){var b=d.getUTCHours()%12;return"Ko"===g?h.ordinalNumber(b,{unit:"hour"}):Lt(b,g.length)},k:function(d,g,h){var b=d.getUTCHours();return 0===b&&(b=24),"ko"===g?h.ordinalNumber(b,{unit:"hour"}):Lt(b,g.length)},m:function(d,g,h){return"mo"===g?h.ordinalNumber(d.getUTCMinutes(),{unit:"minute"}):Tn_m(d,g)},s:function(d,g,h){return"so"===g?h.ordinalNumber(d.getUTCSeconds(),{unit:"second"}):Tn_s(d,g)},S:function(d,g){return Tn_S(d,g)},X:function(d,g,h,b){var R=(b._originalDate||d).getTimezoneOffset();if(0===R)return"Z";switch(g){case"X":return Jn(R);case"XXXX":case"XX":return Qn(R);default:return Qn(R,":")}},x:function(d,g,h,b){var R=(b._originalDate||d).getTimezoneOffset();switch(g){case"x":return Jn(R);case"xxxx":case"xx":return Qn(R);default:return Qn(R,":")}},O:function(d,g,h,b){var R=(b._originalDate||d).getTimezoneOffset();switch(g){case"O":case"OO":case"OOO":return"GMT"+ao(R,":");default:return"GMT"+Qn(R,":")}},z:function(d,g,h,b){var R=(b._originalDate||d).getTimezoneOffset();switch(g){case"z":case"zz":case"zzz":return"GMT"+ao(R,":");default:return"GMT"+Qn(R,":")}},t:function(d,g,h,b){return Lt(Math.floor((b._originalDate||d).getTime()/1e3),g.length)},T:function(d,g,h,b){return Lt((b._originalDate||d).getTime(),g.length)}};var In=function(d,g){switch(d){case"P":return g.date({width:"short"});case"PP":return g.date({width:"medium"});case"PPP":return g.date({width:"long"});default:return g.date({width:"full"})}},el=function(d,g){switch(d){case"p":return g.time({width:"short"});case"pp":return g.time({width:"medium"});case"ppp":return g.time({width:"long"});default:return g.time({width:"full"})}};const tl={p:el,P:function(d,g){var R,h=d.match(/(P+)(p+)?/)||[],b=h[1],S=h[2];if(!S)return In(d,g);switch(b){case"P":R=g.dateTime({width:"short"});break;case"PP":R=g.dateTime({width:"medium"});break;case"PPP":R=g.dateTime({width:"long"});break;default:R=g.dateTime({width:"full"})}return R.replace("{{date}}",In(b,g)).replace("{{time}}",el(S,g))}};var lo=["D","DD"],oo=["YY","YYYY"];function Rr(E,d,g){if("YYYY"===E)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(d,"`) for formatting years to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===E)throw new RangeError("Use `yy` instead of `YY` (in `".concat(d,"`) for formatting years to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===E)throw new RangeError("Use `d` instead of `D` (in `".concat(d,"`) for formatting days of the month to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===E)throw new RangeError("Use `dd` instead of `DD` (in `".concat(d,"`) for formatting days of the month to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var $t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Dr(E){return function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=d.width?String(d.width):E.defaultWidth;return E.formats[g]||E.formats[E.defaultWidth]}}var Ql={date:Dr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Dr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Dr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Xi={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function vs(E){return function(d,g){var b;if("formatting"===(null!=g&&g.context?String(g.context):"standalone")&&E.formattingValues){var S=E.defaultFormattingWidth||E.defaultWidth,R=null!=g&&g.width?String(g.width):S;b=E.formattingValues[R]||E.formattingValues[S]}else{var L=E.defaultWidth,J=null!=g&&g.width?String(g.width):E.defaultWidth;b=E.values[J]||E.values[L]}return b[E.argumentCallback?E.argumentCallback(d):d]}}function Wo(E){return function(d){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=g.width,S=d.match(h&&E.matchPatterns[h]||E.matchPatterns[E.defaultMatchWidth]);if(!S)return null;var te,R=S[0],L=h&&E.parsePatterns[h]||E.parsePatterns[E.defaultParseWidth],J=Array.isArray(L)?function ta(E,d){for(var g=0;g<E.length;g++)if(d(E[g]))return g}(L,function(ke){return ke.test(R)}):function rl(E,d){for(var g in E)if(E.hasOwnProperty(g)&&d(E[g]))return g}(L,function(ke){return ke.test(R)});return te=E.valueCallback?E.valueCallback(J):J,{value:te=g.valueCallback?g.valueCallback(te):te,rest:d.slice(R.length)}}}const Qo={code:"en-US",formatDistance:function(d,g,h){var b,S=$t[d];return b="string"==typeof S?S:1===g?S.one:S.other.replace("{{count}}",g.toString()),null!=h&&h.addSuffix?h.comparison&&h.comparison>0?"in "+b:b+" ago":b},formatLong:Ql,formatRelative:function(d,g,h,b){return Xi[d]},localize:{ordinalNumber:function(d,g){var h=Number(d),b=h%100;if(b>20||b<10)switch(b%10){case 1:return h+"st";case 2:return h+"nd";case 3:return h+"rd"}return h+"th"},era:vs({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:vs({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(d){return d-1}}),month:vs({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:vs({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:vs({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function ec(E){return function(d){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=d.match(E.matchPattern);if(!h)return null;var b=h[0],S=d.match(E.parsePattern);if(!S)return null;var R=E.valueCallback?E.valueCallback(S[0]):S[0];return{value:R=g.valueCallback?g.valueCallback(R):R,rest:d.slice(b.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(d){return parseInt(d,10)}}),era:Wo({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Wo({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(d){return d+1}}),month:Wo({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Wo({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Wo({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var oc=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Do=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ra=/^'([^]*?)'?$/,or=/''/g,ll=/[a-zA-Z]/;function di(E,d,g){var h,b,S,R,L,J,te,ue,ke,We,Re,Xe,Qe,bt,yt,Wt,An,Rn;C(2,arguments);var ur=String(d),Xn=Ko(),zs=null!==(h=null!==(b=null==g?void 0:g.locale)&&void 0!==b?b:Xn.locale)&&void 0!==h?h:Qo,wi=qn(null!==(S=null!==(R=null!==(L=null!==(J=null==g?void 0:g.firstWeekContainsDate)&&void 0!==J?J:null==g||null===(te=g.locale)||void 0===te||null===(ue=te.options)||void 0===ue?void 0:ue.firstWeekContainsDate)&&void 0!==L?L:Xn.firstWeekContainsDate)&&void 0!==R?R:null===(ke=Xn.locale)||void 0===ke||null===(We=ke.options)||void 0===We?void 0:We.firstWeekContainsDate)&&void 0!==S?S:1);if(!(wi>=1&&wi<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var bn=qn(null!==(Re=null!==(Xe=null!==(Qe=null!==(bt=null==g?void 0:g.weekStartsOn)&&void 0!==bt?bt:null==g||null===(yt=g.locale)||void 0===yt||null===(Wt=yt.options)||void 0===Wt?void 0:Wt.weekStartsOn)&&void 0!==Qe?Qe:Xn.weekStartsOn)&&void 0!==Xe?Xe:null===(An=Xn.locale)||void 0===An||null===(Rn=An.options)||void 0===Rn?void 0:Rn.weekStartsOn)&&void 0!==Re?Re:0);if(!(bn>=0&&bn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!zs.localize)throw new RangeError("locale must contain localize property");if(!zs.formatLong)throw new RangeError("locale must contain formatLong property");var Vr=qo(E);if(!function Rs(E){if(C(1,arguments),!function Ho(E){return C(1,arguments),E instanceof Date||"object"===(0,Tr.Z)(E)&&"[object Date]"===Object.prototype.toString.call(E)}(E)&&"number"!=typeof E)return!1;var d=qo(E);return!isNaN(Number(d))}(Vr))throw new RangeError("Invalid time value");var mn=function ii(E){var d=new Date(Date.UTC(E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes(),E.getSeconds(),E.getMilliseconds()));return d.setUTCFullYear(E.getFullYear()),E.getTime()-d.getTime()}(Vr),Hs=function kt(E,d){return C(2,arguments),function si(E,d){C(2,arguments);var g=qo(E).getTime(),h=qn(d);return new Date(g+h)}(E,-qn(d))}(Vr,mn),bl={firstWeekContainsDate:wi,weekStartsOn:bn,locale:zs,_originalDate:Vr},we=ur.match(Do).map(function(eo){var Vn=eo[0];return"p"===Vn||"P"===Vn?(0,tl[Vn])(eo,zs.formatLong):eo}).join("").match(oc).map(function(eo){if("''"===eo)return"'";var Vn=eo[0];if("'"===Vn)return function Cs(E){var d=E.match(ra);return d?d[1].replace(or,"'"):E}(eo);var Zr=Xa[Vn];if(Zr)return!(null!=g&&g.useAdditionalWeekYearTokens)&&function Ji(E){return-1!==oo.indexOf(E)}(eo)&&Rr(eo,d,String(E)),!(null!=g&&g.useAdditionalDayOfYearTokens)&&function Ds(E){return-1!==lo.indexOf(E)}(eo)&&Rr(eo,d,String(E)),Zr(Hs,eo,zs.localize,bl);if(Vn.match(ll))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Vn+"`");return eo}).join("");return we}var p=en(2029),Po=en(4414),ia=en(9862);function sr(E,d){if(1&E&&(p.TgZ(0,"ion-select-option",23),p._uU(1),p.qZA()),2&E){const g=d.$implicit;p.Q6J("value",g.idMateria),p.xp6(1),p.hij(" ",g.nombreMateria," ")}}function aa(E,d){if(1&E&&(p.TgZ(0,"option",23),p._uU(1),p.qZA()),2&E){const g=d.$implicit;p.Udp("background-color",g.colorEtiqueta),p.Q6J("value",g.idEtiqueta),p.xp6(1),p.hij(" ",g.colorEtiqueta," ")}}let fi=(()=>{var E;class d{constructor(h,b,S,R){this.modalController=h,this.alertController=b,this.http=S,this.loadingController=R,this.colores=[],this.materias=[],this.note=[],this.userInfo=JSON.parse(localStorage.userInfo),this.respose=[]}guardarEdicion(){var h=this;return(0,it.Z)(function*(){const b_titulo=$("#title").val(),b_color=$("#color").val(),b_nota=$("#text").val(),b_materia=$("#mat").val(),b_fecha=$("#date").val(),b_idn=h.nota;var S="1970-01-01 00:00:00";""!=$("#date").val()&&(S=di(dt(b_fecha+""),"yyyy-MM-dd HH:mm:ss"));const R=yield h.loadingController.create({message:"Actualizando...",spinner:"crescent"});yield R.present();const L=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?user=${h.userInfo.idUsuario}&nota=${b_nota}&color=${b_color}&fecha=${S}&action=saveNote&mat=${b_materia}&titulo=${b_titulo}&idn=${b_idn}`;console.log(L);try{const J=yield h.http.get(L).toPromise();console.log(L),1===J?yield h.modalController.dismiss(J):yield(yield h.alertController.create({header:"Error",message:"Error al actualizar.",buttons:["Aceptar"]})).present()}catch(J){console.error(J),yield(yield h.alertController.create({header:"Error",message:"Error al actualizar.",buttons:["Aceptar"]})).present()}finally{yield R.dismiss()}})()}customCounterFormatter(h,b){return b-h+" Caracteres restantes: "}confirm(){this.guardarEdicion()}cancel(){}ngOnInit(){$("#title").val(this.note[0].titulo),$("#color").val(this.note[0].idEtiqueta),$("#text").val(this.note[0].texto),$("#mat").val(this.note[0].idMateria)}cerrarModal(){var h=this;return(0,it.Z)(function*(){yield h.modalController.dismiss()})()}}return(E=d).\u0275fac=function(h){return new(h||E)(p.Y36(Po.IN),p.Y36(Po.Br),p.Y36(ia.eN),p.Y36(Po.HT))},E.\u0275cmp=p.Xpm({type:E,selectors:[["app-modal-editar-nota-component"]],inputs:{nota:"nota",colores:"colores",materias:"materias",note:"note"},decls:40,vars:6,consts:[["slot","start"],[3,"click"],[1,"text-center"],["slot","end"],[3,"strong","click"],[1,"ion-padding"],[1,"row","justify-content-center"],[1,""],[1,"login-form"],[1,"row"],[1,"col-lg-6","col-md-12","col-sm-12"],["label","Titulo:","label-placement","floating","fill","solid","placeholder","Escribe el titulo","id","title"],["interface","action-sheet","id","mat"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["label","Nota: ","id","text","labelPlacement","floating","placeholder","Escribe tu nota aqui","fill","solid","maxlength","300",3,"autoGrow","counter","counterFormatter"],[1,"row","mt-4"],["for",""],["id","color",1,"form-select"],["disabled","","selected","","value","-1"],[3,"value","background-color",4,"ngFor","ngForOf"],["id","date"],["slot","title"],[3,"value"]],template:function(h,b){1&h&&(p.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),p.NdJ("click",function(){return b.cancel()}),p._uU(4,"Cancelar"),p.qZA()(),p.TgZ(5,"ion-title",2),p._uU(6,"Editar nota"),p.qZA(),p.TgZ(7,"ion-buttons",3)(8,"ion-button",4),p.NdJ("click",function(){return b.confirm()}),p._uU(9,"Guardar"),p.qZA()()()(),p.TgZ(10,"ion-content",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"form")(15,"div",9)(16,"div",10),p._UZ(17,"ion-input",11),p.qZA(),p.TgZ(18,"div",10)(19,"ion-item")(20,"ion-label"),p._uU(21,"Materia:"),p.qZA(),p.TgZ(22,"ion-select",12),p.YNc(23,sr,2,2,"ion-select-option",13),p.qZA()()()(),p.TgZ(24,"div",9)(25,"div",14),p._UZ(26,"ion-textarea",15),p.qZA()(),p.TgZ(27,"div",16)(28,"div",10)(29,"ion-item")(30,"label",17),p._uU(31,"Color:"),p.qZA(),p.TgZ(32,"select",18)(33,"option",19),p._uU(34,"Color: "),p.qZA(),p.YNc(35,aa,2,4,"option",20),p.qZA()()(),p.TgZ(36,"div",10)(37,"ion-datetime",21)(38,"span",22),p._uU(39,"Selecciona una fecha (opcional)"),p.qZA()()()()()()()()()),2&h&&(p.xp6(8),p.Q6J("strong",!0),p.xp6(15),p.Q6J("ngForOf",b.materias),p.xp6(3),p.Q6J("autoGrow",!0)("counter",!0)("counterFormatter",b.customCounterFormatter),p.xp6(9),p.Q6J("ngForOf",b.colores))},dependencies:[vo.sg,$e.YG,$e.Sm,$e.W2,$e.x4,$e.Gu,$e.pK,$e.Ie,$e.Q$,$e.t9,$e.n0,$e.g2,$e.wd,$e.sr,$e.QI,$e.j9],styles:["#color[_ngcontent-%COMP%]{border:none;border-radius:5px 5px 0 0;color:#fff;height:50px;background-color:#1f1f1f}"]}),d})();var rr=en(3922),la=en(5617),ca=en.n(la),mi=en(2276),pi=en(6986),gi=en(7882),H=en(2711),Y=en(4354);function Ir(E,d){let g=[];for(let h=0;h<d;h+=1)g[h]=[];for(let h of E)g[h.row].push(h);return g}function ua(E,d){let g=[];for(let h=0;h<d;h+=1)g[h]=[];for(let h of E)g[h.firstCol].push(h);return g}function ul(E,d){let g=[];if(E){for(let h=0;h<d;h+=1)g[h]={affectedInstances:E.affectedInstances,isEvent:E.isEvent,segs:[]};for(let h of E.segs)g[h.row].segs.push(h)}else for(let h=0;h<d;h+=1)g[h]=null;return g}(0,H.cw)(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');const dl=(0,H.x)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function fl(E){let{display:d}=E.eventRange.ui;return"list-item"===d||"auto"===d&&!E.eventRange.def.allDay&&E.firstCol===E.lastCol&&E.isStart&&E.isEnd}class Co extends H.B{render(){let{props:d}=this;return(0,Y.az)(H.cj,Object.assign({},d,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:dl,defaultDisplayEventEnd:d.defaultDisplayEventEnd,disableResizing:!d.seg.eventRange.def.allDay}))}}class hi extends H.B{render(){let{props:d,context:g}=this,{options:h}=g,{seg:b}=d,R=(0,H.bQ)(b,h.eventTimeFormat||dl,g,!0,d.defaultDisplayEventEnd);return(0,Y.az)(H.cn,Object.assign({},d,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:(0,H.bU)(d.seg,g),defaultGenerator:bi,timeText:R,isResizing:!1,isDateSelecting:!1}))}}function bi(E){return(0,Y.az)(Y.HY,null,(0,Y.az)("div",{className:"fc-daygrid-event-dot",style:{borderColor:E.borderColor||E.backgroundColor}}),E.timeText&&(0,Y.az)("div",{className:"fc-event-time"},E.timeText),(0,Y.az)("div",{className:"fc-event-title"},E.event.title||(0,Y.az)(Y.HY,null,"\xa0")))}class xo extends H.B{constructor(){super(...arguments),this.compileSegs=(0,H.z)(Oo)}render(){let{props:d}=this,{allSegs:g,invisibleSegs:h}=this.compileSegs(d.singlePlacements);return(0,Y.az)(H.cr,{elClasses:["fc-daygrid-more-link"],dateProfile:d.dateProfile,todayRange:d.todayRange,allDayDate:d.allDayDate,moreCnt:d.moreCnt,allSegs:g,hiddenSegs:h,alignmentElRef:d.alignmentElRef,alignGridTop:d.alignGridTop,extraDateSpan:d.extraDateSpan,popoverContent:()=>{let b=(d.eventDrag?d.eventDrag.affectedInstances:null)||(d.eventResize?d.eventResize.affectedInstances:null)||{};return(0,Y.az)(Y.HY,null,g.map(S=>{let R=S.eventRange.instance.instanceId;return(0,Y.az)("div",{className:"fc-daygrid-event-harness",key:R,style:{visibility:b[R]?"hidden":""}},fl(S)?(0,Y.az)(hi,Object.assign({seg:S,isDragging:!1,isSelected:R===d.eventSelection,defaultDisplayEventEnd:!1},(0,H.bS)(S,d.todayRange))):(0,Y.az)(Co,Object.assign({seg:S,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:R===d.eventSelection,defaultDisplayEventEnd:!1},(0,H.bS)(S,d.todayRange))))}))}})}}function Oo(E){let d=[],g=[];for(let h of E)d.push(h.seg),h.isVisible||g.push(h.seg);return{allSegs:d,invisibleSegs:g}}const xs=(0,H.x)({week:"narrow"});class da extends H.be{constructor(){super(...arguments),this.rootElRef=(0,Y.Vf)(),this.state={dayNumberId:(0,H.a5)()},this.handleRootEl=d=>{(0,H.Y)(this.rootElRef,d),(0,H.Y)(this.props.elRef,d)}}render(){let{context:d,props:g,state:h,rootElRef:b}=this,{options:S,dateEnv:R}=d,{date:L,dateProfile:J}=g;const te=g.showDayNumber&&function sc(E,d,g){const{start:h,end:b}=d,S=(0,H.bg)(b,-1),R=g.getYear(h),L=g.getMonth(h),J=g.getYear(S),te=g.getMonth(S);return!(R===J&&L===te)&&(E.valueOf()===h.valueOf()||1===g.getDay(E)&&E.valueOf()<b.valueOf())}(L,J.currentRange,R);return(0,Y.az)(H.cl,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...g.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},g.extraDataAttrs),g.showDayNumber?{"aria-labelledby":h.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:gt,date:L,dateProfile:J,todayRange:g.todayRange,showDayNumber:g.showDayNumber,isMonthStart:te,extraRenderProps:g.extraRenderProps},(ue,ke)=>(0,Y.az)("div",{ref:g.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:g.minHeight}},g.showWeekNumber&&(0,Y.az)(H.cq,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:(0,H.b0)(d,L,"week"),date:L,defaultFormat:xs}),!ke.isDisabled&&(g.showDayNumber||(0,H.cm)(S)||g.forceDayTop)?(0,Y.az)("div",{className:"fc-daygrid-day-top"},(0,Y.az)(ue,{elTag:"a",elClasses:["fc-daygrid-day-number",te&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},(0,H.b0)(d,L)),{id:h.dayNumberId})})):g.showDayNumber?(0,Y.az)("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},(0,Y.az)("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,(0,Y.az)("div",{className:"fc-daygrid-day-events",ref:g.fgContentElRef},g.fgContent,(0,Y.az)("div",{className:"fc-daygrid-day-bottom",style:{marginTop:g.moreMarginTop}},(0,Y.az)(xo,{allDayDate:L,singlePlacements:g.singlePlacements,moreCnt:g.moreCnt,alignmentElRef:b,alignGridTop:!g.showDayNumber,extraDateSpan:g.extraDateSpan,dateProfile:g.dateProfile,eventSelection:g.eventSelection,eventDrag:g.eventDrag,eventResize:g.eventResize,todayRange:g.todayRange}))),(0,Y.az)("div",{className:"fc-daygrid-day-bg"},g.bgContent)))}}function gt(E){return E.dayNumberText||(0,Y.az)(Y.HY,null,"\xa0")}function fa(E){return E.eventRange.instance.instanceId+":"+E.firstCol}function ir(E){return fa(E)+":"+E.lastCol}function Is(E,d,g,h){if(E.firstCol===d&&E.lastCol===g-1)return E;let b=E.eventRange,S=b.range,R=(0,H.o)(S,{start:h[d].date,end:(0,H.t)(h[g-1].date,1)});return Object.assign(Object.assign({},E),{firstCol:d,lastCol:g-1,eventRange:{def:b.def,ui:Object.assign(Object.assign({},b.ui),{durationEditable:!1}),instance:b.instance,range:R},isStart:E.isStart&&R.start.valueOf()===S.start.valueOf(),isEnd:E.isEnd&&R.end.valueOf()===S.end.valueOf()})}class Su extends H.bA{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(d){const g=super.addSegs(d),{entriesByLevel:h}=this,b=S=>!this.forceHidden[(0,H.bB)(S)];for(let S=0;S<h.length;S+=1)h[S]=h[S].filter(b);return g}handleInvalidInsertion(d,g,h){const{entriesByLevel:b,forceHidden:S}=this,{touchingEntry:R,touchingLevel:L,touchingLateral:J}=d;if(this.hiddenConsumes&&R){const te=(0,H.bB)(R);if(!S[te])if(this.allowReslicing){const ue=Object.assign(Object.assign({},R),{span:(0,H.bF)(R.span,g.span)});S[(0,H.bB)(ue)]=!0,b[L][J]=ue,this.splitEntry(R,g,h)}else S[te]=!0,h.push(R)}return super.handleInvalidInsertion(d,g,h)}}class l extends H.be{constructor(){super(...arguments),this.cellElRefs=new H.cf,this.frameElRefs=new H.cf,this.fgElRefs=new H.cf,this.segHarnessRefs=new H.cf,this.rootElRef=(0,Y.Vf)(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=d=>{d&&this.updateSizing(!0)}}render(){let{props:d,state:g,context:h}=this,{options:b}=h,S=d.cells.length,R=ua(d.businessHourSegs,S),L=ua(d.bgEventSegs,S),J=ua(this.getHighlightSegs(),S),te=ua(this.getMirrorSegs(),S),{singleColPlacements:ue,multiColPlacements:ke,moreCnts:We,moreMarginTops:Re}=function ml(E,d,g,h,b,S,R){let L=new Su(yt=>b[E[yt.index].eventRange.instance.instanceId+":"+yt.span.start+":"+(yt.span.end-1)]);L.allowReslicing=!0,L.strictOrder=h,!0===d||!0===g?(L.maxCoord=S,L.hiddenConsumes=!0):"number"==typeof d?L.maxStackCnt=d:"number"==typeof g&&(L.maxStackCnt=g,L.hiddenConsumes=!0);let J=[],te=[];for(let yt=0;yt<E.length;yt+=1){let Wt=E[yt],An=ir(Wt);null!=b[An]?J.push({index:yt,span:{start:Wt.firstCol,end:Wt.lastCol+1}}):te.push(Wt)}let ue=L.addSegs(J),ke=L.toRects(),{singleColPlacements:We,multiColPlacements:Re,leftoverMargins:Xe}=function ma(E,d,g){let h=function rc(E,d){let g=[];for(let h=0;h<d;h+=1)g.push([]);for(let h of E)for(let b=h.span.start;b<h.span.end;b+=1)g[b].push(h);return g}(E,g.length),b=[],S=[],R=[];for(let L=0;L<g.length;L+=1){let J=h[L],te=[],ue=0,ke=0;for(let Re of J)te.push({seg:Is(d[Re.index],L,L+1,g),isVisible:!0,isAbsolute:!1,absoluteTop:Re.levelCoord,marginTop:Re.levelCoord-ue}),ue=Re.levelCoord+Re.thickness;let We=[];ue=0,ke=0;for(let Re of J){let Xe=d[Re.index],bt=Re.span.start===L;ke+=Re.levelCoord-ue,ue=Re.levelCoord+Re.thickness,Re.span.end-Re.span.start>1?(ke+=Re.thickness,bt&&We.push({seg:Is(Xe,Re.span.start,Re.span.end,g),isVisible:!0,isAbsolute:!0,absoluteTop:Re.levelCoord,marginTop:0})):bt&&(We.push({seg:Is(Xe,Re.span.start,Re.span.end,g),isVisible:!0,isAbsolute:!1,absoluteTop:Re.levelCoord,marginTop:ke}),ke=0)}b.push(te),S.push(We),R.push(ke)}return{singleColPlacements:b,multiColPlacements:S,leftoverMargins:R}}(ke,E,R),Qe=[],bt=[];for(let yt of te){Re[yt.firstCol].push({seg:yt,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Wt=yt.firstCol;Wt<=yt.lastCol;Wt+=1)We[Wt].push({seg:Is(yt,Wt,Wt+1,R),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let yt=0;yt<R.length;yt+=1)Qe.push(0);for(let yt of ue){let Wt=E[yt.index],An=yt.span;Re[An.start].push({seg:Is(Wt,An.start,An.end,R),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Rn=An.start;Rn<An.end;Rn+=1)Qe[Rn]+=1,We[Rn].push({seg:Is(Wt,Rn,Rn+1,R),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let yt=0;yt<R.length;yt+=1)bt.push(Xe[yt]);return{singleColPlacements:We,multiColPlacements:Re,moreCnts:Qe,moreMarginTops:bt}}((0,H.bR)(d.fgEventSegs,b.eventOrder),d.dayMaxEvents,d.dayMaxEventRows,b.eventOrderStrict,g.segHeights,g.maxContentHeight,d.cells),Xe=d.eventDrag&&d.eventDrag.affectedInstances||d.eventResize&&d.eventResize.affectedInstances||{};return(0,Y.az)("tr",{ref:this.rootElRef,role:"row"},d.renderIntro&&d.renderIntro(),d.cells.map((Qe,bt)=>{let yt=this.renderFgSegs(bt,d.forPrint?ue[bt]:ke[bt],d.todayRange,Xe),Wt=this.renderFgSegs(bt,function u(E,d){if(!E.length)return[];let g=function f(E){let d={};for(let g of E)for(let h of g)d[h.seg.eventRange.instance.instanceId]=h.absoluteTop;return d}(d);return E.map(h=>({seg:h,isVisible:!0,isAbsolute:!0,absoluteTop:g[h.eventRange.instance.instanceId],marginTop:0}))}(te[bt],ke),d.todayRange,{},!!d.eventDrag,!!d.eventResize,!1);return(0,Y.az)(da,{key:Qe.key,elRef:this.cellElRefs.createRef(Qe.key),innerElRef:this.frameElRefs.createRef(Qe.key),dateProfile:d.dateProfile,date:Qe.date,showDayNumber:d.showDayNumbers,showWeekNumber:d.showWeekNumbers&&0===bt,forceDayTop:d.showWeekNumbers,todayRange:d.todayRange,eventSelection:d.eventSelection,eventDrag:d.eventDrag,eventResize:d.eventResize,extraRenderProps:Qe.extraRenderProps,extraDataAttrs:Qe.extraDataAttrs,extraClassNames:Qe.extraClassNames,extraDateSpan:Qe.extraDateSpan,moreCnt:We[bt],moreMarginTop:Re[bt],singlePlacements:ue[bt],fgContentElRef:this.fgElRefs.createRef(Qe.key),fgContent:(0,Y.az)(Y.HY,null,(0,Y.az)(Y.HY,null,yt),(0,Y.az)(Y.HY,null,Wt)),bgContent:(0,Y.az)(Y.HY,null,this.renderFillSegs(J[bt],"highlight"),this.renderFillSegs(R[bt],"non-business"),this.renderFillSegs(L[bt],"bg-event")),minHeight:d.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(d,g){this.updateSizing(!(0,H.E)(d,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:d}=this;return d.eventDrag&&d.eventDrag.segs.length?d.eventDrag.segs:d.eventResize&&d.eventResize.segs.length?d.eventResize.segs:d.dateSelectionSegs}getMirrorSegs(){let{props:d}=this;return d.eventResize&&d.eventResize.segs.length?d.eventResize.segs:[]}renderFgSegs(d,g,h,b,S,R,L){let{context:J}=this,{eventSelection:te}=this.props,{framePositions:ue}=this.state,ke=1===this.props.cells.length,We=S||R||L,Re=[];if(ue)for(let Xe of g){let{seg:Qe}=Xe,{instanceId:bt}=Qe.eventRange.instance,yt=Xe.isVisible&&!b[bt],Wt=Xe.isAbsolute,An="",Rn="";Wt&&(J.isRtl?(Rn=0,An=ue.lefts[Qe.lastCol]-ue.lefts[Qe.firstCol]):(An=0,Rn=ue.rights[Qe.firstCol]-ue.rights[Qe.lastCol])),Re.push((0,Y.az)("div",{className:"fc-daygrid-event-harness"+(Wt?" fc-daygrid-event-harness-abs":""),key:fa(Qe),ref:We?null:this.segHarnessRefs.createRef(ir(Qe)),style:{visibility:yt?"":"hidden",marginTop:Wt?"":Xe.marginTop,top:Wt?Xe.absoluteTop:"",left:An,right:Rn}},fl(Qe)?(0,Y.az)(hi,Object.assign({seg:Qe,isDragging:S,isSelected:bt===te,defaultDisplayEventEnd:ke},(0,H.bS)(Qe,h))):(0,Y.az)(Co,Object.assign({seg:Qe,isDragging:S,isResizing:R,isDateSelecting:L,isSelected:bt===te,defaultDisplayEventEnd:ke},(0,H.bS)(Qe,h)))))}return Re}renderFillSegs(d,g){let{isRtl:h}=this.context,{todayRange:b}=this.props,{framePositions:S}=this.state,R=[];if(S)for(let L of d){let J=h?{right:0,left:S.lefts[L.lastCol]-S.lefts[L.firstCol]}:{left:0,right:S.rights[L.firstCol]-S.rights[L.lastCol]};R.push((0,Y.az)("div",{key:(0,H.bT)(L.eventRange),className:"fc-daygrid-bg-harness",style:J},"bg-event"===g?(0,Y.az)(H.cp,Object.assign({seg:L},(0,H.bS)(L,b))):(0,H.co)(g)))}return(0,Y.az)(Y.HY,{},...R)}updateSizing(d){let{props:g,state:h,frameElRefs:b}=this;if(!g.forPrint&&null!==g.clientWidth){if(d){let J=g.cells.map(te=>b.currentMap[te.key]);if(J.length){let te=this.rootElRef.current,ue=new H.ba(te,J,!0,!1);(!h.framePositions||!h.framePositions.similarTo(ue))&&this.setState({framePositions:new H.ba(te,J,!0,!1)})}}const S=this.state.segHeights,R=this.querySegHeights(),L=!0===g.dayMaxEvents||!0===g.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},S),R),maxContentHeight:L?this.computeMaxContentHeight():null})}}querySegHeights(){let d=this.segHarnessRefs.currentMap,g={};for(let h in d){let b=Math.round(d[h].getBoundingClientRect().height);g[h]=Math.max(g[h]||0,b)}return g}computeMaxContentHeight(){let d=this.props.cells[0].key,h=this.fgElRefs.currentMap[d];return this.cellElRefs.currentMap[d].getBoundingClientRect().bottom-h.getBoundingClientRect().top}getCellEls(){let d=this.cellElRefs.currentMap;return this.props.cells.map(g=>d[g.key])}}l.addStateEquality({segHeights:H.E});class y extends H.be{constructor(){super(...arguments),this.splitBusinessHourSegs=(0,H.z)(Ir),this.splitBgEventSegs=(0,H.z)(Ir),this.splitFgEventSegs=(0,H.z)(Ir),this.splitDateSelectionSegs=(0,H.z)(Ir),this.splitEventDrag=(0,H.z)(ul),this.splitEventResize=(0,H.z)(ul),this.rowRefs=new H.cf}render(){let{props:d,context:g}=this,h=d.cells.length,b=this.splitBusinessHourSegs(d.businessHourSegs,h),S=this.splitBgEventSegs(d.bgEventSegs,h),R=this.splitFgEventSegs(d.fgEventSegs,h),L=this.splitDateSelectionSegs(d.dateSelectionSegs,h),J=this.splitEventDrag(d.eventDrag,h),te=this.splitEventResize(d.eventResize,h),ue=h>=7&&d.clientWidth?d.clientWidth/g.options.aspectRatio/6:null;return(0,Y.az)(H.ch,{unit:"day"},(ke,We)=>(0,Y.az)(Y.HY,null,d.cells.map((Re,Xe)=>(0,Y.az)(l,{ref:this.rowRefs.createRef(Xe),key:Re.length?Re[0].date.toISOString():Xe,showDayNumbers:h>1,showWeekNumbers:d.showWeekNumbers,todayRange:We,dateProfile:d.dateProfile,cells:Re,renderIntro:d.renderRowIntro,businessHourSegs:b[Xe],eventSelection:d.eventSelection,bgEventSegs:S[Xe].filter(_),fgEventSegs:R[Xe],dateSelectionSegs:L[Xe],eventDrag:J[Xe],eventResize:te[Xe],dayMaxEvents:d.dayMaxEvents,dayMaxEventRows:d.dayMaxEventRows,clientWidth:d.clientWidth,clientHeight:d.clientHeight,cellMinHeight:ue,forPrint:d.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const d=this.rowRefs.currentMap[0].getCellEls()[0],g=d?d.closest(".fc-daygrid-body"):null;g&&(this.rootEl=g,this.context.registerInteractiveComponent(this,{el:g,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new H.ba(this.rootEl,this.rowRefs.collect().map(d=>d.getCellEls()[0]),!1,!0),this.colPositions=new H.ba(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(d,g){let{colPositions:h,rowPositions:b}=this,S=h.leftToIndex(d),R=b.topToIndex(g);if(null!=R&&null!=S){let L=this.props.cells[R][S];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(R,S),allDay:!0},L.extraDateSpan),dayEl:this.getCellEl(R,S),rect:{left:h.lefts[S],right:h.rights[S],top:b.tops[R],bottom:b.bottoms[R]},layer:0}}return null}getCellEl(d,g){return this.rowRefs.currentMap[d].getCellEls()[g]}getCellRange(d,g){let h=this.props.cells[d][g].date;return{start:h,end:(0,H.t)(h,1)}}}function _(E){return E.eventRange.def.allDay}class k extends H.be{constructor(){super(...arguments),this.elRef=(0,Y.Vf)(),this.needsScrollReset=!1}render(){let{props:d}=this,{dayMaxEventRows:g,dayMaxEvents:h,expandRows:b}=d,S=!0===h||!0===g;return S&&!b&&(S=!1,g=null,h=null),(0,Y.az)("div",{ref:this.elRef,className:["fc-daygrid-body",S?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",b?"":"fc-daygrid-body-natural"].join(" "),style:{width:d.clientWidth,minWidth:d.tableMinWidth}},(0,Y.az)("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:d.clientWidth,minWidth:d.tableMinWidth,height:b?d.clientHeight:""}},d.colGroupNode,(0,Y.az)("tbody",{role:"presentation"},(0,Y.az)(y,{dateProfile:d.dateProfile,cells:d.cells,renderRowIntro:d.renderRowIntro,showWeekNumbers:d.showWeekNumbers,clientWidth:d.clientWidth,clientHeight:d.clientHeight,businessHourSegs:d.businessHourSegs,bgEventSegs:d.bgEventSegs,fgEventSegs:d.fgEventSegs,dateSelectionSegs:d.dateSelectionSegs,eventSelection:d.eventSelection,eventDrag:d.eventDrag,eventResize:d.eventResize,dayMaxEvents:h,dayMaxEventRows:g,forPrint:d.forPrint,isHitComboAllowed:d.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(d){d.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const d=function N(E,d){let g;return d.currentRangeUnit.match(/year|month/)&&(g=E.querySelector(`[data-date="${(0,H.bx)(d.currentDate)}-01"]`)),g||(g=E.querySelector(`[data-date="${(0,H.bv)(d.currentDate)}"]`)),g}(this.elRef.current,this.props.dateProfile);if(d){const g=d.closest(".fc-daygrid-body"),h=g.closest(".fc-scroller"),b=d.getBoundingClientRect().top-g.getBoundingClientRect().top;h.scrollTop=b?b+1:0}this.needsScrollReset=!1}}}class U extends H.bW{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(d,g){return g.sliceRange(d)}}class B extends H.be{constructor(){super(...arguments),this.slicer=new U,this.tableRef=(0,Y.Vf)()}render(){let{props:d,context:g}=this;return(0,Y.az)(k,Object.assign({ref:this.tableRef},this.slicer.sliceProps(d,d.dateProfile,d.nextDayThreshold,g,d.dayTableModel),{dateProfile:d.dateProfile,cells:d.dayTableModel.cells,colGroupNode:d.colGroupNode,tableMinWidth:d.tableMinWidth,renderRowIntro:d.renderRowIntro,dayMaxEvents:d.dayMaxEvents,dayMaxEventRows:d.dayMaxEventRows,showWeekNumbers:d.showWeekNumbers,expandRows:d.expandRows,headerAlignElRef:d.headerAlignElRef,clientWidth:d.clientWidth,clientHeight:d.clientHeight,forPrint:d.forPrint}))}}class pe extends H.be{constructor(){super(...arguments),this.headerElRef=(0,Y.Vf)()}renderSimpleLayout(d,g){let{props:h,context:b}=this,S=[],R=(0,H.cc)(b.options);return d&&S.push({type:"header",key:"header",isSticky:R,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:d}}),S.push({type:"body",key:"body",liquid:!0,chunk:{content:g}}),(0,Y.az)(H.ct,{elClasses:["fc-daygrid"],viewSpec:b.viewSpec},(0,Y.az)(H.b$,{liquid:!h.isHeightAuto&&!h.forPrint,collapsibleWidth:h.forPrint,cols:[],sections:S}))}renderHScrollLayout(d,g,h,b){let S=this.context.pluginHooks.scrollGridImpl;if(!S)throw new Error("No ScrollGrid implementation");let{props:R,context:L}=this,J=!R.forPrint&&(0,H.cc)(L.options),te=!R.forPrint&&(0,H.cb)(L.options),ue=[];return d&&ue.push({type:"header",key:"header",isSticky:J,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:d}]}),ue.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:g}]}),te&&ue.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:H.ca}]}),(0,Y.az)(H.ct,{elClasses:["fc-daygrid"],viewSpec:L.viewSpec},(0,Y.az)(S,{liquid:!R.isHeightAuto&&!R.forPrint,forPrint:R.forPrint,collapsibleWidth:R.forPrint,colGroups:[{cols:[{span:h,minWidth:b}]}],sections:ue}))}}function xe(E,d){let g=new H.bO(E.renderRange,d);return new H.bV(g,/year|month|week/.test(E.currentRangeUnit))}var lt=(0,gi.rx)({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class se extends pe{constructor(){super(...arguments),this.buildDayTableModel=(0,H.z)(xe),this.headerRef=(0,Y.Vf)(),this.tableRef=(0,Y.Vf)()}render(){let{options:d,dateProfileGenerator:g}=this.context,{props:h}=this,b=this.buildDayTableModel(h.dateProfile,g),S=d.dayHeaders&&(0,Y.az)(H.bK,{ref:this.headerRef,dateProfile:h.dateProfile,dates:b.headerDates,datesRepDistinctDays:1===b.rowCnt}),R=L=>(0,Y.az)(B,{ref:this.tableRef,dateProfile:h.dateProfile,dayTableModel:b,businessHours:h.businessHours,dateSelection:h.dateSelection,eventStore:h.eventStore,eventUiBases:h.eventUiBases,eventSelection:h.eventSelection,eventDrag:h.eventDrag,eventResize:h.eventResize,nextDayThreshold:d.nextDayThreshold,colGroupNode:L.tableColGroupNode,tableMinWidth:L.tableMinWidth,dayMaxEvents:d.dayMaxEvents,dayMaxEventRows:d.dayMaxEventRows,showWeekNumbers:d.weekNumbers,expandRows:!h.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:L.clientWidth,clientHeight:L.clientHeight,forPrint:h.forPrint});return d.dayMinWidth?this.renderHScrollLayout(S,R,b.colCnt,d.dayMinWidth):this.renderSimpleLayout(S,R)}},dateProfileGeneratorClass:class G extends H.U{buildRenderRange(d,g,h){let b=super.buildRenderRange(d,g,h),{props:S}=this;return function le(E){let S,{dateEnv:d,currentRange:g}=E,{start:h,end:b}=g;if(E.snapToWeek&&(h=d.startOfWeek(h),S=d.startOfWeek(b),S.valueOf()!==b.valueOf()&&(b=(0,H.bh)(S,1))),E.fixedWeekCount){let R=d.startOfWeek(d.startOfMonth((0,H.t)(g.end,-1))),L=Math.ceil((0,H.bi)(R,b));b=(0,H.bh)(b,6-L)}return{start:h,end:b}}({currentRange:b,snapToWeek:/^(year|month)$/.test(g),fixedWeekCount:S.fixedWeekCount,dateEnv:S.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}}),Ot={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",year:"A\xf1o",month:"Mes",week:"Semana",day:"D\xeda",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today:E=>"D\xeda"===E?"Hoy":("Semana"===E?"Esta":"Este")+" "+E.toLocaleLowerCase()},viewHint:E=>"Vista "+("Semana"===E?"de la":"del")+" "+E.toLocaleLowerCase(),weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el d\xeda",moreLinkText:"m\xe1s",moreLinkHint:E=>`Mostrar ${E} eventos m\xe1s`,noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"};class xt extends H.B{constructor(){super(...arguments),this.state={textId:(0,H.a5)()}}render(){let{theme:d,dateEnv:g,options:h,viewApi:b}=this.context,{cellId:S,dayDate:R,todayRange:L}=this.props,{textId:J}=this.state,te=(0,H.a_)(R,L),ue=h.listDayFormat?g.format(R,h.listDayFormat):"",ke=h.listDaySideFormat?g.format(R,h.listDaySideFormat):"",We=Object.assign({date:g.toDate(R),view:b,textId:J,text:ue,sideText:ke,navLinkAttrs:(0,H.b0)(this.context,R),sideNavLinkAttrs:(0,H.b0)(this.context,R,"day",!1)},te);return(0,Y.az)(H.C,{elTag:"tr",elClasses:["fc-list-day",...(0,H.aZ)(te,d)],elAttrs:{"data-date":(0,H.bv)(R)},renderProps:We,generatorName:"dayHeaderContent",customGenerator:h.dayHeaderContent,defaultGenerator:kn,classNameGenerator:h.dayHeaderClassNames,didMount:h.dayHeaderDidMount,willUnmount:h.dayHeaderWillUnmount},Re=>(0,Y.az)("th",{scope:"colgroup",colSpan:3,id:S,"aria-labelledby":J},(0,Y.az)(Re,{elTag:"div",elClasses:["fc-list-day-cushion",d.getClass("tableCellShaded")]})))}}function kn(E){return(0,Y.az)(Y.HY,null,E.text&&(0,Y.az)("a",Object.assign({id:E.textId,className:"fc-list-day-text"},E.navLinkAttrs),E.text),E.sideText&&(0,Y.az)("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},E.sideNavLinkAttrs),E.sideText))}const Cn=(0,H.x)({hour:"numeric",minute:"2-digit",meridiem:"short"});class Mo extends H.B{render(){let{props:d,context:g}=this,{options:h}=g,{seg:b,timeHeaderId:S,eventHeaderId:R,dateHeaderId:L}=d,J=h.eventTimeFormat||Cn;return(0,Y.az)(H.cn,Object.assign({},d,{elTag:"tr",elClasses:["fc-list-event",b.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>function so(E,d){let g=(0,H.bU)(E,d);return(0,Y.az)("a",Object.assign({},g),E.eventRange.def.title)}(b,g),seg:b,timeText:"",disableDragging:!0,disableResizing:!0}),(te,ue)=>(0,Y.az)(Y.HY,null,function At(E,d,g,h,b){let{options:S}=g;if(!1!==S.displayEventTime){let te,L=E.eventRange.instance,J=!1;return E.eventRange.def.allDay?J=!0:(0,H.az)(E.eventRange.range)?E.isStart?te=(0,H.bQ)(E,d,g,null,null,L.range.start,E.end):E.isEnd?te=(0,H.bQ)(E,d,g,null,null,E.start,L.range.end):J=!0:te=(0,H.bQ)(E,d,g),J?(0,Y.az)(H.C,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${h} ${b}`},renderProps:{text:g.options.allDayText,view:g.viewApi},generatorName:"allDayContent",customGenerator:S.allDayContent,defaultGenerator:Rt,classNameGenerator:S.allDayClassNames,didMount:S.allDayDidMount,willUnmount:S.allDayWillUnmount}):(0,Y.az)("td",{className:"fc-list-event-time"},te)}return null}(b,J,g,S,L),(0,Y.az)("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},(0,Y.az)("span",{className:"fc-list-event-dot",style:{borderColor:ue.borderColor||ue.backgroundColor}})),(0,Y.az)(te,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${R} ${L}`}})))}}function Rt(E){return E.text}function Qt(E){return E.text}function Br(E){let d=(0,H.q)(E.renderRange.start),g=E.renderRange.end,h=[],b=[];for(;d<g;)h.push(d),b.push({start:d,end:(0,H.t)(d,1)}),d=(0,H.t)(d,1);return{dayDates:h,dayRanges:b}}function Io(E){return!1===E?null:(0,H.x)(E)}(0,H.cw)(':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}');var Es=(0,gi.rx)({name:"@fullcalendar/list",optionRefiners:{listDayFormat:Io,listDaySideFormat:Io,noEventsClassNames:H.n,noEventsContent:H.n,noEventsDidMount:H.n,noEventsWillUnmount:H.n},views:{list:{component:class Mt extends H.be{constructor(){super(...arguments),this.computeDateVars=(0,H.z)(Br),this.eventStoreToSegs=(0,H.z)(this._eventStoreToSegs),this.state={timeHeaderId:(0,H.a5)(),eventHeaderId:(0,H.a5)(),dateHeaderIdRoot:(0,H.a5)()},this.setRootEl=d=>{d?this.context.registerInteractiveComponent(this,{el:d}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:d,context:g}=this,{dayDates:h,dayRanges:b}=this.computeDateVars(d.dateProfile),S=this.eventStoreToSegs(d.eventStore,d.eventUiBases,b);return(0,Y.az)(H.ct,{elRef:this.setRootEl,elClasses:["fc-list",g.theme.getClass("table"),!1!==g.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:g.viewSpec},(0,Y.az)(H.cd,{liquid:!d.isHeightAuto,overflowX:d.isHeightAuto?"visible":"hidden",overflowY:d.isHeightAuto?"visible":"auto"},S.length>0?this.renderSegList(S,h):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:d,viewApi:g}=this.context;return(0,Y.az)(H.C,{elTag:"div",elClasses:["fc-list-empty"],renderProps:{text:d.noEventsText,view:g},generatorName:"noEventsContent",customGenerator:d.noEventsContent,defaultGenerator:Qt,classNameGenerator:d.noEventsClassNames,didMount:d.noEventsDidMount,willUnmount:d.noEventsWillUnmount},b=>(0,Y.az)(b,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(d,g){let{theme:h,options:b}=this.context,{timeHeaderId:S,eventHeaderId:R,dateHeaderIdRoot:L}=this.state,J=function Lr(E){let g,h,d=[];for(g=0;g<E.length;g+=1)h=E[g],(d[h.dayIndex]||(d[h.dayIndex]=[])).push(h);return d}(d);return(0,Y.az)(H.ch,{unit:"day"},(te,ue)=>{let ke=[];for(let We=0;We<J.length;We+=1){let Re=J[We];if(Re){let Xe=(0,H.bv)(g[We]),Qe=L+"-"+Xe;ke.push((0,Y.az)(xt,{key:Xe,cellId:Qe,dayDate:g[We],todayRange:ue})),Re=(0,H.bR)(Re,b.eventOrder);for(let bt of Re)ke.push((0,Y.az)(Mo,Object.assign({key:Xe+":"+bt.eventRange.instance.instanceId,seg:bt,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:S,eventHeaderId:R,dateHeaderId:Qe},(0,H.bS)(bt,ue,te))))}}return(0,Y.az)("table",{className:"fc-list-table "+h.getClass("table")},(0,Y.az)("thead",null,(0,Y.az)("tr",null,(0,Y.az)("th",{scope:"col",id:S},b.timeHint),(0,Y.az)("th",{scope:"col","aria-hidden":!0}),(0,Y.az)("th",{scope:"col",id:R},b.eventHint))),(0,Y.az)("tbody",null,ke))})}_eventStoreToSegs(d,g,h){return this.eventRangesToSegs((0,H.af)(d,g,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,h)}eventRangesToSegs(d,g){let h=[];for(let b of d)h.push(...this.eventRangeToSegs(b,g));return h}eventRangeToSegs(d,g){let L,J,te,{dateEnv:h}=this.context,{nextDayThreshold:b}=this.context.options,S=d.range,R=d.def.allDay,ue=[];for(L=0;L<g.length;L+=1)if(J=(0,H.o)(S,g[L]),J&&(te={component:this,eventRange:d,start:J.start,end:J.end,isStart:d.isStart&&J.start.valueOf()===S.start.valueOf(),isEnd:d.isEnd&&J.end.valueOf()===S.end.valueOf(),dayIndex:L},ue.push(te),!te.isEnd&&!R&&L+1<g.length&&S.end<h.add(g[L+1].start,b))){te.end=S.end,te.isEnd=!0;break}return ue}},buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});(0,H.cw)('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');class co extends H.aY{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(d){return d.allDay?["allDay"]:["timed"]}getKeysForEventDef(d){return d.allDay?(0,H.bP)(d)?["timed","allDay"]:["allDay"]:["timed"]}}const un=(0,H.x)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function Ln(E){let d=["fc-timegrid-slot","fc-timegrid-slot-label",E.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return(0,Y.az)(H.V.Consumer,null,g=>{if(!E.isLabeled)return(0,Y.az)("td",{className:d.join(" "),"data-time":E.isoTimeStr});let{dateEnv:h,options:b,viewApi:S}=g,R=null==b.slotLabelFormat?un:Array.isArray(b.slotLabelFormat)?(0,H.x)(b.slotLabelFormat[0]):(0,H.x)(b.slotLabelFormat),L={level:0,time:E.time,date:h.toDate(E.date),view:S,text:h.format(E.date,R)};return(0,Y.az)(H.C,{elTag:"td",elClasses:d,elAttrs:{"data-time":E.isoTimeStr},renderProps:L,generatorName:"slotLabelContent",customGenerator:b.slotLabelContent,defaultGenerator:dn,classNameGenerator:b.slotLabelClassNames,didMount:b.slotLabelDidMount,willUnmount:b.slotLabelWillUnmount},J=>(0,Y.az)("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},(0,Y.az)(J,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function dn(E){return E.text}class Xo extends H.B{render(){return this.props.slatMetas.map(d=>(0,Y.az)("tr",{key:d.key},(0,Y.az)(Ln,Object.assign({},d))))}}const Fr=(0,H.x)({week:"short"});class Ht extends H.be{constructor(){super(...arguments),this.allDaySplitter=new co,this.headerElRef=(0,Y.Vf)(),this.rootElRef=(0,Y.Vf)(),this.scrollerElRef=(0,Y.Vf)(),this.state={slatCoords:null},this.handleScrollTopRequest=d=>{let g=this.scrollerElRef.current;g&&(g.scrollTop=d)},this.renderHeadAxis=(d,g="")=>{let{options:h}=this.context,{dateProfile:b}=this.props,S=b.renderRange,L=1===(0,H.bl)(S.start,S.end)?(0,H.b0)(this.context,S.start,"week"):{};return h.weekNumbers&&"day"===d?(0,Y.az)(H.cq,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:S.start,defaultFormat:Fr},J=>(0,Y.az)("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:g}},(0,Y.az)(J,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:L}))):(0,Y.az)("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},(0,Y.az)("div",{className:"fc-timegrid-axis-frame",style:{height:g}}))},this.renderTableRowAxis=d=>{let{options:g,viewApi:h}=this.context;return(0,Y.az)(H.C,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:{text:g.allDayText,view:h},generatorName:"allDayContent",customGenerator:g.allDayContent,defaultGenerator:$r,classNameGenerator:g.allDayClassNames,didMount:g.allDayDidMount,willUnmount:g.allDayWillUnmount},S=>(0,Y.az)("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==d?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:d}},(0,Y.az)(S,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=d=>{this.setState({slatCoords:d})}}renderSimpleLayout(d,g,h){let{context:b,props:S}=this,R=[],L=(0,H.cc)(b.options);return d&&R.push({type:"header",key:"header",isSticky:L,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:d}}),g&&(R.push({type:"body",key:"all-day",chunk:{content:g}}),R.push({type:"body",key:"all-day-divider",outerContent:(0,Y.az)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,Y.az)("td",{className:"fc-timegrid-divider "+b.theme.getClass("tableCellShaded")}))})),R.push({type:"body",key:"body",liquid:!0,expandRows:!!b.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:h}}),(0,Y.az)(H.ct,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:b.viewSpec},(0,Y.az)(H.b$,{liquid:!S.isHeightAuto&&!S.forPrint,collapsibleWidth:S.forPrint,cols:[{width:"shrink"}],sections:R}))}renderHScrollLayout(d,g,h,b,S,R,L){let J=this.context.pluginHooks.scrollGridImpl;if(!J)throw new Error("No ScrollGrid implementation");let{context:te,props:ue}=this,ke=!ue.forPrint&&(0,H.cc)(te.options),We=!ue.forPrint&&(0,H.cb)(te.options),Re=[];d&&Re.push({type:"header",key:"header",isSticky:ke,syncRowHeights:!0,chunks:[{key:"axis",rowContent:Qe=>(0,Y.az)("tr",{role:"presentation"},this.renderHeadAxis("day",Qe.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:d}]}),g&&(Re.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:Qe=>(0,Y.az)("tr",{role:"presentation"},this.renderTableRowAxis(Qe.rowSyncHeights[0]))},{key:"cols",content:g}]}),Re.push({key:"all-day-divider",type:"body",outerContent:(0,Y.az)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,Y.az)("td",{colSpan:2,className:"fc-timegrid-divider "+te.theme.getClass("tableCellShaded")}))}));let Xe=te.options.nowIndicator;return Re.push({type:"body",key:"body",liquid:!0,expandRows:!!te.options.expandRows,chunks:[{key:"axis",content:Qe=>(0,Y.az)("div",{className:"fc-timegrid-axis-chunk"},(0,Y.az)("table",{"aria-hidden":!0,style:{height:Qe.expandRows?Qe.clientHeight:""}},Qe.tableColGroupNode,(0,Y.az)("tbody",null,(0,Y.az)(Xo,{slatMetas:R}))),(0,Y.az)("div",{className:"fc-timegrid-now-indicator-container"},(0,Y.az)(H.ch,{unit:Xe?"minute":"day"},bt=>{let yt=Xe&&L&&L.safeComputeTop(bt);return"number"==typeof yt?(0,Y.az)(H.ck,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:yt},isAxis:!0,date:bt}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:h}]}),We&&Re.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:H.ca},{key:"cols",content:H.ca}]}),(0,Y.az)(H.ct,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:te.viewSpec},(0,Y.az)(J,{liquid:!ue.isHeightAuto&&!ue.forPrint,forPrint:ue.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:b,minWidth:S}]}],sections:Re}))}getAllDayMaxEventProps(){let{dayMaxEvents:d,dayMaxEventRows:g}=this.context.options;return(!0===d||!0===g)&&(d=void 0,g=5),{dayMaxEvents:d,dayMaxEventRows:g}}}function $r(E){return E.text}class uo{constructor(d,g,h){this.positions=d,this.dateProfile=g,this.slotDuration=h}safeComputeTop(d){let{dateProfile:g}=this;if((0,H.H)(g.currentRange,d)){let h=(0,H.q)(d),b=d.valueOf()-h.valueOf();if(b>=(0,H.bs)(g.slotMinTime)&&b<(0,H.bs)(g.slotMaxTime))return this.computeTimeTop((0,H.d)(b))}return null}computeDateTop(d,g){return g||(g=(0,H.q)(d)),this.computeTimeTop((0,H.d)(d.valueOf()-g.valueOf()))}computeTimeTop(d){let R,L,{positions:g,dateProfile:h}=this,b=g.els.length,S=(d.milliseconds-(0,H.bs)(h.slotMinTime))/(0,H.bs)(this.slotDuration);return S=Math.max(0,S),S=Math.min(b,S),R=Math.floor(S),R=Math.min(R,b-1),L=S-R,g.tops[R]+g.getHeight(R)*L}}class ar extends H.B{render(){let{props:d,context:g}=this,{options:h}=g,{slatElRefs:b}=d;return(0,Y.az)("tbody",null,d.slatMetas.map((S,R)=>{let L={time:S.time,date:g.dateEnv.toDate(S.date),view:g.viewApi};return(0,Y.az)("tr",{key:S.key,ref:b.createRef(S.key)},d.axis&&(0,Y.az)(Ln,Object.assign({},S)),(0,Y.az)(H.C,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!S.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":S.isoTimeStr},renderProps:L,generatorName:"slotLaneContent",customGenerator:h.slotLaneContent,classNameGenerator:h.slotLaneClassNames,didMount:h.slotLaneDidMount,willUnmount:h.slotLaneWillUnmount}))}))}}class ic extends H.B{constructor(){super(...arguments),this.rootElRef=(0,Y.Vf)(),this.slatElRefs=new H.cf}render(){let{props:d,context:g}=this;return(0,Y.az)("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},(0,Y.az)("table",{"aria-hidden":!0,className:g.theme.getClass("table"),style:{minWidth:d.tableMinWidth,width:d.clientWidth,height:d.minHeight}},d.tableColGroupNode,(0,Y.az)(ar,{slatElRefs:this.slatElRefs,axis:d.axis,slatMetas:d.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:d,props:g}=this;g.onCoords&&null!==g.clientWidth&&this.rootElRef.current.offsetHeight&&g.onCoords(new uo(new H.ba(this.rootElRef.current,function Ur(E,d){return d.map(g=>E[g.key])}(this.slatElRefs.currentMap,g.slatMetas),!1,!0),this.props.dateProfile,d.options.slotDuration))}}function Bs(E,d){let h,g=[];for(h=0;h<d;h+=1)g.push([]);if(E)for(h=0;h<E.length;h+=1)g[E[h].col].push(E[h]);return g}function es(E,d){let g=[];if(E){for(let h=0;h<d;h+=1)g[h]={affectedInstances:E.affectedInstances,isEvent:E.isEvent,segs:[]};for(let h of E.segs)g[h.col].segs.push(h)}else for(let h=0;h<d;h+=1)g[h]=null;return g}class vi extends H.B{render(){let{props:d}=this;return(0,Y.az)(H.cr,{elClasses:["fc-timegrid-more-link"],elStyle:{top:d.top,bottom:d.bottom},allDayDate:null,moreCnt:d.hiddenSegs.length,allSegs:d.hiddenSegs,hiddenSegs:d.hiddenSegs,extraDateSpan:d.extraDateSpan,dateProfile:d.dateProfile,todayRange:d.todayRange,popoverContent:()=>oe(d.hiddenSegs,d),defaultGenerator:ws,forceTimed:!0},g=>(0,Y.az)(g,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function ws(E){return E.shortText}function ts(E,d){if(!E)return[[],0];let{level:g,lateralStart:h,lateralEnd:b}=E,S=h,R=[];for(;S<b;)R.push(d(g,S)),S+=1;return R.sort(yi),[R.map(zr),R[0][1]]}function yi(E,d){return d[1]-E[1]}function zr(E){return E[0]}function pa(E){let d=[];const g=ns((b,S,R)=>(0,H.bB)(b),(b,S,R)=>{let L=Object.assign(Object.assign({},b),{levelCoord:S,stackDepth:R,stackForward:0});return d.push(L),L.stackForward=h(b.nextLevelNodes,S+b.thickness,R+1)+1});function h(b,S,R){let L=0;for(let J of b)L=Math.max(g(J,S,R),L);return L}return h(E,0,0),d}function ns(E,d){const g={};return(...h)=>{let b=E(...h);return b in g?g[b]:g[b]=d(...h)}}function lc(E,d,g=null,h=0){let b=[];if(g)for(let S=0;S<E.length;S+=1){let R=E[S],L=g.computeDateTop(R.start,d),J=Math.max(L+(h||0),g.computeDateTop(R.end,d));b.push({start:Math.round(L),end:Math.round(J)})}return b}const ga=(0,H.x)({hour:"numeric",minute:"2-digit",meridiem:!1});class I extends H.B{render(){return(0,Y.az)(H.cj,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:ga}))}}class W extends H.B{constructor(){super(...arguments),this.sortEventSegs=(0,H.z)(H.bR)}render(){let{props:d,context:g}=this,{options:h}=g,b=h.selectMirror,S=d.eventDrag&&d.eventDrag.segs||d.eventResize&&d.eventResize.segs||b&&d.dateSelectionSegs||[],R=d.eventDrag&&d.eventDrag.affectedInstances||d.eventResize&&d.eventResize.affectedInstances||{},L=this.sortEventSegs(d.fgEventSegs,h.eventOrder);return(0,Y.az)(H.cl,{elTag:"td",elRef:d.elRef,elClasses:["fc-timegrid-col",...d.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},d.extraDataAttrs),date:d.date,dateProfile:d.dateProfile,todayRange:d.todayRange,extraRenderProps:d.extraRenderProps},J=>(0,Y.az)("div",{className:"fc-timegrid-col-frame"},(0,Y.az)("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(d.businessHourSegs,"non-business"),this.renderFillSegs(d.bgEventSegs,"bg-event"),this.renderFillSegs(d.dateSelectionSegs,"highlight")),(0,Y.az)("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(L,R,!1,!1,!1)),(0,Y.az)("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(S,{},!!d.eventDrag,!!d.eventResize,!!b,"mirror")),(0,Y.az)("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(d.nowIndicatorSegs)),(0,H.cm)(h)&&(0,Y.az)(J,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(d,g,h,b,S,R){let{props:L}=this;return L.forPrint?oe(d,L):this.renderPositionedFgSegs(d,g,h,b,S,R)}renderPositionedFgSegs(d,g,h,b,S,R){let{eventMaxStack:L,eventShortHeight:J,eventOrderStrict:te,eventMinHeight:ue}=this.context.options,{date:ke,slatCoords:We,eventSelection:Re,todayRange:Xe,nowDate:Qe}=this.props,bt=h||b||S,yt=lc(d,ke,We,ue),{segPlacements:Wt,hiddenGroups:An}=function M(E,d,g,h){let b=[],S=[];for(let te=0;te<E.length;te+=1){let ue=d[te];ue?b.push({index:te,thickness:1,span:ue}):S.push(E[te])}let{segRects:R,hiddenGroups:L}=function Ls(E,d,g){let h=new H.bA;null!=d&&(h.strictOrder=d),null!=g&&(h.maxStackCnt=g);let b=h.addSegs(E),S=(0,H.bE)(b),R=function lr(E){const{entriesByLevel:d}=E,g=ns((h,b)=>h+":"+b,(h,b)=>{let S=function ac(E,d,g){let{levelCoords:h,entriesByLevel:b}=E,S=b[d][g],R=h[d]+S.thickness,L=h.length,J=d;for(;J<L&&h[J]<R;J+=1);for(;J<L;J+=1){let ue,te=b[J],ke=(0,H.bD)(te,S.span.start,H.bC),We=ke[0]+ke[1],Re=We;for(;(ue=te[Re])&&ue.span.start<S.span.end;)Re+=1;if(We<Re)return{level:J,lateralStart:We,lateralEnd:Re}}return null}(E,h,b),R=ts(S,g),L=d[h][b];return[Object.assign(Object.assign({},L),{nextLevelNodes:R[0]}),L.thickness+R[1]]});return ts(d.length?{level:0,lateralStart:0,lateralEnd:d[0].length}:null,g)[0]}(h);return R=function Ci(E,d){const g=ns((h,b,S)=>(0,H.bB)(h),(h,b,S)=>{let ue,{nextLevelNodes:R,thickness:L}=h,J=L+S,te=L/J,ke=[];if(R.length)for(let Re of R)if(void 0===ue){let Xe=g(Re,b,J);ue=Xe[0],ke.push(Xe[1])}else{let Xe=g(Re,ue,0);ke.push(Xe[1])}else ue=d;let We=(ue-b)*te;return[ue-We,Object.assign(Object.assign({},h),{thickness:We,nextLevelNodes:ke})]});return E.map(h=>g(h,0,0)[1])}(R,1),{segRects:pa(R),hiddenGroups:S}}(b,g,h),J=[];for(let te of R)J.push({seg:E[te.index],rect:te});for(let te of S)J.push({seg:te,rect:null});return{segPlacements:J,hiddenGroups:L}}(d,yt,te,L);return(0,Y.az)(Y.HY,null,this.renderHiddenGroups(An,d),Wt.map(Rn=>{let{seg:ur,rect:Xn}=Rn,zs=ur.eventRange.instance.instanceId,wi=bt||!(g[zs]||!Xn),bn=ie(Xn&&Xn.span),Vr=!bt&&Xn?this.computeSegHStyle(Xn):{left:0,right:0},Hs=!!Xn&&Xn.span.end-Xn.span.start<J;return(0,Y.az)("div",{className:"fc-timegrid-event-harness"+(Xn&&Xn.stackForward>0?" fc-timegrid-event-harness-inset":""),key:R||zs,style:Object.assign(Object.assign({visibility:wi?"":"hidden"},bn),Vr)},(0,Y.az)(I,Object.assign({seg:ur,isDragging:h,isResizing:b,isDateSelecting:S,isSelected:zs===Re,isShort:Hs},(0,H.bS)(ur,Xe,Qe))))}))}renderHiddenGroups(d,g){let{extraDateSpan:h,dateProfile:b,todayRange:S,nowDate:R,eventSelection:L,eventDrag:J,eventResize:te}=this.props;return(0,Y.az)(Y.HY,null,d.map(ue=>{let ke=ie(ue.span),We=function ne(E,d){return E.map(g=>d[g.index])}(ue.entries,g);return(0,Y.az)(vi,{key:(0,H.bw)((0,H.cs)(We)),hiddenSegs:We,top:ke.top,bottom:ke.bottom,extraDateSpan:h,dateProfile:b,todayRange:S,nowDate:R,eventSelection:L,eventDrag:J,eventResize:te})}))}renderFillSegs(d,g){let{props:h,context:b}=this,R=lc(d,h.date,h.slatCoords,b.options.eventMinHeight).map((L,J)=>{let te=d[J];return(0,Y.az)("div",{key:(0,H.bT)(te.eventRange),className:"fc-timegrid-bg-harness",style:ie(L)},"bg-event"===g?(0,Y.az)(H.cp,Object.assign({seg:te},(0,H.bS)(te,h.todayRange,h.nowDate))):(0,H.co)(g))});return(0,Y.az)(Y.HY,null,R)}renderNowIndicator(d){let{slatCoords:g,date:h}=this.props;return g?d.map((b,S)=>(0,Y.az)(H.ck,{key:S,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:g.computeDateTop(b.start,h)},isAxis:!1,date:h})):null}computeSegHStyle(d){let L,J,{isRtl:g,options:h}=this.context,b=h.slotEventOverlap,S=d.levelCoord,R=d.levelCoord+d.thickness;b&&(R=Math.min(1,S+2*(R-S))),g?(L=1-R,J=S):(L=S,J=1-R);let te={zIndex:d.stackDepth+1,left:100*L+"%",right:100*J+"%"};return b&&!d.stackForward&&(te[g?"marginLeft":"marginRight"]=20),te}}function oe(E,{todayRange:d,nowDate:g,eventSelection:h,eventDrag:b,eventResize:S}){let R=(b?b.affectedInstances:null)||(S?S.affectedInstances:null)||{};return(0,Y.az)(Y.HY,null,E.map(L=>{let J=L.eventRange.instance.instanceId;return(0,Y.az)("div",{key:J,style:{visibility:R[J]?"hidden":""}},(0,Y.az)(I,Object.assign({seg:L,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:J===h,isShort:!1},(0,H.bS)(L,d,g))))}))}function ie(E){return E?{top:E.start,bottom:-E.end}:{top:"",bottom:""}}class _e extends H.B{constructor(){super(...arguments),this.splitFgEventSegs=(0,H.z)(Bs),this.splitBgEventSegs=(0,H.z)(Bs),this.splitBusinessHourSegs=(0,H.z)(Bs),this.splitNowIndicatorSegs=(0,H.z)(Bs),this.splitDateSelectionSegs=(0,H.z)(Bs),this.splitEventDrag=(0,H.z)(es),this.splitEventResize=(0,H.z)(es),this.rootElRef=(0,Y.Vf)(),this.cellElRefs=new H.cf}render(){let{props:d,context:g}=this,h=g.options.nowIndicator&&d.slatCoords&&d.slatCoords.safeComputeTop(d.nowDate),b=d.cells.length,S=this.splitFgEventSegs(d.fgEventSegs,b),R=this.splitBgEventSegs(d.bgEventSegs,b),L=this.splitBusinessHourSegs(d.businessHourSegs,b),J=this.splitNowIndicatorSegs(d.nowIndicatorSegs,b),te=this.splitDateSelectionSegs(d.dateSelectionSegs,b),ue=this.splitEventDrag(d.eventDrag,b),ke=this.splitEventResize(d.eventResize,b);return(0,Y.az)("div",{className:"fc-timegrid-cols",ref:this.rootElRef},(0,Y.az)("table",{role:"presentation",style:{minWidth:d.tableMinWidth,width:d.clientWidth}},d.tableColGroupNode,(0,Y.az)("tbody",{role:"presentation"},(0,Y.az)("tr",{role:"row"},d.axis&&(0,Y.az)("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},(0,Y.az)("div",{className:"fc-timegrid-col-frame"},(0,Y.az)("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof h&&(0,Y.az)(H.ck,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:h},isAxis:!0,date:d.nowDate})))),d.cells.map((We,Re)=>(0,Y.az)(W,{key:We.key,elRef:this.cellElRefs.createRef(We.key),dateProfile:d.dateProfile,date:We.date,nowDate:d.nowDate,todayRange:d.todayRange,extraRenderProps:We.extraRenderProps,extraDataAttrs:We.extraDataAttrs,extraClassNames:We.extraClassNames,extraDateSpan:We.extraDateSpan,fgEventSegs:S[Re],bgEventSegs:R[Re],businessHourSegs:L[Re],nowIndicatorSegs:J[Re],dateSelectionSegs:te[Re],eventDrag:ue[Re],eventResize:ke[Re],slatCoords:d.slatCoords,eventSelection:d.eventSelection,forPrint:d.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:d}=this;d.onColCoords&&null!==d.clientWidth&&d.onColCoords(new H.ba(this.rootElRef.current,function Ue(E,d){return d.map(g=>E[g.key])}(this.cellElRefs.currentMap,d.cells),!0,!1))}}class qe extends H.be{constructor(){super(...arguments),this.processSlotOptions=(0,H.z)(ze),this.state={slatCoords:null},this.handleRootEl=d=>{d?this.context.registerInteractiveComponent(this,{el:d,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=d=>{let{onScrollTopRequest:g}=this.props,{slatCoords:h}=this.state;if(g&&h){if(d.time){let b=h.computeTimeTop(d.time);b=Math.ceil(b),b&&(b+=1),g(b)}return!0}return!1},this.handleColCoords=d=>{this.colCoords=d},this.handleSlatCoords=d=>{this.setState({slatCoords:d}),this.props.onSlatCoords&&this.props.onSlatCoords(d)}}render(){let{props:d,state:g}=this;return(0,Y.az)("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:d.clientWidth,minWidth:d.tableMinWidth}},(0,Y.az)(ic,{axis:d.axis,dateProfile:d.dateProfile,slatMetas:d.slatMetas,clientWidth:d.clientWidth,minHeight:d.expandRows?d.clientHeight:"",tableMinWidth:d.tableMinWidth,tableColGroupNode:d.axis?d.tableColGroupNode:null,onCoords:this.handleSlatCoords}),(0,Y.az)(_e,{cells:d.cells,axis:d.axis,dateProfile:d.dateProfile,businessHourSegs:d.businessHourSegs,bgEventSegs:d.bgEventSegs,fgEventSegs:d.fgEventSegs,dateSelectionSegs:d.dateSelectionSegs,eventSelection:d.eventSelection,eventDrag:d.eventDrag,eventResize:d.eventResize,todayRange:d.todayRange,nowDate:d.nowDate,nowIndicatorSegs:d.nowIndicatorSegs,clientWidth:d.clientWidth,tableMinWidth:d.tableMinWidth,tableColGroupNode:d.tableColGroupNode,slatCoords:g.slatCoords,onColCoords:this.handleColCoords,forPrint:d.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(d){this.scrollResponder.update(d.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(d,g){let{dateEnv:h,options:b}=this.context,{colCoords:S}=this,{dateProfile:R}=this.props,{slatCoords:L}=this.state,{snapDuration:J,snapsPerSlot:te}=this.processSlotOptions(this.props.slotDuration,b.snapDuration),ue=S.leftToIndex(d),ke=L.positions.topToIndex(g);if(null!=ue&&null!=ke){let We=this.props.cells[ue],Re=L.positions.tops[ke],Xe=L.positions.getHeight(ke),bt=Math.floor((g-Re)/Xe*te),Wt=this.props.cells[ue].date,An=(0,H.bp)(R.slotMinTime,(0,H.bo)(J,ke*te+bt)),Rn=h.add(Wt,An),ur=h.add(Rn,J);return{dateProfile:R,dateSpan:Object.assign({range:{start:Rn,end:ur},allDay:!1},We.extraDateSpan),dayEl:S.els[ue],rect:{left:S.lefts[ue],right:S.rights[ue],top:Re,bottom:Re+Xe},layer:0}}return null}}function ze(E,d){let g=d||E,h=(0,H.bt)(E,g);return null===h&&(g=E,h=1),{snapDuration:g,snapsPerSlot:h}}class vt extends H.bW{sliceRange(d,g){let h=[];for(let b=0;b<g.length;b+=1){let S=(0,H.o)(d,g[b]);S&&h.push({start:S.start,end:S.end,isStart:S.start.valueOf()===d.start.valueOf(),isEnd:S.end.valueOf()===d.end.valueOf(),col:b})}return h}}class Je extends H.be{constructor(){super(...arguments),this.buildDayRanges=(0,H.z)(at),this.slicer=new vt,this.timeColsRef=(0,Y.Vf)()}render(){let{props:d,context:g}=this,{dateProfile:h,dayTableModel:b}=d,{nowIndicator:S,nextDayThreshold:R}=g.options,L=this.buildDayRanges(b,h,g.dateEnv);return(0,Y.az)(H.ch,{unit:S?"minute":"day"},(J,te)=>(0,Y.az)(qe,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(d,h,null,g,L),{forPrint:d.forPrint,axis:d.axis,dateProfile:h,slatMetas:d.slatMetas,slotDuration:d.slotDuration,cells:b.cells[0],tableColGroupNode:d.tableColGroupNode,tableMinWidth:d.tableMinWidth,clientWidth:d.clientWidth,clientHeight:d.clientHeight,expandRows:d.expandRows,nowDate:J,nowIndicatorSegs:S&&this.slicer.sliceNowDate(J,h,R,g,L),todayRange:te,onScrollTopRequest:d.onScrollTopRequest,onSlatCoords:d.onSlatCoords})))}}function at(E,d,g){let h=[];for(let b of E.headerDates)h.push({start:g.add(b,d.slotMinTime),end:g.add(b,d.slotMaxTime)});return h}const Et=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function tt(E,d,g,h,b){let S=new Date(0),R=E,L=(0,H.d)(0),J=g||function Ft(E){let d,g,h;for(d=Et.length-1;d>=0;d-=1)if(g=(0,H.d)(Et[d]),h=(0,H.bt)(g,E),null!==h&&h>1)return g;return E}(h),te=[];for(;(0,H.bs)(R)<(0,H.bs)(d);){let ue=b.add(S,R),ke=null!==(0,H.bt)(L,J);te.push({date:ue,time:R,key:ue.toISOString(),isoTimeStr:(0,H.bu)(ue),isLabeled:ke}),R=(0,H.bp)(R,h),L=(0,H.bp)(L,h)}return te}function Fn(E,d){let g=new H.bO(E.renderRange,d);return new H.bV(g,!1)}const fo={allDaySlot:Boolean};var Vt=(0,gi.rx)({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:fo,views:{timeGrid:{component:class Nn extends Ht{constructor(){super(...arguments),this.buildTimeColsModel=(0,H.z)(Fn),this.buildSlatMetas=(0,H.z)(tt)}render(){let{options:d,dateEnv:g,dateProfileGenerator:h}=this.context,{props:b}=this,{dateProfile:S}=b,R=this.buildTimeColsModel(S,h),L=this.allDaySplitter.splitProps(b),J=this.buildSlatMetas(S.slotMinTime,S.slotMaxTime,d.slotLabelInterval,d.slotDuration,g),{dayMinWidth:te}=d,ue=!te,ke=te,We=d.dayHeaders&&(0,Y.az)(H.bK,{dates:R.headerDates,dateProfile:S,datesRepDistinctDays:!0,renderIntro:ue?this.renderHeadAxis:null}),Re=!1!==d.allDaySlot&&(Qe=>(0,Y.az)(B,Object.assign({},L.allDay,{dateProfile:S,dayTableModel:R,nextDayThreshold:d.nextDayThreshold,tableMinWidth:Qe.tableMinWidth,colGroupNode:Qe.tableColGroupNode,renderRowIntro:ue?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:Qe.clientWidth,clientHeight:Qe.clientHeight,forPrint:b.forPrint},this.getAllDayMaxEventProps()))),Xe=Qe=>(0,Y.az)(Je,Object.assign({},L.timed,{dayTableModel:R,dateProfile:S,axis:ue,slotDuration:d.slotDuration,slatMetas:J,forPrint:b.forPrint,tableColGroupNode:Qe.tableColGroupNode,tableMinWidth:Qe.tableMinWidth,clientWidth:Qe.clientWidth,clientHeight:Qe.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:Qe.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return ke?this.renderHScrollLayout(We,Re,Xe,R.colCnt,te,J,this.state.slatCoords):this.renderSimpleLayout(We,Re,Xe)}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}}),Eo=en(2495);function $n(E,d){if(1&E&&(p.TgZ(0,"ion-select-option",39),p._uU(1),p.qZA()),2&E){const g=d.$implicit;p.Q6J("value",g.idMateria),p.xp6(1),p.hij(" ",g.nombreMateria," ")}}function cc(E,d){if(1&E&&(p.TgZ(0,"option",39),p._uU(1),p.qZA()),2&E){const g=d.$implicit;p.Udp("background-color",g.colorEtiqueta),p.Q6J("value",g.idEtiqueta),p.xp6(1),p.hij(" ",g.colorEtiqueta," ")}}const zf=function(){return{base_url:"/tinymce",plugins:"advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table help wordcount",suffix:".min"}};function Hf(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",16)(3,"ion-button",17),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.cancel())}),p._uU(4,"Cancelar"),p.qZA()(),p.TgZ(5,"ion-title",18),p._uU(6,"Nota"),p.qZA(),p.TgZ(7,"ion-buttons",19)(8,"ion-button",20),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.confirm())}),p._uU(9,"Guardar"),p.qZA()()()(),p.TgZ(10,"ion-content",21)(11,"div",22)(12,"div",23)(13,"div",24)(14,"form")(15,"div",25)(16,"div",26),p._UZ(17,"ion-input",27),p.qZA(),p.TgZ(18,"div",26)(19,"ion-item")(20,"ion-label"),p._uU(21,"Materia:"),p.qZA(),p.TgZ(22,"ion-select",28),p.YNc(23,$n,2,2,"ion-select-option",29),p.qZA()()()(),p.TgZ(24,"div",25)(25,"div",30)(26,"editor",31),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw();return p.KtG(S.descripcion=b)}),p.qZA()()(),p.TgZ(27,"div",32)(28,"div",26)(29,"ion-item")(30,"label",33),p._uU(31,"Color:"),p.qZA(),p.TgZ(32,"select",34)(33,"option",35),p._uU(34,"Color: "),p.qZA(),p.YNc(35,cc,2,4,"option",36),p.qZA()()(),p.TgZ(36,"div",26)(37,"ion-datetime",37)(38,"span",38),p._uU(39,"Selecciona una fecha (opcional)"),p.qZA()()()()()()()()()}if(2&E){const g=p.oxw();p.xp6(8),p.Q6J("strong",!0),p.xp6(15),p.Q6J("ngForOf",g.mats),p.xp6(3),p.Q6J("ngModel",g.descripcion)("init",p.DdM(5,zf)),p.xp6(9),p.Q6J("ngForOf",g.colores)}}const pl=function(E){return{"background-color":E}};let _u=(()=>{var E;class d{constructor(h,b,S){this.http=h,this.loadingController=b,this.alertController=S,this.colores=[],this.mats=[],this.userInfo=JSON.parse(localStorage.userInfo),this.notes=[],this.modalNoteProps=[],this.descripcion="",this.calendarOptions={plugins:[lt,Es,Vt],locale:Ot,timeZone:"UTC",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,listMonth"},initialView:"dayGridMonth",themeSystem:"standard",events:[],eventClick:this.handleEventClick.bind(this)}}getMats(){var h=this;return(0,it.Z)(function*(){try{const b=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getAsigns&user=${h.userInfo.idUsuario}&curso=${h.userInfo.cursoInfo}`,S=yield h.http.get(b).toPromise();h.mats=S}catch{}})()}getColors(){var h=this;return(0,it.Z)(function*(){try{const b="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getTags",S=yield h.http.get(b).toPromise();h.colores=S}catch(b){console.log(b)}})()}ngOnInit(){this.getNotes(),this.getMats(),this.getColors()}applyCcs(){return(0,it.Z)(function*(){$(".fc table").css("border-radius","10px"),$(".fc th").css("border-top-left-radius","10px"),$(".fc th").css("border-top-right-radius","10px"),$(".fc th").css("background-color","#1f1f1f"),$("a").css("text-decoration","none"),$("a").css("color","#fff")})()}getNotes(){var h=this;return(0,it.Z)(function*(){const b=yield h.loadingController.create({message:"Cargando recordatorios..."});yield b.present();try{h.applyCcs();const S="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getNotes&user="+h.userInfo.idUsuario,R=yield h.http.get(S).toPromise();h.notes=R,h.calendarOptions.events=h.transformNotesToEvents(h.notes)}catch(S){console.log(S),yield(yield h.alertController.create({header:"Error",message:"Ha ocurrido un error durante la carga de los recordatorios",buttons:["Aceptar"]})).present()}finally{yield b.dismiss()}})()}transformNotesToEvents(h){return h.map(b=>({id:b.idNota,title:b.titulo,date:b.fechaAviso,color:b.color}))}handleEventClick(h){const S=h.event.id;let R="",L="",J="";for(let ke=0;ke<this.notes.length;ke++)this.notes[ke].idNota===S&&(L=this.notes[ke].mat,R=this.notes[ke].texto,J=this.notes[ke].color);this.presentAlert(h.event.title,L,`${R}`,S,J)}salir(){$("#miModal").hide()}deleteNote(h){var b=this;return(0,it.Z)(function*(){var R;yield(yield b.alertController.create({header:"Eliminar nota",message:"\xbfEst\xe1s seguro de eliminar esta nota?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:(R=(0,it.Z)(function*(){const L=yield b.loadingController.create({message:"Eliminando nota..."});yield L.present();try{const J="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=deletenote&idn="+h+"&idu="+b.userInfo.idUsuario;yield b.http.get(J).toPromise()}catch(J){console.log(J),yield(yield b.alertController.create({header:"Error",message:"Ha ocurrido un error al eliminar la nota",buttons:["Aceptar"]})).present()}finally{yield L.dismiss(),b.getNotes(),$("#miModal").hide()}}),function(){return R.apply(this,arguments)})}]})).present()})()}presentAlert(h,b,S,R,L){var J=this;return(0,it.Z)(function*(){J.modalNoteProps={head:h,message:S,idn:R,color:L,mat:b},$("#miModal").show()})()}setDataEdit(h){var b=this;return(0,it.Z)(function*(){$("#edit-note-date").trigger("click");const S=yield b.loadingController.create({message:"cargando datos...",spinner:"crescent"});yield S.present();try{const R=b.notes.find(L=>L.idNota===h);$("#title").val(R.titulo),$("#color").val(R.idEtiqueta),b.descripcion=R.texto,$("#mat").val(R.idMateria),$("#date").val(R.fechaAviso.replace(" ","T")),b.idn=h}catch{}finally{yield S.dismiss()}})()}onWillDismiss(h){"confirm"===h.detail.role&&console.log("Evento onWillDismiss")}cancel(){console.log("Funci\xf3n cancel")}confirm(){var h=this;return(0,it.Z)(function*(){const b_titulo=$("#title").val(),b_color=$("#color").val(),b_nota=h.descripcion,b_materia=$("#mat").val(),b_fecha=$("#date").val(),b_idn=h.idn;var L=di(dt(b_fecha+""),"yyyy-MM-dd HH:mm:ss");const J=yield h.loadingController.create({message:"Actualizando...",spinner:"crescent"});yield J.present();const te=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?user=${h.userInfo.idUsuario}&nota=${b_nota}&color=${b_color}&fecha=${L}&action=saveNote&mat=${b_materia}&titulo=${b_titulo}&idn=${b_idn}`;console.log(te);try{1===(yield h.http.get(te).toPromise())||(yield(yield h.alertController.create({header:"Error",message:"Error al actualizar.",buttons:["Aceptar"]})).present())}catch(ue){console.error(ue),yield(yield h.alertController.create({header:"Error",message:"Error al actualizar.",buttons:["Aceptar"]})).present()}finally{yield J.dismiss(),h.modal.dismiss(),h.getNotes(),$("#miModal").hide()}})()}customCounterFormatter(h,b){return b-h+" Caracteres restantes: "}}return(E=d).\u0275fac=function(h){return new(h||E)(p.Y36(ia.eN),p.Y36(Po.HT),p.Y36(Po.Br))},E.\u0275cmp=p.Xpm({type:E,selectors:[["app-calendar"]],viewQuery:function(h,b){if(1&h&&p.Gf($e.ki,5),2&h){let S;p.iGM(S=p.CRH())&&(b.modal=S.first)}},decls:22,vars:10,consts:[[3,"options"],["id","miModal",1,"modal","animate__animated","animate__slideInDown"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content",3,"ngStyle"],[1,"modal-body"],[3,"ngStyle"],[2,"color","black"],[3,"innerHTML"],[1,"modal-footer"],["fill","clear","color","dark",3,"click"],["name","arrow-back-outline"],["slot","","fill","clear","color","dark",3,"click"],["name","trash-outline"],["slot","","fill","clear","color","dark","type","submit",3,"click"],["name","pencil-outline"],["trigger","edit-note-date",3,"willDismiss"],["slot","start"],[3,"click"],[1,"text-center"],["slot","end"],[3,"strong","click"],[1,"ion-padding"],[1,"row","justify-content-center"],[1,""],[1,"login-form"],[1,"row"],[1,"col-lg-6","col-md-12","col-sm-12"],["label","Titulo:","label-placement","floating","fill","solid","placeholder","Escribe el titulo","id","title"],["interface","action-sheet","id","mat"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["name","descripcion",3,"ngModel","init","ngModelChange"],[1,"row","mt-4"],["for",""],["id","color",1,"form-select"],["disabled","","selected","","value","-1"],[3,"value","background-color",4,"ngFor","ngForOf"],["id","date"],["slot","title"],[3,"value"]],template:function(h,b){1&h&&(p._UZ(0,"full-calendar",0),p.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ion-card",5)(6,"ion-card-header")(7,"ion-card-subtitle"),p._uU(8),p.qZA(),p.TgZ(9,"ion-card-title",6),p._uU(10),p.qZA()(),p.TgZ(11,"ion-card-content",6),p._UZ(12,"p",7),p.qZA()()(),p.TgZ(13,"div",8)(14,"ion-button",9),p.NdJ("click",function(){return b.salir()}),p._UZ(15,"ion-icon",10),p.qZA(),p.TgZ(16,"ion-button",11),p.NdJ("click",function(){return b.deleteNote(b.modalNoteProps.idn)}),p._UZ(17,"ion-icon",12),p.qZA(),p.TgZ(18,"ion-button",13),p.NdJ("click",function(){return b.setDataEdit(b.modalNoteProps.idn)}),p._UZ(19,"ion-icon",14),p.qZA()()()()(),p.TgZ(20,"ion-modal",15),p.NdJ("willDismiss",function(R){return b.onWillDismiss(R)}),p.YNc(21,Hf,40,6,"ng-template"),p.qZA()),2&h&&(p.Q6J("options",b.calendarOptions),p.xp6(3),p.Q6J("ngStyle",p.VKq(6,pl,b.modalNoteProps.color)),p.xp6(2),p.Q6J("ngStyle",p.VKq(8,pl,b.modalNoteProps.color)),p.xp6(3),p.Oqu(b.modalNoteProps.mat),p.xp6(2),p.Oqu(b.modalNoteProps.head),p.xp6(2),p.Q6J("innerHTML",b.modalNoteProps.message,p.oJD))},dependencies:[vo.sg,vo.PC,Le._Y,Le.YN,Le.Kr,Le.JJ,Le.JL,Le.On,Le.F,$e.YG,$e.Sm,$e.PM,$e.FN,$e.Zi,$e.tO,$e.Dq,$e.W2,$e.x4,$e.Gu,$e.gu,$e.pK,$e.Ie,$e.Q$,$e.t9,$e.n0,$e.wd,$e.sr,$e.ki,$e.QI,$e.j9,pi.PG,Eo.w],encapsulation:2}),d})();const qf=["modal"],cr=["share"],dc=["noteOpen"],Wf=["shareNote"],jf=["users_panel"];function Vf(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-buttons",15)(1,"ion-button",16),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.set(""))}),p._UZ(2,"ion-icon",17),p.qZA()()}}function Tu(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-fab",18)(1,"ion-fab-button"),p._UZ(2,"ion-icon",19),p.qZA(),p.TgZ(3,"ion-fab-list",20)(4,"ion-fab-button",16),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.openModal())}),p._UZ(5,"ion-icon",21),p.qZA(),p.TgZ(6,"ion-label"),p._uU(7,"Nuevo"),p.qZA()()()}}function Zf(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",26)(1,"ion-card",27),p.NdJ("click",function(){const S=p.CHM(g).$implicit,R=p.oxw(3);return p.KtG(R.editarNotaView(S,!0,1))}),p.TgZ(2,"ion-card-header")(3,"ion-card-title",28),p._uU(4),p.qZA(),p.TgZ(5,"ion-card-subtitle",29),p._uU(6),p.qZA()(),p.TgZ(7,"ion-card-content",29)(8,"p"),p._uU(9),p.qZA(),p._UZ(10,"h2",30),p.qZA()()()}if(2&E){const g=d.$implicit;p.MGl("id","nota",g.idNota,""),p.xp6(1),p.Udp("background-color",g.color),p.xp6(3),p.Oqu(g.titulo),p.xp6(2),p.hij("Materia: ",g.mat,""),p.xp6(3),p.Oqu(g.fechaCreacion),p.xp6(1),p.Q6J("innerHTML",g.texto,p.oJD)}}function xi(E,d){if(1&E&&(p.TgZ(0,"div",24),p.YNc(1,Zf,11,7,"div",25),p.qZA()),2&E){const g=p.oxw(2);p.xp6(1),p.Q6J("ngForOf",g.getFilteredNotes(2))}}function ku(E,d){if(1&E&&(p.TgZ(0,"div",22),p.YNc(1,xi,2,1,"div",23),p.qZA()),2&E){const g=p.oxw(),h=p.MAs(12);p.xp6(1),p.Q6J("ngIf",g.getFilteredNotes(2).length>0)("ngIfElse",h)}}function Fs(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",31)(1,"div",32),p._UZ(2,"div",33),p.TgZ(3,"div",34)(4,"div",32)(5,"div",35)(6,"ion-card",36),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.set("note"))}),p._UZ(7,"img",37),p.TgZ(8,"ion-card-header")(9,"ion-card-title"),p._uU(10,"Notas"),p.qZA()()()(),p.TgZ(11,"div",35)(12,"ion-card",36),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.set("colab"))}),p._UZ(13,"img",38),p.TgZ(14,"ion-card-header")(15,"ion-card-title"),p._uU(16,"Notas colaborativas"),p.qZA()()()(),p.TgZ(17,"div",35)(18,"ion-card",36),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.set("recordatorios"))}),p._UZ(19,"img",39),p.TgZ(20,"ion-card-header")(21,"ion-card-title"),p._uU(22,"Recordatorios"),p.qZA()()()()()(),p._UZ(23,"div",33),p.qZA()()}}function Hr(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",26)(1,"ion-card",27),p.NdJ("click",function(){const S=p.CHM(g).$implicit,R=p.oxw(3);return p.KtG(R.editarNotaView(S,!1,S.permiso))}),p.TgZ(2,"ion-card-header")(3,"ion-card-title",28),p._uU(4),p.qZA(),p.TgZ(5,"ion-card-subtitle",29),p._uU(6),p.qZA()(),p.TgZ(7,"ion-card-content")(8,"p"),p._uU(9),p.qZA(),p._UZ(10,"h2",30),p.qZA()()()}if(2&E){const g=d.$implicit;p.MGl("id","nota",g.idNota,""),p.xp6(1),p.Udp("background-color",g.color),p.xp6(3),p.Oqu(g.titulo),p.xp6(2),p.hij("Materia: ",g.mat,""),p.xp6(3),p.Oqu(g.fechaCreacion),p.xp6(1),p.Q6J("innerHTML",g.texto,p.oJD)}}function Gf(E,d){if(1&E&&(p.TgZ(0,"div",24),p.YNc(1,Hr,11,7,"div",25),p.qZA()),2&E){const g=p.oxw(2);p.xp6(1),p.Q6J("ngForOf",g.getFilteredNotes(3))}}function Yf(E,d){if(1&E&&(p.TgZ(0,"div",22),p.YNc(1,Gf,2,1,"div",40),p.qZA()),2&E){const g=p.oxw(),h=p.MAs(12);p.xp6(1),p.Q6J("ngIf",g.getFilteredNotes(3).length>0)("ngIfElse",h)}}function Kf(E,d){1&E&&(p.TgZ(0,"p",41),p._uU(1,"No hay notas disponibles."),p.qZA(),p.TgZ(2,"div",42),p._UZ(3,"img",43),p.qZA(),p.TgZ(4,"p",42),p._uU(5," Registra tus notas usando el bot\xf3n "),p._UZ(6,"ion-icon",44),p.qZA())}function ha(E,d){1&E&&(p.TgZ(0,"div")(1,"div",45)(2,"div",24)(3,"div",46),p._UZ(4,"app-calendar"),p.qZA()()(),p._UZ(5,"button",47),p.qZA())}function ba(E,d){if(1&E&&(p.TgZ(0,"ion-select-option",67),p._uU(1),p.qZA()),2&E){const g=d.$implicit;p.Q6J("value",g.idMateria),p.xp6(1),p.hij(" ",g.nombreMateria," ")}}function qr(E,d){if(1&E&&(p.TgZ(0,"option",67),p._uU(1),p.qZA()),2&E){const g=d.$implicit;p.Udp("background-color",g.colorEtiqueta),p.Q6J("value",g.idEtiqueta),p.xp6(1),p.hij(" ",g.colorEtiqueta," ")}}const Jf=function(){return{base_url:"/tinymce",plugins:"lists link image table code help wordcount",suffix:".min"}};function Wr(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",15)(3,"ion-button",16),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.cancel())}),p._uU(4,"Cancelar"),p.qZA()(),p.TgZ(5,"ion-title",42),p._uU(6,"Nota"),p.qZA(),p.TgZ(7,"ion-buttons",48)(8,"ion-button",49),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.confirm())}),p._uU(9,"Guardar"),p.qZA()()()(),p.TgZ(10,"ion-content",50)(11,"div",51)(12,"div",52)(13,"div",53)(14,"form",54)(15,"div",32)(16,"div",55)(17,"ion-input",56),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw();return p.KtG(S.tt=b)})("ionChange",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.onTTChange())}),p.qZA()(),p.TgZ(18,"div",55)(19,"ion-item")(20,"ion-label"),p._uU(21,"Materia:"),p.qZA(),p.TgZ(22,"ion-select",57),p.YNc(23,ba,2,2,"ion-select-option",58),p.qZA()()()(),p.TgZ(24,"div",32)(25,"div",59),p._UZ(26,"editor",60),p.qZA()(),p.TgZ(27,"div",24)(28,"div",55)(29,"ion-item")(30,"label",61),p._uU(31,"Color:"),p.qZA(),p.TgZ(32,"select",62)(33,"option",63),p._uU(34,"Color: "),p.qZA(),p.YNc(35,qr,2,4,"option",64),p.qZA()()(),p.TgZ(36,"div",55)(37,"ion-datetime",65)(38,"span",66),p._uU(39,"Selecciona una fecha (opcional)"),p.qZA()()()()()()()()()}if(2&E){const g=p.oxw();p.xp6(8),p.Q6J("strong",!0),p.xp6(6),p.Q6J("formGroup",g.formularioNotas),p.xp6(3),p.Q6J("ngModel",g.tt),p.xp6(6),p.Q6J("ngForOf",g.mats),p.xp6(3),p.Q6J("init",p.DdM(6,Jf)),p.xp6(9),p.Q6J("ngForOf",g.colores)}}function Qf(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",74),p.NdJ("click",function(){p.CHM(g);const b=p.oxw(2);return p.KtG(b.editFromEditor())}),p._UZ(1,"ion-icon",83),p.TgZ(2,"ion-label",75),p._uU(3,"Guardar"),p.qZA()()}}function va(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",74),p.NdJ("click",function(){p.CHM(g);const b=p.oxw(2);return p.KtG(b.eliminarNota(b.data.id))}),p._UZ(1,"ion-icon",84),p.TgZ(2,"ion-label",75),p._uU(3,"Eliminar"),p.qZA()()}}function Nu(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",74),p.NdJ("click",function(){p.CHM(g);const b=p.oxw(2);return p.KtG(b.openPopShare())}),p._UZ(1,"ion-icon",85),p.TgZ(2,"ion-label",75),p._uU(3,"Compartir"),p.qZA()()}}function Xf(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",74),p.NdJ("click",function(){p.CHM(g);const b=p.oxw(2);return p.KtG(b.openPopColab(b.data.id))}),p._UZ(1,"ion-icon",86),p.TgZ(2,"ion-label",75),p._uU(3,"Invitados"),p.qZA()()}}function Au(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",74),p.NdJ("click",function(){p.CHM(g);const b=p.oxw(2);return p.KtG(b.outColab(b.data.id))}),p._UZ(1,"ion-icon",87),p.TgZ(2,"ion-label",75),p._uU(3,"Abandonar"),p.qZA()()}}function gl(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-item",89),p.NdJ("click",function(){const S=p.CHM(g).$implicit,R=p.oxw(3);return p.KtG(R.changeColor(S.idEtiqueta,S.colorEtiqueta))}),p._UZ(1,"div",90),p.qZA()}if(2&E){const g=d.$implicit;p.xp6(1),p.Udp("background",g.colorEtiqueta)}}function Ss(E,d){if(1&E&&(p.TgZ(0,"ion-content",50)(1,"ion-list"),p.YNc(2,gl,2,2,"ion-item",88),p.qZA()()),2&E){const g=p.oxw(2);p.xp6(2),p.Q6J("ngForOf",g.colores)}}function Ru(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-content",50)(1,"ion-input",91),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw(2);return p.KtG(S.mail=b)}),p.qZA(),p.TgZ(2,"ion-select",92),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw(2);return p.KtG(S.permisosInvi=b)}),p.TgZ(3,"ion-select-option",93),p._uU(4,"Lectura/Escritura"),p.qZA(),p.TgZ(5,"ion-select-option",94),p._uU(6,"Solo lectura"),p.qZA()(),p.TgZ(7,"ion-button",95),p.NdJ("click",function(){p.CHM(g);const b=p.oxw(2);return p.KtG(b.sharenote())}),p._uU(8,"Enviar invitaci\xf3n"),p.qZA()()}if(2&E){const g=p.oxw(2);p.xp6(1),p.Q6J("ngModel",g.mail),p.xp6(1),p.Q6J("ngModel",g.permisosInvi)}}function hl(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-item")(1,"ion-avatar",15),p._UZ(2,"img",100),p.qZA(),p.TgZ(3,"ion-label",101),p.NdJ("click",function(){const S=p.CHM(g).$implicit,R=p.oxw(4);return p.KtG(R.kickCollaborator(S.idUsuario,S.idnotacolab,S.idnota))}),p._uU(4),p.qZA(),p.TgZ(5,"div",102)(6,"ion-icon",103),p.NdJ("click",function(){const S=p.CHM(g).$implicit,R=p.oxw(4);return p.KtG(R.modifyPermissions(S.idUsuario,S.idnotacolab,2,S.idnota))}),p.qZA(),p.TgZ(7,"ion-label",104),p._uU(8,"Lectura "),p.qZA()(),p.TgZ(9,"div",105)(10,"ion-icon",106),p.NdJ("click",function(){const S=p.CHM(g).$implicit,R=p.oxw(4);return p.KtG(R.modifyPermissions(S.idUsuario,S.idnotacolab,1,S.idnota))}),p.qZA(),p.TgZ(11,"ion-label",104),p._uU(12,"Escritura "),p.qZA()()()}if(2&E){const g=d.$implicit;p.xp6(2),p.MGl("src","https://pruebasjulioj.000webhostapp.com/API-TIMELY/",g.foto,"",p.LSH),p.xp6(2),p.AsE(" ",g.nombreUsuario," ",g.apellidoPatUsuario," "),p.xp6(2),p.Q6J("color",2==g.permiso?"success":""),p.xp6(1),p.Q6J("color",2==g.permiso?"success":""),p.xp6(3),p.Q6J("color",1==g.permiso?"success":""),p.xp6(1),p.Q6J("color",1==g.permiso?"success":"")}}function Du(E,d){if(1&E&&(p.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),p._uU(3,"Colaboradores"),p.qZA()(),p.YNc(4,hl,13,7,"ion-item",99),p.qZA()),2&E){const g=p.oxw(3);p.xp6(4),p.Q6J("ngForOf",g.collaborators)}}function Pu(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"ion-item")(1,"ion-avatar",15),p._UZ(2,"img",100),p.qZA(),p.TgZ(3,"p",107),p._uU(4),p.qZA(),p.TgZ(5,"div",108)(6,"ion-icon",109),p.NdJ("click",function(){const S=p.CHM(g).$implicit,R=p.oxw(4);return p.KtG(R.delSendedRequests(S.idInvitacion))}),p.qZA()()()}if(2&E){const g=d.$implicit;p.xp6(2),p.MGl("src","https://pruebasjulioj.000webhostapp.com/API-TIMELY/",g.foto,"",p.LSH),p.xp6(2),p.lnq(" ",g.Receptor," ",g.apellidoPatUsuario," ",0==g.estado?"Pendiente":3==g.estado?"Aceptada":2==g.estado?"Rechazada":"Estado Desconocido"," ")}}function em(E,d){if(1&E&&(p.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),p._uU(3,"Enviadas"),p.qZA()(),p.YNc(4,Pu,7,4,"ion-item",99),p.qZA()),2&E){const g=p.oxw(3);p.xp6(4),p.Q6J("ngForOf",g.collabRequestSend)}}function mo(E,d){1&E&&(p.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),p._uU(3,"Colaboradores"),p.qZA()(),p.TgZ(4,"ion-item")(5,"p"),p._uU(6,"No hay colaboradores disponibles."),p.qZA()(),p.TgZ(7,"ion-item")(8,"div",110),p._UZ(9,"img",43),p.qZA()()())}function $s(E,d){1&E&&(p.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),p._uU(3,"Enviadas"),p.qZA()(),p.TgZ(4,"ion-item")(5,"p"),p._uU(6,"No hay solcitudes enviadas."),p.qZA()(),p.TgZ(7,"ion-item")(8,"div",110),p._UZ(9,"img",43),p.qZA()()())}function Ou(E,d){if(1&E&&(p.TgZ(0,"ion-content"),p.YNc(1,Du,5,1,"ion-list",96),p.YNc(2,em,5,1,"ion-list",96),p.YNc(3,mo,10,0,"ng-template",null,97,p.W1O),p.YNc(5,$s,10,0,"ng-template",null,98,p.W1O),p.qZA()),2&E){const g=p.MAs(4),h=p.MAs(6),b=p.oxw(2);p.xp6(1),p.Q6J("ngIf",b.collaborators.length>0)("ngIfElse",g),p.xp6(1),p.Q6J("ngIf",b.collabRequestSend.length>0)("ngIfElse",h)}}function fn(E,d){if(1&E){const g=p.EpF();p.TgZ(0,"div",68)(1,"div",69)(2,"ion-input",70),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw();return p.KtG(S.data.titulo=b)}),p.qZA(),p.TgZ(3,"input",71),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw();return p.KtG(S.data.idcolor=b)}),p.qZA(),p.TgZ(4,"input",72),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw();return p.KtG(S.data.id=b)}),p.qZA()(),p.TgZ(5,"div",73)(6,"div",74),p.NdJ("click",function(){p.CHM(g);const b=p.oxw();return p.KtG(b.closeEditor())}),p._UZ(7,"ion-icon",17),p.TgZ(8,"ion-label",75),p._uU(9,"Volver"),p.qZA()(),p.YNc(10,Qf,4,0,"div",76),p.YNc(11,va,4,0,"div",76),p.YNc(12,Nu,4,0,"div",76),p.YNc(13,Xf,4,0,"div",76),p.YNc(14,Au,4,0,"div",76),p.TgZ(15,"div",77),p._UZ(16,"ion-icon",78),p.TgZ(17,"ion-label",75),p._uU(18,"Color"),p.qZA()()()(),p.TgZ(19,"ion-content",50)(20,"editor",79),p.NdJ("ngModelChange",function(b){p.CHM(g);const S=p.oxw();return p.KtG(S.data.descripcion=b)}),p.qZA(),p.TgZ(21,"ion-popover",80),p.YNc(22,Ss,3,1,"ng-template"),p.qZA(),p.TgZ(23,"ion-popover",null,81),p.YNc(25,Ru,9,2,"ng-template"),p.qZA(),p.TgZ(26,"ion-popover",null,82),p.YNc(28,Ou,7,4,"ng-template"),p.qZA()()}if(2&E){const g=p.oxw();p.Udp("background-color",g.bgColor),p.xp6(2),p.Q6J("ngModel",g.data.titulo),p.xp6(1),p.Q6J("ngModel",g.data.idcolor),p.xp6(1),p.Q6J("ngModel",g.data.id),p.xp6(6),p.Q6J("ngIf",1==g.permissions),p.xp6(1),p.Q6J("ngIf",g.buttons),p.xp6(1),p.Q6J("ngIf",g.buttons),p.xp6(1),p.Q6J("ngIf",g.buttons),p.xp6(1),p.Q6J("ngIf",!g.buttons),p.xp6(6),p.Q6J("ngModel",g.data.descripcion)("init",g.getTinyMCEInitObject())}}function Mu(E,d){1&E&&(p.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),p._uU(3,"Compartir nota"),p.qZA()()(),p._UZ(4,"ion-content",50))}const jr=[{path:"",component:(()=>{var E;class d{constructor(h,b,S,R,L,J,te){this.http=h,this.modalController=b,this.loadingController=S,this.fb=R,this.router=L,this.alertController=J,this.changeDetectorRef=te,this.userInfo=JSON.parse(localStorage.userInfo),this.idsnote=0,this.data={titulo:"",descripcion:"",idcolor:"",id:""},this.bgColor="#fff",this.colores=[],this.mats=[],this.notes=[],this.notesColab=[],this.note=[],this.dateNote=[],this.isEditing=!1,this.permissions=1,this.buttons=!0,this.formularioNotas=this.fb.group({nota:new Le.NI("",Le.kI.required),titulo:new Le.NI("",Le.kI.required),color:new Le.NI("",Le.kI.required),fecha:new Le.NI,materia:new Le.NI}),this.notetype="",this.title="Notas"}ngOnInit(){this.getColors(),this.getMats(),this.getNotes()}openModal(){var h=this;return(0,it.Z)(function*(){yield h.modal.present()})()}set(h){this.notetype=h,console.log(this.notetype),this.title="note"==this.notetype?"Notas":"Notas colaboarivas","recordatorios"==this.notetype&&(this.title="Recordatorios"),""==this.notetype&&(this.title="Notas")}quietEditFromEditor(){var h=this;return(0,it.Z)(function*(){try{const S=new FormData;S.append("action","updatenote"),S.append("idn",h.data.id),S.append("idc",h.data.idcolor),S.append("titulo",h.data.titulo),S.append("nota",h.data.descripcion),console.log(S),h.http.post("https://pruebasjulioj.000webhostapp.com/API-TIMELY/",S).subscribe(function(){var R=(0,it.Z)(function*(L){console.log(L)});return function(L){return R.apply(this,arguments)}}(),R=>{console.error("Error al subir la aplicar cambios:",R)})}catch(S){console.log(S)}})()}editFromEditor(){var h=this;return(0,it.Z)(function*(){const b=yield h.loadingController.create({message:"Guardando cambios..."});yield b.present();try{const R=new FormData;R.append("action","updatenote"),R.append("idn",h.data.id),R.append("idc",h.data.idcolor),R.append("titulo",h.data.titulo),R.append("nota",h.data.descripcion),console.log(R),h.http.post("https://pruebasjulioj.000webhostapp.com/API-TIMELY/",R).subscribe(function(){var L=(0,it.Z)(function*(J){1===J&&(yield(yield h.alertController.create({header:"\xc9xito",message:"Se han aplicado los cambios correctamente",buttons:["Aceptar"]})).present())});return function(J){return L.apply(this,arguments)}}(),L=>{console.error("Error al subir la aplicar cambios:",L)})}catch(R){console.log(R)}finally{h.getNotes(),h.getCollaboratorNotes(),h.getFilteredNotes(2),yield b.dismiss()}})()}openPopShare(){var h=this;return(0,it.Z)(function*(){yield h.shareNote.present()})()}openPopColab(h){var b=this;return(0,it.Z)(function*(){b.getCollaborators(h),b.getSendedRequests(),yield b.users_panel.present()})()}customCounterFormatter(h,b){return b-h+" Caracteres restantes: "}getFilteredNotes(h){return 1==h?this.notes.filter(b=>"1970-01-01 00:00:00"!==b.fechaAviso):2==h?this.notes.filter(b=>"1970-01-01 00:00:00"==b.fechaAviso):this.notesColab}getMats(){var h=this;return(0,it.Z)(function*(){try{const b=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getAsigns&user=${h.userInfo.idUsuario}&curso=${h.userInfo.cursoInfo}`,S=yield h.http.get(b).toPromise();h.mats=S}catch{}})()}editarNota(h){var b=this;return(0,it.Z)(function*(){const S=yield b.loadingController.create({message:"Cargando informaci\xf3n..."});yield S.present();try{const L="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getNotes&idn="+h+"&user="+b.userInfo.idUsuario,J=yield b.http.get(L).toPromise();b.note=J}catch(L){console.log(L),yield(yield b.alertController.create({header:"Error",message:"Ha ocurrido un error al editar la nota",buttons:["Aceptar"]})).present()}finally{yield S.dismiss()}const R=yield b.modalController.create({component:fi,componentProps:{nota:h,colores:b.colores,materias:b.mats,note:b.note}});R.onDidDismiss().then(L=>{L&&1==L.data&&b.getNotes()}),yield R.present()})()}eliminarNota(h){var b=this;return(0,it.Z)(function*(){var R;yield(yield b.alertController.create({header:"Eliminar nota",message:"\xbfEst\xe1s seguro de eliminar esta nota?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:(R=(0,it.Z)(function*(){const L=yield b.loadingController.create({message:"Eliminando nota..."});yield L.present();try{const J="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=deletenote&idn="+h+"&idu="+b.userInfo.idUsuario;1==(yield b.http.get(J).toPromise())&&b.getNotes()}catch(J){console.log(J),yield(yield b.alertController.create({header:"Error",message:"Ha ocurrido un error al eliminar la nota",buttons:["Aceptar"]})).present()}finally{yield L.dismiss()}}),function(){return R.apply(this,arguments)})}]})).present()})()}getColors(){var h=this;return(0,it.Z)(function*(){try{const b="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getTags",S=yield h.http.get(b).toPromise();h.colores=S}catch(b){console.log(b)}})()}getNotes(){var h=this;return(0,it.Z)(function*(){const b=yield h.loadingController.create({message:"Cargando notas..."});yield b.present(),h.getCollaboratorNotes();try{const S="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getNotes&user="+h.userInfo.idUsuario,R=yield h.http.get(S).toPromise();h.notes=R}catch(S){console.log(S),yield(yield h.alertController.create({header:"Error",message:"Ha ocurrido un error durante la carga de las notas",buttons:["Aceptar"]})).present()}finally{yield b.dismiss()}})()}setNotif(h,b){return(0,it.Z)(function*(){const S=new Date(h);rr.s.schedule({notifications:[{title:"\xa1Recuerda!",body:b,id:1,schedule:{at:S}}]});const R=new Date(S.getTime()-3e5);rr.s.schedule({notifications:[{title:"En 5 minutos",body:b,id:2,schedule:{at:R}}]});const L=new Date(S.getTime()-9e5);rr.s.schedule({notifications:[{title:"En 15 minutos",body:b,id:3,schedule:{at:L}}]}),yield rr.s.getPending()})()}guardar(){var h=this;return(0,it.Z)(function*(){const b=new Date;var S=h.formularioNotas.value,R="1970-01-01 00:00:00";if(h.formularioNotas.invalid)yield(yield h.alertController.create({header:"Datos incompletos",message:"Tienes que llenar todos los campos",buttons:["Aceptar"]})).present();else{if(null!=S.fecha){if(new Date(S.fecha)<b)return void(yield(yield h.alertController.create({header:"Error de fecha",message:"No puedes establecer una fecha pasada a una nota",buttons:["Aceptar"]})).present());R=di(dt(S.fecha+""),"yyyy-MM-dd HH:mm:ss")}"1970-01-01 00:00:00"!==R&&h.setNotif(R,S.titulo);const L=yield h.loadingController.create({message:"Guardando...",spinner:"crescent"});yield L.present();const J=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?user=${h.userInfo.idUsuario}&nota=${S.nota}&color=${S.color}&fecha=${R}&action=saveNote&mat=${S.materia}&titulo=${S.titulo}`;try{1==(yield h.http.get(J).toPromise())?(yield h.modal.dismiss(),h.formularioNotas.reset(),h.getNotes()):yield(yield h.alertController.create({header:"Error",message:"Error al guardar.",buttons:["Aceptar"]})).present()}catch(te){console.error(te),yield(yield h.alertController.create({header:"Error",message:"Error al guardar.",buttons:["Aceptar"]})).present()}finally{yield L.dismiss()}}})()}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.guardar()}getCollaboratorNotes(){var h=this;return(0,it.Z)(function*(){try{const b="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getCollaboratorNotes&user="+h.userInfo.idUsuario,S=yield h.http.get(b).toPromise();h.notesColab=S}catch(b){console.log(b)}})()}ionViewDidEnter(){this.getCollaboratorNotes(),this.getNotes()}startEditing(){this.isEditing=!0,console.log(this.isEditing)}endEditing(){this.isEditing=!1,console.log(this.isEditing)}getTinyMCEInitObject(){return{base_url:"/tinymce",plugins:"lists link image table code help wordcount",suffix:".min",setup:h=>{h.on("focus",()=>this.startEditing()),h.on("blur",()=>this.endEditing())}}}iniciarIntervalo(h){var b=this;return(0,it.Z)(function*(){b.intervalo=setInterval((0,it.Z)(function*(){try{if(b.isEditing)b.quietEditFromEditor();else{const S=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=reloadNotes&idn=${h}`,R=yield b.http.get(S).toPromise();b.temp=R,b.data.titulo=b.temp[0].titulo,b.data.descripcion=b.temp[0].texto,b.data.id=b.temp[0].idNota,b.bgColor=b.temp[0].color,b.data.idcolor=b.temp[0].idEtiqueta,b.idsnote=b.values[0].idNota,b.getCollaborators(b.values[0].idNota)}}catch(S){console.log(S)}}),1e3)})()}ngOnDestroy(){this.detenerIntervalo()}detenerIntervalo(){clearInterval(this.intervalo)}editarNotaView(h,b,S){var R=this;return(0,it.Z)(function*(){R.getCollaboratorNotes(),R.iniciarIntervalo(h.idNota),yield R.noteOpen.present();const L=yield R.loadingController.create({message:"abriendo nota...",spinner:"crescent"});yield L.present();try{if(b)try{const te="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getNotes&idn="+h.idNota+"&user="+R.userInfo.idUsuario,ue=yield R.http.get(te).toPromise();R.values=ue,console.log(R.values),R.buttons=b,R.permissions=Number(S),R.data.titulo=R.values[0].titulo,R.data.descripcion=R.values[0].texto,R.data.id=R.values[0].idNota,R.bgColor=R.values[0].color,R.data.idcolor=R.values[0].idEtiqueta,R.idsnote=R.values[0].idNota,R.getCollaborators(h.idNota)}catch(te){console.log(te)}else try{const te="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getCollaboratorNote&idn="+h.idNota+"&user="+R.userInfo.idUsuario,ue=yield R.http.get(te).toPromise();R.values=ue,R.buttons=b,R.permissions=R.values[0].permiso,R.data.titulo=R.values[0].titulo,R.data.descripcion=R.values[0].texto,R.data.id=R.values[0].idNota,R.bgColor=R.values[0].color,R.data.idcolor=R.values[0].idEtiqueta,R.idsnote=R.values[0].idNota}catch(te){console.log(te)}R.getSendedRequests(),setInterval(()=>{if(ca().activeEditor){const te=1==R.permissions?"true":"false";ca().activeEditor.getBody().setAttribute("contenteditable",te)}},100)}catch(J){console.log(J)}finally{L.dismiss()}})()}closeEditor(){this.noteOpen.dismiss(),this.detenerIntervalo()}modifyPermissions(h,b,S,R){var L=this;return(0,it.Z)(function*(){const J=yield L.loadingController.create({message:"aplicando cambios...",spinner:"crescent"});yield J.present();try{const te=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=modifyPermissions&user=${h}&idc=${b}&perm=${S}&idn=${R}`;yield L.http.get(te).toPromise()}catch(te){console.log(te)}finally{L.getCollaborators(R),J.dismiss()}})()}kickCollaborator(h,b,S){var R=this;return(0,it.Z)(function*(){var J;(yield R.alertController.create({header:"\xbfEst\xe1s seguro?",message:"\xbfEst\xe1s seguro de eliminar a este colaborador?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"\xa1adi\xf3s!",handler:(J=(0,it.Z)(function*(){const te=yield R.loadingController.create({message:"eliminando colaborador...",spinner:"crescent"});yield te.present();try{const ue=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=kickCollaborator&user=${h}&idc=${b}&idn=${S}`;yield R.http.get(ue).toPromise()}catch(ue){console.log(ue)}finally{R.getCollaborators(S),te.dismiss()}}),function(){return J.apply(this,arguments)})}]})).present()})()}onChangeColor(h){var b=this;return(0,it.Z)(function*(){console.log("ogo"),b.quietEditFromEditor()})()}getCollaborators(h){var b=this;return(0,it.Z)(function*(){try{const S="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getCollaborators&idn="+h,R=yield b.http.get(S).toPromise();b.collaborators=R}catch(S){console.log(S)}})()}delSendedRequests(h){var b=this;return(0,it.Z)(function*(){var R;(yield b.alertController.create({header:"\xbfEst\xe1s seguro?",message:"\xbfEst\xe1s seguro de eliminar esta solicitud?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:(R=(0,it.Z)(function*(){const L=yield b.loadingController.create({message:"eliminando solicitud...",spinner:"crescent"});yield L.present();try{const J="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=delSendedRequests&idi="+h;1==(yield b.http.get(J).toPromise())&&(yield(yield b.alertController.create({header:"Exito",message:"Se ha elminado esta solicitud",buttons:["Aceptar"]})).present(),b.getSendedRequests())}catch(J){yield(yield b.alertController.create({header:"Error",message:"No se ha podido eliminar la solicitud",buttons:["Aceptar"]})).present(),console.log(J)}finally{L.dismiss()}}),function(){return R.apply(this,arguments)})}]})).present()})()}getSendedRequests(){var h=this;return(0,it.Z)(function*(){try{const b="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=getSendedRequests&user="+h.userInfo.idUsuario,S=yield h.http.get(b).toPromise();h.collabRequestSend=S}catch(b){console.log(b)}})()}noteEditReady(h){return(0,it.Z)(function*(){console.log(h)})()}changeColor(h,b){this.data.idcolor=h,this.bgColor=b,this.quietEditFromEditor()}onTTChange(){console.log("onTTChange triggered"),this.data.titulo=this.tt,this.quietEditFromEditor()}outColab(h){var b=this;return(0,it.Z)(function*(){var R;(yield b.alertController.create({header:"\xbfEst\xe1s seguro?",message:"\xbfEst\xe1s seguro de salir de esta colaboraci\xf3n?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Salir",handler:(R=(0,it.Z)(function*(){const L=yield b.loadingController.create({message:"eliminando colaboracion...",spinner:"crescent"});yield L.present();try{const J=`https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=outCollab&user=${b.userInfo.idUsuario}&idn=${h}`;yield b.http.get(J).toPromise()}catch(J){console.log(J)}finally{b.getCollaboratorNotes(),L.dismiss()}}),function(){return R.apply(this,arguments)})}]})).present()})()}sharenote(){var h=this;return(0,it.Z)(function*(){var S;""!=h.mail&&""!=mi("#permisosI").val()?yield(yield h.alertController.create({header:"Compartir nota",message:"\xbfEst\xe1s seguro de compartir esta nota?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"compartir",handler:(S=(0,it.Z)(function*(){const R=yield h.loadingController.create({message:"buscando usuario..."});yield R.present();try{const L="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=searchuser&mail="+h.mail,J=yield h.http.get(L).toPromise();if("no"==J)yield R.dismiss(),yield(yield h.alertController.create({header:"Error",message:"No se ha encontrado ninguna cuenta con este correo",buttons:["Aceptar"]})).present();else{yield R.dismiss();const te=yield h.loadingController.create({message:"enviando invitaci\xf3n..."});yield te.present();try{const ue="https://pruebasjulioj.000webhostapp.com/API-TIMELY/?action=sharenote&idn="+h.idsnote+"&iduE="+h.userInfo.idUsuario+"&iduR="+J+"&permiso="+mi("#permisosI").val(),ke=yield h.http.get(ue).toPromise();console.log(ue),yield te.dismiss(),"\xc9xito"==ke?(yield(yield h.alertController.create({header:"Exito",message:"Se ha compartido la nota, estado:Pendiente",buttons:["Aceptar"]})).present(),h.getSendedRequests()):console.log("error")}catch(ue){console.log(ue),yield(yield h.alertController.create({header:"Error",message:"Ha ocurrido un error al compartir la nota",buttons:["Aceptar"]})).present()}finally{yield R.dismiss()}}}catch(L){console.log(L)}finally{yield R.dismiss()}}),function(){return S.apply(this,arguments)})}]})).present():yield(yield h.alertController.create({header:"Error",message:"Completa los campos para continuar",buttons:["Aceptar"]})).present()})()}}return(E=d).\u0275fac=function(h){return new(h||E)(p.Y36(ia.eN),p.Y36(Po.IN),p.Y36(Po.HT),p.Y36(Le.qu),p.Y36(tn.F0),p.Y36(Po.Br),p.Y36(p.sBO))},E.\u0275cmp=p.Xpm({type:E,selectors:[["app-tab4"]],viewQuery:function(h,b){if(1&h&&(p.Gf(qf,5),p.Gf(cr,5),p.Gf(dc,5),p.Gf(Wf,5),p.Gf(jf,5)),2&h){let S;p.iGM(S=p.CRH())&&(b.modal=S.first),p.iGM(S=p.CRH())&&(b.sharemodal=S.first),p.iGM(S=p.CRH())&&(b.noteOpen=S.first),p.iGM(S=p.CRH())&&(b.shareNote=S.first),p.iGM(S=p.CRH())&&(b.users_panel=S.first)}},decls:25,vars:10,consts:[["slot","start",4,"ngIf"],[3,"fullscreen"],[1,"container"],["vertical","bottom","horizontal","end","slot","fixed","edge","top","class","fab-button",4,"ngIf"],["class","animate__animated animate__zoomIn",4,"ngIf"],["class","ion-padding ion-margin text-center",4,"ngIf"],["class","mt-5"],["noNotas",""],[4,"ngIf"],["modal",""],["backdropDismiss","false","keyboardClose","false"],["noteOpen",""],[3,"ngSubmit"],["forma","ngForm"],["share",""],["slot","start"],[3,"click"],["name","arrow-back-outline"],["vertical","bottom","horizontal","end","slot","fixed","edge","top",1,"fab-button"],["name","add"],["side","top"],["name","create"],[1,"animate__animated","animate__zoomIn"],["class","row mt-4 ",4,"ngIf","ngIfElse"],[1,"row","mt-4"],["class","col-lg-3 col-md-6 col-sm-12 mb-4",3,"id",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-6","col-sm-12","mb-4",3,"id"],["role","button",1,"note",3,"click"],[1,"titulo-nota","negro"],[1,"negro"],[1,"texto-nota",3,"innerHTML"],[1,"ion-padding","ion-margin","text-center"],[1,"row"],[1,"col-1"],[1,"col-10"],[1,"col-lg-4","col-12","text-center","ion-margin-left","ion-margin-right"],["id","banner","role","button",3,"click"],["alt","Silhouette of mountains","id","banner2","src","https://pruebasjulioj.000webhostapp.com/API-TIMELY/img/notas.png"],["alt","Silhouette of mountains","id","banner2","src","https://pruebasjulioj.000webhostapp.com/API-TIMELY/img/colab.png"],["alt","Silhouette of mountains","id","banner2","src","https://pruebasjulioj.000webhostapp.com/API-TIMELY/img/recs.png"],["class","row mt-4",4,"ngIf","ngIfElse"],[1,"mt-5","fs-2","text-center"],[1,"text-center"],["src","../../assets/img/empty.png","alt","",1,"mx-auto"],["name","add-outline"],[1,"container","calendar"],[1,"col-12"],["id","edit-note-date","hidden",""],["slot","end"],[3,"strong","click"],[1,"ion-padding"],[1,"row","justify-content-center"],[1,""],[1,"login-form"],[3,"formGroup"],[1,"col-lg-6","col-md-12","col-sm-12"],["label","Titulo:","id","ttbox","label-placement","floating","formControlName","titulo","fill","solid","placeholder","Escribe el titulo",3,"ngModel","ngModelChange","ionChange"],["interface","action-sheet","formControlName","materia"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["formControlName","nota","name","nota",3,"init"],["for",""],["formControlName","color","id","cokewo",1,"form-select"],["disabled","","selected","","value","-1"],[3,"value","background-color",4,"ngFor","ngForOf"],["formControlName","fecha"],["slot","title"],[3,"value"],["id","jead",1,"row"],[1,"col-sm-12","col-md-12","col-lg-12"],["label","Titulo","labelPlacement","floating","fill","outline","placeholder","Titulo","name","titulo",2,"width","100%","color","black",3,"ngModel","ngModelChange"],["type","hidden","name","idcolor",3,"ngModel","ngModelChange"],["type","hidden","name","id",3,"ngModel","ngModelChange"],[1,"row","button-container","mt-2","text-center"],[1,"col-2","col-md-2","col-lg-2","custom-button",3,"click"],[1,"d-block","text-center"],["class","col-2 col-md-2 col-lg-2 custom-button",3,"click",4,"ngIf"],["id","hover-trigger",1,"col-2","col-md-2","col-lg-2","custom-button"],["name","color-palette-outline"],["name","descripcion",3,"ngModel","init","ngModelChange"],["trigger","hover-trigger","triggerAction","hover"],["shareNote",""],["users_panel",""],["name","save-outline"],["name","trash-outline"],["name","share-social-outline"],["name","people-outline"],["name","log-out-outline"],["role","button",3,"click",4,"ngFor","ngForOf"],["role","button",3,"click"],[2,"width","100%","height","100%"],["label","Correo Electr\xf3nico","labelPlacement","floating","fill","outline","placeholder","email@domain.com","name","mail",2,"width","100%",3,"ngModel","ngModelChange"],["id","permisosI","fill","outline","placeholder","Selecciona los permisos para el usuario","name","permisosInvi",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["color","light",2,"width","100%",3,"click"],[4,"ngIf","ngIfElse"],["noCollaborators",""],["noReqs",""],[4,"ngFor","ngForOf"],["alt","",3,"src"],["role","button",1,"subtext",3,"click"],[1,"custom-button","text-center"],["name","book-outline","role","button",3,"color","click"],[1,"d-block","text-center",3,"color"],[1,"custom-button","text-center","ms-1"],["name","pencil-outline","role","button",3,"color","click"],["role","button",1,"subtext"],[1,"custom-button","text-center","ms-5"],["name","trash-outline","role","button","color","danger",3,"click"],[1,"text-center","mb-2"]],template:function(h,b){if(1&h){const S=p.EpF();p.TgZ(0,"ion-header")(1,"ion-toolbar"),p.YNc(2,Vf,3,0,"ion-buttons",0),p.TgZ(3,"ion-title"),p._uU(4),p.qZA()()(),p.TgZ(5,"ion-content",1)(6,"div",2),p.YNc(7,Tu,8,0,"ion-fab",3),p.YNc(8,ku,2,2,"div",4),p.YNc(9,Fs,24,0,"div",5),p.YNc(10,Yf,2,2,"div",4),p.YNc(11,Kf,7,0,"ng-template",6,7,p.W1O),p.qZA(),p.YNc(13,ha,6,0,"div",8),p.TgZ(14,"ion-modal",null,9),p.YNc(16,Wr,40,7,"ng-template"),p.qZA(),p.TgZ(17,"ion-modal",10,11)(19,"form",12,13),p.NdJ("ngSubmit",function(){p.CHM(S);const L=p.MAs(20);return p.KtG(b.noteEditReady(L))}),p.YNc(21,fn,29,12,"ng-template"),p.qZA()(),p.TgZ(22,"ion-modal",null,14),p.YNc(24,Mu,5,0,"ng-template"),p.qZA()()}2&h&&(p.xp6(2),p.Q6J("ngIf",""!=b.notetype),p.xp6(2),p.hij(" ",b.title," "),p.xp6(1),p.Q6J("fullscreen",!0),p.xp6(2),p.Q6J("ngIf",""!=b.notetype),p.xp6(1),p.Q6J("ngIf","note"==b.notetype),p.xp6(1),p.Q6J("ngIf",""==b.notetype),p.xp6(1),p.Q6J("ngIf","colab"==b.notetype),p.xp6(3),p.Q6J("ngIf","recordatorios"==b.notetype),p.xp6(4),p.Udp("background-color",b.bgColor))},dependencies:[vo.sg,vo.O5,Le._Y,Le.YN,Le.Kr,Le.Fj,Le.EJ,Le.JJ,Le.JL,Le.On,Le.F,$e.BJ,$e.YG,$e.Sm,$e.PM,$e.FN,$e.Zi,$e.tO,$e.Dq,$e.W2,$e.x4,$e.IJ,$e.W4,$e.zq,$e.Gu,$e.gu,$e.pK,$e.Ie,$e.Q$,$e.q_,$e.yh,$e.t9,$e.n0,$e.wd,$e.sr,$e.ki,$e.d8,$e.QI,$e.j9,Le.sg,Le.u,pi.PG,_u],styles:[".note[_ngcontent-%COMP%]{--color: #000;height:250px;border-radius:10px}#miModal[_ngcontent-%COMP%]{display:none}.negro[_ngcontent-%COMP%]{--color: #000}#banner[_ngcontent-%COMP%]{width:250px;height:300px}.fab-button[_ngcontent-%COMP%]{margin-bottom:120px;margin-right:20px}.animate__animated.animate__zoomIn[_ngcontent-%COMP%]{--animate-duration: .2s}.fc[_ngcontent-%COMP%]{text-decoration:none}.fc-day-header[_ngcontent-%COMP%]{background-color:#ccc;font-weight:700}#cokewo[_ngcontent-%COMP%]{border:none;border-radius:5px 5px 0 0;color:#fff;height:50px;background-color:#1f1f1f}#jead[_ngcontent-%COMP%]{width:105%;height:180px;padding:5%}.custom-button[_ngcontent-%COMP%]{cursor:pointer}.d-block[_ngcontent-%COMP%]{font-size:10px}.subtext[_ngcontent-%COMP%]{font-size:12px}.titulo-nota[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.texto-nota[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;height:60px}"]}),d})()}];let Ei=(()=>{var E;class d{}return(E=d).\u0275fac=function(h){return new(h||E)},E.\u0275mod=p.oAB({type:E}),E.\u0275inj=p.cJS({imports:[tn.Bz.forChild(jr),tn.Bz]}),d})();var qt=en(822);let Us=(()=>{var E;class d{}return(E=d).\u0275fac=function(h){return new(h||E)},E.\u0275mod=p.oAB({type:E}),E.\u0275inj=p.cJS({imports:[vo.ez,Le.u5,qt.K,$e.Pc,Le.UX,pi.Z_,Ei,Eo.z]}),d})()},2276:function(Ns,ni){var vo;!function(Le,$e){"use strict";"object"==typeof Ns.exports?Ns.exports=Le.document?$e(Le,!0):function(tn){if(!tn.document)throw new Error("jQuery requires a window with a document");return $e(tn)}:$e(Le)}(typeof window<"u"?window:this,function(Le,$e){"use strict";var tn=[],it=Object.getPrototypeOf,pn=tn.slice,ms=tn.flat?function(l){return tn.flat.call(l)}:function(l){return tn.concat.apply([],l)},Uo=tn.push,_n=tn.indexOf,As={},Qa=As.toString,tr=As.hasOwnProperty,Kl=tr.toString,Jl=Kl.call(Object),Ct={},ht=function(u){return"function"==typeof u&&"number"!=typeof u.nodeType&&"function"!=typeof u.item},ps=function(u){return null!=u&&u===u.window},mt=Le.document,Er={type:!0,src:!0,nonce:!0,noModule:!0};function Fe(l,u,f){var y,_,k=(f=f||mt).createElement("script");if(k.text=l,u)for(y in Er)(_=u[y]||u.getAttribute&&u.getAttribute(y))&&k.setAttribute(y,_);f.head.appendChild(k).parentNode.removeChild(k)}function cn(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?As[Qa.call(l)]||"object":typeof l}var gn=/HTML$/i,C=function(l,u){return new C.fn.init(l,u)};function qn(l){var u=!!l&&"length"in l&&l.length,f=cn(l);return!ht(l)&&!ps(l)&&("array"===f||0===u||"number"==typeof u&&u>0&&u-1 in l)}function dt(l,u){return l.nodeName&&l.nodeName.toLowerCase()===u.toLowerCase()}C.fn=C.prototype={jquery:"3.7.1",constructor:C,length:0,toArray:function(){return pn.call(this)},get:function(l){return null==l?pn.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var u=C.merge(this.constructor(),l);return u.prevObject=this,u},each:function(l){return C.each(this,l)},map:function(l){return this.pushStack(C.map(this,function(u,f){return l.call(u,f,u)}))},slice:function(){return this.pushStack(pn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(l,u){return(u+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(l,u){return u%2}))},eq:function(l){var u=this.length,f=+l+(l<0?u:0);return this.pushStack(f>=0&&f<u?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:Uo,sort:tn.sort,splice:tn.splice},C.extend=C.fn.extend=function(){var l,u,f,y,_,k,N=arguments[0]||{},U=1,B=arguments.length,G=!1;for("boolean"==typeof N&&(G=N,N=arguments[U]||{},U++),"object"!=typeof N&&!ht(N)&&(N={}),U===B&&(N=this,U--);U<B;U++)if(null!=(l=arguments[U]))for(u in l)y=l[u],"__proto__"!==u&&N!==y&&(G&&y&&(C.isPlainObject(y)||(_=Array.isArray(y)))?(f=N[u],k=_&&!Array.isArray(f)?[]:_||C.isPlainObject(f)?f:{},_=!1,N[u]=C.extend(G,k,y)):void 0!==y&&(N[u]=y));return N},C.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var u,f;return!(!l||"[object Object]"!==Qa.call(l)||(u=it(l))&&("function"!=typeof(f=tr.call(u,"constructor")&&u.constructor)||Kl.call(f)!==Jl))},isEmptyObject:function(l){var u;for(u in l)return!1;return!0},globalEval:function(l,u,f){Fe(l,{nonce:u&&u.nonce},f)},each:function(l,u){var f,y=0;if(qn(l))for(f=l.length;y<f&&!1!==u.call(l[y],y,l[y]);y++);else for(y in l)if(!1===u.call(l[y],y,l[y]))break;return l},text:function(l){var u,f="",y=0,_=l.nodeType;if(!_)for(;u=l[y++];)f+=C.text(u);return 1===_||11===_?l.textContent:9===_?l.documentElement.textContent:3===_||4===_?l.nodeValue:f},makeArray:function(l,u){var f=u||[];return null!=l&&(qn(Object(l))?C.merge(f,"string"==typeof l?[l]:l):Uo.call(f,l)),f},inArray:function(l,u,f){return null==u?-1:_n.call(u,l,f)},isXMLDoc:function(l){var f=l&&(l.ownerDocument||l).documentElement;return!gn.test(l&&l.namespaceURI||f&&f.nodeName||"HTML")},merge:function(l,u){for(var f=+u.length,y=0,_=l.length;y<f;y++)l[_++]=u[y];return l.length=_,l},grep:function(l,u,f){for(var _=[],k=0,N=l.length,U=!f;k<N;k++)!u(l[k],k)!==U&&_.push(l[k]);return _},map:function(l,u,f){var y,_,k=0,N=[];if(qn(l))for(y=l.length;k<y;k++)null!=(_=u(l[k],k,f))&&N.push(_);else for(k in l)null!=(_=u(l[k],k,f))&&N.push(_);return ms(N)},guid:1,support:Ct}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=tn[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,u){As["[object "+u+"]"]=u.toLowerCase()});var Gt=tn.pop,ve=tn.sort,St=tn.splice,_t="[\\x20\\t\\r\\n\\f]",zo=new RegExp("^"+_t+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_t+"+$","g");C.contains=function(l,u){var f=u&&u.parentNode;return l===f||!(!f||1!==f.nodeType||!(l.contains?l.contains(f):l.compareDocumentPosition&&16&l.compareDocumentPosition(f)))};var et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function gs(l,u){return u?"\0"===l?"\ufffd":l.slice(0,-1)+"\\"+l.charCodeAt(l.length-1).toString(16)+" ":"\\"+l}C.escapeSelector=function(l){return(l+"").replace(et,gs)};var no=mt,Ce=Uo;!function(){var l,u,f,y,_,N,U,B,G,le,k=Ce,pe=C.expando,se=0,xe=0,lt=$r(),Ot=$r(),xt=$r(),kn=$r(),Cn=function(I,W){return I===W&&(_=!0),0},Mo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",so="(?:\\\\[\\da-fA-F]{1,6}"+_t+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",At="\\["+_t+"*("+so+")(?:"+_t+"*([*^$|!~]?=)"+_t+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+so+"))|)"+_t+"*\\]",Rt=":("+so+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+At+")*)|.*)\\)|)",Mt=new RegExp(_t+"+","g"),Qt=new RegExp("^"+_t+"*,"+_t+"*"),Br=new RegExp("^"+_t+"*([>+~]|"+_t+")"+_t+"*"),Lr=new RegExp(_t+"|>"),on=new RegExp(Rt),Bn=new RegExp("^"+so+"$"),Io={ID:new RegExp("^#("+so+")"),CLASS:new RegExp("^\\.("+so+")"),TAG:new RegExp("^("+so+"|[*])"),ATTR:new RegExp("^"+At),PSEUDO:new RegExp("^"+Rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_t+"*(even|odd|(([+-]|)(\\d*)n|)"+_t+"*(?:([+-]|)"+_t+"*(\\d+)|))"+_t+"*\\)|)","i"),bool:new RegExp("^(?:"+Mo+")$","i"),needsContext:new RegExp("^"+_t+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_t+"*((?:-\\d)?\\d*)"+_t+"*\\)|)(?=[^-]|$)","i")},Es=/^(?:input|select|textarea|button)$/i,Vo=/^h\d$/i,co=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,un=/[+~]/,Ln=new RegExp("\\\\[\\da-fA-F]{1,6}"+_t+"?|\\\\([^\\r\\n\\f])","g"),dn=function(I,W){var oe="0x"+I.slice(1)-65536;return W||(oe<0?String.fromCharCode(oe+65536):String.fromCharCode(oe>>10|55296,1023&oe|56320))},Xo=function(){ws()},Fr=yi(function(I){return!0===I.disabled&&dt(I,"fieldset")},{dir:"parentNode",next:"legend"});try{k.apply(tn=pn.call(no.childNodes),no.childNodes)}catch{k={apply:function(W,oe){Ce.apply(W,pn.call(oe))},call:function(W){Ce.apply(W,pn.call(arguments,1))}}}function Ht(I,W,oe,ie){var ne,_e,Ue,qe,ze,vt,Je,at=W&&W.ownerDocument,Et=W?W.nodeType:9;if(oe=oe||[],"string"!=typeof I||!I||1!==Et&&9!==Et&&11!==Et)return oe;if(!ie&&(ws(W),W=W||N,B)){if(11!==Et&&(ze=co.exec(I)))if(ne=ze[1]){if(9===Et){if(!(Ue=W.getElementById(ne)))return oe;if(Ue.id===ne)return k.call(oe,Ue),oe}else if(at&&(Ue=at.getElementById(ne))&&Ht.contains(W,Ue)&&Ue.id===ne)return k.call(oe,Ue),oe}else{if(ze[2])return k.apply(oe,W.getElementsByTagName(I)),oe;if((ne=ze[3])&&W.getElementsByClassName)return k.apply(oe,W.getElementsByClassName(ne)),oe}if(!(kn[I+" "]||G&&G.test(I))){if(Je=I,at=W,1===Et&&(Lr.test(I)||Br.test(I))){for(((at=un.test(I)&&vi(W.parentNode)||W)!=W||!Ct.scope)&&((qe=W.getAttribute("id"))?qe=C.escapeSelector(qe):W.setAttribute("id",qe=pe)),_e=(vt=lr(I)).length;_e--;)vt[_e]=(qe?"#"+qe:":scope")+" "+ts(vt[_e]);Je=vt.join(",")}try{return k.apply(oe,at.querySelectorAll(Je)),oe}catch{kn(I,!0)}finally{qe===pe&&W.removeAttribute("id")}}}return ga(I.replace(zo,"$1"),W,oe,ie)}function $r(){var I=[];return function W(oe,ie){return I.push(oe+" ")>u.cacheLength&&delete W[I.shift()],W[oe+" "]=ie}}function uo(I){return I[pe]=!0,I}function ar(I){var W=N.createElement("fieldset");try{return!!I(W)}catch{return!1}finally{W.parentNode&&W.parentNode.removeChild(W),W=null}}function ic(I){return function(W){return dt(W,"input")&&W.type===I}}function Ur(I){return function(W){return(dt(W,"input")||dt(W,"button"))&&W.type===I}}function Bs(I){return function(W){return"form"in W?W.parentNode&&!1===W.disabled?"label"in W?"label"in W.parentNode?W.parentNode.disabled===I:W.disabled===I:W.isDisabled===I||W.isDisabled!==!I&&Fr(W)===I:W.disabled===I:"label"in W&&W.disabled===I}}function es(I){return uo(function(W){return W=+W,uo(function(oe,ie){for(var ne,_e=I([],oe.length,W),Ue=_e.length;Ue--;)oe[ne=_e[Ue]]&&(oe[ne]=!(ie[ne]=oe[ne]))})})}function vi(I){return I&&typeof I.getElementsByTagName<"u"&&I}function ws(I){var W,oe=I?I.ownerDocument||I:no;return oe==N||9!==oe.nodeType||!oe.documentElement||(U=(N=oe).documentElement,B=!C.isXMLDoc(N),le=U.matches||U.webkitMatchesSelector||U.msMatchesSelector,U.msMatchesSelector&&no!=N&&(W=N.defaultView)&&W.top!==W&&W.addEventListener("unload",Xo),Ct.getById=ar(function(ie){return U.appendChild(ie).id=C.expando,!N.getElementsByName||!N.getElementsByName(C.expando).length}),Ct.disconnectedMatch=ar(function(ie){return le.call(ie,"*")}),Ct.scope=ar(function(){return N.querySelectorAll(":scope")}),Ct.cssHas=ar(function(){try{return N.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Ct.getById?(u.filter.ID=function(ie){var ne=ie.replace(Ln,dn);return function(_e){return _e.getAttribute("id")===ne}},u.find.ID=function(ie,ne){if(typeof ne.getElementById<"u"&&B){var _e=ne.getElementById(ie);return _e?[_e]:[]}}):(u.filter.ID=function(ie){var ne=ie.replace(Ln,dn);return function(_e){var Ue=typeof _e.getAttributeNode<"u"&&_e.getAttributeNode("id");return Ue&&Ue.value===ne}},u.find.ID=function(ie,ne){if(typeof ne.getElementById<"u"&&B){var _e,Ue,qe,ze=ne.getElementById(ie);if(ze){if((_e=ze.getAttributeNode("id"))&&_e.value===ie)return[ze];for(qe=ne.getElementsByName(ie),Ue=0;ze=qe[Ue++];)if((_e=ze.getAttributeNode("id"))&&_e.value===ie)return[ze]}return[]}}),u.find.TAG=function(ie,ne){return typeof ne.getElementsByTagName<"u"?ne.getElementsByTagName(ie):ne.querySelectorAll(ie)},u.find.CLASS=function(ie,ne){if(typeof ne.getElementsByClassName<"u"&&B)return ne.getElementsByClassName(ie)},G=[],ar(function(ie){var ne;U.appendChild(ie).innerHTML="<a id='"+pe+"' href='' disabled='disabled'></a><select id='"+pe+"-\r\\' disabled='disabled'><option selected=''></option></select>",ie.querySelectorAll("[selected]").length||G.push("\\["+_t+"*(?:value|"+Mo+")"),ie.querySelectorAll("[id~="+pe+"-]").length||G.push("~="),ie.querySelectorAll("a#"+pe+"+*").length||G.push(".#.+[+~]"),ie.querySelectorAll(":checked").length||G.push(":checked"),(ne=N.createElement("input")).setAttribute("type","hidden"),ie.appendChild(ne).setAttribute("name","D"),U.appendChild(ie).disabled=!0,2!==ie.querySelectorAll(":disabled").length&&G.push(":enabled",":disabled"),(ne=N.createElement("input")).setAttribute("name",""),ie.appendChild(ne),ie.querySelectorAll("[name='']").length||G.push("\\["+_t+"*name"+_t+"*="+_t+"*(?:''|\"\")")}),Ct.cssHas||G.push(":has"),G=G.length&&new RegExp(G.join("|")),Cn=function(ie,ne){if(ie===ne)return _=!0,0;var _e=!ie.compareDocumentPosition-!ne.compareDocumentPosition;return _e||(1&(_e=(ie.ownerDocument||ie)==(ne.ownerDocument||ne)?ie.compareDocumentPosition(ne):1)||!Ct.sortDetached&&ne.compareDocumentPosition(ie)===_e?ie===N||ie.ownerDocument==no&&Ht.contains(no,ie)?-1:ne===N||ne.ownerDocument==no&&Ht.contains(no,ne)?1:y?_n.call(y,ie)-_n.call(y,ne):0:4&_e?-1:1)}),N}for(l in Ht.matches=function(I,W){return Ht(I,null,null,W)},Ht.matchesSelector=function(I,W){if(ws(I),B&&!kn[W+" "]&&(!G||!G.test(W)))try{var oe=le.call(I,W);if(oe||Ct.disconnectedMatch||I.document&&11!==I.document.nodeType)return oe}catch{kn(W,!0)}return Ht(W,N,null,[I]).length>0},Ht.contains=function(I,W){return(I.ownerDocument||I)!=N&&ws(I),C.contains(I,W)},Ht.attr=function(I,W){(I.ownerDocument||I)!=N&&ws(I);var oe=u.attrHandle[W.toLowerCase()],ie=oe&&tr.call(u.attrHandle,W.toLowerCase())?oe(I,W,!B):void 0;return void 0!==ie?ie:I.getAttribute(W)},Ht.error=function(I){throw new Error("Syntax error, unrecognized expression: "+I)},C.uniqueSort=function(I){var W,oe=[],ie=0,ne=0;if(_=!Ct.sortStable,y=!Ct.sortStable&&pn.call(I,0),ve.call(I,Cn),_){for(;W=I[ne++];)W===I[ne]&&(ie=oe.push(ne));for(;ie--;)St.call(I,oe[ie],1)}return y=null,I},C.fn.uniqueSort=function(){return this.pushStack(C.uniqueSort(pn.apply(this)))},(u=C.expr={cacheLength:50,createPseudo:uo,match:Io,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(I){return I[1]=I[1].replace(Ln,dn),I[3]=(I[3]||I[4]||I[5]||"").replace(Ln,dn),"~="===I[2]&&(I[3]=" "+I[3]+" "),I.slice(0,4)},CHILD:function(I){return I[1]=I[1].toLowerCase(),"nth"===I[1].slice(0,3)?(I[3]||Ht.error(I[0]),I[4]=+(I[4]?I[5]+(I[6]||1):2*("even"===I[3]||"odd"===I[3])),I[5]=+(I[7]+I[8]||"odd"===I[3])):I[3]&&Ht.error(I[0]),I},PSEUDO:function(I){var W,oe=!I[6]&&I[2];return Io.CHILD.test(I[0])?null:(I[3]?I[2]=I[4]||I[5]||"":oe&&on.test(oe)&&(W=lr(oe,!0))&&(W=oe.indexOf(")",oe.length-W)-oe.length)&&(I[0]=I[0].slice(0,W),I[2]=oe.slice(0,W)),I.slice(0,3))}},filter:{TAG:function(I){var W=I.replace(Ln,dn).toLowerCase();return"*"===I?function(){return!0}:function(oe){return dt(oe,W)}},CLASS:function(I){var W=lt[I+" "];return W||(W=new RegExp("(^|"+_t+")"+I+"("+_t+"|$)"))&&lt(I,function(oe){return W.test("string"==typeof oe.className&&oe.className||typeof oe.getAttribute<"u"&&oe.getAttribute("class")||"")})},ATTR:function(I,W,oe){return function(ie){var ne=Ht.attr(ie,I);return null==ne?"!="===W:!W||(ne+="","="===W?ne===oe:"!="===W?ne!==oe:"^="===W?oe&&0===ne.indexOf(oe):"*="===W?oe&&ne.indexOf(oe)>-1:"$="===W?oe&&ne.slice(-oe.length)===oe:"~="===W?(" "+ne.replace(Mt," ")+" ").indexOf(oe)>-1:"|="===W&&(ne===oe||ne.slice(0,oe.length+1)===oe+"-"))}},CHILD:function(I,W,oe,ie,ne){var _e="nth"!==I.slice(0,3),Ue="last"!==I.slice(-4),qe="of-type"===W;return 1===ie&&0===ne?function(ze){return!!ze.parentNode}:function(ze,vt,Je){var at,Et,tt,Ft,Nn,Fn=_e!==Ue?"nextSibling":"previousSibling",fo=ze.parentNode,Vt=qe&&ze.nodeName.toLowerCase(),Eo=!Je&&!qe,$n=!1;if(fo){if(_e){for(;Fn;){for(tt=ze;tt=tt[Fn];)if(qe?dt(tt,Vt):1===tt.nodeType)return!1;Nn=Fn="only"===I&&!Nn&&"nextSibling"}return!0}if(Nn=[Ue?fo.firstChild:fo.lastChild],Ue&&Eo){for($n=(Ft=(at=(Et=fo[pe]||(fo[pe]={}))[I]||[])[0]===se&&at[1])&&at[2],tt=Ft&&fo.childNodes[Ft];tt=++Ft&&tt&&tt[Fn]||($n=Ft=0)||Nn.pop();)if(1===tt.nodeType&&++$n&&tt===ze){Et[I]=[se,Ft,$n];break}}else if(Eo&&($n=Ft=(at=(Et=ze[pe]||(ze[pe]={}))[I]||[])[0]===se&&at[1]),!1===$n)for(;(tt=++Ft&&tt&&tt[Fn]||($n=Ft=0)||Nn.pop())&&(!(qe?dt(tt,Vt):1===tt.nodeType)||!++$n||(Eo&&((Et=tt[pe]||(tt[pe]={}))[I]=[se,$n]),tt!==ze)););return($n-=ne)===ie||$n%ie==0&&$n/ie>=0}}},PSEUDO:function(I,W){var oe,ie=u.pseudos[I]||u.setFilters[I.toLowerCase()]||Ht.error("unsupported pseudo: "+I);return ie[pe]?ie(W):ie.length>1?(oe=[I,I,"",W],u.setFilters.hasOwnProperty(I.toLowerCase())?uo(function(ne,_e){for(var Ue,qe=ie(ne,W),ze=qe.length;ze--;)ne[Ue=_n.call(ne,qe[ze])]=!(_e[Ue]=qe[ze])}):function(ne){return ie(ne,0,oe)}):ie}},pseudos:{not:uo(function(I){var W=[],oe=[],ie=M(I.replace(zo,"$1"));return ie[pe]?uo(function(ne,_e,Ue,qe){for(var ze,vt=ie(ne,null,qe,[]),Je=ne.length;Je--;)(ze=vt[Je])&&(ne[Je]=!(_e[Je]=ze))}):function(ne,_e,Ue){return W[0]=ne,ie(W,null,Ue,oe),W[0]=null,!oe.pop()}}),has:uo(function(I){return function(W){return Ht(I,W).length>0}}),contains:uo(function(I){return I=I.replace(Ln,dn),function(W){return(W.textContent||C.text(W)).indexOf(I)>-1}}),lang:uo(function(I){return Bn.test(I||"")||Ht.error("unsupported lang: "+I),I=I.replace(Ln,dn).toLowerCase(),function(W){var oe;do{if(oe=B?W.lang:W.getAttribute("xml:lang")||W.getAttribute("lang"))return(oe=oe.toLowerCase())===I||0===oe.indexOf(I+"-")}while((W=W.parentNode)&&1===W.nodeType);return!1}}),target:function(I){var W=Le.location&&Le.location.hash;return W&&W.slice(1)===I.id},root:function(I){return I===U},focus:function(I){return I===function xn(){try{return N.activeElement}catch{}}()&&N.hasFocus()&&!!(I.type||I.href||~I.tabIndex)},enabled:Bs(!1),disabled:Bs(!0),checked:function(I){return dt(I,"input")&&!!I.checked||dt(I,"option")&&!!I.selected},selected:function(I){return!0===I.selected},empty:function(I){for(I=I.firstChild;I;I=I.nextSibling)if(I.nodeType<6)return!1;return!0},parent:function(I){return!u.pseudos.empty(I)},header:function(I){return Vo.test(I.nodeName)},input:function(I){return Es.test(I.nodeName)},button:function(I){return dt(I,"input")&&"button"===I.type||dt(I,"button")},text:function(I){var W;return dt(I,"input")&&"text"===I.type&&(null==(W=I.getAttribute("type"))||"text"===W.toLowerCase())},first:es(function(){return[0]}),last:es(function(I,W){return[W-1]}),eq:es(function(I,W,oe){return[oe<0?oe+W:oe]}),even:es(function(I,W){for(var oe=0;oe<W;oe+=2)I.push(oe);return I}),odd:es(function(I,W){for(var oe=1;oe<W;oe+=2)I.push(oe);return I}),lt:es(function(I,W,oe){var ie;for(ie=oe<0?oe+W:oe>W?W:oe;--ie>=0;)I.push(ie);return I}),gt:es(function(I,W,oe){for(var ie=oe<0?oe+W:oe;++ie<W;)I.push(ie);return I})}}).pseudos.nth=u.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})u.pseudos[l]=ic(l);for(l in{submit:!0,reset:!0})u.pseudos[l]=Ur(l);function Ls(){}function lr(I,W){var oe,ie,ne,_e,Ue,qe,ze,vt=Ot[I+" "];if(vt)return W?0:vt.slice(0);for(Ue=I,qe=[],ze=u.preFilter;Ue;){for(_e in(!oe||(ie=Qt.exec(Ue)))&&(ie&&(Ue=Ue.slice(ie[0].length)||Ue),qe.push(ne=[])),oe=!1,(ie=Br.exec(Ue))&&(oe=ie.shift(),ne.push({value:oe,type:ie[0].replace(zo," ")}),Ue=Ue.slice(oe.length)),u.filter)(ie=Io[_e].exec(Ue))&&(!ze[_e]||(ie=ze[_e](ie)))&&(oe=ie.shift(),ne.push({value:oe,type:_e,matches:ie}),Ue=Ue.slice(oe.length));if(!oe)break}return W?Ue.length:Ue?Ht.error(I):Ot(I,qe).slice(0)}function ts(I){for(var W=0,oe=I.length,ie="";W<oe;W++)ie+=I[W].value;return ie}function yi(I,W,oe){var ie=W.dir,ne=W.next,_e=ne||ie,Ue=oe&&"parentNode"===_e,qe=xe++;return W.first?function(ze,vt,Je){for(;ze=ze[ie];)if(1===ze.nodeType||Ue)return I(ze,vt,Je);return!1}:function(ze,vt,Je){var at,Et,tt=[se,qe];if(Je){for(;ze=ze[ie];)if((1===ze.nodeType||Ue)&&I(ze,vt,Je))return!0}else for(;ze=ze[ie];)if(1===ze.nodeType||Ue)if(Et=ze[pe]||(ze[pe]={}),ne&&dt(ze,ne))ze=ze[ie]||ze;else{if((at=Et[_e])&&at[0]===se&&at[1]===qe)return tt[2]=at[2];if(Et[_e]=tt,tt[2]=I(ze,vt,Je))return!0}return!1}}function zr(I){return I.length>1?function(W,oe,ie){for(var ne=I.length;ne--;)if(!I[ne](W,oe,ie))return!1;return!0}:I[0]}function Ci(I,W,oe,ie,ne){for(var _e,Ue=[],qe=0,ze=I.length,vt=null!=W;qe<ze;qe++)(_e=I[qe])&&(!oe||oe(_e,ie,ne))&&(Ue.push(_e),vt&&W.push(qe));return Ue}function pa(I,W,oe,ie,ne,_e){return ie&&!ie[pe]&&(ie=pa(ie)),ne&&!ne[pe]&&(ne=pa(ne,_e)),uo(function(Ue,qe,ze,vt){var Je,at,Et,tt,Ft=[],Nn=[],Fn=qe.length,fo=Ue||function ac(I,W,oe){for(var ie=0,ne=W.length;ie<ne;ie++)Ht(I,W[ie],oe);return oe}(W||"*",ze.nodeType?[ze]:ze,[]),Vt=!I||!Ue&&W?fo:Ci(fo,Ft,I,ze,vt);if(oe?oe(Vt,tt=ne||(Ue?I:Fn||ie)?[]:qe,ze,vt):tt=Vt,ie)for(Je=Ci(tt,Nn),ie(Je,[],ze,vt),at=Je.length;at--;)(Et=Je[at])&&(tt[Nn[at]]=!(Vt[Nn[at]]=Et));if(Ue){if(ne||I){if(ne){for(Je=[],at=tt.length;at--;)(Et=tt[at])&&Je.push(Vt[at]=Et);ne(null,tt=[],Je,vt)}for(at=tt.length;at--;)(Et=tt[at])&&(Je=ne?_n.call(Ue,Et):Ft[at])>-1&&(Ue[Je]=!(qe[Je]=Et))}}else tt=Ci(tt===qe?tt.splice(Fn,tt.length):tt),ne?ne(null,qe,tt,vt):k.apply(qe,tt)})}function ns(I){for(var W,oe,ie,ne=I.length,_e=u.relative[I[0].type],Ue=_e||u.relative[" "],qe=_e?1:0,ze=yi(function(at){return at===W},Ue,!0),vt=yi(function(at){return _n.call(W,at)>-1},Ue,!0),Je=[function(at,Et,tt){var Ft=!_e&&(tt||Et!=f)||((W=Et).nodeType?ze(at,Et,tt):vt(at,Et,tt));return W=null,Ft}];qe<ne;qe++)if(oe=u.relative[I[qe].type])Je=[yi(zr(Je),oe)];else{if((oe=u.filter[I[qe].type].apply(null,I[qe].matches))[pe]){for(ie=++qe;ie<ne&&!u.relative[I[ie].type];ie++);return pa(qe>1&&zr(Je),qe>1&&ts(I.slice(0,qe-1).concat({value:" "===I[qe-2].type?"*":""})).replace(zo,"$1"),oe,qe<ie&&ns(I.slice(qe,ie)),ie<ne&&ns(I=I.slice(ie)),ie<ne&&ts(I))}Je.push(oe)}return zr(Je)}function M(I,W){var oe,ie=[],ne=[],_e=xt[I+" "];if(!_e){for(W||(W=lr(I)),oe=W.length;oe--;)(_e=ns(W[oe]))[pe]?ie.push(_e):ne.push(_e);_e=xt(I,function lc(I,W){var oe=W.length>0,ie=I.length>0,ne=function(_e,Ue,qe,ze,vt){var Je,at,Et,tt=0,Ft="0",Nn=_e&&[],Fn=[],fo=f,Vt=_e||ie&&u.find.TAG("*",vt),Eo=se+=null==fo?1:Math.random()||.1,$n=Vt.length;for(vt&&(f=Ue==N||Ue||vt);Ft!==$n&&null!=(Je=Vt[Ft]);Ft++){if(ie&&Je){for(at=0,!Ue&&Je.ownerDocument!=N&&(ws(Je),qe=!B);Et=I[at++];)if(Et(Je,Ue||N,qe)){k.call(ze,Je);break}vt&&(se=Eo)}oe&&((Je=!Et&&Je)&&tt--,_e&&Nn.push(Je))}if(tt+=Ft,oe&&Ft!==tt){for(at=0;Et=W[at++];)Et(Nn,Fn,Ue,qe);if(_e){if(tt>0)for(;Ft--;)Nn[Ft]||Fn[Ft]||(Fn[Ft]=Gt.call(ze));Fn=Ci(Fn)}k.apply(ze,Fn),vt&&!_e&&Fn.length>0&&tt+W.length>1&&C.uniqueSort(ze)}return vt&&(se=Eo,f=fo),Nn};return oe?uo(ne):ne}(ne,ie)),_e.selector=I}return _e}function ga(I,W,oe,ie){var ne,_e,Ue,qe,ze,vt="function"==typeof I&&I,Je=!ie&&lr(I=vt.selector||I);if(oe=oe||[],1===Je.length){if((_e=Je[0]=Je[0].slice(0)).length>2&&"ID"===(Ue=_e[0]).type&&9===W.nodeType&&B&&u.relative[_e[1].type]){if(!(W=(u.find.ID(Ue.matches[0].replace(Ln,dn),W)||[])[0]))return oe;vt&&(W=W.parentNode),I=I.slice(_e.shift().value.length)}for(ne=Io.needsContext.test(I)?0:_e.length;ne--&&!u.relative[qe=(Ue=_e[ne]).type];)if((ze=u.find[qe])&&(ie=ze(Ue.matches[0].replace(Ln,dn),un.test(_e[0].type)&&vi(W.parentNode)||W))){if(_e.splice(ne,1),!(I=ie.length&&ts(_e)))return k.apply(oe,ie),oe;break}}return(vt||M(I,Je))(ie,W,!B,oe,!W||un.test(I)&&vi(W.parentNode)||W),oe}Ls.prototype=u.filters=u.pseudos,u.setFilters=new Ls,Ct.sortStable=pe.split("").sort(Cn).join("")===pe,ws(),Ct.sortDetached=ar(function(I){return 1&I.compareDocumentPosition(N.createElement("fieldset"))}),C.find=Ht,C.expr[":"]=C.expr.pseudos,C.unique=C.uniqueSort,Ht.compile=M,Ht.select=ga,Ht.setDocument=ws,Ht.tokenize=lr,Ht.escape=C.escapeSelector,Ht.getText=C.text,Ht.isXML=C.isXMLDoc,Ht.selectors=C.expr,Ht.support=C.support,Ht.uniqueSort=C.uniqueSort}();var rn=function(l,u,f){for(var y=[],_=void 0!==f;(l=l[u])&&9!==l.nodeType;)if(1===l.nodeType){if(_&&C(l).is(f))break;y.push(l)}return y},Ki=function(l,u){for(var f=[];l;l=l.nextSibling)1===l.nodeType&&l!==u&&f.push(l);return f},Te=C.expr.match.needsContext,wr=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Sr(l,u,f){return ht(u)?C.grep(l,function(y,_){return!!u.call(y,_,y)!==f}):u.nodeType?C.grep(l,function(y){return y===u!==f}):"string"!=typeof u?C.grep(l,function(y){return _n.call(u,y)>-1!==f}):C.filter(u,l,f)}C.filter=function(l,u,f){var y=u[0];return f&&(l=":not("+l+")"),1===u.length&&1===y.nodeType?C.find.matchesSelector(y,l)?[y]:[]:C.find.matches(l,C.grep(u,function(_){return 1===_.nodeType}))},C.fn.extend({find:function(l){var u,f,y=this.length,_=this;if("string"!=typeof l)return this.pushStack(C(l).filter(function(){for(u=0;u<y;u++)if(C.contains(_[u],this))return!0}));for(f=this.pushStack([]),u=0;u<y;u++)C.find(l,_[u],f);return y>1?C.uniqueSort(f):f},filter:function(l){return this.pushStack(Sr(this,l||[],!1))},not:function(l){return this.pushStack(Sr(this,l||[],!0))},is:function(l){return!!Sr(this,"string"==typeof l&&Te.test(l)?C(l):l||[],!1).length}});var oi,_r=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,jt=C.fn.init=function(l,u,f){var y,_;if(!l)return this;if(f=f||oi,"string"==typeof l){if(!(y="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:_r.exec(l))||!y[1]&&u)return!u||u.jquery?(u||f).find(l):this.constructor(u).find(l);if(y[1]){if(C.merge(this,C.parseHTML(y[1],(u=u instanceof C?u[0]:u)&&u.nodeType?u.ownerDocument||u:mt,!0)),wr.test(y[1])&&C.isPlainObject(u))for(y in u)ht(this[y])?this[y](u[y]):this.attr(y,u[y]);return this}return(_=mt.getElementById(y[2]))&&(this[0]=_,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):ht(l)?void 0!==f.ready?f.ready(l):l(C):C.makeArray(l,this)};jt.prototype=C.fn,oi=C(mt);var an=/^(?:parents|prev(?:Until|All))/,T={children:!0,contents:!0,next:!0,prev:!0};function Tr(l,u){for(;(l=l[u])&&1!==l.nodeType;);return l}C.fn.extend({has:function(l){var u=C(l,this),f=u.length;return this.filter(function(){for(var y=0;y<f;y++)if(C.contains(this,u[y]))return!0})},closest:function(l,u){var f,y=0,_=this.length,k=[],N="string"!=typeof l&&C(l);if(!Te.test(l))for(;y<_;y++)for(f=this[y];f&&f!==u;f=f.parentNode)if(f.nodeType<11&&(N?N.index(f)>-1:1===f.nodeType&&C.find.matchesSelector(f,l))){k.push(f);break}return this.pushStack(k.length>1?C.uniqueSort(k):k)},index:function(l){return l?"string"==typeof l?_n.call(C(l),this[0]):_n.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,u){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(l,u))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),C.each({parent:function(l){var u=l.parentNode;return u&&11!==u.nodeType?u:null},parents:function(l){return rn(l,"parentNode")},parentsUntil:function(l,u,f){return rn(l,"parentNode",f)},next:function(l){return Tr(l,"nextSibling")},prev:function(l){return Tr(l,"previousSibling")},nextAll:function(l){return rn(l,"nextSibling")},prevAll:function(l){return rn(l,"previousSibling")},nextUntil:function(l,u,f){return rn(l,"nextSibling",f)},prevUntil:function(l,u,f){return rn(l,"previousSibling",f)},siblings:function(l){return Ki((l.parentNode||{}).firstChild,l)},children:function(l){return Ki(l.firstChild)},contents:function(l){return null!=l.contentDocument&&it(l.contentDocument)?l.contentDocument:(dt(l,"template")&&(l=l.content||l),C.merge([],l.childNodes))}},function(l,u){C.fn[l]=function(f,y){var _=C.map(this,u,f);return"Until"!==l.slice(-5)&&(y=f),y&&"string"==typeof y&&(_=C.filter(y,_)),this.length>1&&(T[l]||C.uniqueSort(_),an.test(l)&&_.reverse()),this.pushStack(_)}});var Ho=/[^\x20\t\r\n\f]+/g;function Rs(l){return l}function si(l){throw l}function kt(l,u,f,y){var _;try{l&&ht(_=l.promise)?_.call(l).done(u).fail(f):l&&ht(_=l.then)?_.call(l,u,f):u.apply(void 0,[l].slice(y))}catch(k){f.apply(void 0,[k])}}C.Callbacks=function(l){l="string"==typeof l?function qo(l){var u={};return C.each(l.match(Ho)||[],function(f,y){u[y]=!0}),u}(l):C.extend({},l);var u,f,y,_,k=[],N=[],U=-1,B=function(){for(_=_||l.once,y=u=!0;N.length;U=-1)for(f=N.shift();++U<k.length;)!1===k[U].apply(f[0],f[1])&&l.stopOnFalse&&(U=k.length,f=!1);l.memory||(f=!1),u=!1,_&&(k=f?[]:"")},G={add:function(){return k&&(f&&!u&&(U=k.length-1,N.push(f)),function le(pe){C.each(pe,function(se,xe){ht(xe)?(!l.unique||!G.has(xe))&&k.push(xe):xe&&xe.length&&"string"!==cn(xe)&&le(xe)})}(arguments),f&&!u&&B()),this},remove:function(){return C.each(arguments,function(le,pe){for(var se;(se=C.inArray(pe,k,se))>-1;)k.splice(se,1),se<=U&&U--}),this},has:function(le){return le?C.inArray(le,k)>-1:k.length>0},empty:function(){return k&&(k=[]),this},disable:function(){return _=N=[],k=f="",this},disabled:function(){return!k},lock:function(){return _=N=[],!f&&!u&&(k=f=""),this},locked:function(){return!!_},fireWith:function(le,pe){return _||(pe=[le,(pe=pe||[]).slice?pe.slice():pe],N.push(pe),u||B()),this},fire:function(){return G.fireWith(this,arguments),this},fired:function(){return!!y}};return G},C.extend({Deferred:function(l){var u=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],f="pending",y={state:function(){return f},always:function(){return _.done(arguments).fail(arguments),this},catch:function(k){return y.then(null,k)},pipe:function(){var k=arguments;return C.Deferred(function(N){C.each(u,function(U,B){var G=ht(k[B[4]])&&k[B[4]];_[B[1]](function(){var le=G&&G.apply(this,arguments);le&&ht(le.promise)?le.promise().progress(N.notify).done(N.resolve).fail(N.reject):N[B[0]+"With"](this,G?[le]:arguments)})}),k=null}).promise()},then:function(k,N,U){var B=0;function G(le,pe,se,xe){return function(){var lt=this,Ot=arguments,xt=function(){var Cn,Mo;if(!(le<B)){if((Cn=se.apply(lt,Ot))===pe.promise())throw new TypeError("Thenable self-resolution");ht(Mo=Cn&&("object"==typeof Cn||"function"==typeof Cn)&&Cn.then)?xe?Mo.call(Cn,G(B,pe,Rs,xe),G(B,pe,si,xe)):(B++,Mo.call(Cn,G(B,pe,Rs,xe),G(B,pe,si,xe),G(B,pe,Rs,pe.notifyWith))):(se!==Rs&&(lt=void 0,Ot=[Cn]),(xe||pe.resolveWith)(lt,Ot))}},kn=xe?xt:function(){try{xt()}catch(Cn){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(Cn,kn.error),le+1>=B&&(se!==si&&(lt=void 0,Ot=[Cn]),pe.rejectWith(lt,Ot))}};le?kn():(C.Deferred.getErrorHook?kn.error=C.Deferred.getErrorHook():C.Deferred.getStackHook&&(kn.error=C.Deferred.getStackHook()),Le.setTimeout(kn))}}return C.Deferred(function(le){u[0][3].add(G(0,le,ht(U)?U:Rs,le.notifyWith)),u[1][3].add(G(0,le,ht(k)?k:Rs)),u[2][3].add(G(0,le,ht(N)?N:si))}).promise()},promise:function(k){return null!=k?C.extend(k,y):y}},_={};return C.each(u,function(k,N){var U=N[2],B=N[5];y[N[1]]=U.add,B&&U.add(function(){f=B},u[3-k][2].disable,u[3-k][3].disable,u[0][2].lock,u[0][3].lock),U.add(N[3].fire),_[N[0]]=function(){return _[N[0]+"With"](this===_?void 0:this,arguments),this},_[N[0]+"With"]=U.fireWith}),y.promise(_),l&&l.call(_,_),_},when:function(l){var u=arguments.length,f=u,y=Array(f),_=pn.call(arguments),k=C.Deferred(),N=function(U){return function(B){y[U]=this,_[U]=arguments.length>1?pn.call(arguments):B,--u||k.resolveWith(y,_)}};if(u<=1&&(kt(l,k.done(N(f)).resolve,k.reject,!u),"pending"===k.state()||ht(_[f]&&_[f].then)))return k.then();for(;f--;)kt(_[f],N(f),k.reject);return k.promise()}});var Kt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(l,u){Le.console&&Le.console.warn&&l&&Kt.test(l.name)&&Le.console.warn("jQuery.Deferred exception: "+l.message,l.stack,u)},C.readyException=function(l){Le.setTimeout(function(){throw l})};var pt=C.Deferred();function re(){mt.removeEventListener("DOMContentLoaded",re),Le.removeEventListener("load",re),C.ready()}C.fn.ready=function(l){return pt.then(l).catch(function(u){C.readyException(u)}),this},C.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--C.readyWait:C.isReady)||(C.isReady=!0,!(!0!==l&&--C.readyWait>0)&&pt.resolveWith(mt,[C]))}}),C.ready.then=pt.then,"complete"===mt.readyState||"loading"!==mt.readyState&&!mt.documentElement.doScroll?Le.setTimeout(C.ready):(mt.addEventListener("DOMContentLoaded",re),Le.addEventListener("load",re));var No=function(l,u,f,y,_,k,N){var U=0,B=l.length,G=null==f;if("object"===cn(f))for(U in _=!0,f)No(l,u,U,f[U],!0,k,N);else if(void 0!==y&&(_=!0,ht(y)||(N=!0),G&&(N?(u.call(l,y),u=null):(G=u,u=function(le,pe,se){return G.call(C(le),se)})),u))for(;U<B;U++)u(l[U],f,N?y:y.call(l[U],U,u(l[U],f)));return _?l:G?u.call(l):B?u(l[0],f):k},kr=/^-ms-/,Ve=/-([a-z])/g;function Nr(l,u){return u.toUpperCase()}function nn(l){return l.replace(kr,"ms-").replace(Ve,Nr)}var Ko=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function Jt(){this.expando=C.expando+Jt.uid++}Jt.uid=1,Jt.prototype={cache:function(l){var u=l[this.expando];return u||(u={},Ko(l)&&(l.nodeType?l[this.expando]=u:Object.defineProperty(l,this.expando,{value:u,configurable:!0}))),u},set:function(l,u,f){var y,_=this.cache(l);if("string"==typeof u)_[nn(u)]=f;else for(y in u)_[nn(y)]=u[y];return _},get:function(l,u){return void 0===u?this.cache(l):l[this.expando]&&l[this.expando][nn(u)]},access:function(l,u,f){return void 0===u||u&&"string"==typeof u&&void 0===f?this.get(l,u):(this.set(l,u,f),void 0!==f?f:u)},remove:function(l,u){var f,y=l[this.expando];if(void 0!==y){if(void 0!==u)for((f=(u=Array.isArray(u)?u.map(nn):(u=nn(u))in y?[u]:u.match(Ho)||[]).length);f--;)delete y[u[f]];(void 0===u||C.isEmptyObject(y))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var u=l[this.expando];return void 0!==u&&!C.isEmptyObject(u)}};var Ze=new Jt,Wn=new Jt,yo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,hs=/[A-Z]/g;function Lt(l,u,f){var y;if(void 0===f&&1===l.nodeType)if(y="data-"+u.replace(hs,"-$&").toLowerCase(),"string"==typeof(f=l.getAttribute(y))){try{f=function Ar(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:yo.test(l)?JSON.parse(l):l)}(f)}catch{}Wn.set(l,u,f)}else f=void 0;return f}C.extend({hasData:function(l){return Wn.hasData(l)||Ze.hasData(l)},data:function(l,u,f){return Wn.access(l,u,f)},removeData:function(l,u){Wn.remove(l,u)},_data:function(l,u,f){return Ze.access(l,u,f)},_removeData:function(l,u){Ze.remove(l,u)}}),C.fn.extend({data:function(l,u){var f,y,_,k=this[0],N=k&&k.attributes;if(void 0===l){if(this.length&&(_=Wn.get(k),1===k.nodeType&&!Ze.get(k,"hasDataAttrs"))){for(f=N.length;f--;)N[f]&&0===(y=N[f].name).indexOf("data-")&&(y=nn(y.slice(5)),Lt(k,y,_[y]));Ze.set(k,"hasDataAttrs",!0)}return _}return"object"==typeof l?this.each(function(){Wn.set(this,l)}):No(this,function(U){var B;if(k&&void 0===U)return void 0!==(B=Wn.get(k,l))||void 0!==(B=Lt(k,l))?B:void 0;this.each(function(){Wn.set(this,l,U)})},null,u,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){Wn.remove(this,l)})}}),C.extend({queue:function(l,u,f){var y;if(l)return y=Ze.get(l,u=(u||"fx")+"queue"),f&&(!y||Array.isArray(f)?y=Ze.access(l,u,C.makeArray(f)):y.push(f)),y||[]},dequeue:function(l,u){var f=C.queue(l,u=u||"fx"),y=f.length,_=f.shift(),k=C._queueHooks(l,u);"inprogress"===_&&(_=f.shift(),y--),_&&("fx"===u&&f.unshift("inprogress"),delete k.stop,_.call(l,function(){C.dequeue(l,u)},k)),!y&&k&&k.empty.fire()},_queueHooks:function(l,u){var f=u+"queueHooks";return Ze.get(l,f)||Ze.access(l,f,{empty:C.Callbacks("once memory").add(function(){Ze.remove(l,[u+"queue",f])})})}}),C.fn.extend({queue:function(l,u){var f=2;return"string"!=typeof l&&(u=l,l="fx",f--),arguments.length<f?C.queue(this[0],l):void 0===u?this:this.each(function(){var y=C.queue(this,l,u);C._queueHooks(this,l),"fx"===l&&"inprogress"!==y[0]&&C.dequeue(this,l)})},dequeue:function(l){return this.each(function(){C.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,u){var f,y=1,_=C.Deferred(),k=this,N=this.length,U=function(){--y||_.resolveWith(k,[k])};for("string"!=typeof l&&(u=l,l=void 0),l=l||"fx";N--;)(f=Ze.get(k[N],l+"queueHooks"))&&f.empty&&(y++,f.empty.add(U));return U(),_.promise(u)}});var ri=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tn=new RegExp("^(?:([+-])=|)("+ri+")([a-z%]*)$","i"),Mn=["Top","Right","Bottom","Left"],hn=mt.documentElement,ao=function(l){return C.contains(l.ownerDocument,l)},Jn={composed:!0};hn.getRootNode&&(ao=function(l){return C.contains(l.ownerDocument,l)||l.getRootNode(Jn)===l.ownerDocument});var Qn=function(l,u){return"none"===(l=u||l).style.display||""===l.style.display&&ao(l)&&"none"===C.css(l,"display")};function Xa(l,u,f,y){var _,k,N=20,U=y?function(){return y.cur()}:function(){return C.css(l,u,"")},B=U(),G=f&&f[3]||(C.cssNumber[u]?"":"px"),le=l.nodeType&&(C.cssNumber[u]||"px"!==G&&+B)&&Tn.exec(C.css(l,u));if(le&&le[3]!==G){for(G=G||le[3],le=+(B/=2)||1;N--;)C.style(l,u,le+G),(1-k)*(1-(k=U()/B||.5))<=0&&(N=0),le/=k;C.style(l,u,(le*=2)+G),f=f||[]}return f&&(le=+le||+B||0,_=f[1]?le+(f[1]+1)*f[2]:+f[2],y&&(y.unit=G,y.start=le,y.end=_)),_}var In={};function el(l){var u,f=l.ownerDocument,y=l.nodeName,_=In[y];return _||(u=f.body.appendChild(f.createElement(y)),_=C.css(u,"display"),u.parentNode.removeChild(u),"none"===_&&(_="block"),In[y]=_,_)}function Nt(l,u){for(var f,y,_=[],k=0,N=l.length;k<N;k++)(y=l[k]).style&&(f=y.style.display,u?("none"===f&&(_[k]=Ze.get(y,"display")||null,_[k]||(y.style.display="")),""===y.style.display&&Qn(y)&&(_[k]=el(y))):"none"!==f&&(_[k]="none",Ze.set(y,"display",f)));for(k=0;k<N;k++)null!=_[k]&&(l[k].style.display=_[k]);return l}C.fn.extend({show:function(){return Nt(this,!0)},hide:function(){return Nt(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){Qn(this)?C(this).show():C(this).hide()})}});var u,f,bs=/^(?:checkbox|radio)$/i,tl=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ii=/^$|^module$|\/(?:java|ecma)script/i;u=mt.createDocumentFragment().appendChild(mt.createElement("div")),(f=mt.createElement("input")).setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),u.appendChild(f),Ct.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,u.innerHTML="<textarea>x</textarea>",Ct.noCloneChecked=!!u.cloneNode(!0).lastChild.defaultValue,u.innerHTML="<option></option>",Ct.option=!!u.lastChild;var lo={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function oo(l,u){var f;return f=typeof l.getElementsByTagName<"u"?l.getElementsByTagName(u||"*"):typeof l.querySelectorAll<"u"?l.querySelectorAll(u||"*"):[],void 0===u||u&&dt(l,u)?C.merge([l],f):f}function Ds(l,u){for(var f=0,y=l.length;f<y;f++)Ze.set(l[f],"globalEval",!u||Ze.get(u[f],"globalEval"))}lo.tbody=lo.tfoot=lo.colgroup=lo.caption=lo.thead,lo.th=lo.td,Ct.option||(lo.optgroup=lo.option=[1,"<select multiple='multiple'>","</select>"]);var Ji=/<|&#?\w+;/;function Rr(l,u,f,y,_){for(var k,N,U,B,G,le,pe=u.createDocumentFragment(),se=[],xe=0,lt=l.length;xe<lt;xe++)if((k=l[xe])||0===k)if("object"===cn(k))C.merge(se,k.nodeType?[k]:k);else if(Ji.test(k)){for(N=N||pe.appendChild(u.createElement("div")),U=(tl.exec(k)||["",""])[1].toLowerCase(),N.innerHTML=(B=lo[U]||lo._default)[1]+C.htmlPrefilter(k)+B[2],le=B[0];le--;)N=N.lastChild;C.merge(se,N.childNodes),(N=pe.firstChild).textContent=""}else se.push(u.createTextNode(k));for(pe.textContent="",xe=0;k=se[xe++];)if(y&&C.inArray(k,y)>-1)_&&_.push(k);else if(G=ao(k),N=oo(pe.appendChild(k),"script"),G&&Ds(N),f)for(le=0;k=N[le++];)ii.test(k.type||"")&&f.push(k);return pe}var $t=/^([^.]*)(?:\.(.+)|)/;function Ge(){return!0}function Ao(){return!1}function Dr(l,u,f,y,_,k){var N,U;if("object"==typeof u){for(U in"string"!=typeof f&&(y=y||f,f=void 0),u)Dr(l,U,f,y,u[U],k);return l}if(null==y&&null==_?(_=f,y=f=void 0):null==_&&("string"==typeof f?(_=y,y=void 0):(_=y,y=f,f=void 0)),!1===_)_=Ao;else if(!_)return l;return 1===k&&(N=_,_=function(B){return C().off(B),N.apply(this,arguments)},_.guid=N.guid||(N.guid=C.guid++)),l.each(function(){C.event.add(this,u,_,y,f)})}function Pr(l,u,f){f?(Ze.set(l,u,!1),C.event.add(l,u,{namespace:!1,handler:function(y){var _,k=Ze.get(this,u);if(1&y.isTrigger&&this[u]){if(k)(C.event.special[u]||{}).delegateType&&y.stopPropagation();else if(k=pn.call(arguments),Ze.set(this,u,k),this[u](),_=Ze.get(this,u),Ze.set(this,u,!1),k!==_)return y.stopImmediatePropagation(),y.preventDefault(),_}else k&&(Ze.set(this,u,C.event.trigger(k[0],k.slice(1),this)),y.stopPropagation(),y.isImmediatePropagationStopped=Ge)}})):void 0===Ze.get(l,u)&&C.event.add(l,u,Ge)}C.event={global:{},add:function(l,u,f,y,_){var k,N,U,B,G,le,pe,se,xe,lt,Ot,xt=Ze.get(l);if(Ko(l))for(f.handler&&(f=(k=f).handler,_=k.selector),_&&C.find.matchesSelector(hn,_),f.guid||(f.guid=C.guid++),(B=xt.events)||(B=xt.events=Object.create(null)),(N=xt.handle)||(N=xt.handle=function(kn){return typeof C<"u"&&C.event.triggered!==kn.type?C.event.dispatch.apply(l,arguments):void 0}),G=(u=(u||"").match(Ho)||[""]).length;G--;)xe=Ot=(U=$t.exec(u[G])||[])[1],lt=(U[2]||"").split(".").sort(),xe&&(pe=C.event.special[xe]||{},pe=C.event.special[xe=(_?pe.delegateType:pe.bindType)||xe]||{},le=C.extend({type:xe,origType:Ot,data:y,handler:f,guid:f.guid,selector:_,needsContext:_&&C.expr.match.needsContext.test(_),namespace:lt.join(".")},k),(se=B[xe])||((se=B[xe]=[]).delegateCount=0,(!pe.setup||!1===pe.setup.call(l,y,lt,N))&&l.addEventListener&&l.addEventListener(xe,N)),pe.add&&(pe.add.call(l,le),le.handler.guid||(le.handler.guid=f.guid)),_?se.splice(se.delegateCount++,0,le):se.push(le),C.event.global[xe]=!0)},remove:function(l,u,f,y,_){var k,N,U,B,G,le,pe,se,xe,lt,Ot,xt=Ze.hasData(l)&&Ze.get(l);if(xt&&(B=xt.events)){for(G=(u=(u||"").match(Ho)||[""]).length;G--;)if(xe=Ot=(U=$t.exec(u[G])||[])[1],lt=(U[2]||"").split(".").sort(),xe){for(pe=C.event.special[xe]||{},se=B[xe=(y?pe.delegateType:pe.bindType)||xe]||[],U=U[2]&&new RegExp("(^|\\.)"+lt.join("\\.(?:.*\\.|)")+"(\\.|$)"),N=k=se.length;k--;)le=se[k],(_||Ot===le.origType)&&(!f||f.guid===le.guid)&&(!U||U.test(le.namespace))&&(!y||y===le.selector||"**"===y&&le.selector)&&(se.splice(k,1),le.selector&&se.delegateCount--,pe.remove&&pe.remove.call(l,le));N&&!se.length&&((!pe.teardown||!1===pe.teardown.call(l,lt,xt.handle))&&C.removeEvent(l,xe,xt.handle),delete B[xe])}else for(xe in B)C.event.remove(l,xe+u[G],f,y,!0);C.isEmptyObject(B)&&Ze.remove(l,"handle events")}},dispatch:function(l){var u,f,y,_,k,N,U=new Array(arguments.length),B=C.event.fix(l),G=(Ze.get(this,"events")||Object.create(null))[B.type]||[],le=C.event.special[B.type]||{};for(U[0]=B,u=1;u<arguments.length;u++)U[u]=arguments[u];if(B.delegateTarget=this,!le.preDispatch||!1!==le.preDispatch.call(this,B)){for(N=C.event.handlers.call(this,B,G),u=0;(_=N[u++])&&!B.isPropagationStopped();)for(B.currentTarget=_.elem,f=0;(k=_.handlers[f++])&&!B.isImmediatePropagationStopped();)(!B.rnamespace||!1===k.namespace||B.rnamespace.test(k.namespace))&&(B.handleObj=k,B.data=k.data,void 0!==(y=((C.event.special[k.origType]||{}).handle||k.handler).apply(_.elem,U))&&!1===(B.result=y)&&(B.preventDefault(),B.stopPropagation()));return le.postDispatch&&le.postDispatch.call(this,B),B.result}},handlers:function(l,u){var f,y,_,k,N,U=[],B=u.delegateCount,G=l.target;if(B&&G.nodeType&&!("click"===l.type&&l.button>=1))for(;G!==this;G=G.parentNode||this)if(1===G.nodeType&&("click"!==l.type||!0!==G.disabled)){for(k=[],N={},f=0;f<B;f++)void 0===N[_=(y=u[f]).selector+" "]&&(N[_]=y.needsContext?C(_,this).index(G)>-1:C.find(_,this,null,[G]).length),N[_]&&k.push(y);k.length&&U.push({elem:G,handlers:k})}return G=this,B<u.length&&U.push({elem:G,handlers:u.slice(B)}),U},addProp:function(l,u){Object.defineProperty(C.Event.prototype,l,{enumerable:!0,configurable:!0,get:ht(u)?function(){if(this.originalEvent)return u(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(f){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:f})}})},fix:function(l){return l[C.expando]?l:new C.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var u=this||l;return bs.test(u.type)&&u.click&&dt(u,"input")&&Pr(u,"click",!0),!1},trigger:function(l){var u=this||l;return bs.test(u.type)&&u.click&&dt(u,"input")&&Pr(u,"click"),!0},_default:function(l){var u=l.target;return bs.test(u.type)&&u.click&&dt(u,"input")&&Ze.get(u,"click")||dt(u,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},C.removeEvent=function(l,u,f){l.removeEventListener&&l.removeEventListener(u,f)},C.Event=function(l,u){if(!(this instanceof C.Event))return new C.Event(l,u);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?Ge:Ao,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,u&&C.extend(this,u),this.timeStamp=l&&l.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Ao,isPropagationStopped:Ao,isImmediatePropagationStopped:Ao,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Ge,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Ge,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Ge,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(l,u){function f(y){if(mt.documentMode){var _=Ze.get(this,"handle"),k=C.event.fix(y);k.type="focusin"===y.type?"focus":"blur",k.isSimulated=!0,_(y),k.target===k.currentTarget&&_(k)}else C.event.simulate(u,y.target,C.event.fix(y))}C.event.special[l]={setup:function(){var y;if(Pr(this,l,!0),!mt.documentMode)return!1;(y=Ze.get(this,u))||this.addEventListener(u,f),Ze.set(this,u,(y||0)+1)},trigger:function(){return Pr(this,l),!0},teardown:function(){var y;if(!mt.documentMode)return!1;(y=Ze.get(this,u)-1)?Ze.set(this,u,y):(this.removeEventListener(u,f),Ze.remove(this,u))},_default:function(y){return Ze.get(y.target,l)},delegateType:u},C.event.special[u]={setup:function(){var y=this.ownerDocument||this.document||this,_=mt.documentMode?this:y,k=Ze.get(_,u);k||(mt.documentMode?this.addEventListener(u,f):y.addEventListener(l,f,!0)),Ze.set(_,u,(k||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,_=mt.documentMode?this:y,k=Ze.get(_,u)-1;k?Ze.set(_,u,k):(mt.documentMode?this.removeEventListener(u,f):y.removeEventListener(l,f,!0),Ze.remove(_,u))}}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,u){C.event.special[l]={delegateType:u,bindType:u,handle:function(f){var y,k=f.relatedTarget,N=f.handleObj;return(!k||k!==this&&!C.contains(this,k))&&(f.type=N.origType,y=N.handler.apply(this,arguments),f.type=u),y}}}),C.fn.extend({on:function(l,u,f,y){return Dr(this,l,u,f,y)},one:function(l,u,f,y){return Dr(this,l,u,f,y,1)},off:function(l,u,f){var y,_;if(l&&l.preventDefault&&l.handleObj)return y=l.handleObj,C(l.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,y.handler),this;if("object"==typeof l){for(_ in l)this.off(_,u,l[_]);return this}return(!1===u||"function"==typeof u)&&(f=u,u=void 0),!1===f&&(f=Ao),this.each(function(){C.event.remove(this,l,f,u)})}});var nl=/<script|<style|<link/i,Qi=/checked\s*(?:[^=]|=\s*.checked.)/i,Ql=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Or(l,u){return dt(l,"table")&&dt(11!==u.nodeType?u:u.firstChild,"tr")&&C(l).children("tbody")[0]||l}function Xi(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Mr(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function ol(l,u){var f,y,_,N,U,B;if(1===u.nodeType){if(Ze.hasData(l)&&(B=Ze.get(l).events))for(_ in Ze.remove(u,"handle events"),B)for(f=0,y=B[_].length;f<y;f++)C.event.add(u,_,B[_][f]);Wn.hasData(l)&&(N=Wn.access(l),U=C.extend({},N),Wn.set(u,U))}}function vs(l,u){var f=u.nodeName.toLowerCase();"input"===f&&bs.test(l.type)?u.checked=l.checked:("input"===f||"textarea"===f)&&(u.defaultValue=l.defaultValue)}function Ps(l,u,f,y){u=ms(u);var _,k,N,U,B,G,le=0,pe=l.length,se=pe-1,xe=u[0],lt=ht(xe);if(lt||pe>1&&"string"==typeof xe&&!Ct.checkClone&&Qi.test(xe))return l.each(function(Ot){var xt=l.eq(Ot);lt&&(u[0]=xe.call(this,Ot,xt.html())),Ps(xt,u,f,y)});if(pe&&(k=(_=Rr(u,l[0].ownerDocument,!1,l,y)).firstChild,1===_.childNodes.length&&(_=k),k||y)){for(U=(N=C.map(oo(_,"script"),Xi)).length;le<pe;le++)B=_,le!==se&&(B=C.clone(B,!0,!0),U&&C.merge(N,oo(B,"script"))),f.call(l[le],B,le);if(U)for(G=N[N.length-1].ownerDocument,C.map(N,Mr),le=0;le<U;le++)ii.test((B=N[le]).type||"")&&!Ze.access(B,"globalEval")&&C.contains(G,B)&&(B.src&&"module"!==(B.type||"").toLowerCase()?C._evalUrl&&!B.noModule&&C._evalUrl(B.src,{nonce:B.nonce||B.getAttribute("nonce")},G):Fe(B.textContent.replace(Ql,""),B,G))}return l}function ys(l,u,f){for(var y,_=u?C.filter(u,l):l,k=0;null!=(y=_[k]);k++)!f&&1===y.nodeType&&C.cleanData(oo(y)),y.parentNode&&(f&&ao(y)&&Ds(oo(y,"script")),y.parentNode.removeChild(y));return l}C.extend({htmlPrefilter:function(l){return l},clone:function(l,u,f){var y,_,k,N,U=l.cloneNode(!0),B=ao(l);if(!(Ct.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||C.isXMLDoc(l)))for(N=oo(U),y=0,_=(k=oo(l)).length;y<_;y++)vs(k[y],N[y]);if(u)if(f)for(k=k||oo(l),N=N||oo(U),y=0,_=k.length;y<_;y++)ol(k[y],N[y]);else ol(l,U);return(N=oo(U,"script")).length>0&&Ds(N,!B&&oo(l,"script")),U},cleanData:function(l){for(var u,f,y,_=C.event.special,k=0;void 0!==(f=l[k]);k++)if(Ko(f)){if(u=f[Ze.expando]){if(u.events)for(y in u.events)_[y]?C.event.remove(f,y):C.removeEvent(f,y,u.handle);f[Ze.expando]=void 0}f[Wn.expando]&&(f[Wn.expando]=void 0)}}}),C.fn.extend({detach:function(l){return ys(this,l,!0)},remove:function(l){return ys(this,l)},text:function(l){return No(this,function(u){return void 0===u?C.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=u)})},null,l,arguments.length)},append:function(){return Ps(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Or(this,l).appendChild(l)})},prepend:function(){return Ps(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var u=Or(this,l);u.insertBefore(l,u.firstChild)}})},before:function(){return Ps(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Ps(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,u=0;null!=(l=this[u]);u++)1===l.nodeType&&(C.cleanData(oo(l,!1)),l.textContent="");return this},clone:function(l,u){return l=null!=l&&l,u=null==u?l:u,this.map(function(){return C.clone(this,l,u)})},html:function(l){return No(this,function(u){var f=this[0]||{},y=0,_=this.length;if(void 0===u&&1===f.nodeType)return f.innerHTML;if("string"==typeof u&&!nl.test(u)&&!lo[(tl.exec(u)||["",""])[1].toLowerCase()]){u=C.htmlPrefilter(u);try{for(;y<_;y++)1===(f=this[y]||{}).nodeType&&(C.cleanData(oo(f,!1)),f.innerHTML=u);f=0}catch{}}f&&this.empty().append(u)},null,l,arguments.length)},replaceWith:function(){var l=[];return Ps(this,arguments,function(u){var f=this.parentNode;C.inArray(this,l)<0&&(C.cleanData(oo(this)),f&&f.replaceChild(u,this))},l)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,u){C.fn[l]=function(f){for(var y,_=[],k=C(f),N=k.length-1,U=0;U<=N;U++)y=U===N?this:this.clone(!0),C(k[U])[u](y),Uo.apply(_,y.get());return this.pushStack(_)}});var Jo=new RegExp("^("+ri+")(?!px)[a-z%]+$","i"),ea=/^--/,ai=function(l){var u=l.ownerDocument.defaultView;return(!u||!u.opener)&&(u=Le),u.getComputedStyle(l)},sl=function(l,u,f){var y,_,k={};for(_ in u)k[_]=l.style[_],l.style[_]=u[_];for(_ in y=f.call(l),u)l.style[_]=k[_];return y},Xl=new RegExp(Mn.join("|"),"i");function nr(l,u,f){var y,_,k,N,U=ea.test(u),B=l.style;return(f=f||ai(l))&&(N=f.getPropertyValue(u)||f[u],U&&N&&(N=N.replace(zo,"$1")||void 0),""===N&&!ao(l)&&(N=C.style(l,u)),!Ct.pixelBoxStyles()&&Jo.test(N)&&Xl.test(u)&&(y=B.width,_=B.minWidth,k=B.maxWidth,B.minWidth=B.maxWidth=B.width=N,N=f.width,B.width=y,B.minWidth=_,B.maxWidth=k)),void 0!==N?N+"":N}function li(l,u){return{get:function(){if(!l())return(this.get=u).apply(this,arguments);delete this.get}}}!function(){function l(){if(G){B.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",G.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",hn.appendChild(B).appendChild(G);var le=Le.getComputedStyle(G);f="1%"!==le.top,U=12===u(le.marginLeft),G.style.right="60%",k=36===u(le.right),y=36===u(le.width),G.style.position="absolute",_=12===u(G.offsetWidth/3),hn.removeChild(B),G=null}}function u(le){return Math.round(parseFloat(le))}var f,y,_,k,N,U,B=mt.createElement("div"),G=mt.createElement("div");G.style&&(G.style.backgroundClip="content-box",G.cloneNode(!0).style.backgroundClip="",Ct.clearCloneStyle="content-box"===G.style.backgroundClip,C.extend(Ct,{boxSizingReliable:function(){return l(),y},pixelBoxStyles:function(){return l(),k},pixelPosition:function(){return l(),f},reliableMarginLeft:function(){return l(),U},scrollboxSize:function(){return l(),_},reliableTrDimensions:function(){var le,pe,se,xe;return null==N&&(le=mt.createElement("table"),pe=mt.createElement("tr"),se=mt.createElement("div"),le.style.cssText="position:absolute;left:-11111px;border-collapse:separate",pe.style.cssText="box-sizing:content-box;border:1px solid",pe.style.height="1px",se.style.height="9px",se.style.display="block",hn.appendChild(le).appendChild(pe).appendChild(se),xe=Le.getComputedStyle(pe),N=parseInt(xe.height,10)+parseInt(xe.borderTopWidth,10)+parseInt(xe.borderBottomWidth,10)===pe.offsetHeight,hn.removeChild(le)),N}}))}();var Wo=["Webkit","Moz","ms"],rl=mt.createElement("div").style,ta={};function na(l){return C.cssProps[l]||ta[l]||(l in rl?l:ta[l]=function ec(l){for(var u=l[0].toUpperCase()+l.slice(1),f=Wo.length;f--;)if((l=Wo[f]+u)in rl)return l}(l)||l)}var tc=/^(none|table(?!-c[ea]).+)/,il={position:"absolute",visibility:"hidden",display:"block"},oa={letterSpacing:"0",fontWeight:"400"};function Sn(l,u,f){var y=Tn.exec(u);return y?Math.max(0,y[2]-(f||0))+(y[3]||"px"):u}function yn(l,u,f,y,_,k){var N="width"===u?1:0,U=0,B=0,G=0;if(f===(y?"border":"content"))return 0;for(;N<4;N+=2)"margin"===f&&(G+=C.css(l,f+Mn[N],!0,_)),y?("content"===f&&(B-=C.css(l,"padding"+Mn[N],!0,_)),"margin"!==f&&(B-=C.css(l,"border"+Mn[N]+"Width",!0,_))):(B+=C.css(l,"padding"+Mn[N],!0,_),"padding"!==f?B+=C.css(l,"border"+Mn[N]+"Width",!0,_):U+=C.css(l,"border"+Mn[N]+"Width",!0,_));return!y&&k>=0&&(B+=Math.max(0,Math.ceil(l["offset"+u[0].toUpperCase()+u.slice(1)]-k-B-U-.5))||0),B+G}function ci(l,u,f){var y=ai(l),k=(!Ct.boxSizingReliable()||f)&&"border-box"===C.css(l,"boxSizing",!1,y),N=k,U=nr(l,u,y),B="offset"+u[0].toUpperCase()+u.slice(1);if(Jo.test(U)){if(!f)return U;U="auto"}return(!Ct.boxSizingReliable()&&k||!Ct.reliableTrDimensions()&&dt(l,"tr")||"auto"===U||!parseFloat(U)&&"inline"===C.css(l,"display",!1,y))&&l.getClientRects().length&&(k="border-box"===C.css(l,"boxSizing",!1,y),(N=B in l)&&(U=l[B])),(U=parseFloat(U)||0)+yn(l,u,f||(k?"border":"content"),N,y,U)+"px"}function jn(l,u,f,y,_){return new jn.prototype.init(l,u,f,y,_)}C.extend({cssHooks:{opacity:{get:function(l,u){if(u){var f=nr(l,"opacity");return""===f?"1":f}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(l,u,f,y){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var _,k,N,U=nn(u),B=ea.test(u),G=l.style;if(B||(u=na(U)),N=C.cssHooks[u]||C.cssHooks[U],void 0===f)return N&&"get"in N&&void 0!==(_=N.get(l,!1,y))?_:G[u];if("string"==(k=typeof f)&&(_=Tn.exec(f))&&_[1]&&(f=Xa(l,u,_),k="number"),null==f||f!=f)return;"number"===k&&!B&&(f+=_&&_[3]||(C.cssNumber[U]?"":"px")),!Ct.clearCloneStyle&&""===f&&0===u.indexOf("background")&&(G[u]="inherit"),(!N||!("set"in N)||void 0!==(f=N.set(l,f,y)))&&(B?G.setProperty(u,f):G[u]=f)}},css:function(l,u,f,y){var _,k,N,U=nn(u);return ea.test(u)||(u=na(U)),(N=C.cssHooks[u]||C.cssHooks[U])&&"get"in N&&(_=N.get(l,!0,f)),void 0===_&&(_=nr(l,u,y)),"normal"===_&&u in oa&&(_=oa[u]),""===f||f?(k=parseFloat(_),!0===f||isFinite(k)?k||0:_):_}}),C.each(["height","width"],function(l,u){C.cssHooks[u]={get:function(f,y,_){if(y)return!tc.test(C.css(f,"display"))||f.getClientRects().length&&f.getBoundingClientRect().width?ci(f,u,_):sl(f,il,function(){return ci(f,u,_)})},set:function(f,y,_){var k,N=ai(f),U=!Ct.scrollboxSize()&&"absolute"===N.position,G=(U||_)&&"border-box"===C.css(f,"boxSizing",!1,N),le=_?yn(f,u,_,G,N):0;return G&&U&&(le-=Math.ceil(f["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(N[u])-yn(f,u,"border",!1,N)-.5)),le&&(k=Tn.exec(y))&&"px"!==(k[3]||"px")&&(f.style[u]=y,y=C.css(f,u)),Sn(0,y,le)}}}),C.cssHooks.marginLeft=li(Ct.reliableMarginLeft,function(l,u){if(u)return(parseFloat(nr(l,"marginLeft"))||l.getBoundingClientRect().left-sl(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(l,u){C.cssHooks[l+u]={expand:function(f){for(var y=0,_={},k="string"==typeof f?f.split(" "):[f];y<4;y++)_[l+Mn[y]+u]=k[y]||k[y-2]||k[0];return _}},"margin"!==l&&(C.cssHooks[l+u].set=Sn)}),C.fn.extend({css:function(l,u){return No(this,function(f,y,_){var k,N,U={},B=0;if(Array.isArray(y)){for(k=ai(f),N=y.length;B<N;B++)U[y[B]]=C.css(f,y[B],!1,k);return U}return void 0!==_?C.style(f,y,_):C.css(f,y)},l,u,arguments.length>1)}}),C.Tween=jn,jn.prototype={constructor:jn,init:function(l,u,f,y,_,k){this.elem=l,this.prop=f,this.easing=_||C.easing._default,this.options=u,this.start=this.now=this.cur(),this.end=y,this.unit=k||(C.cssNumber[f]?"":"px")},cur:function(){var l=jn.propHooks[this.prop];return l&&l.get?l.get(this):jn.propHooks._default.get(this)},run:function(l){var u,f=jn.propHooks[this.prop];return this.pos=u=this.options.duration?C.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*u+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),f&&f.set?f.set(this):jn.propHooks._default.set(this),this}},jn.prototype.init.prototype=jn.prototype,jn.propHooks={_default:{get:function(l){var u;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(u=C.css(l.elem,l.prop,""))&&"auto"!==u?u:0},set:function(l){C.fx.step[l.prop]?C.fx.step[l.prop](l):1!==l.elem.nodeType||!C.cssHooks[l.prop]&&null==l.elem.style[na(l.prop)]?l.elem[l.prop]=l.now:C.style(l.elem,l.prop,l.now+l.unit)}}},jn.propHooks.scrollTop=jn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},C.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},C.fx=jn.prototype.init,C.fx.step={};var Ro,ui,al=/^(?:toggle|show|hide)$/,jo=/queueHooks$/;function Os(){ui&&(!1===mt.hidden&&Le.requestAnimationFrame?Le.requestAnimationFrame(Os):Le.setTimeout(Os,C.fx.interval),C.fx.tick())}function nc(){return Le.setTimeout(function(){Ro=void 0}),Ro=Date.now()}function Ms(l,u){var f,y=0,_={height:l};for(u=u?1:0;y<4;y+=2-u)_["margin"+(f=Mn[y])]=_["padding"+f]=l;return u&&(_.opacity=_.width=l),_}function sa(l,u,f){for(var y,_=(Do.tweeners[u]||[]).concat(Do.tweeners["*"]),k=0,N=_.length;k<N;k++)if(y=_[k].call(f,u,l))return y}function Do(l,u,f){var y,_,k=0,N=Do.prefilters.length,U=C.Deferred().always(function(){delete B.elem}),B=function(){if(_)return!1;for(var pe=Ro||nc(),se=Math.max(0,G.startTime+G.duration-pe),lt=1-(se/G.duration||0),Ot=0,xt=G.tweens.length;Ot<xt;Ot++)G.tweens[Ot].run(lt);return U.notifyWith(l,[G,lt,se]),lt<1&&xt?se:(xt||U.notifyWith(l,[G,1,0]),U.resolveWith(l,[G]),!1)},G=U.promise({elem:l,props:C.extend({},u),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},f),originalProperties:u,originalOptions:f,startTime:Ro||nc(),duration:f.duration,tweens:[],createTween:function(pe,se){var xe=C.Tween(l,G.opts,pe,se,G.opts.specialEasing[pe]||G.opts.easing);return G.tweens.push(xe),xe},stop:function(pe){var se=0,xe=pe?G.tweens.length:0;if(_)return this;for(_=!0;se<xe;se++)G.tweens[se].run(1);return pe?(U.notifyWith(l,[G,1,0]),U.resolveWith(l,[G,pe])):U.rejectWith(l,[G,pe]),this}}),le=G.props;for(function oc(l,u){var f,y,_,k,N;for(f in l)if(_=u[y=nn(f)],k=l[f],Array.isArray(k)&&(_=k[1],k=l[f]=k[0]),f!==y&&(l[y]=k,delete l[f]),(N=C.cssHooks[y])&&"expand"in N)for(f in k=N.expand(k),delete l[y],k)f in l||(l[f]=k[f],u[f]=_);else u[y]=_}(le,G.opts.specialEasing);k<N;k++)if(y=Do.prefilters[k].call(G,l,le,G.opts))return ht(y.stop)&&(C._queueHooks(G.elem,G.opts.queue).stop=y.stop.bind(y)),y;return C.map(le,sa,G),ht(G.opts.start)&&G.opts.start.call(l,G),G.progress(G.opts.progress).done(G.opts.done,G.opts.complete).fail(G.opts.fail).always(G.opts.always),C.fx.timer(C.extend(B,{elem:l,anim:G,queue:G.opts.queue})),G}C.Animation=C.extend(Do,{tweeners:{"*":[function(l,u){var f=this.createTween(l,u);return Xa(f.elem,l,Tn.exec(u),f),f}]},tweener:function(l,u){ht(l)?(u=l,l=["*"]):l=l.match(Ho);for(var f,y=0,_=l.length;y<_;y++)(Do.tweeners[f=l[y]]=Do.tweeners[f]||[]).unshift(u)},prefilters:[function Qo(l,u,f){var y,_,k,N,U,B,G,le,pe="width"in u||"height"in u,se=this,xe={},lt=l.style,Ot=l.nodeType&&Qn(l),xt=Ze.get(l,"fxshow");for(y in f.queue||(null==(N=C._queueHooks(l,"fx")).unqueued&&(N.unqueued=0,U=N.empty.fire,N.empty.fire=function(){N.unqueued||U()}),N.unqueued++,se.always(function(){se.always(function(){N.unqueued--,C.queue(l,"fx").length||N.empty.fire()})})),u)if(al.test(_=u[y])){if(delete u[y],k=k||"toggle"===_,_===(Ot?"hide":"show")){if("show"!==_||!xt||void 0===xt[y])continue;Ot=!0}xe[y]=xt&&xt[y]||C.style(l,y)}if((B=!C.isEmptyObject(u))||!C.isEmptyObject(xe))for(y in pe&&1===l.nodeType&&(f.overflow=[lt.overflow,lt.overflowX,lt.overflowY],null==(G=xt&&xt.display)&&(G=Ze.get(l,"display")),"none"===(le=C.css(l,"display"))&&(G?le=G:(Nt([l],!0),G=l.style.display||G,le=C.css(l,"display"),Nt([l]))),("inline"===le||"inline-block"===le&&null!=G)&&"none"===C.css(l,"float")&&(B||(se.done(function(){lt.display=G}),null==G&&(G="none"===(le=lt.display)?"":le)),lt.display="inline-block")),f.overflow&&(lt.overflow="hidden",se.always(function(){lt.overflow=f.overflow[0],lt.overflowX=f.overflow[1],lt.overflowY=f.overflow[2]})),B=!1,xe)B||(xt?"hidden"in xt&&(Ot=xt.hidden):xt=Ze.access(l,"fxshow",{display:G}),k&&(xt.hidden=!Ot),Ot&&Nt([l],!0),se.done(function(){for(y in Ot||Nt([l]),Ze.remove(l,"fxshow"),xe)C.style(l,y,xe[y])})),B=sa(Ot?xt[y]:0,y,se),y in xt||(xt[y]=B.start,Ot&&(B.end=B.start,B.start=0))}],prefilter:function(l,u){u?Do.prefilters.unshift(l):Do.prefilters.push(l)}}),C.speed=function(l,u,f){var y=l&&"object"==typeof l?C.extend({},l):{complete:f||!f&&u||ht(l)&&l,duration:l,easing:f&&u||u&&!ht(u)&&u};return C.fx.off?y.duration=0:"number"!=typeof y.duration&&(y.duration=y.duration in C.fx.speeds?C.fx.speeds[y.duration]:C.fx.speeds._default),(null==y.queue||!0===y.queue)&&(y.queue="fx"),y.old=y.complete,y.complete=function(){ht(y.old)&&y.old.call(this),y.queue&&C.dequeue(this,y.queue)},y},C.fn.extend({fadeTo:function(l,u,f,y){return this.filter(Qn).css("opacity",0).show().end().animate({opacity:u},l,f,y)},animate:function(l,u,f,y){var _=C.isEmptyObject(l),k=C.speed(u,f,y),N=function(){var U=Do(this,C.extend({},l),k);(_||Ze.get(this,"finish"))&&U.stop(!0)};return N.finish=N,_||!1===k.queue?this.each(N):this.queue(k.queue,N)},stop:function(l,u,f){var y=function(_){var k=_.stop;delete _.stop,k(f)};return"string"!=typeof l&&(f=u,u=l,l=void 0),u&&this.queue(l||"fx",[]),this.each(function(){var _=!0,k=null!=l&&l+"queueHooks",N=C.timers,U=Ze.get(this);if(k)U[k]&&U[k].stop&&y(U[k]);else for(k in U)U[k]&&U[k].stop&&jo.test(k)&&y(U[k]);for(k=N.length;k--;)N[k].elem===this&&(null==l||N[k].queue===l)&&(N[k].anim.stop(f),_=!1,N.splice(k,1));(_||!f)&&C.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var u,f=Ze.get(this),y=f[l+"queue"],_=f[l+"queueHooks"],k=C.timers,N=y?y.length:0;for(f.finish=!0,C.queue(this,l,[]),_&&_.stop&&_.stop.call(this,!0),u=k.length;u--;)k[u].elem===this&&k[u].queue===l&&(k[u].anim.stop(!0),k.splice(u,1));for(u=0;u<N;u++)y[u]&&y[u].finish&&y[u].finish.call(this);delete f.finish})}}),C.each(["toggle","show","hide"],function(l,u){var f=C.fn[u];C.fn[u]=function(y,_,k){return null==y||"boolean"==typeof y?f.apply(this,arguments):this.animate(Ms(u,!0),y,_,k)}}),C.each({slideDown:Ms("show"),slideUp:Ms("hide"),slideToggle:Ms("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,u){C.fn[l]=function(f,y,_){return this.animate(u,f,y,_)}}),C.timers=[],C.fx.tick=function(){var l,u=0,f=C.timers;for(Ro=Date.now();u<f.length;u++)!(l=f[u])()&&f[u]===l&&f.splice(u--,1);f.length||C.fx.stop(),Ro=void 0},C.fx.timer=function(l){C.timers.push(l),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ui||(ui=!0,Os())},C.fx.stop=function(){ui=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(l,u){return l=C.fx&&C.fx.speeds[l]||l,this.queue(u=u||"fx",function(f,y){var _=Le.setTimeout(f,l);y.stop=function(){Le.clearTimeout(_)}})},function(){var l=mt.createElement("input"),f=mt.createElement("select").appendChild(mt.createElement("option"));l.type="checkbox",Ct.checkOn=""!==l.value,Ct.optSelected=f.selected,(l=mt.createElement("input")).value="t",l.type="radio",Ct.radioValue="t"===l.value}();var ra,or=C.expr.attrHandle;C.fn.extend({attr:function(l,u){return No(this,C.attr,l,u,arguments.length>1)},removeAttr:function(l){return this.each(function(){C.removeAttr(this,l)})}}),C.extend({attr:function(l,u,f){var y,_,k=l.nodeType;if(3!==k&&8!==k&&2!==k)return typeof l.getAttribute>"u"?C.prop(l,u,f):((1!==k||!C.isXMLDoc(l))&&(_=C.attrHooks[u.toLowerCase()]||(C.expr.match.bool.test(u)?ra:void 0)),void 0!==f?null===f?void C.removeAttr(l,u):_&&"set"in _&&void 0!==(y=_.set(l,f,u))?y:(l.setAttribute(u,f+""),f):_&&"get"in _&&null!==(y=_.get(l,u))?y:null==(y=C.find.attr(l,u))?void 0:y)},attrHooks:{type:{set:function(l,u){if(!Ct.radioValue&&"radio"===u&&dt(l,"input")){var f=l.value;return l.setAttribute("type",u),f&&(l.value=f),u}}}},removeAttr:function(l,u){var f,y=0,_=u&&u.match(Ho);if(_&&1===l.nodeType)for(;f=_[y++];)l.removeAttribute(f)}}),ra={set:function(l,u,f){return!1===u?C.removeAttr(l,f):l.setAttribute(f,f),f}},C.each(C.expr.match.bool.source.match(/\w+/g),function(l,u){var f=or[u]||C.find.attr;or[u]=function(y,_,k){var N,U,B=_.toLowerCase();return k||(U=or[B],or[B]=N,N=null!=f(y,_,k)?B:null,or[B]=U),N}});var ll=/^(?:input|select|textarea|button)$/i,di=/^(?:a|area)$/i;function Cs(l){return(l.match(Ho)||[]).join(" ")}function p(l){return l.getAttribute&&l.getAttribute("class")||""}function Po(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(Ho)||[]}C.fn.extend({prop:function(l,u){return No(this,C.prop,l,u,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[C.propFix[l]||l]})}}),C.extend({prop:function(l,u,f){var y,_,k=l.nodeType;if(3!==k&&8!==k&&2!==k)return(1!==k||!C.isXMLDoc(l))&&(_=C.propHooks[u=C.propFix[u]||u]),void 0!==f?_&&"set"in _&&void 0!==(y=_.set(l,f,u))?y:l[u]=f:_&&"get"in _&&null!==(y=_.get(l,u))?y:l[u]},propHooks:{tabIndex:{get:function(l){var u=C.find.attr(l,"tabindex");return u?parseInt(u,10):ll.test(l.nodeName)||di.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ct.optSelected||(C.propHooks.selected={get:function(l){return null},set:function(l){}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(l){var u,f,y,_,k,N;return ht(l)?this.each(function(U){C(this).addClass(l.call(this,U,p(this)))}):(u=Po(l)).length?this.each(function(){if(y=p(this),f=1===this.nodeType&&" "+Cs(y)+" "){for(k=0;k<u.length;k++)f.indexOf(" "+(_=u[k])+" ")<0&&(f+=_+" ");N=Cs(f),y!==N&&this.setAttribute("class",N)}}):this},removeClass:function(l){var u,f,y,_,k,N;return ht(l)?this.each(function(U){C(this).removeClass(l.call(this,U,p(this)))}):arguments.length?(u=Po(l)).length?this.each(function(){if(y=p(this),f=1===this.nodeType&&" "+Cs(y)+" "){for(k=0;k<u.length;k++)for(_=u[k];f.indexOf(" "+_+" ")>-1;)f=f.replace(" "+_+" "," ");N=Cs(f),y!==N&&this.setAttribute("class",N)}}):this:this.attr("class","")},toggleClass:function(l,u){var f,y,_,k,N=typeof l,U="string"===N||Array.isArray(l);return ht(l)?this.each(function(B){C(this).toggleClass(l.call(this,B,p(this),u),u)}):"boolean"==typeof u&&U?u?this.addClass(l):this.removeClass(l):(f=Po(l),this.each(function(){if(U)for(k=C(this),_=0;_<f.length;_++)k.hasClass(y=f[_])?k.removeClass(y):k.addClass(y);else(void 0===l||"boolean"===N)&&((y=p(this))&&Ze.set(this,"__className__",y),this.setAttribute&&this.setAttribute("class",y||!1===l?"":Ze.get(this,"__className__")||""))}))},hasClass:function(l){var u,f,y=0;for(u=" "+l+" ";f=this[y++];)if(1===f.nodeType&&(" "+Cs(p(f))+" ").indexOf(u)>-1)return!0;return!1}});var ia=/\r/g;C.fn.extend({val:function(l){var u,f,y,_=this[0];return arguments.length?(y=ht(l),this.each(function(k){var N;1===this.nodeType&&(null==(N=y?l.call(this,k,C(this).val()):l)?N="":"number"==typeof N?N+="":Array.isArray(N)&&(N=C.map(N,function(U){return null==U?"":U+""})),(!(u=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])||!("set"in u)||void 0===u.set(this,N,"value"))&&(this.value=N))})):_?(u=C.valHooks[_.type]||C.valHooks[_.nodeName.toLowerCase()])&&"get"in u&&void 0!==(f=u.get(_,"value"))?f:"string"==typeof(f=_.value)?f.replace(ia,""):null==f?"":f:void 0}}),C.extend({valHooks:{option:{get:function(l){var u=C.find.attr(l,"value");return null!=u?u:Cs(C.text(l))}},select:{get:function(l){var u,f,y,_=l.options,k=l.selectedIndex,N="select-one"===l.type,U=N?null:[],B=N?k+1:_.length;for(y=k<0?B:N?k:0;y<B;y++)if(((f=_[y]).selected||y===k)&&!f.disabled&&(!f.parentNode.disabled||!dt(f.parentNode,"optgroup"))){if(u=C(f).val(),N)return u;U.push(u)}return U},set:function(l,u){for(var f,y,_=l.options,k=C.makeArray(u),N=_.length;N--;)((y=_[N]).selected=C.inArray(C.valHooks.option.get(y),k)>-1)&&(f=!0);return f||(l.selectedIndex=-1),k}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(l,u){if(Array.isArray(u))return l.checked=C.inArray(C(l).val(),u)>-1}},Ct.checkOn||(C.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})});var sr=Le.location,aa={guid:Date.now()},fi=/\?/;C.parseXML=function(l){var u,f;if(!l||"string"!=typeof l)return null;try{u=(new Le.DOMParser).parseFromString(l,"text/xml")}catch{}return f=u&&u.getElementsByTagName("parsererror")[0],(!u||f)&&C.error("Invalid XML: "+(f?C.map(f.childNodes,function(y){return y.textContent}).join("\n"):l)),u};var rr=/^(?:focusinfocus|focusoutblur)$/,la=function(l){l.stopPropagation()};C.extend(C.event,{trigger:function(l,u,f,y){var _,k,N,U,B,G,le,pe,se=[f||mt],xe=tr.call(l,"type")?l.type:l,lt=tr.call(l,"namespace")?l.namespace.split("."):[];if(k=pe=N=f=f||mt,3!==f.nodeType&&8!==f.nodeType&&!rr.test(xe+C.event.triggered)&&(xe.indexOf(".")>-1&&(lt=xe.split("."),xe=lt.shift(),lt.sort()),B=xe.indexOf(":")<0&&"on"+xe,(l=l[C.expando]?l:new C.Event(xe,"object"==typeof l&&l)).isTrigger=y?2:3,l.namespace=lt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+lt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=f),u=null==u?[l]:C.makeArray(u,[l]),le=C.event.special[xe]||{},y||!le.trigger||!1!==le.trigger.apply(f,u))){if(!y&&!le.noBubble&&!ps(f)){for(rr.test((U=le.delegateType||xe)+xe)||(k=k.parentNode);k;k=k.parentNode)se.push(k),N=k;N===(f.ownerDocument||mt)&&se.push(N.defaultView||N.parentWindow||Le)}for(_=0;(k=se[_++])&&!l.isPropagationStopped();)pe=k,l.type=_>1?U:le.bindType||xe,(G=(Ze.get(k,"events")||Object.create(null))[l.type]&&Ze.get(k,"handle"))&&G.apply(k,u),(G=B&&k[B])&&G.apply&&Ko(k)&&(l.result=G.apply(k,u),!1===l.result&&l.preventDefault());return l.type=xe,!y&&!l.isDefaultPrevented()&&(!le._default||!1===le._default.apply(se.pop(),u))&&Ko(f)&&B&&ht(f[xe])&&!ps(f)&&((N=f[B])&&(f[B]=null),C.event.triggered=xe,l.isPropagationStopped()&&pe.addEventListener(xe,la),f[xe](),l.isPropagationStopped()&&pe.removeEventListener(xe,la),C.event.triggered=void 0,N&&(f[B]=N)),l.result}},simulate:function(l,u,f){var y=C.extend(new C.Event,f,{type:l,isSimulated:!0});C.event.trigger(y,null,u)}}),C.fn.extend({trigger:function(l,u){return this.each(function(){C.event.trigger(l,u,this)})},triggerHandler:function(l,u){var f=this[0];if(f)return C.event.trigger(l,u,f,!0)}});var ca=/\[\]$/,mi=/\r?\n/g,pi=/^(?:submit|button|image|reset|file)$/i,gi=/^(?:input|select|textarea|keygen)/i;function H(l,u,f,y){var _;if(Array.isArray(u))C.each(u,function(k,N){f||ca.test(l)?y(l,N):H(l+"["+("object"==typeof N&&null!=N?k:"")+"]",N,f,y)});else if(f||"object"!==cn(u))y(l,u);else for(_ in u)H(l+"["+_+"]",u[_],f,y)}C.param=function(l,u){var f,y=[],_=function(k,N){var U=ht(N)?N():N;y[y.length]=encodeURIComponent(k)+"="+encodeURIComponent(null==U?"":U)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!C.isPlainObject(l))C.each(l,function(){_(this.name,this.value)});else for(f in l)H(f,l[f],u,_);return y.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=C.prop(this,"elements");return l?C.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!C(this).is(":disabled")&&gi.test(this.nodeName)&&!pi.test(l)&&(this.checked||!bs.test(l))}).map(function(l,u){var f=C(this).val();return null==f?null:Array.isArray(f)?C.map(f,function(y){return{name:u.name,value:y.replace(mi,"\r\n")}}):{name:u.name,value:f.replace(mi,"\r\n")}}).get()}});var Y=/%20/g,cl=/#.*$/,Ir=/([?&])_=[^&]*/,ua=/^(.*?):[ \t]*([^\r\n]*)$/gm,dl=/^(?:GET|HEAD)$/,fl=/^\/\//,Co={},hi={},bi="*/".concat("*"),xo=mt.createElement("a");function Oo(l){return function(u,f){"string"!=typeof u&&(f=u,u="*");var y,_=0,k=u.toLowerCase().match(Ho)||[];if(ht(f))for(;y=k[_++];)"+"===y[0]?(y=y.slice(1)||"*",(l[y]=l[y]||[]).unshift(f)):(l[y]=l[y]||[]).push(f)}}function xs(l,u,f,y){var _={},k=l===hi;function N(U){var B;return _[U]=!0,C.each(l[U]||[],function(G,le){var pe=le(u,f,y);return"string"!=typeof pe||k||_[pe]?k?!(B=pe):void 0:(u.dataTypes.unshift(pe),N(pe),!1)}),B}return N(u.dataTypes[0])||!_["*"]&&N("*")}function da(l,u){var f,y,_=C.ajaxSettings.flatOptions||{};for(f in u)void 0!==u[f]&&((_[f]?l:y||(y={}))[f]=u[f]);return y&&C.extend(!0,l,y),l}xo.href=sr.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:sr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(sr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,u){return u?da(da(l,C.ajaxSettings),u):da(C.ajaxSettings,l)},ajaxPrefilter:Oo(Co),ajaxTransport:Oo(hi),ajax:function(l,u){"object"==typeof l&&(u=l,l=void 0);var f,y,_,k,N,U,B,G,le,pe,se=C.ajaxSetup({},u=u||{}),xe=se.context||se,lt=se.context&&(xe.nodeType||xe.jquery)?C(xe):C.event,Ot=C.Deferred(),xt=C.Callbacks("once memory"),kn=se.statusCode||{},Cn={},Mo={},so="canceled",At={readyState:0,getResponseHeader:function(Mt){var Qt;if(B){if(!k)for(k={};Qt=ua.exec(_);)k[Qt[1].toLowerCase()+" "]=(k[Qt[1].toLowerCase()+" "]||[]).concat(Qt[2]);Qt=k[Mt.toLowerCase()+" "]}return null==Qt?null:Qt.join(", ")},getAllResponseHeaders:function(){return B?_:null},setRequestHeader:function(Mt,Qt){return null==B&&(Mt=Mo[Mt.toLowerCase()]=Mo[Mt.toLowerCase()]||Mt,Cn[Mt]=Qt),this},overrideMimeType:function(Mt){return null==B&&(se.mimeType=Mt),this},statusCode:function(Mt){var Qt;if(Mt)if(B)At.always(Mt[At.status]);else for(Qt in Mt)kn[Qt]=[kn[Qt],Mt[Qt]];return this},abort:function(Mt){var Qt=Mt||so;return f&&f.abort(Qt),Rt(0,Qt),this}};if(Ot.promise(At),se.url=((l||se.url||sr.href)+"").replace(fl,sr.protocol+"//"),se.type=u.method||u.type||se.method||se.type,se.dataTypes=(se.dataType||"*").toLowerCase().match(Ho)||[""],null==se.crossDomain){U=mt.createElement("a");try{U.href=se.url,U.href=U.href,se.crossDomain=xo.protocol+"//"+xo.host!=U.protocol+"//"+U.host}catch{se.crossDomain=!0}}if(se.data&&se.processData&&"string"!=typeof se.data&&(se.data=C.param(se.data,se.traditional)),xs(Co,se,u,At),B)return At;for(le in(G=C.event&&se.global)&&0==C.active++&&C.event.trigger("ajaxStart"),se.type=se.type.toUpperCase(),se.hasContent=!dl.test(se.type),y=se.url.replace(cl,""),se.hasContent?se.data&&se.processData&&0===(se.contentType||"").indexOf("application/x-www-form-urlencoded")&&(se.data=se.data.replace(Y,"+")):(pe=se.url.slice(y.length),se.data&&(se.processData||"string"==typeof se.data)&&(y+=(fi.test(y)?"&":"?")+se.data,delete se.data),!1===se.cache&&(y=y.replace(Ir,"$1"),pe=(fi.test(y)?"&":"?")+"_="+aa.guid+++pe),se.url=y+pe),se.ifModified&&(C.lastModified[y]&&At.setRequestHeader("If-Modified-Since",C.lastModified[y]),C.etag[y]&&At.setRequestHeader("If-None-Match",C.etag[y])),(se.data&&se.hasContent&&!1!==se.contentType||u.contentType)&&At.setRequestHeader("Content-Type",se.contentType),At.setRequestHeader("Accept",se.dataTypes[0]&&se.accepts[se.dataTypes[0]]?se.accepts[se.dataTypes[0]]+("*"!==se.dataTypes[0]?", "+bi+"; q=0.01":""):se.accepts["*"]),se.headers)At.setRequestHeader(le,se.headers[le]);if(se.beforeSend&&(!1===se.beforeSend.call(xe,At,se)||B))return At.abort();if(so="abort",xt.add(se.complete),At.done(se.success),At.fail(se.error),f=xs(hi,se,u,At)){if(At.readyState=1,G&&lt.trigger("ajaxSend",[At,se]),B)return At;se.async&&se.timeout>0&&(N=Le.setTimeout(function(){At.abort("timeout")},se.timeout));try{B=!1,f.send(Cn,Rt)}catch(Mt){if(B)throw Mt;Rt(-1,Mt)}}else Rt(-1,"No Transport");function Rt(Mt,Qt,Br,Lr){var on,Bn,Io,Es,Vo,co=Qt;B||(B=!0,N&&Le.clearTimeout(N),f=void 0,_=Lr||"",At.readyState=Mt>0?4:0,on=Mt>=200&&Mt<300||304===Mt,Br&&(Es=function gt(l,u,f){for(var y,_,k,N,U=l.contents,B=l.dataTypes;"*"===B[0];)B.shift(),void 0===y&&(y=l.mimeType||u.getResponseHeader("Content-Type"));if(y)for(_ in U)if(U[_]&&U[_].test(y)){B.unshift(_);break}if(B[0]in f)k=B[0];else{for(_ in f){if(!B[0]||l.converters[_+" "+B[0]]){k=_;break}N||(N=_)}k=k||N}if(k)return k!==B[0]&&B.unshift(k),f[k]}(se,At,Br)),!on&&C.inArray("script",se.dataTypes)>-1&&C.inArray("json",se.dataTypes)<0&&(se.converters["text script"]=function(){}),Es=function sc(l,u,f,y){var _,k,N,U,B,G={},le=l.dataTypes.slice();if(le[1])for(N in l.converters)G[N.toLowerCase()]=l.converters[N];for(k=le.shift();k;)if(l.responseFields[k]&&(f[l.responseFields[k]]=u),!B&&y&&l.dataFilter&&(u=l.dataFilter(u,l.dataType)),B=k,k=le.shift())if("*"===k)k=B;else if("*"!==B&&B!==k){if(!(N=G[B+" "+k]||G["* "+k]))for(_ in G)if((U=_.split(" "))[1]===k&&(N=G[B+" "+U[0]]||G["* "+U[0]])){!0===N?N=G[_]:!0!==G[_]&&(k=U[0],le.unshift(U[1]));break}if(!0!==N)if(N&&l.throws)u=N(u);else try{u=N(u)}catch(pe){return{state:"parsererror",error:N?pe:"No conversion from "+B+" to "+k}}}return{state:"success",data:u}}(se,Es,At,on),on?(se.ifModified&&((Vo=At.getResponseHeader("Last-Modified"))&&(C.lastModified[y]=Vo),(Vo=At.getResponseHeader("etag"))&&(C.etag[y]=Vo)),204===Mt||"HEAD"===se.type?co="nocontent":304===Mt?co="notmodified":(co=Es.state,Bn=Es.data,on=!(Io=Es.error))):(Io=co,(Mt||!co)&&(co="error",Mt<0&&(Mt=0))),At.status=Mt,At.statusText=(Qt||co)+"",on?Ot.resolveWith(xe,[Bn,co,At]):Ot.rejectWith(xe,[At,co,Io]),At.statusCode(kn),kn=void 0,G&&lt.trigger(on?"ajaxSuccess":"ajaxError",[At,se,on?Bn:Io]),xt.fireWith(xe,[At,co]),G&&(lt.trigger("ajaxComplete",[At,se]),--C.active||C.event.trigger("ajaxStop")))}return At},getJSON:function(l,u,f){return C.get(l,u,f,"json")},getScript:function(l,u){return C.get(l,void 0,u,"script")}}),C.each(["get","post"],function(l,u){C[u]=function(f,y,_,k){return ht(y)&&(k=k||_,_=y,y=void 0),C.ajax(C.extend({url:f,type:u,dataType:k,data:y,success:_},C.isPlainObject(f)&&f))}}),C.ajaxPrefilter(function(l){var u;for(u in l.headers)"content-type"===u.toLowerCase()&&(l.contentType=l.headers[u]||"")}),C._evalUrl=function(l,u,f){return C.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){C.globalEval(y,u,f)}})},C.fn.extend({wrapAll:function(l){var u;return this[0]&&(ht(l)&&(l=l.call(this[0])),u=C(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&u.insertBefore(this[0]),u.map(function(){for(var f=this;f.firstElementChild;)f=f.firstElementChild;return f}).append(this)),this},wrapInner:function(l){return ht(l)?this.each(function(u){C(this).wrapInner(l.call(this,u))}):this.each(function(){var u=C(this),f=u.contents();f.length?f.wrapAll(l):u.append(l)})},wrap:function(l){var u=ht(l);return this.each(function(f){C(this).wrapAll(u?l.call(this,f):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(l){return!C.expr.pseudos.visible(l)},C.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new Le.XMLHttpRequest}catch{}};var fa={0:200,1223:204},ir=C.ajaxSettings.xhr();Ct.cors=!!ir&&"withCredentials"in ir,Ct.ajax=ir=!!ir,C.ajaxTransport(function(l){var u,f;if(Ct.cors||ir&&!l.crossDomain)return{send:function(y,_){var k,N=l.xhr();if(N.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(k in l.xhrFields)N[k]=l.xhrFields[k];for(k in l.mimeType&&N.overrideMimeType&&N.overrideMimeType(l.mimeType),!l.crossDomain&&!y["X-Requested-With"]&&(y["X-Requested-With"]="XMLHttpRequest"),y)N.setRequestHeader(k,y[k]);u=function(U){return function(){u&&(u=f=N.onload=N.onerror=N.onabort=N.ontimeout=N.onreadystatechange=null,"abort"===U?N.abort():"error"===U?"number"!=typeof N.status?_(0,"error"):_(N.status,N.statusText):_(fa[N.status]||N.status,N.statusText,"text"!==(N.responseType||"text")||"string"!=typeof N.responseText?{binary:N.response}:{text:N.responseText},N.getAllResponseHeaders()))}},N.onload=u(),f=N.onerror=N.ontimeout=u("error"),void 0!==N.onabort?N.onabort=f:N.onreadystatechange=function(){4===N.readyState&&Le.setTimeout(function(){u&&f()})},u=u("abort");try{N.send(l.hasContent&&l.data||null)}catch(U){if(u)throw U}},abort:function(){u&&u()}}}),C.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return C.globalEval(l),l}}}),C.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),C.ajaxTransport("script",function(l){var u,f;if(l.crossDomain||l.scriptAttrs)return{send:function(y,_){u=C("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",f=function(k){u.remove(),f=null,k&&_("error"===k.type?404:200,k.type)}),mt.head.appendChild(u[0])},abort:function(){f&&f()}}});var l,ml=[],ma=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=ml.pop()||C.expando+"_"+aa.guid++;return this[l]=!0,l}}),C.ajaxPrefilter("json jsonp",function(l,u,f){var y,_,k,N=!1!==l.jsonp&&(ma.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&ma.test(l.data)&&"data");if(N||"jsonp"===l.dataTypes[0])return y=l.jsonpCallback=ht(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,N?l[N]=l[N].replace(ma,"$1"+y):!1!==l.jsonp&&(l.url+=(fi.test(l.url)?"&":"?")+l.jsonp+"="+y),l.converters["script json"]=function(){return k||C.error(y+" was not called"),k[0]},l.dataTypes[0]="json",_=Le[y],Le[y]=function(){k=arguments},f.always(function(){void 0===_?C(Le).removeProp(y):Le[y]=_,l[y]&&(l.jsonpCallback=u.jsonpCallback,ml.push(y)),k&&ht(_)&&_(k[0]),k=_=void 0}),"script"}),Ct.createHTMLDocument=((l=mt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),C.parseHTML=function(l,u,f){return"string"!=typeof l?[]:("boolean"==typeof u&&(f=u,u=!1),u||(Ct.createHTMLDocument?((y=(u=mt.implementation.createHTMLDocument("")).createElement("base")).href=mt.location.href,u.head.appendChild(y)):u=mt),k=!f&&[],(_=wr.exec(l))?[u.createElement(_[1])]:(_=Rr([l],u,k),k&&k.length&&C(k).remove(),C.merge([],_.childNodes)));var y,_,k},C.fn.load=function(l,u,f){var y,_,k,N=this,U=l.indexOf(" ");return U>-1&&(y=Cs(l.slice(U)),l=l.slice(0,U)),ht(u)?(f=u,u=void 0):u&&"object"==typeof u&&(_="POST"),N.length>0&&C.ajax({url:l,type:_||"GET",dataType:"html",data:u}).done(function(B){k=arguments,N.html(y?C("<div>").append(C.parseHTML(B)).find(y):B)}).always(f&&function(B,G){N.each(function(){f.apply(this,k||[B.responseText,G,B])})}),this},C.expr.pseudos.animated=function(l){return C.grep(C.timers,function(u){return l===u.elem}).length},C.offset={setOffset:function(l,u,f){var y,_,k,N,U,B,le=C.css(l,"position"),pe=C(l),se={};"static"===le&&(l.style.position="relative"),U=pe.offset(),k=C.css(l,"top"),B=C.css(l,"left"),("absolute"===le||"fixed"===le)&&(k+B).indexOf("auto")>-1?(N=(y=pe.position()).top,_=y.left):(N=parseFloat(k)||0,_=parseFloat(B)||0),ht(u)&&(u=u.call(l,f,C.extend({},U))),null!=u.top&&(se.top=u.top-U.top+N),null!=u.left&&(se.left=u.left-U.left+_),"using"in u?u.using.call(l,se):pe.css(se)}},C.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(_){C.offset.setOffset(this,l,_)});var u,f,y=this[0];return y?y.getClientRects().length?{top:(u=y.getBoundingClientRect()).top+(f=y.ownerDocument.defaultView).pageYOffset,left:u.left+f.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,u,f,y=this[0],_={top:0,left:0};if("fixed"===C.css(y,"position"))u=y.getBoundingClientRect();else{for(u=this.offset(),f=y.ownerDocument,l=y.offsetParent||f.documentElement;l&&(l===f.body||l===f.documentElement)&&"static"===C.css(l,"position");)l=l.parentNode;l&&l!==y&&1===l.nodeType&&((_=C(l).offset()).top+=C.css(l,"borderTopWidth",!0),_.left+=C.css(l,"borderLeftWidth",!0))}return{top:u.top-_.top-C.css(y,"marginTop",!0),left:u.left-_.left-C.css(y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===C.css(l,"position");)l=l.offsetParent;return l||hn})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,u){var f="pageYOffset"===u;C.fn[l]=function(y){return No(this,function(_,k,N){var U;if(ps(_)?U=_:9===_.nodeType&&(U=_.defaultView),void 0===N)return U?U[u]:_[k];U?U.scrollTo(f?U.pageXOffset:N,f?N:U.pageYOffset):_[k]=N},l,y,arguments.length)}}),C.each(["top","left"],function(l,u){C.cssHooks[u]=li(Ct.pixelPosition,function(f,y){if(y)return y=nr(f,u),Jo.test(y)?C(f).position()[u]+"px":y})}),C.each({Height:"height",Width:"width"},function(l,u){C.each({padding:"inner"+l,content:u,"":"outer"+l},function(f,y){C.fn[y]=function(_,k){var N=arguments.length&&(f||"boolean"!=typeof _),U=f||(!0===_||!0===k?"margin":"border");return No(this,function(B,G,le){var pe;return ps(B)?0===y.indexOf("outer")?B["inner"+l]:B.document.documentElement["client"+l]:9===B.nodeType?(pe=B.documentElement,Math.max(B.body["scroll"+l],pe["scroll"+l],B.body["offset"+l],pe["offset"+l],pe["client"+l])):void 0===le?C.css(B,G,U):C.style(B,G,le,U)},u,N?_:void 0,N)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,u){C.fn[u]=function(f){return this.on(u,f)}}),C.fn.extend({bind:function(l,u,f){return this.on(l,null,u,f)},unbind:function(l,u){return this.off(l,null,u)},delegate:function(l,u,f,y){return this.on(u,l,f,y)},undelegate:function(l,u,f){return 1===arguments.length?this.off(l,"**"):this.off(u,l||"**",f)},hover:function(l,u){return this.on("mouseenter",l).on("mouseleave",u||l)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,u){C.fn[u]=function(f,y){return arguments.length>0?this.on(u,null,f,y):this.trigger(u)}});var rc=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(l,u){var f,y,_;if("string"==typeof u&&(f=l[u],u=l,l=f),ht(l))return y=pn.call(arguments,2),_=function(){return l.apply(u||this,y.concat(pn.call(arguments)))},_.guid=l.guid=l.guid||C.guid++,_},C.holdReady=function(l){l?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=dt,C.isFunction=ht,C.isWindow=ps,C.camelCase=nn,C.type=cn,C.now=Date.now,C.isNumeric=function(l){var u=C.type(l);return("number"===u||"string"===u)&&!isNaN(l-parseFloat(l))},C.trim=function(l){return null==l?"":(l+"").replace(rc,"$1")},void 0!==(vo=function(){return C}.apply(ni,[]))&&(Ns.exports=vo);var Is=Le.jQuery,Su=Le.$;return C.noConflict=function(l){return Le.$===C&&(Le.$=Su),l&&Le.jQuery===C&&(Le.jQuery=Is),C},typeof $e>"u"&&(Le.jQuery=Le.$=C),C})},5617:(Ns,ni,en)=>{var vo=en(7156).default;!function(){"use strict";var Le=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},pn=function(e){return{eq:e}},ms=pn(function(e,t){return e===t}),Uo=ms,_n=function(e){return pn(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,s=0;s<o;s++)if(!e.eq(t[s],n[s]))return!1;return!0})},Qa=function(e){return pn(function(t,n){var o=Object.keys(t),s=Object.keys(n);if(!function(e,t){return function(e,t){return pn(function(n,o){return e.eq(t(n),t(o))})}(_n(e),function(n){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(n,t)})}(Uo).eq(o,s))return!1;for(var r=o.length,i=0;i<r;i++){var a=o[i];if(!e.eq(t[a],n[a]))return!1}return!0})},tr=pn(function(e,t){if(e===t)return!0;var n=Le(e);return n===Le(t)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(n)?e===t:"array"===n?_n(tr).eq(e,t):"object"===n&&Qa(tr).eq(e,t))});const Kl=Object.getPrototypeOf,Jl=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},ht=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&Jl(e,String,(n,o)=>o.isPrototypeOf(n))?"string":t})(t)===e,ps=e=>t=>typeof t===e,mt=e=>t=>e===t,Er=(e,t)=>cn(e)&&Jl(e,t,(n,o)=>Kl(n)===o),Fe=ht("string"),cn=ht("object"),Yi=e=>Er(e,Object),gn=ht("array"),C=mt(null),qn=ps("boolean"),dt=mt(void 0),Gt=e=>null==e,ve=e=>!Gt(e),St=ps("function"),_t=ps("number"),zo=(e,t)=>{if(gn(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},et=()=>{},gs=(e,t)=>(...n)=>e(t.apply(null,n)),no=(e,t)=>n=>e(t(n)),Ce=e=>()=>e,rn=e=>e,Ki=(e,t)=>e===t;function Te(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const wr=e=>t=>!e(t),Sr=e=>()=>{throw new Error(e)},oi=e=>e(),_r=e=>{e()},jt=Ce(!1),an=Ce(!0);class T{constructor(t,n){this.tag=t,this.value=n}static some(t){return new T(!0,t)}static none(){return T.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?T.some(t(this.value)):T.none()}bind(t){return this.tag?t(this.value):T.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:T.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(null!=t?t:"Called getOrDie on None")}static from(t){return ve(t)?T.some(t):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);const Tr=Array.prototype.slice,Ho=Array.prototype.indexOf,qo=Array.prototype.push,Rs=(e,t)=>Ho.call(e,t),kt=(e,t)=>Rs(e,t)>-1,Kt=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},pt=(e,t)=>{const n=e.length,o=new Array(n);for(let s=0;s<n;s++)o[s]=t(e[s],s);return o},re=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},No=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},kr=(e,t)=>{const n=[],o=[];for(let s=0,r=e.length;s<r;s++){const i=e[s];(t(i,s)?n:o).push(i)}return{pass:n,fail:o}},Ve=(e,t)=>{const n=[];for(let o=0,s=e.length;o<s;o++){const r=e[o];t(r,o)&&n.push(r)}return n},Nr=(e,t,n)=>(No(e,(o,s)=>{n=t(n,o,s)}),n),nn=(e,t,n)=>(re(e,(o,s)=>{n=t(n,o,s)}),n),Ko=(e,t,n)=>{for(let o=0,s=e.length;o<s;o++){const r=e[o];if(t(r,o))return T.some(r);if(n(r,o))break}return T.none()},Jt=(e,t)=>Ko(e,t,jt),Ze=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return T.some(n);return T.none()},Wn=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!gn(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);qo.apply(t,e[n])}return t},yo=(e,t)=>Wn(pt(e,t)),hs=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n))return!1;return!0},Ar=e=>{const t=Tr.call(e,0);return t.reverse(),t},Lt=(e,t)=>Ve(e,n=>!kt(t,n)),ri=(e,t)=>{const n={};for(let o=0,s=e.length;o<s;o++){const r=e[o];n[String(r)]=t(r,o)}return n},Tn=(e,t)=>{const n=Tr.call(e,0);return n.sort(t),n},Mn=(e,t)=>t>=0&&t<e.length?T.some(e[t]):T.none(),hn=e=>Mn(e,0),ao=e=>Mn(e,e.length-1),Jn=St(Array.from)?Array.from:e=>Tr.call(e),Qn=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return T.none()},In=Object.keys,el=Object.hasOwnProperty,Nt=(e,t)=>{const n=In(e);for(let o=0,s=n.length;o<s;o++){const r=n[o];t(e[r],r)}},bs=(e,t)=>tl(e,(n,o)=>({k:o,v:t(n,o)})),tl=(e,t)=>{const n={};return Nt(e,(o,s)=>{const r=t(o,s);n[r.k]=r.v}),n},ii=e=>(t,n)=>{e[n]=t},lo=(e,t,n,o)=>{Nt(e,(s,r)=>{(t(s,r)?n:o)(s,r)})},Ds=(e,t)=>{const n={};return lo(e,t,ii(n),et),n},Ji=(e,t)=>{const n=[];return Nt(e,(o,s)=>{n.push(t(o,s))}),n},Rr=e=>Ji(e,rn),$t=(e,t)=>Ge(e,t)?T.from(e[t]):T.none(),Ge=(e,t)=>el.call(e,t),Ao=(e,t)=>Ge(e,t)&&null!=e[t],Pr=e=>{const t={};return re(e,n=>{t[n]={}}),In(t)},nl=e=>void 0!==e.length,Qi=Array.isArray,Or=(e,t,n)=>{if(!e)return!1;if(n=n||e,nl(e)){for(let o=0,s=e.length;o<s;o++)if(!1===t.call(n,e[o],o,e))return!1}else for(const o in e)if(Ge(e,o)&&!1===t.call(n,e[o],o,e))return!1;return!0},Xi=(e,t)=>{const n=[];return Or(e,(o,s)=>{n.push(t(o,s,e))}),n},Mr=(e,t)=>{const n=[];return Or(e,(o,s)=>{(!t||t(o,s,e))&&n.push(o)}),n},vs=(e,t,n,o)=>{let s=dt(n)?e[0]:n;for(let r=0;r<e.length;r++)s=t.call(o,s,e[r],r);return s},Ps=(e,t,n)=>{for(let o=0,s=e.length;o<s;o++)if(t.call(n,e[o],o,e))return o;return-1},ys=e=>e[e.length-1],Jo=e=>{let n,t=!1;return(...o)=>(t||(t=!0,n=e.apply(null,o)),n)},nr=()=>li(0,0),li=(e,t)=>({major:e,minor:t}),Wo={nu:li,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?nr():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};const o=s=>Number(t.replace(n,"$"+s));return li(o(1),o(2))})(e,n)},unknown:nr},ta=(e,t)=>{const n=String(t).toLowerCase();return Jt(e,o=>o.search(n))},il=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,oa=(e,t)=>yn(e,t)?((e,t)=>e.substring(t))(e,t.length):e,Sn=(e,t,n=0,o)=>{const s=e.indexOf(t,n);return-1!==s&&(!!dt(o)||s+t.length<=o)},yn=(e,t)=>il(e,t,0),ci=(e,t)=>il(e,t,e.length-t.length),jn=e=>t=>t.replace(e,""),Ro=jn(/^\s+|\s+$/g),ui=jn(/^\s+/g),al=jn(/\s+$/g),jo=e=>e.length>0,Os=e=>!jo(e),Ms=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?T.none():T.some(n)},sa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qo=e=>t=>Sn(t,e),oc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Sn(e,"edge/")&&Sn(e,"chrome")&&Sn(e,"safari")&&Sn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,sa],search:e=>Sn(e,"chrome")&&!Sn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Sn(e,"msie")||Sn(e,"trident")},{name:"Opera",versionRegexes:[sa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qo("firefox")},{name:"Safari",versionRegexes:[sa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Sn(e,"safari")||Sn(e,"mobile/"))&&Sn(e,"applewebkit")}],Do=[{name:"Windows",search:Qo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Sn(e,"iphone")||Sn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Qo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qo("linux"),versionRegexes:[]},{name:"Solaris",search:Qo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Qo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ra={browsers:Ce(oc),oses:Ce(Do)},ll="Chromium",p="Firefox",sr=e=>{const t=e.current,o=s=>()=>t===s;return{current:t,version:e.version,isEdge:o("Edge"),isChromium:o(ll),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(p),isSafari:o("Safari")}},aa_unknown=()=>sr({current:void 0,version:Wo.unknown()}),aa_nu=sr,fi=(Ce("Edge"),Ce(ll),Ce("IE"),Ce("Opera"),Ce(p),Ce("Safari"),"Windows"),la="Android",pi="Solaris",gi="FreeBSD",H="ChromeOS",cl=e=>{const t=e.current,o=s=>()=>t===s;return{current:t,version:e.version,isWindows:o(fi),isiOS:o("iOS"),isAndroid:o(la),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(pi),isFreeBSD:o(gi),isChromeOS:o(H)}},Ir_unknown=()=>cl({current:void 0,version:Wo.unknown()}),Ir_nu=cl,dl=(Ce(fi),Ce("iOS"),Ce(la),Ce("Linux"),Ce("macOS"),Ce(pi),Ce(gi),Ce(H),e=>window.matchMedia(e).matches);let fl=Jo(()=>((e,t,n)=>{const o=ra.browsers(),s=ra.oses(),r=t.bind(c=>((e,t)=>Qn(t.brands,n=>{const o=n.brand.toLowerCase();return Jt(e,s=>{var r;return o===(null===(r=s.brand)||void 0===r?void 0:r.toLowerCase())}).map(s=>({current:s.name,version:Wo.nu(parseInt(n.version,10),0)}))}))(o,c)).orThunk(()=>((e,t)=>ta(e,t).map(n=>{const o=Wo.detect(n.versionRegexes,t);return{current:n.name,version:o}}))(o,e)).fold(aa_unknown,aa_nu),i=((e,t)=>ta(e,t).map(n=>{const o=Wo.detect(n.versionRegexes,t);return{current:n.name,version:o}}))(s,e).fold(Ir_unknown,Ir_nu),a=((e,t,n,o)=>{const s=e.isiOS()&&!0===/ipad/i.test(n),r=e.isiOS()&&!s,i=e.isiOS()||e.isAndroid(),a=i||o("(pointer:coarse)"),c=s||!r&&i&&o("(min-device-width:768px)"),m=r||i&&!c,v=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),x=!m&&!c&&!v;return{isiPad:Ce(s),isiPhone:Ce(r),isTablet:Ce(c),isPhone:Ce(m),isTouch:Ce(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ce(v),isDesktop:Ce(x)}})(i,r,e,n);return{browser:r,os:i,deviceType:a}})(navigator.userAgent,T.from(navigator.userAgentData),dl));const Co=()=>fl(),hi=navigator.userAgent,bi=Co(),xo=bi.browser,Oo=bi.os,xs=bi.deviceType,da=-1!==hi.indexOf("Windows Phone"),gt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:xo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!xo.isIE(),windowsPhone:da,browser:{current:xo.current,version:xo.version,isChromium:xo.isChromium,isEdge:xo.isEdge,isFirefox:xo.isFirefox,isIE:xo.isIE,isOpera:xo.isOpera,isSafari:xo.isSafari},os:{current:Oo.current,version:Oo.version,isAndroid:Oo.isAndroid,isChromeOS:Oo.isChromeOS,isFreeBSD:Oo.isFreeBSD,isiOS:Oo.isiOS,isLinux:Oo.isLinux,isMacOS:Oo.isMacOS,isSolaris:Oo.isSolaris,isWindows:Oo.isWindows},deviceType:{isDesktop:xs.isDesktop,isiPad:xs.isiPad,isiPhone:xs.isiPhone,isPhone:xs.isPhone,isTablet:xs.isTablet,isTouch:xs.isTouch,isWebView:xs.isWebView}},sc=/^\s*|\s*$/g,fa=e=>Gt(e)?"":(""+e).replace(sc,""),Is=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Or(e,(s,r)=>!1!==t.call(o,s,r,n)&&(Is(s,t,n,o),!0)))},f={trim:fa,isArray:Qi,is:(e,t)=>t?!("array"!==t||!Qi(e))||typeof e===t:void 0!==e,toArray:e=>{if(Qi(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=Fe(e)?e.split(t||","):e||[];let s=o.length;for(;s--;)n[o[s]]={};return n},each:Or,map:Xi,grep:Mr,inArray:(e,t)=>{if(e)for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},hasOwn:Ge,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const s in o)if(Ge(o,s)){const r=o[s];void 0!==r&&(e[s]=r)}}return e},walk:Is,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,s=n.length;o<s&&(t=t[n[o]]);o++);return t},explode:(e,t)=>gn(e)?e:""===e?[]:Xi(e.split(t||","),fa),_addCacheSuffix:e=>{const t=gt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},y=(e,t,n=Ki)=>e.exists(o=>n(o,t)),_=(e,t,n=Ki)=>N(e,t,n).getOr(e.isNone()&&t.isNone()),N=(e,t,n)=>e.isSome()&&t.isSome()?T.some(n(e.getOrDie(),t.getOrDie())):T.none(),B=(e,t)=>e?T.some(t):T.none(),G=typeof window<"u"?window:Function("return this;")(),pe=(e,t)=>((e,t)=>{let n=null!=t?t:G;for(let o=0;o<e.length&&null!=n;++o)n=n[e[o]];return n})(e.split("."),t),lt=Object.getPrototypeOf,xt=e=>{const t=pe("ownerDocument.defaultView",e);return cn(e)&&((e=>((e,t)=>{const n=((e,t)=>pe(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(lt(e).constructor.name))},Rt=e=>e.dom.nodeName.toLowerCase(),Mt=e=>e.dom.nodeType,Qt=e=>t=>Mt(t)===e,Lr=e=>on(e)&&xt(e.dom),on=Qt(1),Bn=Qt(3),Io=Qt(9),Es=Qt(11),Vo=e=>t=>on(t)&&Rt(t)===e,co=(e,t,n)=>{if(!(Fe(n)||qn(n)||_t(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},un=(e,t,n)=>{co(e.dom,t,n)},Ln=(e,t)=>{const n=e.dom;Nt(t,(o,s)=>{co(n,s,o)})},dn=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Xo=(e,t)=>T.from(dn(e,t)),Fr=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},xn=(e,t)=>{e.dom.removeAttribute(t)},$r=e=>nn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),uo=(e,t)=>{const n=dn(e,t);return void 0===n||""===n?[]:n.split(" ")},Ur=e=>void 0!==e.dom.classList,Bs=e=>uo(e,"class"),es=(e,t)=>((e,t,n)=>{const s=uo(e,t).concat([n]);return un(e,t,s.join(" ")),!0})(e,"class",t),vi=(e,t)=>((e,t,n)=>{const o=Ve(uo(e,t),s=>s!==n);return o.length>0?un(e,t,o.join(" ")):xn(e,t),!1})(e,"class",t),Ls=(e,t)=>{Ur(e)?e.dom.classList.add(t):es(e,t)},lr=e=>{0===(Ur(e)?e.dom.classList:Bs(e)).length&&xn(e,"class")},ts=(e,t)=>{Ur(e)?e.dom.classList.remove(t):vi(e,t),lr(e)},zr=(e,t)=>Ur(e)&&e.dom.classList.contains(t),ns=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},M_fromHtml=(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,e),new Error(s)}return ns(o.childNodes[0])},M_fromTag=(e,t)=>{const o=(t||document).createElement(e);return ns(o)},M_fromText=(e,t)=>{const o=(t||document).createTextNode(e);return ns(o)},M_fromDom=ns,M_fromPoint=(e,t,n)=>T.from(e.dom.elementFromPoint(t,n)).map(ns),ga=(e,t)=>{const n=[],o=r=>(n.push(r),t(r));let s=t(e);do{s=s.bind(o)}while(s.isSome());return n},I=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},W=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,ne=(e,t)=>e.dom===t.dom,_e=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Ue=e=>M_fromDom(e.dom.ownerDocument),qe=e=>Io(e)?e:Ue(e),vt=e=>M_fromDom(qe(e).dom.defaultView),Je=e=>T.from(e.dom.parentNode).map(M_fromDom),at=e=>T.from(e.dom.parentElement).map(M_fromDom),Et=(e,t)=>{const n=St(t)?t:jt;let o=e.dom;const s=[];for(;null!=o.parentNode;){const r=o.parentNode,i=M_fromDom(r);if(s.push(i),!0===n(i))break;o=r}return s},Ft=e=>T.from(e.dom.previousSibling).map(M_fromDom),Nn=e=>T.from(e.dom.nextSibling).map(M_fromDom),Fn=e=>Ar(ga(e,Ft)),fo=e=>ga(e,Nn),Vt=e=>pt(e.dom.childNodes,M_fromDom),Eo=(e,t)=>T.from(e.dom.childNodes[t]).map(M_fromDom),$n=e=>Eo(e,0),cc=e=>Eo(e,e.dom.childNodes.length-1),uc=e=>e.dom.childNodes.length,pl=e=>Es(e)&&ve(e.dom.host),_u=St(Element.prototype.attachShadow)&&St(Node.prototype.getRootNode),qf=Ce(_u),cr=_u?e=>M_fromDom(e.dom.getRootNode()):qe,dc=e=>pl(e)?e:(e=>{const t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return M_fromDom(t)})(qe(e)),Vf=e=>M_fromDom(e.dom.host),Tu=e=>{if(qf()&&ve(e.target)){const t=M_fromDom(e.target);if(on(t)&&Zf(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return hn(n)}}return T.from(e.target)},Zf=e=>ve(e.dom.shadowRoot),xi=e=>{const t=Bn(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(e=>{const t=cr(e);return pl(t)?T.some(t):T.none()})(M_fromDom(t)).fold(()=>n.body.contains(t),no(xi,Vf))};var ku=(e,t,n,o,s)=>e(n,o)?T.some(n):St(s)&&s(n)?T.none():t(n,o,s);const Fs=(e,t,n)=>{let o=e.dom;const s=St(n)?n:jt;for(;o.parentNode;){o=o.parentNode;const r=M_fromDom(o);if(t(r))return T.some(r);if(s(r))break}return T.none()},Hr=(e,t,n)=>ku((s,r)=>r(s),Fs,e,t,n),ha=(e,t,n)=>Fs(e,o=>I(o,t),n),ba=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return W(n)?T.none():T.from(n.querySelector(e)).map(M_fromDom)})(t,e),qr=(e,t,n)=>ku((s,r)=>I(s,r),ha,e,t,n),Wr=(e,t=!1)=>xi(e)?e.dom.isContentEditable:(e=>qr(e,"[contenteditable]"))(e).fold(Ce(t),n=>"true"===Qf(n)),Qf=e=>e.dom.contentEditable,va=e=>void 0!==e.style&&St(e.style.getPropertyValue),Nu=(e,t,n)=>{if(!Fe(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);va(e)&&e.style.setProperty(t,n)},Au=(e,t,n)=>{Nu(e.dom,t,n)},gl=(e,t)=>{const n=e.dom;Nt(t,(o,s)=>{Nu(n,s,o)})},Ss=(e,t)=>{const n=e.dom,s=window.getComputedStyle(n).getPropertyValue(t);return""!==s||xi(e)?s:Ru(n,t)},Ru=(e,t)=>va(e)?e.style.getPropertyValue(t):"",hl=(e,t)=>{const o=Ru(e.dom,t);return T.from(o).filter(s=>s.length>0)},Du=e=>{const t={},n=e.dom;if(va(n))for(let o=0;o<n.style.length;o++){const s=n.style.item(o);t[s]=n.style[s]}return t},Pu=(e,t)=>{((e,t)=>{va(e)&&e.style.removeProperty(t)})(e.dom,t),y(Xo(e,"style").map(Ro),"")&&xn(e,"style")},mo=(e,t)=>{Je(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},$s=(e,t)=>{Nn(e).fold(()=>{Je(e).each(s=>{fn(s,t)})},o=>{mo(o,t)})},Ou=(e,t)=>{$n(e).fold(()=>{fn(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},fn=(e,t)=>{e.dom.appendChild(t.dom)},Mu=(e,t)=>{mo(e,t),fn(t,e)},jr=(e,t)=>{re(t,n=>{fn(e,n)})},Ei=e=>{e.dom.textContent="",re(Vt(e),t=>{qt(t)})},qt=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Us=e=>{const t=Vt(e);t.length>0&&((e,t)=>{re(t,(n,o)=>{$s(0===o?e:t[o-1],n)})})(e,t),qt(e)},d=e=>pt(e,M_fromDom),g=e=>e.dom.innerHTML,h=(e,t)=>{const o=Ue(e).dom,s=M_fromDom(o.createDocumentFragment()),r=((e,t)=>{const o=(t||document).createElement("div");return o.innerHTML=e,Vt(M_fromDom(o))})(t,o);jr(s,r),Ei(e),fn(e,s)},te=(e,t,n,o)=>((e,t,n,o,s)=>{const r=((e,t)=>n=>{e(n)&&t((e=>{const t=M_fromDom(Tu(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),s=gs(o,n);return((e,t,n,o,s,r,i)=>({target:e,x:t,y:n,stop:o,prevent:s,kill:r,raw:i}))(t,e.clientX,e.clientY,n,o,s,e)})(n))})(n,o);return e.dom.addEventListener(t,r,false),{unbind:Te(ue,e,t,r,false)}})(e,t,n,o),ue=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},ke=(e,t)=>({left:e,top:t,translate:(o,s)=>ke(e+o,t+s)}),We=ke,Xe=(e,t)=>void 0!==e?e:void 0!==t?t:0,bt=e=>{const t=e.dom,o=t.ownerDocument.body;return o===t?We(o.offsetLeft,o.offsetTop):xi(e)?(e=>{const t=e.getBoundingClientRect();return We(t.left,t.top)})(t):We(0,0)},yt=e=>{const t=void 0!==e?e.dom:document;return We(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},Wt=(e,t,n)=>{const s=(void 0!==n?n.dom:document).defaultView;s&&s.scrollTo(e,t)},An=(e,t)=>{Co().browser.isSafari()&&St(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},ur=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Xn=e=>{const t=void 0===e?window:e,o=yt(M_fromDom(t.document));return(e=>{const t=void 0===e?window:e;return Co().browser.isFirefox()?T.none():T.from(t.visualViewport)})(t).fold(()=>{const s=t.document.documentElement;return ur(o.left,o.top,s.clientWidth,s.clientHeight)},s=>ur(Math.max(s.pageLeft,o.left),Math.max(s.pageTop,o.top),s.width,s.height))},wi=(e,t)=>{let n=[];return re(Vt(e),o=>{t(o)&&(n=n.concat([o])),n=n.concat(wi(o,t))}),n},bn=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return W(n)?[]:pt(n.querySelectorAll(e),M_fromDom)})(t,e),Vr=(e,t,n)=>ha(e,t,n).isSome();class mn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,s){if(t){if(!s&&t[n])return t[n];if(t!==this.rootNode){let r=t[o];if(r)return r;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[o],r)return r}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let r=o.lastChild;r;r=r.lastChild)if(!r.lastChild)return r;return o}const s=t.parentNode;if(s&&s!==this.rootNode)return s}}}const Hs=e=>t=>!!t&&t.nodeType===e,bl=e=>!!e&&!Object.getPrototypeOf(e),we=Hs(1),eo=e=>{const t=e.toLowerCase();return n=>ve(n)&&n.nodeName.toLowerCase()===t},Vn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return kt(t,o)}return!1}},Zr=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(we(o)){const s=o.ownerDocument.defaultView;if(s)for(let r=0;r<n.length;r++){const i=s.getComputedStyle(o,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}}return!1}},tb=e=>t=>we(t)&&t.hasAttribute(e),ya=e=>we(e)&&e.hasAttribute("data-mce-bogus"),Gr=e=>we(e)&&"TABLE"===e.tagName,nb=e=>t=>!(!we(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),tm=Vn(["textarea","input"]),fe=Hs(3),W1=Hs(4),j1=Hs(7),Si=Hs(8),fc=Hs(9),nm=Hs(11),ln=eo("br"),ob=eo("img"),qs=nb("true"),Zt=nb("false"),Iu=Vn(["td","th"]),V1=Vn(["td","th","caption"]),dr=Vn(["video","audio","object","embed"]),Z1=eo("li"),sb=eo("details"),G1=eo("summary"),Un="\xa0",om=e=>"\ufeff"===e,sm=((e,t)=>{const o=r=>e(r)?T.from(r.dom.nodeValue):T.none();return{get:r=>{if(!e(r))throw new Error("Can only get text value of a text node");return o(r).getOr("")},getOption:o,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=i}}})(Bn),Bu=e=>sm.get(e),rb=e=>sm.getOption(e),rT=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),_i=e=>{let t;return n=>(t=t||ri(e,an),Ge(t,Rt(n)))},os=_i(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Lu=e=>on(e)&&!os(e),Ca=e=>on(e)&&"br"===Rt(e),ib=_i(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),rm=_i(["ul","ol","dl"]),mc=_i(["li","dd","dt"]),aT=_i(["thead","tbody","tfoot"]),pc=_i(["td","th"]),Fu=_i(["pre","script","textarea","style"]),lT=_i(rT),cT=e=>lT(e)||Lu(e),gc=()=>{const e=M_fromTag("br");return un(e,"data-mce-bogus","1"),e},Ti=e=>{Ei(e),fn(e,gc())},fT=e=>{cc(e).each(t=>{Ft(t).each(n=>{os(e)&&Ca(t)&&os(n)&&qt(t)})})},Zn="\ufeff",$u=om,Ws=e=>e.replace(/\uFEFF/g,""),mT=we,yl=fe,Cl=e=>(yl(e)&&(e=e.parentNode),mT(e)&&e.hasAttribute("data-mce-caret")),ki=e=>yl(e)&&$u(e.data),ss=e=>Cl(e)||ki(e),ab=e=>e.firstChild!==e.lastChild||!ln(e.firstChild),im=e=>{const t=e.container();return!!fe(t)&&(t.data.charAt(e.offset())===Zn||e.isAtStart()&&ki(t.previousSibling))},am=e=>{const t=e.container();return!!fe(t)&&(t.data.charAt(e.offset()-1)===Zn||e.isAtEnd()&&ki(t.nextSibling))},Uu=e=>yl(e)&&e.data[0]===Zn,zu=e=>yl(e)&&e.data[e.data.length-1]===Zn,lm=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{var t;const n=e.getElementsByTagName("br"),o=n[n.length-1];ya(o)&&(null===(t=o.parentNode)||void 0===t||t.removeChild(o))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,lb=e=>Cl(e.startContainer),cb=qs,bT=Zt,vT=ln,yT=fe,CT=Vn(["script","style","textarea"]),ub=Vn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),xT=Vn(["table"]),ET=ss,_s=e=>!ET(e)&&(yT(e)?!CT(e.parentNode):ub(e)||vT(e)||xT(e)||cm(e)),cm=e=>!(e=>we(e)&&"true"===e.getAttribute("unselectable"))(e)&&bT(e),db=(e,t)=>_s(e)&&((e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(cm(n))return!1;if(cb(n))return!0}return!0})(e,t),kT=/^[ \t\r\n]*$/,Ni=e=>kT.test(e),NT=e=>{for(const t of e)if(!om(t))return!1;return!0},fb=e=>"\n"===e||"\r"===e,mb=(e,t=4,n=!0,o=!0)=>{const s=((e,t)=>t<=0?"":new Array(t+1).join(" "))(0,t),r=e.replace(/\t/g,s);return nn(r,(a,c)=>(e=>-1!==" \f\t\v".indexOf(e))(c)||c===Un?a.pcIsSpace||""===a.str&&n||a.str.length===r.length-1&&o||((e,t)=>t<e.length&&t>=0&&fb(e[t]))(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Un}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:fb(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},Hu=(e,t)=>_s(e)&&!((e,t)=>fe(e)&&Ni(e.data)&&!((e,t)=>{const n=M_fromDom(t),o=M_fromDom(e);return Vr(o,"pre,code",Te(ne,n))})(e,t))(e,t)||(e=>we(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||MT(e),MT=tb("data-mce-bookmark"),IT=tb("data-mce-bogus"),BT=("data-mce-bogus","all",n=>we(n)&&"all"===n.getAttribute("data-mce-bogus")),En=(e,t=!0)=>((e,t)=>{let n=0;if(Hu(e,e))return!1;{let o=e.firstChild;if(!o)return!0;const s=new mn(o,e);do{if(t){if(BT(o)){o=s.next(!0);continue}if(IT(o)){o=s.next();continue}}if(ln(o))n++,o=s.next();else{if(Hu(o,e))return!1;o=s.next()}}while(o);return n<=1}})(e.dom,t),qu="data-mce-block",um=e=>(e=>Ve(In(e),t=>!/[A-Z]/.test(t)))(e).join(","),pb=(e,t)=>ve(t.querySelector(e))?(t.setAttribute(qu,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(qu),!1),gb=(e,t)=>{const n=um(e.getTransparentElements()),o=um(e.getBlockElements());return Ve(t.querySelectorAll(n),s=>pb(o,s))},hb=(e,t)=>{var n;const o=t?"lastChild":"firstChild";for(let s=e[o];s;s=s[o])if(En(M_fromDom(s)))return void(null===(n=s.parentNode)||void 0===n||n.removeChild(s))},dm=(e,t)=>{const n=gb(e,t);((e,t,n)=>{const o=e.getBlockElements(),s=M_fromDom(t),r=a=>Rt(a)in o,i=a=>ne(a,s);re(d(n),a=>{Fs(a,r,i).each(c=>{const m=((e,t)=>Ve(Vt(e),t))(a,v=>r(v)&&!e.isValidChild(Rt(c),Rt(v)));if(m.length>0){const v=at(c);re(m,x=>{Fs(x,r,i).each(w=>{((e,t)=>{const n=document.createRange(),o=e.parentNode;if(o){n.setStartBefore(e),n.setEndBefore(t);const s=n.extractContents();hb(s,!0),n.setStartAfter(t),n.setEndAfter(e);const r=n.extractContents();hb(r,!1),En(M_fromDom(s))||o.insertBefore(s,e),En(M_fromDom(t))||o.insertBefore(t,e),En(M_fromDom(r))||o.insertBefore(r,e),o.removeChild(e)}})(w.dom,x.dom)})}),v.each(x=>gb(e,x.dom))}})})})(e,t,n),((e,t,n)=>{re([...n,...xa(e,t)?[t]:[]],o=>re(bn(M_fromDom(o),o.nodeName.toLowerCase()),s=>{WT(e,s.dom)&&Us(s)}))})(e,t,n)},HT=(e,t)=>{if(pm(e,t)){const n=um(e.getBlockElements());pb(n,t)}},fm=e=>e.hasAttribute(qu),mm=(e,t)=>Ge(e.getTransparentElements(),t),pm=(e,t)=>we(t)&&mm(e,t.nodeName),xa=(e,t)=>pm(e,t)&&fm(t),WT=(e,t)=>pm(e,t)&&!fm(t),gm=(e,t)=>1===t.type&&mm(e,t.name)&&Fe(t.attr(qu)),jT=Co().browser,bb=e=>Jt(e,on),vb=(e,t)=>e.children&&kt(e.children,t),yb=(e,t={})=>{let n=0;const o={},s=M_fromDom(e),r=qe(s),x=A=>new Promise((P,F)=>{let z;const q=f._addCacheSuffix(A),j=(A=>$t(o,A).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})))(q);o[q]=j,j.count++;const ae=(K,ce)=>{re(K,_r),j.status=ce,j.passed=[],j.failed=[],z&&(z.onload=null,z.onerror=null,z=null)},be=()=>ae(j.passed,2),ye=()=>ae(j.failed,3);if(P&&j.passed.push(P),F&&j.failed.push(F),1===j.status)return;if(2===j.status)return void be();if(3===j.status)return void ye();j.status=1;const Q=M_fromTag("link",r.dom);Ln(Q,{rel:"stylesheet",type:"text/css",id:j.id}),t.contentCssCors&&un(Q,"crossOrigin","anonymous"),t.referrerPolicy&&un(Q,"referrerpolicy",t.referrerPolicy),z=Q.dom,z.onload=be,z.onerror=ye,(A=>{fn(dc(s),A)})(Q),un(Q,"href",q)}),D=A=>{const P=f._addCacheSuffix(A);$t(o,P).each(F=>{0==--F.count&&(delete o[P],(A=>{const P=dc(s);ba(P,"#"+A).each(qt)})(F.id))})};return{load:x,loadAll:A=>Promise.allSettled(pt(A,F=>x(F).then(Ce(F)))).then(F=>{const z=kr(F,q=>"fulfilled"===q.status);return z.fail.length>0?Promise.reject(pt(z.fail,q=>q.reason)):pt(z.pass,q=>q.value)}),unload:D,unloadAll:A=>{re(A,P=>{D(P)})},_setReferrerPolicy:A=>{t.referrerPolicy=A},_setContentCssCors:A=>{t.contentCssCors=A}}},Cb=(()=>{const e=new WeakMap;return{forElement:(n,o)=>{const r=cr(n).dom;return T.from(e.get(r)).getOrThunk(()=>{const i=yb(r,o);return e.set(r,i),i})}}})(),xb=(e,t)=>ve(e)&&(Hu(e,t)||Lu(M_fromDom(e))),Eb=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),hm=(e,t,n)=>{var o;const s=n||t;if(we(t)&&Eb(t))return t;const r=t.childNodes;for(let i=r.length-1;i>=0;i--)hm(e,r[i],s);if(we(t)){const i=t.childNodes;1===i.length&&Eb(i[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(i[0],t))}return!(e=>nm(e)||fc(e))(t)&&!Hu(t,s)&&!(e=>!!we(e)&&e.childNodes.length>0)(t)&&!((e,t)=>fe(e)&&e.data.length>0&&((e,t)=>{const n=new mn(e,t).prev(!1),o=new mn(e,t).next(!1),s=dt(n)||xb(n,t),r=dt(o)||xb(o,t);return s&&r})(e,t))(t,s)&&e.remove(t),t},XT=f.makeMap,Wu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ju=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ek=/[<>&\"\']/g,tk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,nk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ea={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ok={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},wb=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let s=0;s<o.length;s+=2){const r=String.fromCharCode(parseInt(o[s],t));if(!Ea[r]){const i="&"+o[s+1]+";";n[r]=i,n[i]=r}}return n}},bm=wb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Sb=(e,t)=>e.replace(t?Wu:ju,n=>Ea[n]||n),_b=(e,t)=>e.replace(t?Wu:ju,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Ea[n]||"&#"+n.charCodeAt(0)+";"),vm=(e,t,n)=>{const o=n||bm;return e.replace(t?Wu:ju,s=>Ea[s]||o[s]||s)},Ai={encodeRaw:Sb,encodeAllRaw:e=>(""+e).replace(ek,t=>Ea[t]||t),encodeNumeric:_b,encodeNamed:vm,getEncodeFunc:(e,t)=>{const n=wb(t)||bm,r=XT(e.replace(/\+/g,","));return r.named&&r.numeric?(i,a)=>i.replace(a?Wu:ju,c=>void 0!==Ea[c]?Ea[c]:void 0!==n[c]?n[c]:c.length>1?"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"):r.named?t?(i,a)=>vm(i,a,n):vm:r.numeric?_b:Sb},decode:e=>e.replace(tk,(t,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):nk[n]||String.fromCharCode(n):ok[t]||bm[t]||(e=>{const t=M_fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(t))},to=(e,t)=>(e=f.trim(e))?e.split(t||" "):[],Tb=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Vu={},hc=f.makeMap,js=f.each,ym=f.extend,kb=f.explode,Nb=(e,t={})=>{const n=hc(e," ",hc(e.toUpperCase()," "));return ym(n,t)},Ab=e=>Nb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Cm=(e,t)=>{if(e){const n={};return Fe(e)&&(e={"*":e}),js(e,(o,s)=>{n[s]=n[s.toUpperCase()]="map"===t?hc(o,/[, ]/):kb(o,/[, ]/)}),n}},Ri=(e={})=>{var t;const n={},o={};let s=[];const r={},i={},a=(Ne,ot,Dt)=>{const Yt=e[Ne];if(Yt)return hc(Yt,/[, ]/,hc(Yt.toUpperCase(),/[, ]/));{let Pt=Vu[Ne];return Pt||(Pt=Nb(ot,Dt),Vu[Ne]=Pt),Pt}},c=null!==(t=e.schema)&&void 0!==t?t:"html5",m=(e=>{const{globalAttributes:t,phrasingContent:n,flowContent:o}=(e=>{let t,n,o,s;return t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "),s=[n,o].join(" ")),s=s||[n,o].join(" "),{globalAttributes:t,blockContent:n,phrasingContent:o,flowContent:s}})(e),s={},r=(a,c="",m="")=>{const v=to(m),x=to(a);let w=x.length;for(;w--;){const D=to([t,c].join(" "));s[x[w]]={attributes:ri(D,Ce({})),attributesOrder:D,children:ri(v,Ce({}))}}},i=(a,c)=>{const m=to(a),v=to(c);let x=m.length;for(;x--;){const w=s[m[x]];for(let D=0,O=v.length;D<O;D++)w.attributes[v[D]]={},w.attributesOrder.push(v[D])}};return"html5-strict"!==e&&(re(to("acronym applet basefont big font strike tt"),m=>{r(m,"",n)}),re(to("center dir isindex noframes"),m=>{r(m,"",o)})),r("html","manifest","head body"),r("head","","base command link meta noscript script style title"),r("title hr noscript br"),r("base","href target"),r("link","href rel media hreflang type sizes hreflang"),r("meta","name http-equiv content charset"),r("style","media type scoped"),r("script","src async defer type charset"),r("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),r("dd div","",o),r("address dt caption","","html4"===e?n:o),r("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),r("blockquote","cite",o),r("ol","reversed start type","li"),r("ul","","li"),r("li","value",o),r("dl","","dt dd"),r("a","href target rel media hreflang type","html4"===e?n:o),r("q","cite",n),r("ins del","cite datetime",o),r("img","src sizes srcset alt usemap ismap width height"),r("iframe","src name width height",o),r("embed","src type width height"),r("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),r("param","name value"),r("map","name",[o,"area"].join(" ")),r("area","alt coords shape href target rel media hreflang type"),r("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),r("colgroup","span","col"),r("col","span"),r("tbody thead tfoot","","tr"),r("tr","","td th"),r("td","colspan rowspan headers",o),r("th","colspan rowspan headers scope abbr",o),r("form","accept-charset action autocomplete enctype method name novalidate target",o),r("fieldset","disabled form name",[o,"legend"].join(" ")),r("label","form for",n),r("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),r("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:n),r("select","disabled form multiple name required size","option optgroup"),r("optgroup","disabled label","option"),r("option","disabled label selected value"),r("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),r("menu","type label",[o,"li"].join(" ")),r("noscript","",o),"html4"!==e&&(r("wbr"),r("ruby","",[n,"rt rp"].join(" ")),r("figcaption","",o),r("mark rt rp summary bdi","",n),r("canvas","width height",o),r("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),r("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),r("picture","","img source"),r("source","src srcset type media sizes"),r("track","kind src srclang label default"),r("datalist","",[n,"option"].join(" ")),r("article section nav aside main header footer","",o),r("hgroup","","h1 h2 h3 h4 h5 h6"),r("figure","",[o,"figcaption"].join(" ")),r("time","datetime",n),r("dialog","open",o),r("command","type label icon disabled checked radiogroup command"),r("output","for form name",n),r("progress","value max",n),r("meter","value min max low high optimum",n),r("details","open",[o,"summary"].join(" ")),r("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&re([s.video,s.audio],a=>{delete a.children.audio,delete a.children.video}),re(to("a form meter progress dfn"),a=>{s[a]&&delete s[a].children[a]}),delete s.caption.children.table,delete s.script,s})(c);!1===e.verify_html&&(e.valid_elements="*[*]");const v=Cm(e.valid_styles),x=Cm(e.invalid_styles,"map"),w=Cm(e.valid_classes,"map"),D=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),O=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),A=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),P=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),F="td th iframe video audio object script code",z=a("non_empty_elements",F+" pre",A),q=a("move_caret_before_on_enter_elements",F+" table",A),j=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ae=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",j),be=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ye=a("transparent_elements","a ins del canvas map");js("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ne=>{i[Ne]=new RegExp("</"+Ne+"[^>]*>","gi")});const Q=Ne=>{const ot=T.from(n["@"]),Dt=/[*?+]/;re(((e,t)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return yo(to(t,","),o=>{const s=n.exec(o);if(s){const r=s[1],i=s[2],a=s[3],c=s[4],m=s[5],v={attributes:{},attributesOrder:[]};if(e.each(x=>((e,t)=>{Nt(e.attributes,(n,o)=>{t.attributes[o]=n}),t.attributesOrder.push(...e.attributesOrder)})(x,v)),"#"===r?v.paddEmpty=!0:"-"===r&&(v.removeEmpty=!0),"!"===c&&(v.removeEmptyAttrs=!0),m&&((e,t)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,o=/[*?+]/,{attributes:s,attributesOrder:r}=t;re(to(e,"|"),i=>{const a=n.exec(i);if(a){const c={},m=a[1],v=a[2].replace(/[\\:]:/g,":"),x=a[3],w=a[4];if("!"===m&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(v),c.required=!0),"-"===m)return delete s[v],void r.splice(f.inArray(r,v),1);if(x&&("="===x?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:v,value:w}),c.defaultValue=w):"~"===x?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:v,value:w}),c.forcedValue=w):"<"===x&&(c.validValues=f.makeMap(w,"?"))),o.test(v)){const D=c;t.attributePatterns=t.attributePatterns||[],D.pattern=Tb(v),t.attributePatterns.push(D)}else s[v]||r.push(v),s[v]=c}})})(m,v),a&&(v.outputName=i),"@"===i){if(!e.isNone())return[];e=T.some(v)}return[a?{name:i,element:v,aliasName:a}:{name:i,element:v}]}return[]})})(ot,null!=Ne?Ne:""),({name:Yt,element:Pt,aliasName:Pn})=>{if(Pn&&(n[Pn]=Pt),Dt.test(Yt)){const fs=Pt;fs.pattern=Tb(Yt),s.push(fs)}else n[Yt]=Pt})},K=Ne=>{s=[],re(In(n),ot=>{delete n[ot]}),Q(Ne)},ce=Ne=>{delete Vu.text_block_elements,delete Vu.block_elements,re((e=>{const t=/^(~)?(.+)$/;return yo(to(e,","),n=>{const o=t.exec(n);if(o){const s="~"===o[1];return[{inline:s,cloneName:s?"span":"div",name:o[2]}]}return[]})})(null!=Ne?Ne:""),({inline:ot,name:Dt,cloneName:Yt})=>{if(o[Dt]=o[Yt],r[Dt]=Yt,z[Dt.toUpperCase()]={},z[Dt]={},ot||(ae[Dt.toUpperCase()]={},ae[Dt]={}),!n[Dt]){let Pt=n[Yt];Pt=ym({},Pt),delete Pt.removeEmptyAttrs,delete Pt.removeEmpty,n[Dt]=Pt}Nt(o,(Pt,Pn)=>{Pt[Yt]&&(o[Pn]=Pt=ym({},o[Pn]),Pt[Dt]=Pt[Yt])})})},De=Ne=>{re((e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return yo(to(e,","),n=>{const o=t.exec(n);if(o){const s=o[1],r=s?(e=>"-"===e?"remove":"add")(s):"replace";return[{operation:r,name:o[2],validChildren:to(o[3],"|")}]}return[]})})(null!=Ne?Ne:""),({operation:ot,name:Dt,validChildren:Yt})=>{const Pt="replace"===ot?{"#comment":{}}:o[Dt];re(Yt,Pn=>{"remove"===ot?delete Pt[Pn]:Pt[Pn]={}}),o[Dt]=Pt})},Ie=Ne=>{const ot=n[Ne];if(ot)return ot;let Dt=s.length;for(;Dt--;){const Yt=s[Dt];if(Yt.pattern.test(Ne))return Yt}};e.valid_elements?(K(e.valid_elements),js(m,(Ne,ot)=>{o[ot]=Ne.children})):(js(m,(Ne,ot)=>{n[ot]={attributes:Ne.attributes,attributesOrder:Ne.attributesOrder},o[ot]=Ne.children}),js(to("strong/b em/i"),Ne=>{const ot=to(Ne,"/");n[ot[1]].outputName=ot[0]}),js(be,(Ne,ot)=>{n[ot]&&(e.padd_empty_block_inline_children&&(n[ot].paddInEmptyBlock=!0),n[ot].removeEmpty=!0)}),js(to("ol ul blockquote a table tbody"),Ne=>{n[Ne]&&(n[Ne].removeEmpty=!0)}),js(to("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ne=>{n[Ne]&&(n[Ne].paddEmpty=!0)}),js(to("span"),Ne=>{n[Ne].removeEmptyAttrs=!0})),ce(e.custom_elements),De(e.valid_children),Q(e.extended_valid_elements),De("+ol[ul|ol],+ul[ul|ol]"),js({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ne,ot)=>{n[ot]&&(n[ot].parentsRequired=to(Ne))}),e.invalid_elements&&js(kb(e.invalid_elements),Ne=>{n[Ne]&&delete n[Ne]}),Ie("span")||Q("span[!data-mce-type|*]");const Ke=Ce(v),nt=Ce(x),wt=Ce(w),Bt=Ce(P),Xt=Ce(ae),Kn=Ce(j),wn=Ce(be),me=Ce(Object.seal(A)),Pe=Ce(O),ft=Ce(z),ct=Ce(q),Oe=Ce(D),Me=Ce(ye),he=Ce(Object.seal(i)),Tt=Ce(r);return{type:c,children:o,elements:n,getValidStyles:Ke,getValidClasses:wt,getBlockElements:Xt,getInvalidStyles:nt,getVoidElements:me,getTextBlockElements:Kn,getTextInlineElements:wn,getBoolAttrs:Bt,getElementRule:Ie,getSelfClosingElements:Pe,getNonEmptyElements:ft,getMoveCaretBeforeOnEnterElements:ct,getWhitespaceElements:Oe,getTransparentElements:Me,getSpecialElements:he,isValidChild:(Ne,ot)=>{const Dt=o[Ne.toLowerCase()];return!(!Dt||!Dt[ot.toLowerCase()])},isValid:(Ne,ot)=>{const Dt=Ie(Ne);if(Dt){if(!ot)return!0;{if(Dt.attributes[ot])return!0;const Yt=Dt.attributePatterns;if(Yt){let Pt=Yt.length;for(;Pt--;)if(Yt[Pt].pattern.test(ot))return!0}}}return!1},getCustomElements:Tt,addValidElements:Q,setValidElements:K,addCustomElements:ce,addValidChildren:De}},xm=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,r={};let i,a;t&&(i=t.getValidStyles(),a=t.getInvalidStyles());const m="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let x=0;x<m.length;x++)r[m[x]]="\ufeff"+x,r["\ufeff"+x]=m[x];const v={parse:x=>{const w={};let D=!1;const O=e.url_converter,A=e.url_converter_scope||v,P=(Q,K,ce)=>{const De=w[Q+"-top"+K];if(!De)return;const Ie=w[Q+"-right"+K];if(!Ie)return;const Ke=w[Q+"-bottom"+K];if(!Ke)return;const nt=w[Q+"-left"+K];if(!nt)return;const wt=[De,Ie,Ke,nt];let Bt=wt.length-1;for(;Bt--&&wt[Bt]===wt[Bt+1];);Bt>-1&&ce||(w[Q+K]=-1===Bt?wt[0]:wt.join(" "),delete w[Q+"-top"+K],delete w[Q+"-right"+K],delete w[Q+"-bottom"+K],delete w[Q+"-left"+K])},F=Q=>{const K=w[Q];if(!K)return;const ce=K.indexOf(",")>-1?[K]:K.split(" ");let De=ce.length;for(;De--;)if(ce[De]!==ce[0])return!1;return w[Q]=ce[0],!0},q=Q=>(D=!0,r[Q]),j=(Q,K)=>(D&&(Q=Q.replace(/\uFEFF[0-9]/g,ce=>r[ce])),K||(Q=Q.replace(/\\([\'\";:])/g,"$1")),Q),ae=Q=>String.fromCharCode(parseInt(Q.slice(1),16)),be=Q=>Q.replace(/\\[0-9a-f]+/gi,ae),ye=(Q,K,ce,De,Ie,Ke)=>{if(Ie=Ie||Ke)return"'"+(Ie=j(Ie)).replace(/\'/g,"\\'")+"'";if(K=j(K||ce||De||""),!e.allow_script_urls){const nt=K.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(nt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(nt))return""}return O&&(K=O.call(A,K,"style")),"url('"+K.replace(/\'/g,"\\'")+"')"};if(x){let Q;for(x=(x=x.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,q).replace(/\"[^\"]+\"|\'[^\']+\'/g,K=>K.replace(/[;:]/g,q));Q=o.exec(x);){o.lastIndex=Q.index+Q[0].length;let K=Q[1].replace(s,"").toLowerCase(),ce=Q[2].replace(s,"");if(K&&ce){if(K=be(K),ce=be(ce),-1!==K.indexOf("\ufeff")||-1!==K.indexOf('"')||!e.allow_script_urls&&("behavior"===K||/expression\s*\(|\/\*|\*\//.test(ce)))continue;"font-weight"===K&&"700"===ce?ce="bold":("color"===K||"background-color"===K)&&(ce=ce.toLowerCase()),ce=ce.replace(n,ye),w[K]=D?j(ce,!0):ce}}P("border","",!0),P("border","-width"),P("border","-color"),P("border","-style"),P("padding",""),P("margin",""),ce="border-style",De="border-color",F(K="border-width")&&F(ce)&&F(De)&&(w.border=w[K]+" "+w[ce]+" "+w[De],delete w[K],delete w[ce],delete w[De]),"medium none"===w.border&&delete w.border,"none"===w["border-image"]&&delete w["border-image"]}var K,ce,De;return w},serialize:(x,w)=>{let D="";const O=(P,F)=>{const z=F[P];if(z)for(let q=0,j=z.length;q<j;q++){const ae=z[q],be=x[ae];be&&(D+=(D.length>0?" ":"")+ae+": "+be+";")}};return w&&i?(O("*",i),O(w,i)):Nt(x,(P,F)=>{P&&((P,F)=>{if(!a||!F)return!0;let z=a["*"];return!(z&&z[P]||(z=a[F],z&&z[P]))})(F,w)&&(D+=(D.length>0?" ":"")+F+": "+P+";")}),D}};return v},pk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Rb=(e,t)=>{const n=null!=t?t:{};for(const o in e)Ge(pk,o)||(n[o]=e[o]);return ve(e.composedPath)&&(n.composedPath=()=>e.composedPath()),ve(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),n},Em=(e,t,n,o)=>{var s;const r=Rb(t,o);return r.type=e,Gt(r.target)&&(r.target=null!==(s=r.srcElement)&&void 0!==s?s:n),(e=>Gt(e.preventDefault)||(e=>e instanceof Event||St(e.initEvent))(e))(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=an,St(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=an,St(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=an,r.stopPropagation()},(e=>e.isDefaultPrevented===an||e.isDefaultPrevented===jt)(r)||(r.isDefaultPrevented=!0===r.defaultPrevented?an:jt,r.isPropagationStopped=!0===r.cancelBubble?an:jt,r.isImmediatePropagationStopped=jt)),r},yk=/^(?:mouse|contextmenu)|click/,wm=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},Zu=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},bc=(e,t)=>{const n=Em(e.type,e,document,t);if((e=>ve(e)&&yk.test(e.type))(e)&&dt(e.pageX)&&!dt(e.clientX)){const o=n.target.ownerDocument||document,s=o.documentElement,r=o.body,i=n;i.pageX=e.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)}return n},xk=(e,t,n)=>{const o=e.document,s={type:"ready"};if(n.domLoaded)return void t(s);const i=()=>{Zu(e,"DOMContentLoaded",i),Zu(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(s)),e=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?i():wm(e,"DOMContentLoaded",i),n.domLoaded||wm(e,"load",i)};class wa{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,s){const r=this;let i;const a=window,c=w=>{r.executeHandlers(bc(w||a.event),m)};if(!t||fe(t)||Si(t))return o;let m;t[r.expando]?m=t[r.expando]:(m=r.count++,t[r.expando]=m,r.events[m]={}),s=s||t;const v=n.split(" ");let x=v.length;for(;x--;){let w=v[x],D=c,O=!1,A=!1;"DOMContentLoaded"===w&&(w="ready"),r.domLoaded&&"ready"===w&&"complete"===t.readyState?o.call(s,bc({type:w})):(!r.hasFocusIn&&("focusin"===w||"focusout"===w)&&(O=!0,A="focusin"===w?"focus":"blur",D=P=>{const F=bc(P||a.event);F.type="focus"===F.type?"focusin":"focusout",r.executeHandlers(F,m)}),i=r.events[m][w],i?"ready"===w&&r.domLoaded?o(bc({type:w})):i.push({func:o,scope:s}):(r.events[m][w]=i=[{func:o,scope:s}],i.fakeName=A,i.capture=O,i.nativeHandler=D,"ready"===w?xk(t,D,r):wm(t,A||w,D,O)))}return t=i=null,o}unbind(t,n,o){if(!t||fe(t)||Si(t))return this;const s=t[this.expando];if(s){let r=this.events[s];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const c=i[a],m=r[c];if(m){if(o){let v=m.length;for(;v--;)if(m[v].func===o){const x=m.nativeHandler,w=m.fakeName,D=m.capture,O=m.slice(0,v).concat(m.slice(v+1));O.nativeHandler=x,O.fakeName=w,O.capture=D,r[c]=O}}(!o||0===m.length)&&(delete r[c],Zu(t,m.fakeName||c,m.nativeHandler,m.capture))}}}else Nt(r,(i,a)=>{Zu(t,i.fakeName||a,i.nativeHandler,i.capture)}),r={};for(const i in r)if(Ge(r,i))return this;delete this.events[s];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||fe(t)||Si(t))return this;const s=bc({type:n,target:t},o);do{const r=t[this.expando];r&&this.executeHandlers(s,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!s.isPropagationStopped());return this}clean(t){if(!t||fe(t)||Si(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],s=o&&o[t.type];if(s)for(let r=0,i=s.length;r<i;r++){const a=s[r];if(a&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}wa.Event=new wa;const Sm=f.each,Ek=f.grep,_m="data-mce-style",wk=f.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),vc=(e,t,n)=>{Gt(n)||""===n?xn(e,t):un(e,t,n)},Db=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),xl=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,s=e.previousSibling;s;s=s.previousSibling){const r=s.nodeType;t&&fe(s)&&(r===o||!s.data.length)||(n++,o=r)}return n},Pb=(e,t)=>{const n=dn(t,"style"),o=e.serialize(e.parse(n),Rt(t));vc(t,_m,o)},Ob=(e,t,n)=>{const o=Db(t);Gt(n)||""===n?Pu(e,o):Au(e,o,((e,t)=>_t(e)?Ge(wk,t)?e+"":e+"px":e)(n,o))},Ut=(e,t={})=>{const n={},o=window,s={};let r=0;const c=Cb.forElement(M_fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),m=[],v=t.schema?t.schema:Ri({}),x=xm({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),w=t.ownEvents?new wa:wa.Event,D=v.getBlockElements(),A=V=>V&&e&&Fe(V)?e.getElementById(V):V,P=V=>{const Z=A(V);return ve(Z)?M_fromDom(Z):null},F=(V,Z,ge="")=>{let de;const Be=P(V);if(ve(Be)&&on(Be)){const ut=Yl[Z];de=ut&&ut.get?ut.get(Be.dom,Z):dn(Be,Z)}return ve(de)?de:ge},z=V=>{const Z=A(V);return Gt(Z)?[]:Z.attributes},q=(V,Z,ge)=>{Pe(V,de=>{if(we(de)){const Be=M_fromDom(de),ut=""===ge?null:ge,zt=dn(Be,Z),On=Yl[Z];On&&On.set?On.set(Be.dom,ut,Z):vc(Be,Z,ut),zt!==ut&&t.onSetAttrib&&t.onSetAttrib({attrElm:Be.dom,attrName:Z,attrValue:ut})}})},ae=()=>t.root_element||e.body,ye=(V,Z)=>((e,t,n)=>{let o=0,s=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Ss(M_fromDom(e),"position")){const a=t.getBoundingClientRect();return o=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,s=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:o,y:s}}let i=t;for(;i&&i!==n&&i.nodeType&&!vb(i,n);)o+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!==n&&i.nodeType&&!vb(i,n);)o-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode;s+=(e=>jT.isFirefox()&&"table"===Rt(e)?bb(Vt(e)).filter(t=>"caption"===Rt(t)).bind(t=>bb(fo(t)).map(n=>n.dom.offsetTop<=t.dom.offsetTop?-t.dom.offsetHeight:0)).getOr(0):0)(M_fromDom(t))}return{x:o,y:s}})(e.body,A(V),Z),ce=(V,Z,ge)=>{const de=A(V);if(!Gt(de)&&we(de))return ge?Ss(M_fromDom(de),Db(Z)):("float"===(Z=Z.replace(/-(\D)/g,(Be,ut)=>ut.toUpperCase()))&&(Z="cssFloat"),de.style?de.style[Z]:void 0)},De=V=>{const Z=A(V);if(!Z)return{w:0,h:0};let ge=ce(Z,"width"),de=ce(Z,"height");return(!ge||-1===ge.indexOf("px"))&&(ge="0"),(!de||-1===de.indexOf("px"))&&(de="0"),{w:parseInt(ge,10)||Z.offsetWidth||Z.clientWidth,h:parseInt(de,10)||Z.offsetHeight||Z.clientHeight}},Ke=(V,Z)=>{if(!V)return!1;const ge=gn(V)?V:[V];return Kt(ge,de=>I(M_fromDom(de),Z))},nt=(V,Z,ge,de)=>{const Be=[];let ut=A(V);de=void 0===de;const zt=ge||("BODY"!==ae().nodeName?ae().parentNode:null);if(Fe(Z))if("*"===Z)Z=we;else{const On=Z;Z=Hn=>Ke(Hn,On)}for(;ut&&!(ut===zt||Gt(ut.nodeType)||fc(ut)||nm(ut));){if(!Z||Z(ut)){if(!de)return[ut];Be.push(ut)}ut=ut.parentNode}return de?Be:null},Bt=(V,Z,ge)=>{let de=Z;if(V){Fe(Z)&&(de=Be=>Ke(Be,Z));for(let Be=V[ge];Be;Be=Be[ge])if(St(de)&&de(Be))return Be}return null},Pe=function(V,Z,ge){const de=null!=ge?ge:this;if(gn(V)){const Be=[];return Sm(V,(ut,zt)=>{const On=A(ut);On&&Be.push(Z.call(de,On,zt))}),Be}{const Be=A(V);return!!Be&&Z.call(de,Be)}},ft=(V,Z)=>{Pe(V,ge=>{Nt(Z,(de,Be)=>{q(ge,Be,de)})})},ct=(V,Z)=>{Pe(V,ge=>{const de=M_fromDom(ge);h(de,Z)})},Oe=(V,Z,ge,de,Be)=>Pe(V,ut=>{const zt=Fe(Z)?e.createElement(Z):Z;return ve(ge)&&ft(zt,ge),de&&(!Fe(de)&&de.nodeType?zt.appendChild(de):Fe(de)&&ct(zt,de)),Be?zt:ut.appendChild(zt)}),Me=(V,Z,ge)=>Oe(e.createElement(V),V,Z,ge,!0),He=Ai.encodeAllRaw,Ne=(V,Z)=>Pe(V,ge=>{const de=M_fromDom(ge);return Z&&re(Vt(de),Be=>{Bn(Be)&&0===Be.dom.length?qt(Be):mo(de,Be)}),qt(de),de.dom}),fs=(V,Z,ge)=>{Pe(V,de=>{if(we(de)){const Be=M_fromDom(de),ut=Z.split(" ");re(ut,zt=>{ve(ge)?(ge?Ls:ts)(Be,zt):((e,t)=>{const n=Ur(e)?e.dom.classList.toggle(t):((e,t)=>kt(Bs(e),t)?vi(e,t):es(e,t))(e,t);lr(e)})(Be,zt)})}})},yu=(V,Z,ge)=>Pe(Z,de=>{var Be;const ut=gn(Z)?V.cloneNode(!0):V;return ge&&Sm(Ek(de.childNodes),zt=>{ut.appendChild(zt)}),null===(Be=de.parentNode)||void 0===Be||Be.replaceChild(ut,de),de}),Xs=V=>{if(we(V)){const Z="a"===V.nodeName.toLowerCase()&&!F(V,"href")&&F(V,"id");if(F(V,"name")||F(V,"data-mce-bookmark")||Z)return!0}return!1},Ja=()=>e.createRange(),Bf=(V,Z,ge,de)=>{if(gn(V)){let Be=V.length;const ut=[];for(;Be--;)ut[Be]=Bf(V[Be],Z,ge,de);return ut}return t.collect&&(V===e||V===o)&&m.push([V,Z,ge,de]),w.bind(V,Z,ge,de||er)},Lf=(V,Z,ge)=>{if(gn(V)){let de=V.length;const Be=[];for(;de--;)Be[de]=Lf(V[de],Z,ge);return Be}if(m.length>0&&(V===e||V===o)){let de=m.length;for(;de--;){const[Be,ut,zt]=m[de];V===Be&&(!Z||Z===ut)&&(!ge||ge===zt)&&w.unbind(Be,ut,zt)}}return w.unbind(V,Z,ge)},Ff=V=>{if(V&&we(V)){const Z=V.getAttribute("data-mce-contenteditable");return Z&&"inherit"!==Z?Z:"inherit"!==V.contentEditable?V.contentEditable:null}return null},er={doc:e,settings:t,win:o,files:s,stdMode:!0,boxModel:!0,styleSheetLoader:c,boundEvents:m,styles:x,schema:v,events:w,isBlock:V=>Fe(V)?Ge(D,V):we(V)&&(Ge(D,V.nodeName)||xa(v,V)),root:null,clone:(V,Z)=>V.cloneNode(Z),getRoot:ae,getViewPort:V=>{const Z=Xn(V);return{x:Z.x,y:Z.y,w:Z.width,h:Z.height}},getRect:V=>{const Z=A(V),ge=ye(Z),de=De(Z);return{x:ge.x,y:ge.y,w:de.w,h:de.h}},getSize:De,getParent:(V,Z,ge)=>{const de=nt(V,Z,ge,!1);return de&&de.length>0?de[0]:null},getParents:nt,get:A,getNext:(V,Z)=>Bt(V,Z,"nextSibling"),getPrev:(V,Z)=>Bt(V,Z,"previousSibling"),select:(V,Z)=>{var ge,de;const Be=null!==(de=null!==(ge=A(Z))&&void 0!==ge?ge:t.root_element)&&void 0!==de?de:e;return(V=>St(V.querySelectorAll))(Be)?Jn(Be.querySelectorAll(V)):[]},is:Ke,add:Oe,create:Me,createHTML:(V,Z,ge="")=>{let de="<"+V;for(const Be in Z)Ao(Z,Be)&&(de+=" "+Be+'="'+He(Z[Be])+'"');return Os(ge)&&Ge(v.getVoidElements(),V)?de+" />":de+">"+ge+"</"+V+">"},createFragment:V=>{const Z=e.createElement("div"),ge=e.createDocumentFragment();let de;for(ge.appendChild(Z),V&&(Z.innerHTML=V);de=Z.firstChild;)ge.appendChild(de);return ge.removeChild(Z),ge},remove:Ne,setStyle:(V,Z,ge)=>{Pe(V,de=>{const Be=M_fromDom(de);Ob(Be,Z,ge),t.update_styles&&Pb(x,Be)})},getStyle:ce,setStyles:(V,Z)=>{Pe(V,ge=>{const de=M_fromDom(ge);Nt(Z,(Be,ut)=>{Ob(de,ut,Be)}),t.update_styles&&Pb(x,de)})},removeAllAttribs:V=>Pe(V,Z=>{const ge=Z.attributes;for(let de=ge.length-1;de>=0;de--)Z.removeAttributeNode(ge.item(de))}),setAttrib:q,setAttribs:ft,getAttrib:F,getPos:ye,parseStyle:V=>x.parse(V),serializeStyle:(V,Z)=>x.serialize(V,Z),addStyle:V=>{if(er!==Ut.DOM&&e===document){if(n[V])return;n[V]=!0}let Z=e.getElementById("mceDefaultStyles");if(!Z){Z=e.createElement("style"),Z.id="mceDefaultStyles",Z.type="text/css";const ge=e.head;ge.firstChild?ge.insertBefore(Z,ge.firstChild):ge.appendChild(Z)}Z.styleSheet?Z.styleSheet.cssText+=V:Z.appendChild(e.createTextNode(V))},loadCSS:V=>{V||(V=""),re(V.split(","),Z=>{s[Z]=!0,c.load(Z).catch(et)})},addClass:(V,Z)=>{fs(V,Z,!0)},removeClass:(V,Z)=>{fs(V,Z,!1)},hasClass:(V,Z)=>{const ge=P(V),de=Z.split(" ");return ve(ge)&&hs(de,Be=>zr(ge,Be))},toggleClass:fs,show:V=>{Pe(V,Z=>Pu(M_fromDom(Z),"display"))},hide:V=>{Pe(V,Z=>Au(M_fromDom(Z),"display","none"))},isHidden:V=>{const Z=P(V);return ve(Z)&&y(hl(Z,"display"),"none")},uniqueId:V=>(V||"mce_")+r++,setHTML:ct,getOuterHTML:V=>{const Z=P(V);return ve(Z)?we(Z.dom)?Z.dom.outerHTML:(e=>{const t=M_fromTag("div"),n=M_fromDom(e.dom.cloneNode(!0));return fn(t,n),g(t)})(Z):""},setOuterHTML:(V,Z)=>{Pe(V,ge=>{we(ge)&&(ge.outerHTML=Z)})},decode:Ai.decode,encode:He,insertAfter:(V,Z)=>{const ge=A(Z);return Pe(V,de=>{const Be=null==ge?void 0:ge.parentNode,ut=null==ge?void 0:ge.nextSibling;return Be&&(ut?Be.insertBefore(de,ut):Be.appendChild(de)),de})},replace:yu,rename:(V,Z)=>{if(V.nodeName!==Z.toUpperCase()){const ge=Me(Z);return Sm(z(V),de=>{q(ge,de.nodeName,F(V,de.nodeName))}),yu(ge,V,!0),ge}return V},findCommonAncestor:(V,Z)=>{let ge=V;for(;ge;){let de=Z;for(;de&&ge!==de;)de=de.parentNode;if(ge===de)break;ge=ge.parentNode}return!ge&&V.ownerDocument?V.ownerDocument.documentElement:ge},run:Pe,getAttribs:z,isEmpty:(V,Z,ge)=>{let de=0;if(Xs(V))return!1;const Be=V.firstChild;if(Be){const ut=new mn(Be,V),zt=v?v.getWhitespaceElements():{},On=Z||(v?v.getNonEmptyElements():null);let Hn=Be;do{if(we(Hn)){const Eu=Hn.getAttribute("data-mce-bogus");if(Eu){Hn=ut.next("all"===Eu);continue}const wu=Hn.nodeName.toLowerCase();if(On&&On[wu]){if("br"===wu){de++,Hn=ut.next();continue}return!1}if(Xs(Hn))return!1}if(Si(Hn)||fe(Hn)&&!Ni(Hn.data)&&(null==ge||!ge.includeZwsp||!NT(Hn.data))||fe(Hn)&&Hn.parentNode&&zt[Hn.parentNode.nodeName]&&Ni(Hn.data))return!1;Hn=ut.next()}while(Hn)}return de<=1},createRng:Ja,nodeIndex:xl,split:(V,Z,ge)=>{let Be,ut,de=Ja();if(V&&Z&&V.parentNode&&Z.parentNode){const zt=V.parentNode;return de.setStart(zt,xl(V)),de.setEnd(Z.parentNode,xl(Z)),Be=de.extractContents(),de=Ja(),de.setStart(Z.parentNode,xl(Z)+1),de.setEnd(zt,xl(V)+1),ut=de.extractContents(),zt.insertBefore(hm(er,Be),V),zt.insertBefore(ge||Z,V),zt.insertBefore(hm(er,ut),V),Ne(V),ge||Z}},bind:Bf,unbind:Lf,fire:(V,Z,ge)=>w.dispatch(V,Z,ge),dispatch:(V,Z,ge)=>w.dispatch(V,Z,ge),getContentEditable:Ff,getContentEditableParent:V=>{const Z=ae();let ge=null;for(let de=V;de&&de!==Z&&(ge=Ff(de),null===ge);de=de.parentNode);return ge},isEditable:V=>{if(ve(V)){const Z=we(V)?V:V.parentElement;return ve(Z)&&Wr(M_fromDom(Z))}return!1},destroy:()=>{if(m.length>0){let V=m.length;for(;V--;){const[Z,ge,de]=m[V];w.unbind(Z,ge,de)}}Nt(s,(V,Z)=>{c.unload(Z),delete s[Z]})},isChildOf:(V,Z)=>V===Z||Z.contains(V),dumpRng:V=>"startContainer: "+V.startContainer.nodeName+", startOffset: "+V.startOffset+", endContainer: "+V.endContainer.nodeName+", endOffset: "+V.endOffset},Yl=((e,t,n)=>{const o=t.keep_values,r={style:{set:(i,a)=>{const c=M_fromDom(i);o&&vc(c,_m,a),xn(c,"style"),Fe(a)&&gl(c,e.parse(a))},get:i=>{const a=M_fromDom(i),c=dn(a,_m)||dn(a,"style");return e.serialize(e.parse(c),Rt(a))}}};return o&&(r.href=r.src={set:(i,a,c)=>{const m=M_fromDom(i);St(t.url_converter)&&ve(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),String(a),c,i)),vc(m,"data-mce-"+c,a),vc(m,c,a)},get:(i,a)=>{const c=M_fromDom(i);return dn(c,"data-mce-"+a)||dn(c,a)}}),r})(x,t,Ce(er));return er};Ut.DOM=Ut(document),Ut.nodeIndex=xl;const Tk=Ut.DOM;class Yr{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,o)=>{const s=Tk;let r;const i=()=>{s.remove(m),r&&(r.onerror=r.onload=r=null)},m=s.uniqueId();r=document.createElement("script"),r.id=m,r.type="text/javascript",r.src=f._addCacheSuffix(t),this.settings.referrerPolicy&&s.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=()=>{i(),n()},r.onerror=()=>{i(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),void 0===n.states[t]&&(n.states[t]=0),new Promise((s,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:s,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(c,m)=>{$t(n.scriptLoadedCallbacks,m).each(v=>{re(v,x=>x[c](m))}),delete n.scriptLoadedCallbacks[m]},s=c=>{const m=Ve(c,v=>"rejected"===v.status);return m.length>0?Promise.reject(yo(m,({reason:v})=>gn(v)?v:[v])):Promise.resolve()},r=c=>Promise.allSettled(pt(c,m=>2===n.states[m]?(o("resolve",m),Promise.resolve()):3===n.states[m]?(o("reject",m),Promise.reject(m)):(n.states[m]=1,n.loadScript(m).then(()=>{n.states[m]=2,o("resolve",m);const v=n.queue;return v.length>0?(n.queue=[],r(v).then(s)):Promise.resolve()},()=>(n.states[m]=3,o("reject",m),Promise.reject(m)))))),i=c=>(n.loading=!0,r(c).then(m=>{n.loading=!1;const v=n.queueLoadedCallbacks.shift();return T.from(v).each(_r),s(m)})),a=Pr(t);return n.loading?new Promise((c,m)=>{n.queueLoadedCallbacks.push(()=>{i(a).then(c,m)})}):i(a)}}Yr.ScriptLoader=new Yr;const zn=e=>{let t=e;return{get:()=>t,set:s=>{t=s}}},yc={},Tm=zn("en"),Ib=()=>$t(yc,Tm.get()),Vs={getData:()=>bs(yc,e=>({...e})),setCode:e=>{e&&Tm.set(e)},getCode:()=>Tm.get(),add:(e,t)=>{let n=yc[e];n||(yc[e]=n={});const o=pt(In(t),s=>s.toLowerCase());Nt(t,(s,r)=>{const i=r.toLowerCase();i!==r&&((e,t)=>{const n=e.indexOf(t);return-1!==n&&e.indexOf(t,n+1)>n})(o,i)?(Ge(t,i)||(n[i]=s),n[r]=s):n[i]=s})},translate:e=>{const t=Ib().getOr({}),n=i=>St(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,s=i=>{const a=n(i);return Ge(t,a)?n(t[a]):$t(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(o(e))return"";if((e=>cn(e)&&Ge(e,"raw"))(e))return n(e.raw);if((e=>gn(e)&&e.length>1)(e)){const i=e.slice(1);return r(s(e[0]).replace(/\{([0-9]+)\}/g,(c,m)=>Ge(i,m)?n(i[m]):c))}return r(s(e))},isRtl:()=>Ib().bind(e=>$t(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>Ge(yc,e)},po=()=>{const e=[],t={},n={},o=[],s=(A,P)=>{const F=Ve(o,z=>z.name===A&&z.state===P);re(F,z=>z.resolve())},r=A=>Ge(t,A),c=(A,P)=>{const F=Vs.getCode();!F||P&&-1===(","+(P||"")+",").indexOf(","+F+",")||Yr.ScriptLoader.add(t[A]+"/langs/"+F+".js")},O=(A,P="added")=>"added"===P&&(A=>Ge(n,A))(A)||"loaded"===P&&r(A)?Promise.resolve():new Promise(F=>{o.push({name:A,state:P,resolve:F})});return{items:e,urls:t,lookup:n,get:A=>{if(n[A])return n[A].instance},requireLangPack:(A,P)=>{!1!==po.languageLoad&&(r(A)?c(A,P):O(A,"loaded").then(()=>c(A,P)))},add:(A,P)=>(e.push(P),n[A]={instance:P},s(A,"added"),P),remove:A=>{delete t[A],delete n[A]},createUrl:(A,P)=>Fe(P)?Fe(A)?{prefix:"",resource:P,suffix:""}:{prefix:A.prefix,resource:P,suffix:A.suffix}:P,load:(A,P)=>{if(t[A])return Promise.resolve();let F=Fe(P)?P:P.prefix+P.resource+P.suffix;0!==F.indexOf("/")&&-1===F.indexOf("://")&&(F=po.baseURL+"/"+F),t[A]=F.substring(0,F.lastIndexOf("/"));const z=()=>(s(A,"loaded"),Promise.resolve());return n[A]?z():Yr.ScriptLoader.add(F).then(z)},waitFor:O}};po.languageLoad=!0,po.baseURL="",po.PluginManager=po(),po.ThemeManager=po(),po.ModelManager=po();const Ok=e=>{const t=zn(T.none()),n=()=>t.get().each(a=>clearInterval(a));return{clear:()=>{n(),t.set(T.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(T.some(setInterval(a,e)))}}},Di=()=>{const e=(e=>{const t=zn(T.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(T.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(T.some(a))}}})(et);return{...e,on:n=>e.get().each(n)}},Yu=(e,t)=>{let n=null;return{cancel:()=>{C(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{C(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},km=(e,t)=>{let n=null;const o=()=>{C(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},Cc=Ce("mce-annotation"),Sa=Ce("data-mce-annotation"),El=Ce("data-mce-annotation-uid"),xc=Ce("data-mce-annotation-active"),Ec=Ce("data-mce-annotation-classes"),wc=Ce("data-mce-annotation-attrs"),Bb=e=>t=>ne(t,e),Lb=(e,t)=>{const n=e.selection.getRng(),o=M_fromDom(n.startContainer),s=M_fromDom(e.getBody()),r=t.fold(()=>"."+Cc(),c=>`[${Sa()}="${c}"]`),i=Eo(o,n.startOffset).getOr(o);return qr(i,r,Bb(s)).bind(c=>Xo(c,`${El()}`).bind(m=>Xo(c,`${Sa()}`).map(v=>{const x=$b(e,m);return{uid:m,name:v,elements:x}})))},Fb=(e,t)=>Fr(e,"data-mce-bogus")||Vr(e,'[data-mce-bogus="all"]',Bb(t)),$b=(e,t)=>{const n=M_fromDom(e.getBody()),o=bn(n,`[${El()}="${t}"]`);return Ve(o,s=>!Fb(s,n))},Ub=(e,t)=>{const n=M_fromDom(e.getBody()),o=bn(n,`[${Sa()}="${t}"]`),s={};return re(o,r=>{if(!Fb(r,n)){const i=dn(r,El()),a=$t(s,i).getOr([]);s[i]=a.concat([r])}}),s};let zb=0;const Sc=e=>{const n=(new Date).getTime(),o=Math.floor(1e9*Math.random());return zb++,e+"_"+o+zb+String(n)},Hb=(e,t)=>M_fromDom(e.dom.cloneNode(t)),_a=e=>Hb(e,!1),qb=e=>Hb(e,!0),Wb=(e,t,n=jt)=>{const o=new mn(e,t),s=r=>{let i;do{i=o[r]()}while(i&&!fe(i)&&!n(i));return T.from(i).filter(fe)};return{current:()=>T.from(o.current()).filter(fe),next:()=>s("next"),prev:()=>s("prev"),prev2:()=>s("prev2")}},Ta=(e,t)=>{const n=t||(i=>e.isBlock(i)||ln(i)||Zt(i)),o=(i,a,c,m)=>{if(fe(i)){const v=m(i,a,i.data);if(-1!==v)return T.some({container:i,offset:v})}return c().bind(v=>o(v.container,v.offset,c,m))};return{backwards:(i,a,c,m)=>{const v=Wb(i,null!=m?m:e.getRoot(),n);return o(i,a,()=>v.prev().map(x=>({container:x,offset:x.length})),c).getOrNull()},forwards:(i,a,c,m)=>{const v=Wb(i,null!=m?m:e.getRoot(),n);return o(i,a,()=>v.next().map(x=>({container:x,offset:0})),c).getOrNull()}}},wl=Math.round,ka=e=>e?{left:wl(e.left),top:wl(e.top),bottom:wl(e.bottom),right:wl(e.right),width:wl(e.width),height:wl(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},jb=(e,t)=>(e=ka(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Vb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,_c=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Vb(t.top-e.bottom,e,t)},Tc=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Vb(t.bottom-e.top,e,t),Zb=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),s=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-s)*(n-s))},Ku=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Pi=(e,t)=>{if(we(e)&&e.hasChildNodes()){const n=e.childNodes,o=((e,t,n)=>Math.min(Math.max(e,0),n))(t,0,n.length-1);return n[o]}return e},Gk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Gb=e=>Fe(e)&&e.charCodeAt(0)>=768&&Gk.test(e),Yb=we,Jk=_s,Kb=Zr("display","block table"),Qk=Zr("float","left right"),kc=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Yb,Jk,wr(Qk)),Xk=wr(Zr("white-space","pre pre-line pre-wrap")),Nc=fe,Nm=ln,Jb=Ut.nodeIndex,Ju=(e,t)=>{if(!(t<0&&we(e)&&e.hasChildNodes()))return Pi(e,t)},Am=e=>e?e.createRange():Ut.DOM.createRng(),Rm=e=>Fe(e)&&/[\r\n\t ]/.test(e),Qb=e=>!!e.setStart&&!!e.setEnd,Dm=e=>{const t=e.startContainer,n=e.startOffset;if(Rm(e.toString())&&Xk(t.parentNode)&&fe(t)){const o=t.data;if(Rm(o[n-1])||Rm(o[n+1]))return!0}return!1},Xb=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Oi=e=>{var t;let n;const o=e.getClientRects();return n=ka(o.length>0?o[0]:e.getBoundingClientRect()),!Qb(e)&&Nm(e)&&Xb(n)?(e=>{const t=e.ownerDocument,n=Am(t),o=t.createTextNode(Un),s=e.parentNode;s.insertBefore(o,e),n.setStart(o,0),n.setEnd(o,1);const r=ka(n.getBoundingClientRect());return s.removeChild(o),r})(e):Xb(n)&&Qb(e)&&null!==(t=(e=>{const n=e.endContainer,o=e.startOffset,s=e.endOffset;if(e.startContainer===n&&fe(n)&&0===o&&1===s){const r=e.cloneRange();return r.setEndAfter(n),Oi(r)}return null})(e))&&void 0!==t?t:n},Na=(e,t)=>{const n=jb(e,t);return n.width=1,n.right=n.left+1,n},ee=(e,t,n)=>{const i=()=>(n||(n=(e=>{const t=[],n=i=>{0!==i.height&&(t.length>0&&((e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right)(i,t[t.length-1])||t.push(i))},o=(i,a)=>{const c=Am(i.ownerDocument);if(a<i.data.length){if(Gb(i.data[a]))return;if(Gb(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!Dm(c)))return void n(Na(Oi(c),!1))}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),Dm(c)||n(Na(Oi(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),Dm(c)||n(Na(Oi(c),!0)))},s=e.container(),r=e.offset();if(Nc(s))return o(s,r),t;if(Yb(s))if(e.isAtEnd()){const i=Ju(s,r);Nc(i)&&o(i,i.data.length),kc(i)&&!Nm(i)&&n(Na(Oi(i),!1))}else{const i=Ju(s,r);if(Nc(i)&&o(i,0),kc(i)&&e.isAtEnd())return n(Na(Oi(i),!1)),t;const a=Ju(e.container(),e.offset()-1);kc(a)&&!Nm(a)&&(Kb(a)||Kb(i)||!kc(i))&&n(Na(Oi(a),!1)),kc(i)&&n(Na(Oi(i),!0))}return t})(ee(e,t))),n);return{container:Ce(e),offset:Ce(t),toRange:()=>{const v=Am(e.ownerDocument);return v.setStart(e,t),v.setEnd(e,t),v},getClientRects:i,isVisible:()=>i().length>0,isAtStart:()=>(Nc(e),0===t),isAtEnd:()=>Nc(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:v=>v&&e===v.container()&&t===v.offset(),getNode:v=>Ju(e,v?t-1:t)}};ee.fromRangeStart=e=>ee(e.startContainer,e.startOffset),ee.fromRangeEnd=e=>ee(e.endContainer,e.endOffset),ee.after=e=>ee(e.parentNode,Jb(e)+1),ee.before=e=>ee(e.parentNode,Jb(e)),ee.isAbove=(e,t)=>N(hn(t.getClientRects()),ao(e.getClientRects()),_c).getOr(!1),ee.isBelow=(e,t)=>N(ao(t.getClientRects()),hn(e.getClientRects()),Tc).getOr(!1),ee.isAtStart=e=>!!e&&e.isAtStart(),ee.isAtEnd=e=>!!e&&e.isAtEnd(),ee.isTextPosition=e=>!!e&&fe(e.container()),ee.isElementPosition=e=>!ee.isTextPosition(e);const Qu=(e,t)=>{fe(t)&&0===t.data.length&&e.remove(t)},Pm=(e,t,n)=>{nm(n)?((e,t,n)=>{const o=T.from(n.firstChild),s=T.from(n.lastChild);t.insertNode(n),o.each(r=>Qu(e,r.previousSibling)),s.each(r=>Qu(e,r.nextSibling))})(e,t,n):((e,t,n)=>{t.insertNode(n),Qu(e,n.previousSibling),Qu(e,n.nextSibling)})(e,t,n)},Zs=fe,ev=ya,tv=Ut.nodeIndex,nv=e=>{const t=e.parentNode;return ev(t)?nv(t):t},Om=e=>e?vs(e.childNodes,(t,n)=>(ev(n)&&"BR"!==n.nodeName?t=t.concat(Om(n)):t.push(n),t),[]):[],ov=e=>t=>e===t,sv=e=>(Zs(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let t,n;t=Om(nv(e)),n=Ps(t,ov(e),e),t=t.slice(0,n+1);const o=vs(t,(s,r,i)=>(Zs(r)&&Zs(t[i-1])&&s++,s),0);return t=Mr(t,Vn([e.nodeName])),n=Ps(t,ov(e),e),n-o})(e)+"]",rv=(e,t)=>{let r,n=[],o=t.container(),s=t.offset();if(Zs(o))r=((e,t)=>{let n=e;for(;(n=n.previousSibling)&&Zs(n);)t+=n.data.length;return t})(o,s);else{const a=o.childNodes;s>=a.length?(r="after",s=a.length-1):r="before",o=a[s]}n.push(sv(o));let i=((e,t,n)=>{const o=[];for(let s=t.parentNode;s&&s!==e;s=s.parentNode)o.push(s);return o})(e,o);return i=Mr(i,wr(ya)),n=n.concat(Xi(i,a=>sv(a))),n.reverse().join("/")+","+r},iv=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),s=n.length>1?n[1]:"before",r=vs(o,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?("text()"===c[1]&&(c[1]="#text"),((e,t,n)=>{let o=Om(e);return o=Mr(o,(s,r)=>!Zs(s)||!Zs(o[r-1])),o=Mr(o,Vn([t])),o[n]})(i,c[1],parseInt(c[2],10))):null},e);if(!r)return null;if(!Zs(r)&&r.parentNode){let i;return i="after"===s?tv(r)+1:tv(r),ee(r.parentNode,i)}return((e,t)=>{let n=e,o=0;for(;Zs(n);){const s=n.data.length;if(t>=o&&t<=o+s){e=n,t-=o;break}if(!Zs(n.nextSibling)){e=n,t=s;break}o+=s,n=n.nextSibling}return Zs(e)&&t>e.data.length&&(t=e.data.length),ee(e,t)})(r,parseInt(s,10))},Xu=Zt,av=(e,t,n,o,s)=>{const r=s?o.startContainer:o.endContainer;let i=s?o.startOffset:o.endOffset;const a=[],c=e.getRoot();if(fe(r))a.push(n?((e,t,n)=>{let o=e(t.data.slice(0,n)).length;for(let s=t.previousSibling;s&&fe(s);s=s.previousSibling)o+=e(s.data).length;return o})(t,r,i):i);else{let m=0;const v=r.childNodes;i>=v.length&&v.length&&(m=1,i=Math.max(0,v.length-1)),a.push(e.nodeIndex(v[i],n)+m)}for(let m=r;m&&m!==c;m=m.parentNode)a.push(e.nodeIndex(m,n));return a},Mm=(e,t,n)=>{let o=0;return f.each(e.select(t),s=>{if("all"!==s.getAttribute("data-mce-bogus"))return s!==n&&void o++}),o},lv=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(we(n)&&"TR"===n.nodeName){const s=n.childNodes;n=s[Math.min(t?o:o-1,s.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},cv=e=>(lv(e,!0),lv(e,!1),e),uv=(e,t)=>{if(we(e)&&(e=Pi(e,t),Xu(e)))return e;if(ss(e)){fe(e)&&Cl(e)&&(e=e.parentNode);let n=e.previousSibling;if(Xu(n)||(n=e.nextSibling,Xu(n)))return n}},dv=(e,t,n)=>{const o=n.getNode(),s=n.getRng();if("IMG"===o.nodeName||Xu(o)){const i=o.nodeName;return{name:i,index:Mm(n.dom,i,o)}}const r=(e=>uv(e.startContainer,e.startOffset)||uv(e.endContainer,e.endOffset))(s);if(r){const i=r.tagName;return{name:i,index:Mm(n.dom,i,r)}}return((e,t,n,o)=>{const s=t.dom,r=av(s,e,n,o,!0),i=t.isForward(),a=lb(o)?{isFakeCaret:!0}:{};return t.isCollapsed()?{start:r,forward:i,...a}:{start:r,end:av(s,e,n,o,!1),forward:i,...a}})(e,n,t,s)},fv=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},mv=(e,t)=>{const n=e.dom;let o=e.getRng();const s=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName,c=e.isForward();if("IMG"===a)return{name:a,index:Mm(n,a,i)};const m=cv(o.cloneRange());if(!r){m.collapse(!1);const x=fv(n,s+"_end",t);Pm(n,m,x)}o=cv(o),o.collapse(!0);const v=fv(n,s+"_start",t);return Pm(n,o,v),e.moveToBookmark({id:s,keep:!0,forward:c}),{id:s,forward:c}},Im=Te(dv,rn,!0),pv=e=>{const t=r=>r(e),n=Ce(e),o=()=>s,s={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:an,isError:jt,map:r=>wo.value(r(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:r=>{r(e)},toOptional:()=>T.some(e)};return s},gv=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,s)=>o(e),isValue:jt,isError:an,map:t,mapError:o=>wo.error(o(e)),bind:t,exists:jt,forall:an,getOr:rn,or:rn,getOrThunk:oi,orThunk:oi,getOrDie:Sr(String(e)),each:et,toOptional:T.none};return n},wo={value:pv,error:gv,fromOption:(e,t)=>e.fold(()=>gv(t),pv)},fr_generate=e=>{if(!gn(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return re(e,(o,s)=>{const r=In(o);if(1!==r.length)throw new Error("one and only one name per case");const i=r[0],a=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!gn(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const m=c.length;if(m!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+m);return{fold:(...x)=>{if(x.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+x.length);return x[s].apply(null,c)},match:x=>{const w=In(x);if(t.length!==w.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+w.join(","));if(!hs(t,O=>kt(w,O)))throw new Error("Not all branches were specified when using match. Specified: "+w.join(", ")+"\nRequired: "+t.join(", "));return x[i].apply(null,c)},log:x=>{console.log(x,{constructors:t,constructor:i,params:c})}}}}),n};fr_generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const bN=e=>"inline-command"===e.type||"inline-format"===e.type,vN=e=>"block-command"===e.type||"block-format"===e.type,yN=e=>{const t=o=>wo.error({message:o,pattern:e}),n=(o,s,r)=>{if(void 0!==e.format){let i;if(gn(e.format)){if(!hs(e.format,Fe))return t(o+" pattern has non-string items in the `format` array");i=e.format}else{if(!Fe(e.format))return t(o+" pattern has non-string `format` parameter");i=[e.format]}return wo.value(s(i))}return void 0!==e.cmd?Fe(e.cmd)?wo.value(r(e.cmd,e.value)):t(o+" pattern has non-string `cmd` parameter"):t(o+" pattern is missing both `format` and `cmd` parameters")};if(!cn(e))return t("Raw pattern is not an object");if(!Fe(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!Fe(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let o=e.start,s=e.end;return 0===s.length&&(s=o,o=""),n("Inline",r=>({type:"inline-format",start:o,end:s,format:r}),(r,i)=>({type:"inline-command",start:o,end:s,cmd:r,value:i}))}return void 0!==e.replacement?Fe(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):wo.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:e.start,format:o[0]}),(o,s)=>({type:"block-command",start:e.start,cmd:o,value:s}))},hv=e=>Ve(e,vN),bv=e=>Ve(e,bN),vv=e=>{const t=(e=>{const t=[],n=[];return re(e,o=>{o.fold(s=>{t.push(s)},s=>{n.push(s)})}),{errors:t,values:n}})(pt(e,yN));return re(t.errors,n=>console.error(n.message,n.pattern)),t.values},xN=e=>t=>{const n=e(t);return vv(n)},Bm=Co().deviceType,EN=Bm.isTouch(),wN=Ut.DOM,yv=e=>Er(e,RegExp),Se=e=>t=>t.options.get(e),Lm=e=>Fe(e)||cn(e),Cv=(e,t="")=>n=>{const o=Fe(n);if(o){if(-1!==n.indexOf("=")){const s=(e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return nn(t,(n,o)=>{const s=o.split("="),r=s[0],i=s.length>1?s[1]:r;return n[Ro(r)]=Ro(i),n},{})})(n);return{value:$t(s,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},TN=Se("iframe_attrs"),kN=Se("doctype"),xv=Se("document_base_url"),NN=Se("body_id"),AN=Se("body_class"),Ev=Se("content_security_policy"),RN=Se("br_in_pre"),ro=Se("forced_root_block"),Ac=Se("forced_root_block_attrs"),DN=Se("newline_behavior"),PN=Se("br_newline_selector"),ON=Se("no_newline_selector"),MN=Se("keep_styles"),IN=Se("end_container_on_empty_block"),wv=Se("automatic_uploads"),Sv=Se("images_reuse_filename"),BN=Se("images_replace_blob_uris"),_v=Se("icons"),LN=Se("icons_url"),FN=Se("images_upload_url"),$N=Se("images_upload_base_path"),UN=Se("images_upload_credentials"),zN=Se("images_upload_handler"),HN=Se("content_css_cors"),Fm=Se("referrer_policy"),Tv=Se("language"),qN=Se("language_url"),kv=Se("indent_use_margin"),WN=Se("indentation"),jN=Se("content_css"),VN=Se("content_style"),Nv=Se("font_css"),ZN=Se("directionality"),GN=Se("inline_boundaries_selector"),Av=Se("object_resizing"),YN=Se("resize_img_proportional"),KN=Se("placeholder"),Rv=Se("event_root"),JN=Se("service_message"),Sl=Se("theme"),QN=Se("theme_url"),$m=Se("model"),XN=Se("model_url"),Rc=Se("inline_boundaries"),eA=Se("formats"),tA=Se("preview_styles"),nA=Se("format_empty_lines"),oA=Se("format_noneditable_selector"),sA=Se("custom_ui_selector"),Um=Se("inline"),rA=Se("hidden_input"),iA=Se("submit_patch"),aA=Se("add_form_submit_trigger"),lA=Se("add_unload_trigger"),cA=Se("custom_undo_redo_levels"),uA=Se("disable_nodechange"),Dv=Se("readonly"),dA=Se("editable_root"),Pv=Se("content_css_cors"),ed=Se("plugins"),fA=Se("external_plugins"),mA=Se("block_unsupported_drop"),pA=Se("visual"),gA=Se("visual_table_class"),Ov=Se("visual_anchor_class"),hA=Se("iframe_aria_text"),bA=Se("setup"),vA=Se("init_instance_callback"),yA=Se("urlconverter_callback"),CA=Se("auto_focus"),xA=Se("browser_spellcheck"),EA=Se("protect"),wA=Se("paste_block_drop"),td=Se("paste_data_images"),SA=Se("paste_preprocess"),_A=Se("paste_postprocess"),TA=Se("newdocument_content"),kA=Se("paste_webkit_styles"),NA=Se("paste_remove_styles_if_webkit"),AA=Se("paste_merge_formats"),RA=Se("smart_paste"),DA=Se("paste_as_text"),PA=Se("paste_tab_spaces"),OA=Se("allow_html_data_urls"),MA=Se("text_patterns"),IA=Se("text_patterns_lookup"),Mv=Se("noneditable_class"),BA=Se("editable_class"),LA=Se("noneditable_regexp"),FA=Se("preserve_cdata"),$A=Se("highlight_on_focus"),zm=Se("xss_sanitization"),UA=Se("init_content_sync"),Iv=e=>f.explode(e.options.get("images_file_types")),jA=Se("table_tab_navigation"),VA=Se("details_initial_state"),ZA=Se("details_serialized_state"),GA=we,Bv=fe,Lv=e=>{const t=e.parentNode;t&&t.removeChild(e)},Fv=e=>{const t=Ws(e);return{count:e.length-t.length,text:t}},$v=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(Zn));)e.deleteData(t,1)},Uv=(e,t)=>(Aa(e),t),XA=(e,t)=>ee.isTextPosition(t)?((e,t)=>Bv(e)&&t.container()===e?((e,t)=>{const n=Fv(e.data.substr(0,t.offset())),o=Fv(e.data.substr(t.offset()));return(n.text+o.text).length>0?($v(e),ee(e,t.offset()-n.count)):t})(e,t):Uv(e,t))(e,t):((e,t)=>t.container()===e.parentNode?((e,t)=>{const n=t.container(),o=((e,t)=>{const n=Rs(e,t);return-1===n?T.none():T.some(n)})(Jn(n.childNodes),e).map(s=>s<t.offset()?ee(n,t.offset()-1):t).getOr(t);return Aa(e),o})(e,t):Uv(e,t))(e,t),Aa=e=>{GA(e)&&ss(e)&&(ab(e)?e.removeAttribute("data-mce-caret"):Lv(e)),Bv(e)&&($v(e),0===e.data.length&&Lv(e))},eR=Zt,tR=dr,nR=Iu,zv=(e,t,n)=>{const o=jb(t.getBoundingClientRect(),n);let s,r;if("BODY"===e.tagName){const a=e.ownerDocument.documentElement;s=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();s=e.scrollLeft-a.left,r=e.scrollTop-a.top}o.left+=s,o.right+=s,o.top+=r,o.bottom+=r,o.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),o.left+=i,o.right+=i),o},rR=(e,t,n,o)=>{const s=Di();let r,i;const a=ro(e),c=e.dom,v=()=>{(e=>{var t,n;const o=bn(M_fromDom(e),"*[contentEditable=false],video,audio,embed,object");for(let s=0;s<o.length;s++){const r=o[s].dom;let i=r.previousSibling;if(zu(i)){const a=i.data;1===a.length?null===(t=i.parentNode)||void 0===t||t.removeChild(i):i.deleteData(a.length-1,1)}i=r.nextSibling,Uu(i)&&(1===i.data.length?null===(n=i.parentNode)||void 0===n||n.removeChild(i):i.deleteData(0,1))}})(t),i&&(Aa(i),i=null),s.on(A=>{c.remove(A.caret),s.clear()}),r&&(clearInterval(r),r=void 0)};return{show:(A,P)=>{let F;if(v(),nR(P))return null;if(!n(P))return i=((e,t)=>{var n;const s=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Zn),r=e.parentNode;if(t){const i=e.previousSibling;if(yl(i)){if(ss(i))return i;if(zu(i))return i.splitText(i.data.length-1)}null==r||r.insertBefore(s,e)}else{const i=e.nextSibling;if(yl(i)){if(ss(i))return i;if(Uu(i))return i.splitText(1),i}e.nextSibling?null==r||r.insertBefore(s,e.nextSibling):null==r||r.appendChild(s)}return s})(P,A),F=P.ownerDocument.createRange(),Dc(i.nextSibling)?(F.setStart(i,0),F.setEnd(i,0)):(F.setStart(i,1),F.setEnd(i,1)),F;{const z=((e,t,n)=>{var o;const r=(null!==(o=t.ownerDocument)&&void 0!==o?o:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(gc().dom);const i=t.parentNode;return n?null==i||i.insertBefore(r,t):t.nextSibling?null==i||i.insertBefore(r,t.nextSibling):null==i||i.appendChild(r),r})(a,P,A),q=zv(t,P,A);c.setStyle(z,"top",q.top),i=z;const j=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(j,{...q}),c.add(t,j),s.set({caret:j,element:P,before:A}),A&&c.addClass(j,"mce-visual-caret-before"),r=setInterval(()=>{s.on(A=>{o()?c.toggleClass(A.caret,"mce-visual-caret-hidden"):c.addClass(A.caret,"mce-visual-caret-hidden")})},500),F=P.ownerDocument.createRange(),F.setStart(z,0),F.setEnd(z,0)}return F},hide:v,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{s.on(A=>{const P=zv(t,A.element,A.before);c.setStyles(A.caret,{...P})})},destroy:()=>clearInterval(r)}},Hv=()=>gt.browser.isFirefox(),Dc=e=>eR(e)||tR(e),Pc=e=>(Dc(e)||Gr(e)&&Hv())&&at(M_fromDom(e)).exists(Wr),iR=qs,Hm=Zt,aR=dr,qv=Zr("display","block table table-cell table-caption list-item"),Wv=ss,jv=Cl,lR=we,cR=fe,uR=_s,_l=e=>e>0,Ra=e=>e<0,nd=(e,t)=>{let n;for(;n=e(t);)if(!jv(n))return n;return null},Oc=(e,t,n,o,s)=>{const r=new mn(e,o),i=Hm(e)||jv(e);let a;if(Ra(t)){if(i&&(a=nd(r.prev.bind(r),!0),n(a)))return a;for(;a=nd(r.prev.bind(r),s);)if(n(a))return a}if(_l(t)){if(i&&(a=nd(r.next.bind(r),!0),n(a)))return a;for(;a=nd(r.next.bind(r),s);)if(n(a))return a}return null},Mi=(e,t)=>{for(;e&&e!==t;){if(qv(e))return e;e=e.parentNode}return null},mr=(e,t,n)=>Mi(e.container(),n)===Mi(t.container(),n),qm=(e,t)=>{if(!t)return T.none();const n=t.container(),o=t.offset();return lR(n)?T.from(n.childNodes[o+e]):T.none()},Vv=(e,t)=>{var n;const s=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),s},fR=(e,t,n)=>Mi(t,e)===Mi(n,e),Zv=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let s=n;for(;s&&s!==t;){let r=s[o];if(r&&Wv(r)&&(r=r[o]),Hm(r)||aR(r)){if(fR(t,r,s))return r;break}if(uR(r))break;s=s.parentNode}return null},Mc=Te(Vv,!0),Ic=Te(Vv,!1),Wm=(e,t,n)=>{let o;const s=Te(Zv,!0,t),r=Te(Zv,!1,t),i=n.startContainer,a=n.startOffset;if(Cl(i)){const c=cR(i)?i.parentNode:i,m=c.getAttribute("data-mce-caret");if("before"===m&&(o=c.nextSibling,Pc(o)))return Mc(o);if("after"===m&&(o=c.previousSibling,Pc(o)))return Ic(o)}if(!n.collapsed)return n;if(fe(i)){if(Wv(i)){if(1===e){if(o=r(i),o)return Mc(o);if(o=s(i),o)return Ic(o)}if(-1===e){if(o=s(i),o)return Ic(o);if(o=r(i),o)return Mc(o)}return n}if(zu(i)&&a>=i.data.length-1)return 1===e&&(o=r(i),o)?Mc(o):n;if(Uu(i)&&a<=1)return-1===e&&(o=s(i),o)?Ic(o):n;if(a===i.data.length)return o=r(i),o?Mc(o):n;if(0===a)return o=s(i),o?Ic(o):n}return n},Gv=(e,t)=>qm(e?0:-1,t).filter(Hm),Bc=(e,t,n)=>{const o=Wm(e,t,n);return-1===e?ee.fromRangeStart(o):ee.fromRangeEnd(o)},od=e=>T.from(e.getNode()).map(M_fromDom),jm=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},sd=(e,t)=>{const n=mr(e,t);return!(n||!ln(e.getNode()))||n};var Gn=function(e){return e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards",e}(Gn||{});const pR=Zt,pr=fe,Yv=we,Vm=ln,Tl=_s,Kv=e=>ub(e)||(e=>!!cm(e)&&!nn(Jn(e.getElementsByTagName("*")),(t,n)=>t||cb(n),!1))(e),rd=db,Jv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Qv=(e,t)=>{if(_l(e)){if(Tl(t.previousSibling)&&!pr(t.previousSibling))return ee.before(t);if(pr(t))return ee(t,0)}if(Ra(e)){if(Tl(t.nextSibling)&&!pr(t.nextSibling))return ee.after(t);if(pr(t))return ee(t,t.data.length)}return Ra(e)?Vm(t)?ee.before(t):ee.after(t):ee.before(t)},Zm=(e,t,n)=>{let o,s,r,i;if(!Yv(n)||!t)return null;if(t.isEqual(ee.after(n))&&n.lastChild){if(i=ee.after(n.lastChild),Ra(e)&&Tl(n.lastChild)&&Yv(n.lastChild))return Vm(n.lastChild)?ee.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(pr(a)){if(Ra(e)&&c>0)return ee(a,--c);if(_l(e)&&c<a.length)return ee(a,++c);o=a}else{if(Ra(e)&&c>0&&(s=Jv(a,c-1),Tl(s)))return!Kv(s)&&(r=Oc(s,e,rd,s),r)?pr(r)?ee(r,r.data.length):ee.after(r):pr(s)?ee(s,s.data.length):ee.before(s);if(_l(e)&&c<a.childNodes.length&&(s=Jv(a,c),Tl(s)))return Vm(s)?((e,t)=>{const n=t.nextSibling;return n&&Tl(n)?pr(n)?ee(n,0):ee.before(n):Zm(Gn.Forwards,ee.after(t),e)})(n,s):!Kv(s)&&(r=Oc(s,e,rd,s),r)?pr(r)?ee(r,0):ee.before(r):pr(s)?ee(s,0):ee.after(s);o=s||i.getNode()}if(o&&(_l(e)&&i.isAtEnd()||Ra(e)&&i.isAtStart())&&(o=Oc(o,e,an,n,!0),rd(o,n)))return Qv(e,o);s=o&&Oc(o,e,rd,n);const m=ys(Ve(((e,t)=>{const n=[];let o=e;for(;o&&o!==t;)n.push(o),o=o.parentNode;return n})(a,n),pR));return!m||s&&m.contains(s)?s?Qv(e,s):null:(i=_l(e)?ee.after(m):ee.before(m),i)},gr=e=>({next:t=>Zm(Gn.Forwards,t,e),prev:t=>Zm(Gn.Backwards,t,e)}),Xv=e=>ee.isTextPosition(e)?0===e.offset():_s(e.getNode()),ey=e=>{if(ee.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return _s(e.getNode(!0))},ty=(e,t)=>!ee.isTextPosition(e)&&!ee.isTextPosition(t)&&e.getNode()===t.getNode(!0),rs=(e,t,n)=>{const o=gr(t);return T.from(e?o.next(n):o.prev(n))},kl=(e,t,n)=>rs(e,t,n).bind(o=>mr(n,o,t)&&((e,t,n)=>e?!ty(t,n)&&!(e=>!ee.isTextPosition(e)&&ln(e.getNode()))(t)&&ey(t)&&Xv(n):!ty(n,t)&&Xv(t)&&ey(n))(e,n,o)?rs(e,t,o):T.some(o)),ny=(e,t,n,o)=>kl(e,t,n).bind(s=>o(s)?ny(e,t,s,o):T.some(s)),Nl=(e,t)=>{const n=e?t.firstChild:t.lastChild;return fe(n)?T.some(ee(n,e?0:n.data.length)):n?_s(n)?T.some(e?ee.before(n):(e=>ln(e)?ee.before(e):ee.after(e))(n)):((e,t,n)=>{const o=e?ee.before(n):ee.after(n);return rs(e,t,o)})(e,t,n):T.none()},So=Te(rs,!0),Bo=Te(rs,!1),io=Te(Nl,!0),Ts=Te(Nl,!1),Gm="_mce_caret",ks=e=>we(e)&&e.id===Gm,Da=(e,t)=>{let n=t;for(;n&&n!==e;){if(ks(n))return n;n=n.parentNode}return null},oy=e=>Ge(e,"name"),sy=e=>f.isArray(e.start),id=e=>!(!oy(e)&&qn(e.forward))||e.forward,ry=(e,t)=>(we(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),kR=(e,t)=>Ts(e).fold(jt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),iy=(e,t,n)=>!(!(e=>!e.hasChildNodes())(t)||!Da(e,t)||(((e,t)=>{var n;const s=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Zn);e.appendChild(s),t.setStart(s,0),t.setEnd(s,0)})(t,n),0)),ay=(e,t,n,o)=>{const s=n[t?"start":"end"],r=e.getRoot();if(s){let i=r,a=s[0];for(let c=s.length-1;i&&c>=1;c--){const m=i.childNodes;if(iy(r,i,o))return!0;if(s[c]>m.length-1)return!!iy(r,i,o)||kR(i,o);i=m[s[c]]}fe(i)&&(a=Math.min(s[0],i.data.length)),we(i)&&(a=Math.min(s[0],i.childNodes.length)),t?o.setStart(i,a):o.setEnd(i,a)}return!0},Ym=e=>fe(e)&&e.data.length>0,ly=(e,t,n)=>{const o=e.get(n.id+"_"+t),s=null==o?void 0:o.parentNode,r=n.keep;if(o&&s){let i,a;if("start"===t?r?o.hasChildNodes()?(i=o.firstChild,a=1):Ym(o.nextSibling)?(i=o.nextSibling,a=0):Ym(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=s,a=e.nodeIndex(o)+1):(i=s,a=e.nodeIndex(o)):r?o.hasChildNodes()?(i=o.firstChild,a=1):Ym(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=s,a=e.nodeIndex(o)):(i=s,a=e.nodeIndex(o)),!r){const c=o.previousSibling,m=o.nextSibling;let v;for(f.each(f.grep(o.childNodes),x=>{fe(x)&&(x.data=x.data.replace(/\uFEFF/g,""))});v=e.get(n.id+"_"+t);)e.remove(v,!0);if(fe(m)&&fe(c)&&!gt.browser.isOpera()){const x=c.data.length;c.appendData(m.data),e.remove(m),i=c,a=x}}return T.some(ee(i,a))}return T.none()},PR=(e,t,n)=>((e,t,n=!1)=>2===t?dv(Ws,n,e):3===t?(e=>{const t=e.getRng();return{start:rv(e.dom.getRoot(),ee.fromRangeStart(t)),end:rv(e.dom.getRoot(),ee.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):mv(e,!1))(e,t,n),OR=(e,t)=>{((e,t)=>{const n=e.dom;if(t){if(sy(t))return((e,t)=>{const n=e.createRng();return ay(e,!0,t,n)&&ay(e,!1,t,n)?T.some({range:n,forward:id(t)}):T.none()})(n,t);if((e=>Fe(e.start))(t))return((e,t)=>{const n=T.from(iv(e.getRoot(),t.start)),o=T.from(iv(e.getRoot(),t.end));return N(n,o,(s,r)=>{const i=e.createRng();return i.setStart(s.container(),s.offset()),i.setEnd(r.container(),r.offset()),{range:i,forward:id(t)}})})(n,t);if((e=>Ge(e,"id"))(t))return((e,t)=>{const n=ly(e,"start",t),o=ly(e,"end",t);return N(n,o.or(n),(s,r)=>{const i=e.createRng();return i.setStart(ry(e,s.container()),s.offset()),i.setEnd(ry(e,r.container()),r.offset()),{range:i,forward:id(t)}})})(n,t);if(oy(t))return((e,t)=>T.from(e.select(t.name)[t.index]).map(n=>{const o=e.createRng();return o.selectNode(n),{range:o,forward:!0}}))(n,t);if((e=>Ge(e,"rng"))(t))return T.some({range:t.rng,forward:id(t)})}return T.none()})(e,t).each(({range:n,forward:o})=>{e.setRng(n,o)})},is=e=>we(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),ad=(e=>t=>e===t)(Un),Al=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Km=e=>!Al(e)&&!ad(e)&&!om(e),IR=e=>oa(e,"#").toUpperCase(),Jm=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},BR=e=>(e=>({value:IR(e)}))(Jm(e.red)+Jm(e.green)+Jm(e.blue)),LR=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,FR=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,cy=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),uy=(e,t,n,o)=>{const s=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(o);return cy(s,r,i,a)},ld=e=>(e=>{if("transparent"===e)return T.some(cy(0,0,0,0));const t=LR.exec(e);if(null!==t)return T.some(uy(t[1],t[2],t[3],"1"));const n=FR.exec(e);return null!==n?T.some(uy(n[1],n[2],n[3],n[4])):T.none()})(e).map(BR).map(t=>"#"+t.value).getOr(e),Qm=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},dy=(e,t)=>{const n=(e=>bn(e,"td[data-mce-selected],th[data-mce-selected]"))(t);return n.length>0?n:(e=>Ve((e=>yo(e,t=>{const n=Ku(t);return n?[M_fromDom(n)]:[]}))(e),pc))(e)},Rl=e=>dy(Qm(e.selection.getSel()),M_fromDom(e.getBody())),Lc=(e,t)=>ha(e,"table",t),fy=e=>$n(e).fold(Ce([e]),t=>[e].concat(fy(t))),Xm=e=>cc(e).fold(Ce([e]),t=>"br"===Rt(t)?Ft(t).map(n=>[e].concat(Xm(n))).getOr([]):[e].concat(Xm(t))),ep=(e,t)=>N((e=>{const t=e.startContainer,n=e.startOffset;return fe(t)?0===n?T.some(M_fromDom(t)):T.none():T.from(t.childNodes[n]).map(M_fromDom)})(t),(e=>{const t=e.endContainer,n=e.endOffset;return fe(t)?n===t.data.length?T.some(M_fromDom(t)):T.none():T.from(t.childNodes[n-1]).map(M_fromDom)})(t),(n,o)=>{const s=Jt(fy(e),Te(ne,n)),r=Jt(Xm(e),Te(ne,o));return s.isSome()&&r.isSome()}).getOr(!1),tp=(e,t,n,o)=>{const s=n,r=new mn(n,s),i=Ds(e.schema.getMoveCaretBeforeOnEnterElements(),(c,m)=>!kt(["td","th","table"],m.toLowerCase()));let a=n;do{if(fe(a)&&0!==f.trim(a.data).length)return void(o?t.setStart(a,0):t.setEnd(a,a.data.length));if(i[a.nodeName])return void(o?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a))}while(a=o?r.next():r.prev());"BODY"===s.nodeName&&(o?t.setStart(s,0):t.setEnd(s,s.childNodes.length))},cd=e=>{const t=e.selection.getSel();return ve(t)&&t.rangeCount>0},np=(e,t)=>{const n=Rl(e);n.length>0?re(n,o=>{const s=o.dom,r=e.dom.createRng();r.setStartBefore(s),r.setEndAfter(s),t(r,!0)}):t(e.selection.getRng(),!1)},my=(e,t,n)=>{const o=mv(e,t);n(o),e.moveToBookmark(o)},Fc=e=>_t(null==e?void 0:e.nodeType),op=e=>we(e)&&!is(e)&&!ks(e)&&!ya(e),Pa=e=>!0===e.isContentEditable,py=(e,t,n)=>{const{selection:o,dom:s}=e,r=o.getNode(),i=Zt(r);my(o,!0,()=>{t()}),i&&Zt(r)&&s.isChildOf(r,e.getBody())?e.selection.select(r):n(o.getStart())&&ZR(s,o)},ZR=(e,t)=>{var n,o;const s=t.getRng(),{startContainer:r,startOffset:i}=s;if(!((e,t)=>{if(op(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),o=parseInt(n,10);return!isNaN(o)&&o>0}return!1})(e,t.getNode())&&we(r)){const c=r.childNodes,m=e.getRoot();let v;if(i<c.length){const x=c[i];v=new mn(x,null!==(n=e.getParent(x,e.isBlock))&&void 0!==n?n:m)}else{const x=c[c.length-1];v=new mn(x,null!==(o=e.getParent(x,e.isBlock))&&void 0!==o?o:m),v.next(!0)}for(let x=v.current();x;x=v.next()){if("false"===e.getContentEditable(x))return;if(fe(x)&&!rp(x))return s.setStart(x,0),void t.setRng(s)}}},gy=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(we(e)||!rp(e))return e}},sp=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||xa(e,t),Dl=(e,t,n)=>e.schema.isValidChild(t,n),rp=(e,t=!1)=>{if(ve(e)&&fe(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return Ni(n)}return!1},hy=(e,t)=>{const n=e.dom;return op(t)&&"false"===n.getContentEditable(t)&&((e,t)=>{const n="[data-mce-cef-wrappable]",o=oA(e),s=Os(o)?n:`${n},${o}`;return I(M_fromDom(t),s)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},Ii=(e,t)=>St(e)?e(t):(ve(t)&&(e=e.replace(/%(\w+)/g,(n,o)=>t[o]||n)),e),ip=(e,t)=>(t=""+((t=t||"").nodeName||t),(e=""+((e=e||"").nodeName||e)).toLowerCase()===t.toLowerCase()),ap=(e,t)=>{if(Gt(e))return null;{let n=String(e);return("color"===t||"backgroundColor"===t)&&(n=ld(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},ud=(e,t,n)=>{const o=e.getStyle(t,n);return ap(o,n)},by=(e,t)=>{let n;return e.getParent(t,o=>!!we(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},dd=(e,t,n)=>e.getParents(t,n,e.getRoot()),lp=(e,t,n)=>{const o=e.formatter.get(t);return ve(o)&&Kt(o,n)},hr=e=>Ao(e,"block"),as=e=>Ao(e,"selector"),Dn=e=>Ao(e,"inline"),cp=e=>as(e)&&!1!==e.expand&&!Dn(e),Pl=is,vy=dd,yy=rp,tD=sp,nD=e=>ln(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Cy=(e,t)=>{let n=t;for(;n;){if(we(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},xy=(e,t,n,o)=>{const s=t.data;if(e){for(let r=n;r>0;r--)if(o(s.charAt(r-1)))return r}else for(let r=n;r<s.length;r++)if(o(s.charAt(r)))return r;return-1},oD=(e,t,n)=>xy(e,t,n,o=>ad(o)||Al(o)),sD=(e,t,n)=>xy(e,t,n,Km),Ey=(e,t,n,o,s,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(v,x,w)=>{const D=Ta(e);return T.from((s?D.backwards:D.forwards)(v,x,(A,P)=>Pl(A.parentNode)?-1:(i=A,w(s,A,P)),a))};return c(n,o,oD).bind(v=>r?c(v.container,v.offset+(s?-1:0),sD):T.some(v)).orThunk(()=>i?T.some({container:i,offset:s?0:i.length}):T.none())},wy=(e,t,n,o,s)=>{const r=o[s];fe(o)&&Os(o.data)&&r&&(o=r);const i=vy(e,o);for(let a=0;a<i.length;a++)for(let c=0;c<t.length;c++){const m=t[c];if((!ve(m.collapsed)||m.collapsed===n.collapsed)&&as(m)&&e.is(i[a],m.selector))return i[a]}return o},Sy=(e,t,n,o)=>{var s;let r=n;const i=e.getRoot(),a=t[0];if(hr(a)&&(r=a.wrapper?null:e.getParent(n,a.block,i)),!r){const c=null!==(s=e.getParent(n,"LI,TD,TH"))&&void 0!==s?s:i;r=e.getParent(fe(n)?n.parentNode:n,m=>m!==i&&tD(e.schema,m),c)}if(r&&hr(a)&&a.wrapper&&(r=vy(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[o]&&!e.isBlock(r[o])&&(r=r[o],!ip(r,"br")););return r||n},_y=(e,t,n,o)=>{const s=n.parentNode;return!ve(n[o])&&(!(s!==t&&!Gt(s)&&!e.isBlock(s))||_y(e,t,s,o))},fd=(e,t,n,o,s)=>{let r=n;const i=s?"previousSibling":"nextSibling",a=e.getRoot();if(fe(n)&&!yy(n)&&(s?o>0:o<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const m=fe(c)&&!_y(e,a,c,i);if(!Pl(c)&&!nD(c)&&!yy(c,m))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},Ty=e=>Pl(e.parentNode)||Pl(e),Oa=(e,t,n,o=!1)=>{let{startContainer:s,startOffset:r,endContainer:i,endOffset:a}=t;const c=n[0];return we(s)&&s.hasChildNodes()&&(s=Pi(s,r),fe(s)&&(r=0)),we(i)&&i.hasChildNodes()&&(i=Pi(i,t.collapsed?a:a-1),fe(i)&&(a=i.data.length)),s=Cy(e,s),i=Cy(e,i),Ty(s)&&(s=Pl(s)?s:s.parentNode,s=t.collapsed?s.previousSibling||s:s.nextSibling||s,fe(s)&&(r=t.collapsed?s.length:0)),Ty(i)&&(i=Pl(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,fe(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(Ey(e,e.getRoot(),s,r,!0,o).each(({container:x,offset:w})=>{s=x,r=w}),Ey(e,e.getRoot(),i,a,!1,o).each(({container:x,offset:w})=>{i=x,a=w})),(Dn(c)||c.block_expand)&&((!Dn(c)||!fe(s)||0===r)&&(s=fd(e,n,s,r,!0)),(!Dn(c)||!fe(i)||a===i.data.length)&&(i=fd(e,n,i,a,!1))),cp(c)&&(s=wy(e,n,t,s,"previousSibling"),i=wy(e,n,t,i,"nextSibling")),(hr(c)||as(c))&&(s=Sy(e,n,s,"previousSibling"),i=Sy(e,n,i,"nextSibling"),hr(c)&&(e.isBlock(s)||(s=fd(e,n,s,r,!0)),e.isBlock(i)||(i=fd(e,n,i,a,!1)))),we(s)&&s.parentNode&&(r=e.nodeIndex(s),s=s.parentNode),we(i)&&i.parentNode&&(a=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:s,startOffset:r,endContainer:i,endOffset:a}},$c=(e,t,n)=>{var o;const s=t.startOffset,r=Pi(t.startContainer,s),i=t.endOffset,a=Pi(t.endContainer,i-1),c=P=>{const F=P[0];fe(F)&&F===r&&s>=F.data.length&&P.splice(0,1);const z=P[P.length-1];return 0===i&&P.length>0&&z===a&&fe(z)&&P.splice(P.length-1,1),P},m=(P,F,z)=>{const q=[];for(;P&&P!==z;P=P[F])q.push(P);return q},v=(P,F)=>e.getParent(P,z=>z.parentNode===F,F),x=(P,F,z)=>{const q=z?"nextSibling":"previousSibling";for(let j=P,ae=j.parentNode;j&&j!==F;j=ae){ae=j.parentNode;const be=m(j===P?j:j[q],q);be.length&&(z||be.reverse(),n(c(be)))}};if(r===a)return n(c([r]));const w=null!==(o=e.findCommonAncestor(r,a))&&void 0!==o?o:e.getRoot();if(e.isChildOf(r,a))return x(r,w,!0);if(e.isChildOf(a,r))return x(a,w);const D=v(r,w)||r,O=v(a,w)||a;x(r,D,!0);const A=m(D===r?D:D.nextSibling,"nextSibling",O===a?O.nextSibling:O);A.length&&n(c(A)),x(a,O)},rD=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],ky=(e,t,n,o,s,r)=>{const{uid:i=t,...a}=n;Ls(e,Cc()),un(e,`${El()}`,i),un(e,`${Sa()}`,o);const{attributes:c={},classes:m=[]}=s(i,a);if(Ln(e,c),((e,t)=>{re(t,n=>{Ls(e,n)})})(e,m),r){m.length>0&&un(e,`${Ec()}`,m.join(","));const v=In(c);v.length>0&&un(e,`${wc()}`,v.join(","))}},Ny=(e,t,n,o,s)=>{const r=M_fromTag("span",e);return ky(r,t,n,o,s,!1),r},uD=(e,t,n,o,s,r)=>{const i=[],a=Ny(e.getDoc(),n,r,o,s),c=Di(),m=()=>{c.clear()},x=O=>{re(O,w)},w=O=>{switch(((e,t,n,o)=>Je(t).fold(()=>"skipping",s=>"br"===o||(e=>Bn(e)&&Bu(e)===Zn)(t)?"valid":(e=>on(e)&&zr(e,Cc()))(t)?"existing":ks(t.dom)?"caret":Kt(rD,r=>I(t,r))?"valid-block":Dl(e,n,o)&&Dl(e,Rt(s),n)?"valid":"invalid-child"))(e,O,"span",Rt(O))){case"invalid-child":{m();const P=Vt(O);x(P),m();break}case"valid-block":m(),ky(O,n,r,o,s,!0);break;case"valid":{const P=c.get().getOrThunk(()=>{const O=_a(a);return i.push(O),c.set(O),O});Mu(O,P);break}}};return $c(e.dom,t,O=>{m(),(O=>{const A=pt(O,M_fromDom);x(A)})(O)}),i},Ay=e=>{const t=(()=>{const e={};return{register:(s,r)=>{e[s]={name:s,settings:r}},lookup:s=>$t(e,s).map(r=>r.settings),getNames:()=>In(e)}})();((e,t)=>{const n=Sa(),o=r=>T.from(r.attr(n)).bind(t.lookup),s=r=>{var i,a;r.attr(El(),null),r.attr(Sa(),null),r.attr(xc(),null);const c=T.from(r.attr(wc())).map(w=>w.split(",")).getOr([]),m=T.from(r.attr(Ec())).map(w=>w.split(",")).getOr([]);re(c,w=>r.attr(w,null));const v=null!==(a=null===(i=r.attr("class"))||void 0===i?void 0:i.split(" "))&&void 0!==a?a:[],x=Lt(v,[Cc()].concat(m));r.attr("class",x.length>0?x.join(" "):null),r.attr(Ec(),null),r.attr(wc(),null)};e.serializer.addTempAttr(xc()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)o(i).each(a=>{!1===a.persistent&&("span"===i.name?i.unwrap():s(i))})})})(e,t);const n=((e,t)=>{const n=zn({}),o=()=>({listeners:[],previous:Di()}),s=(x,w)=>{r(x,D=>(w(D),D))},r=(x,w)=>{const D=n.get(),A=w($t(D,x).getOrThunk(o));D[x]=A,n.set(D)},c=(x,w)=>{re($b(e,x),D=>{w?un(D,xc(),"true"):xn(D,xc())})},m=km(()=>{const x=Tn(t.getNames());re(x,w=>{r(w,D=>{const O=D.previous.get();return Lb(e,T.some(w)).fold(()=>{O.each(A=>{(x=>{s(x,w=>{re(w.listeners,D=>D(!1,x))})})(w),D.previous.clear(),c(A,!1)})},({uid:A,name:P,elements:F})=>{y(O,A)||(O.each(z=>c(z,!1)),((x,w,D)=>{s(x,O=>{re(O.listeners,A=>A(!0,x,{uid:w,nodes:pt(D,P=>P.dom)}))})})(P,A,F),D.previous.set(A),c(A,!0))}),{previous:D.previous,listeners:D.listeners}})})},30);return e.on("remove",()=>{m.cancel()}),e.on("NodeChange",()=>{m.throttle()}),{addListener:(x,w)=>{r(x,D=>({previous:D.previous,listeners:D.listeners.concat([w])}))}}})(e,t),o=Vo("span"),s=r=>{re(r,i=>{o(i)?Us(i):(e=>{ts(e,Cc()),xn(e,`${El()}`),xn(e,`${Sa()}`),xn(e,`${xc()}`);const t=Xo(e,`${wc()}`).map(o=>o.split(",")).getOr([]),n=Xo(e,`${Ec()}`).map(o=>o.split(",")).getOr([]);re(t,o=>xn(e,o)),((e,t)=>{re(t,n=>{ts(e,n)})})(e,n),xn(e,`${Ec()}`),xn(e,`${wc()}`)})(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(a=>{((e,t,n,o)=>{e.undoManager.transact(()=>{const s=e.selection,r=s.getRng(),i=Rl(e).length>0,a=Sc("mce-annotation");if(r.collapsed&&!i&&((e,t)=>{const n=Oa(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)})(e,r),s.getRng().collapsed&&!i){const c=Ny(e.getDoc(),a,o,t,n.decorate);h(c,Un),s.getRng().insertNode(c.dom),s.select(c.dom)}else my(s,!1,()=>{np(e,c=>{uD(e,c,a,t,n.decorate,o)})})})})(e,r,a,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{Lb(e,T.some(r)).each(({elements:i})=>{const a=e.selection.getBookmark();s(i),e.selection.moveToBookmark(a)})},removeAll:r=>{const i=e.selection.getBookmark();Nt(Ub(e,r),(a,c)=>{s(a)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=Ub(e,r);return bs(i,a=>pt(a,c=>c.dom))}}},Uc=e=>({getBookmark:Te(PR,e),moveToBookmark:Te(OR,e)});Uc.isBookmarkNode=is;const Ry=(e,t,n)=>!n.collapsed&&Kt(n.getClientRects(),o=>((e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)(o,e,t)),Dy=(e,t,n)=>{e.dispatch(t,n)},Py=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},Oy=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},My=(e,t)=>e.dispatch("SetContent",t),Iy=(e,t)=>e.dispatch("GetContent",t),By=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Ee={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ee.metaKeyPressed(e),metaKeyPressed:e=>gt.os.isMacOS()||gt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ma="data-mce-selected",Ly=Math.abs,md=Math.round,up={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Fy=(e,t)=>{const n=t.dom,o=t.getDoc(),s=document,r=t.getBody();let i,a,c,m,v,x,w,A,P,F,z,q,j,ae,be;const ye=he=>ve(he)&&(ob(he)||n.is(he,"figure.image")),Q=he=>dr(he)||n.hasClass(he,"mce-preview-object"),ce=he=>{const He=he.target;((he,He)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(he)){const rt=he.touches[0];return ye(he.target)&&!Ry(rt.clientX,rt.clientY,He)}return ye(he.target)&&!Ry(he.clientX,he.clientY,He)})(he,t.selection.getRng())&&!he.isDefaultPrevented()&&t.selection.select(He)},De=he=>n.hasClass(he,"mce-preview-object")&&ve(he.firstElementChild)?[he,he.firstElementChild]:n.is(he,"figure.image")?[he.querySelector("img")]:[he],Ie=he=>{const He=Av(t);return!(!He||"false"===he.getAttribute("data-mce-resize")||he===t.getBody())&&(n.hasClass(he,"mce-preview-object")&&ve(he.firstElementChild)?I(M_fromDom(he.firstElementChild),He):I(M_fromDom(he),He))},nt=(he,He,rt)=>{if(ve(rt)){const Tt=De(he);re(Tt,Ne=>{Ne.style[He]||!t.schema.isValid(Ne.nodeName.toLowerCase(),He)?n.setStyle(Ne,He,rt):n.setAttrib(Ne,He,""+rt)})}},wt=(he,He,rt)=>{nt(he,"width",He),nt(he,"height",rt)},Bt=he=>{let He,rt,Tt,Ne,ot;He=he.screenX-x,rt=he.screenY-w,q=He*m[2]+A,j=rt*m[3]+P,q=q<5?5:q,j=j<5?5:j,Tt=(ye(i)||Q(i))&&!1!==YN(t)?!Ee.modifierPressed(he):Ee.modifierPressed(he),Tt&&(Ly(He)>Ly(rt)?(j=md(q*F),q=md(j/F)):(q=md(j/F),j=md(q*F))),wt(a,q,j),Ne=m.startPos.x+He,ot=m.startPos.y+rt,Ne=Ne>0?Ne:0,ot=ot>0?ot:0,n.setStyles(c,{left:Ne,top:ot,display:"block"}),c.innerHTML=q+" &times; "+j,m[2]<0&&a.clientWidth<=q&&n.setStyle(a,"left",void 0+(A-q)),m[3]<0&&a.clientHeight<=j&&n.setStyle(a,"top",void 0+(P-j)),He=r.scrollWidth-ae,rt=r.scrollHeight-be,He+rt!==0&&n.setStyles(c,{left:Ne-He,top:ot-rt}),z||(((e,t,n,o,s)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:s})})(t,i,A,P,"corner-"+m.name),z=!0)},Xt=()=>{const he=z;z=!1,he&&(nt(i,"width",q),nt(i,"height",j)),n.unbind(o,"mousemove",Bt),n.unbind(o,"mouseup",Xt),s!==o&&(n.unbind(s,"mousemove",Bt),n.unbind(s,"mouseup",Xt)),n.remove(a),n.remove(c),n.remove(v),Kn(i),he&&(((e,t,n,o,s)=>{e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:s})})(t,i,q,j,"corner-"+m.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},Kn=he=>{ct();const He=n.getPos(he,r),rt=He.x,Tt=He.y,Ne=he.getBoundingClientRect(),ot=Ne.width||Ne.right-Ne.left,Dt=Ne.height||Ne.bottom-Ne.top;i!==he&&(me(),i=he,q=j=0);const Yt=t.dispatch("ObjectSelected",{target:he});Ie(he)&&!Yt.isDefaultPrevented()?Nt(up,(Pt,Pn)=>{let $o=n.get("mceResizeHandle"+Pn);$o&&n.remove($o),$o=n.add(r,"div",{id:"mceResizeHandle"+Pn,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Pn+"-resize; margin:0; padding:0"}),n.bind($o,"mousedown",Qs=>{Qs.stopImmediatePropagation(),Qs.preventDefault(),(Qs=>{const Wi=De(i)[0];x=Qs.screenX,w=Qs.screenY,A=Wi.clientWidth,P=Wi.clientHeight,F=P/A,m=Pt,m.name=Pn,m.startPos={x:ot*Pt[0]+rt,y:Dt*Pt[1]+Tt},ae=r.scrollWidth,be=r.scrollHeight,v=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(v,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=(he=>Q(he)?n.create("img",{src:gt.transparentSrc}):he.cloneNode(!0))(i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:rt,top:Tt,margin:0}),wt(a,ot,Dt),a.removeAttribute(Ma),r.appendChild(a),n.bind(o,"mousemove",Bt),n.bind(o,"mouseup",Xt),s!==o&&(n.bind(s,"mousemove",Bt),n.bind(s,"mouseup",Xt)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},A+" &times; "+P)})(Qs)}),Pt.elm=$o,n.setStyles($o,{left:ot*Pt[0]+rt-$o.offsetWidth/2,top:Dt*Pt[1]+Tt-$o.offsetHeight/2})}):me(!1)},wn=Yu(Kn,0),me=(he=!0)=>{wn.cancel(),ct(),i&&he&&i.removeAttribute(Ma),Nt(up,(He,rt)=>{const Tt=n.get("mceResizeHandle"+rt);Tt&&(n.unbind(Tt),n.remove(Tt))})},Pe=(he,He)=>n.isChildOf(he,He),ft=he=>{if(z||t.removed||t.composing)return;const He="mousedown"===he.type?he.target:e.getNode(),rt=qr(M_fromDom(He),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Ne=>Ne.dom).filter(Ne=>n.isEditable(Ne.parentElement)).getOrUndefined(),Tt=ve(rt)?n.getAttrib(rt,Ma,"1"):"1";if(re(n.select(`img[${Ma}],hr[${Ma}]`),Ne=>{Ne.removeAttribute(Ma)}),ve(rt)&&Pe(rt,r)&&t.hasFocus()){Oe();const Ne=e.getStart(!0);if(Pe(Ne,rt)&&Pe(e.getEnd(!0),rt))return n.setAttrib(rt,Ma,Tt),void wn.throttle(rt)}me()},ct=()=>{Nt(up,he=>{he.elm&&(n.unbind(he.elm),delete he.elm)})},Oe=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Oe(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ft),t.on("keyup compositionend",he=>{i&&"TABLE"===i.nodeName&&ft(he)}),t.on("hide blur",me),t.on("contextmenu longpress",ce,!0)}),t.on("remove",ct),{isResizable:Ie,showResizeRect:Kn,hideResizeRect:me,updateResizeRect:ft,destroy:()=>{wn.cancel(),i=a=v=null}}},$y=(e,t,n)=>{const o=e.document.createRange();return((e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,o)=>{e.setStart(n.dom,o)},n=>{e.setStartAfter(n.dom)})})(o,t),((e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,o)=>{e.setEnd(n.dom,o)},n=>{e.setEndAfter(n.dom)})})(o,n),o},dp=(e,t,n,o,s)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(o.dom,s),r},zc=fr_generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Uy=(e,t,n)=>t(M_fromDom(n.startContainer),n.startOffset,M_fromDom(n.endContainer),n.endOffset),zy_create=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),UD=document.caretPositionFromPoint?(e,t,n)=>{var o,s;return T.from(null===(s=(o=e.dom).caretPositionFromPoint)||void 0===s?void 0:s.call(o,t,n)).bind(r=>{if(null===r.offsetNode)return T.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),T.some(i)})}:document.caretRangeFromPoint?(e,t,n)=>{var o,s;return T.from(null===(s=(o=e.dom).caretRangeFromPoint)||void 0===s?void 0:s.call(o,t,n))}:T.none,fp=fr_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Kr={before:fp.before,on:fp.on,after:fp.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(rn,rn,rn)},pd=fr_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ol={domRange:pd.domRange,relative:pd.relative,exact:pd.exact,exactFromRange:e=>pd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:t=>M_fromDom(t.startContainer),relative:(t,n)=>Kr.getStart(t),exact:(t,n,o,s)=>t}))(e);return vt(t)},range:zy_create},gd=(e,t)=>{const n=Rt(e);return"input"===n?Kr.after(e):kt(["br","img"],n)?0===t?Kr.before(e):Kr.after(e):Kr.on(e,t)},eP=(e,t)=>{const n=e.fold(Kr.before,gd,Kr.after),o=t.fold(Kr.before,gd,Kr.after);return Ol.relative(n,o)},Hy=(e,t,n,o)=>{const s=gd(e,t),r=gd(n,o);return Ol.relative(s,r)},mp=(e,t)=>{const o=(t||document).createDocumentFragment();return re(e,s=>{o.appendChild(s.dom)}),M_fromDom(o)},nP=e=>{const t=Ol.getWin(e).dom,n=(s,r,i,a)=>dp(t,s,r,i,a),o=(e=>e.match({domRange:t=>{const n=M_fromDom(t.startContainer),o=M_fromDom(t.endContainer);return Hy(n,t.startOffset,o,t.endOffset)},relative:eP,exact:Hy}))(e);return((e,t)=>{const n=((e,t)=>t.match({domRange:n=>({ltr:Ce(n),rtl:T.none}),relative:(n,o)=>({ltr:Jo(()=>$y(e,n,o)),rtl:Jo(()=>T.some($y(e,o,n)))}),exact:(n,o,s,r)=>({ltr:Jo(()=>dp(e,n,o,s,r)),rtl:Jo(()=>T.some(dp(e,s,r,n,o)))})}))(e,t);return((e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(s=>!1===s.collapsed).map(s=>zc.rtl(M_fromDom(s.endContainer),s.endOffset,M_fromDom(s.startContainer),s.startOffset)).getOrThunk(()=>Uy(0,zc.ltr,n)):Uy(0,zc.ltr,n)})(0,n)})(t,o).match({ltr:n,rtl:n})},qy=(e,t,n)=>((e,t,n)=>((e,t,n)=>{const o=M_fromDom(e.document);return UD(o,t,n).map(s=>zy_create(M_fromDom(s.startContainer),s.startOffset,M_fromDom(s.endContainer),s.endOffset))})(e,t,n))(vt(M_fromDom(n)).dom,e,t).map(s=>{const r=n.createRange();return r.setStart(s.start.dom,s.soffset),r.setEnd(s.finish.dom,s.foffset),r}).getOrUndefined(),pp=(e,t)=>ve(e)&&ve(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Wy=(e,t,n)=>null!==((e,t,n)=>{let o=e;for(;o&&o!==t;){if(n(o))return o;o=o.parentNode}return null})(e,t,n),rP=(e,t,n)=>Wy(e,t,o=>o.nodeName===n),iP=(e,t)=>ss(e)&&!Wy(e,t,ks),jy=(e,t,n)=>{const o=t.parentNode;if(o){const s=new mn(t,e.getParent(o,e.isBlock)||e.getRoot());let r;for(;r=s[n?"prev":"next"]();)if(ln(r))return!0}return!1},gp=(e,t,n,o,s)=>{const r=e.getRoot(),i=e.schema.getNonEmptyElements(),a=s.parentNode;let c,m;if(!a)return T.none();const v=e.getParent(a,e.isBlock)||r;if(o&&ln(s)&&t&&e.isEmpty(v))return T.some(ee(a,e.nodeIndex(s)));const x=new mn(s,v);for(;m=x[o?"prev":"next"]();){if("false"===e.getContentEditableParent(m)||iP(m,r))return T.none();if(fe(m)&&m.data.length>0)return rP(m,r,"A")?T.none():T.some(ee(m,o?m.data.length:0));if(e.isBlock(m)||i[m.nodeName.toLowerCase()])return T.none();c=m}return Si(c)?T.none():n&&c?T.some(ee(c,0)):T.none()},Vy=(e,t,n,o)=>{const s=e.getRoot();let r,i=!1,a=n?o.startContainer:o.endContainer,c=n?o.startOffset:o.endOffset;const m=we(a)&&c===a.childNodes.length,v=e.schema.getNonEmptyElements();let x=n;if(ss(a))return T.none();if(we(a)&&c>a.childNodes.length-1&&(x=!1),fc(a)&&(a=s,c=0),a===s){if(x&&(r=a.childNodes[c>0?c-1:0],r&&(ss(r)||v[r.nodeName]||Gr(r))))return T.none();if(a.hasChildNodes()){if(c=Math.min(!x&&c>0?c-1:c,a.childNodes.length-1),a=a.childNodes[c],c=fe(a)&&m?a.data.length:0,!t&&a===s.lastChild&&Gr(a)||((e,t)=>{let n=t;for(;n&&n!==e;){if(Zt(n))return!0;n=n.parentNode}return!1})(s,a)||ss(a))return T.none();if(a.hasChildNodes()&&!Gr(a)){r=a;const w=new mn(a,s);do{if(Zt(r)||ss(r)){i=!1;break}if(fe(r)&&r.data.length>0){c=x?0:r.data.length,a=r,i=!0;break}if(v[r.nodeName.toLowerCase()]&&!V1(r)){c=e.nodeIndex(r),a=r.parentNode,x||c++,i=!0;break}}while(r=x?w.next():w.prev())}}}return t&&(fe(a)&&0===c&&gp(e,m,t,!0,a).each(w=>{a=w.container(),c=w.offset(),i=!0}),we(a)&&(r=a.childNodes[c],r||(r=a.childNodes[c-1]),r&&ln(r)&&!((e,t)=>{var n;return"A"===(null===(n=e.previousSibling)||void 0===n?void 0:n.nodeName)})(r)&&!jy(e,r,!1)&&!jy(e,r,!0)&&gp(e,m,t,!0,r).each(w=>{a=w.container(),c=w.offset(),i=!0}))),x&&!t&&fe(a)&&c===a.data.length&&gp(e,m,t,!1,a).each(w=>{a=w.container(),c=w.offset(),i=!0}),i&&a?T.some(ee(a,c)):T.none()},hd=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),s=ee.fromRangeStart(t);return Vy(e,n,!0,o).each(r=>{(!n||!ee.isAbove(s,r))&&o.setStart(r.container(),r.offset())}),n||Vy(e,n,!1,o).each(r=>{o.setEnd(r.container(),r.offset())}),n&&o.collapse(!0),pp(t,o)?T.none():T.some(o)},bd=(e,t)=>e.splitText(t),vd=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,s=e.endOffset;if(t===o&&fe(t)){if(n>0&&n<t.data.length)if(o=bd(t,n),t=o.previousSibling,s>n){s-=n;const r=bd(o,s).previousSibling;t=o=r,s=r.data.length,n=0}else s=0}else if(fe(t)&&n>0&&n<t.data.length&&(t=bd(t,n),n=0),fe(o)&&s>0&&s<o.data.length){const r=bd(o,s).previousSibling;o=r,s=r.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:s}},Ia=e=>({walk:(r,i)=>$c(e,r,i),split:vd,expand:(r,i={type:"word"})=>{if("word"===i.type){const a=Oa(e,r,[{inline:"span"}]),c=e.createRng();return c.setStart(a.startContainer,a.startOffset),c.setEnd(a.endContainer,a.endOffset),c}return r},normalize:r=>hd(e,r).fold(jt,i=>(r.setStart(i.startContainer,i.startOffset),r.setEnd(i.endContainer,i.endOffset),!0))});Ia.compareRanges=pp,Ia.getCaretRangeFromPoint=qy,Ia.getSelectedNode=Ku,Ia.getNode=Pi;const cP=((e,t)=>{const o=a=>{const c=(e=>{const t=e.dom;return xi(e)?t.getBoundingClientRect().height:t.offsetHeight})(a);if(c<=0||null===c){const m=Ss(a,e);return parseFloat(m)||0}return c},r=(a,c)=>nn(c,(m,v)=>{const x=Ss(a,v),w=void 0===x?0:parseInt(x,10);return isNaN(w)?m:m+w},0);return{set:(a,c)=>{if(!_t(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const m=a.dom;va(m)&&(m.style[e]=c+"px")},get:o,getOuter:o,aggregate:r,max:(a,c,m)=>{const v=r(a,m);return c>v?c-v:0}}})("height"),Zy=()=>M_fromDom(document),Gy=(e,t)=>e.view(t).fold(Ce([]),o=>{const s=e.owner(o),r=Gy(e,s);return[o].concat(r)});var fP=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?T.none():T.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(M_fromDom)},owner:e=>qe(e)});const hp=e=>"textarea"===Rt(e),Yy=(e,t)=>{const n=(e=>{const t=e.dom.ownerDocument,n=t.body,o=t.defaultView,s=t.documentElement;if(n===e.dom)return We(n.offsetLeft,n.offsetTop);const r=Xe(null==o?void 0:o.pageYOffset,s.scrollTop),i=Xe(null==o?void 0:o.pageXOffset,s.scrollLeft),a=Xe(s.clientTop,n.clientTop),c=Xe(s.clientLeft,n.clientLeft);return bt(e).translate(i-c,r-a)})(e),o=(e=>cP.get(e))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},Ky=(e,t,n,o)=>{CP(e,(s,r)=>yP(e,t,n,o),n)},Jy=(e,t,n,o,s)=>{const r={elm:o.element.dom,alignToTop:s};((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,r)||(n(e,t,yt(t).top,o,s),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,r))},yP=(e,t,n,o)=>{M_fromDom(e.getBody());const r=M_fromDom(e.getDoc()),i=((e,t)=>{const n=((e,t)=>{const n=Vt(e);if(0===n.length||hp(e))return{element:e,offset:t};if(t<n.length&&!hp(n[t]))return{element:n[t],offset:0};{const o=n[n.length-1];return hp(o)?{element:e,offset:t}:"img"===Rt(o)?{element:o,offset:1}:Bn(o)?{element:o,offset:Bu(o).length}:{element:o,offset:Vt(o).length}}})(e,t),o=M_fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return mo(n.element,o),Yy(o,()=>qt(o))})(M_fromDom(n.startContainer),n.startOffset);Jy(e,r,t,i,o),i.cleanup()},Qy=(e,t,n,o)=>{const s=M_fromDom(e.getDoc());Jy(e,s,n,(e=>Yy(M_fromDom(e),et))(t),o)},CP=(e,t,n)=>{const o=n.startContainer,s=n.startOffset,r=n.endContainer,i=n.endOffset;t(M_fromDom(o),M_fromDom(r));const a=e.dom.createRng();a.setStart(o,s),a.setEnd(r,i),e.selection.setRng(n)},bp=(e,t,n,o,s)=>{const r=t.pos;if(o)Wt(r.left,r.top,s);else{const i=r.top-n+t.height;Wt(-e.getBody().getBoundingClientRect().left,i,s)}},Xy=(e,t,n,o,s,r)=>{const i=o+n,a=s.pos.top,c=s.bottom,m=c-a>=o;a<n?bp(e,s,o,!1!==r,t):a>i?bp(e,s,o,m?!1!==r:!0===r,t):c>i&&!m&&bp(e,s,o,!0===r,t)},eC=(e,t,n,o,s)=>{const r=vt(t).dom.innerHeight;Xy(e,t,n,r,o,s)},tC=(e,t,n,o,s)=>{const r=vt(t).dom.innerHeight;Xy(e,t,n,r,o,s);const i=(e=>{const t=Zy(),n=yt(t),o=((e,t)=>{const n=t.owner(e);return Gy(t,n)})(e,fP),s=bt(e),r=Nr(o,(i,a)=>{const c=bt(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return We(r.left+s.left+n.left,r.top+s.top+n.top)})(o.element),a=Xn(window);i.top<a.y?An(o.element,!1!==s):i.top>a.bottom&&An(o.element,!0===s)},xP=(e,t,n)=>Ky(e,eC,t,n),EP=(e,t,n)=>Qy(e,t,eC,n),wP=(e,t,n)=>Ky(e,tC,t,n),SP=(e,t,n)=>Qy(e,t,tC,n),_P=(e,t,n)=>{(e.inline?EP:SP)(e,t,n)},Hc=(e,t,n)=>{(e.inline?xP:wP)(e,t,n)},nC=e=>e.dom.focus(),oC=e=>{const t=cr(e).dom;return e.dom===t.activeElement},vp=(e=Zy())=>T.from(e.dom.activeElement).map(M_fromDom),sC=(e,t)=>{const n=Bn(t)?Bu(t).length:Vt(t).length+1;return e>n?n:e<0?0:e},kP=e=>Ol.range(e.start,sC(e.soffset,e.start),e.finish,sC(e.foffset,e.finish)),rC=(e,t)=>!bl(t.dom)&&(_e(e,t)||ne(e,t)),iC=e=>t=>rC(e,t.start)&&rC(e,t.finish),AP=e=>Ol.range(M_fromDom(e.startContainer),e.startOffset,M_fromDom(e.endContainer),e.endOffset),OP=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),T.some(t)}catch{return T.none()}},yp=e=>{const t=(e=>e.inline||gt.browser.isFirefox())(e)?(e=>(e=>{const t=e.getSelection();return(t&&0!==t.rangeCount?T.from(t.getRangeAt(0)):T.none()).map(AP)})(vt(e).dom).filter(iC(e)))(M_fromDom(e.getBody())):T.none();e.bookmark=t.isSome()?t:e.bookmark},Cp=e=>(e.bookmark?e.bookmark:T.none()).bind(n=>((e,t)=>T.from(t).filter(iC(e)).map(kP))(M_fromDom(e.getBody()),n)).bind(OP),aC={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},ls={setEditorTimeout:(e,t,n)=>((e,t)=>(_t(t)||(t=0),setTimeout(e,t)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const o=((e,t)=>(_t(t)||(t=0),setInterval(e,t)))(()=>{e.removed?clearInterval(o):t()},n);return o}};let Ml;const xp=Ut.DOM,Ep=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},yd=(e,t)=>{const n=sA(e);return null!==xp.getParent(t,s=>(e=>we(e)&&aC.isEditorUIElement(e))(s)||!!n&&e.dom.is(s,n))},wp=e=>{try{const t=cr(M_fromDom(e.getElement()));return vp(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},qP=(e,t)=>{const n=t.editor;(e=>{const t=Yu(()=>{yp(e)},0);e.on("init",()=>{e.inline&&((e,t)=>{const n=()=>{t.throttle()};Ut.DOM.bind(document,"mouseup",n),e.on("remove",()=>{Ut.DOM.unbind(document,"mouseup",n)})})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{(e=>"nodechange"===e.type&&e.selectionChange)(n)||yp(e)})})(e,t)}),e.on("remove",()=>{t.cancel()})})(n);const o=(s,r)=>{$A(s)&&!0!==s.inline&&r(M_fromDom(s.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const s=e.focusedEditor;Ep(wp(n))&&o(n,Ls),s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{ls.setEditorTimeout(n,()=>{const s=e.focusedEditor;(!Ep(wp(n))||s!==n)&&o(n,ts),!yd(n,wp(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ml||(Ml=s=>{const r=e.activeEditor;r&&Tu(s).each(i=>{i.ownerDocument===document&&i!==document.body&&!yd(r,i)&&e.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},xp.bind(document,"focusin",Ml))},WP=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ml&&(xp.unbind(document,"focusin",Ml),Ml=null)},lC=(e,t)=>{((e,t)=>(e=>e.collapsed?T.from(Pi(e.startContainer,e.startOffset)).map(M_fromDom):T.none())(t).bind(n=>aT(n)?T.some(n):_e(e,n)?T.none():T.some(e)))(M_fromDom(e.getBody()),t).bind(n=>io(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Sp=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Ba=e=>e.inline?(e=>{const t=e.getBody();return t&&(e=>oC(e)||(e=>vp(cr(e)).filter(t=>e.dom.contains(t.dom)))(e).isSome())(M_fromDom(t))})(e):(e=>ve(e.iframeElement)&&oC(M_fromDom(e.iframeElement)))(e),_p=e=>e.editorManager.setActive(e),cC=(e,t,n,o,s)=>{const i=n?t.startOffset:t.endOffset;return T.from(n?t.startContainer:t.endContainer).map(M_fromDom).map(a=>o&&t.collapsed?a:Eo(a,s(a,i)).getOr(a)).bind(a=>on(a)?T.some(a):Je(a).filter(on)).map(a=>a.dom).getOr(e)},uC=(e,t,n=!1)=>cC(e,t,!0,n,(o,s)=>Math.min(uc(o),s)),dC=(e,t,n=!1)=>cC(e,t,!1,n,(o,s)=>s>0?s-1:s),fC=(e,t)=>{const n=e;for(;e&&fe(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Tp=(e,t)=>pt(t,n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),lO=["img","br"],mC=e=>(e=>rb(e).filter(t=>0!==t.trim().length||t.indexOf(Un)>-1).isSome())(e)||kt(lO,Rt(e))||(e=>Lr(e)&&"false"===dn(e,"contenteditable"))(e),pC="[data-mce-autocompleter]",fO=(e,t)=>{if(gC(M_fromDom(e.getBody())).isNone()){const n=M_fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());fn(n,M_fromDom(t.extractContents())),t.insertNode(n.dom),Je(n).each(o=>o.dom.normalize()),(e=>((e,t)=>{const n=o=>{const s=Vt(o);for(let r=s.length-1;r>=0;r--){const i=s[r];if(t(i))return T.some(i);const a=n(i);if(a.isSome())return a}return T.none()};return n(e)})(e,mC))(n).map(o=>{e.selection.setCursorLocation(o.dom,(e=>"img"===Rt(e)?1:rb(e).fold(()=>Vt(e).length,t=>t.length))(o))})}},gC=e=>ba(e,pC),gO={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Cd=(e,t,n)=>{const o=n?"lastChild":"firstChild",s=n?"prev":"next";if(e[o])return e[o];if(e!==t){let r=e[s];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[s],r)return r}},hO=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!Ni(n))return!1;const o=e.parent;return!(o&&("span"!==o.name||o.attr("style"))&&/^[ ]+$/.test(n))},hC=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class _o{static create(t,n){const o=new _o(t,gO[t]||1);return n&&Nt(n,(s,r)=>{o.attr(r,s)}),o}constructor(t,n){this.name=t,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!Fe(t))return ve(t)&&Nt(t,(r,i)=>{o.attr(i,r)}),o;const s=o.attributes;if(s){if(void 0!==n){if(null===n){if(t in s.map){delete s.map[t];let r=s.length;for(;r--;)if(s[r].name===t)return s.splice(r,1),o}return o}if(t in s.map){let r=s.length;for(;r--;)if(s[r].name===t){s[r].value=n;break}}else s.push({name:t,value:n});return s.map[t]=n,o}return s.map[t]}}clone(){const t=this,n=new _o(t.name,t.type),o=t.attributes;if(o){const s=[];s.map={};for(let r=0,i=o.length;r<i;r++){const a=o[r];"id"!==a.name&&(s[s.length]={name:a.name,value:a.value},s.map[a.name]=a.value)}n.attributes=s}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,s=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):s&&(s.next=o),n.lastChild===t?(n.lastChild=s,s&&(s.next=null)):o&&(o.prev=s),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const s=n.parent||this;return o?(n===s.firstChild?s.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===s.lastChild?s.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=s,t}getAll(t){const n=this,o=[];for(let s=n.firstChild;s;s=Cd(s,n))s.name===t&&o.push(s);return o}children(){const n=[];for(let o=this.firstChild;o;o=o.next)n.push(o);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let s=t.firstChild;s;s=Cd(s,t))n.push(s);let o=n.length;for(;o--;){const s=n[o];s.parent=s.firstChild=s.lastChild=s.next=s.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var s;const r=this;let i=r.firstChild;if(hC(r))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||hC(i))return!1}if(8===i.type||3===i.type&&!hO(i)||3===i.type&&i.parent&&n[i.parent.name]&&Ni(null!==(s=i.value)&&void 0!==s?s:"")||o&&o(i))return!1}while(i=Cd(i,r));return!0}walk(t){return Cd(this,null,t)}}const bC=e=>(0===e.length?"":`${pt(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',vC=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,null),yC=(e,t)=>null!==e.querySelector(bC(t)),CC=(e,t)=>{re(((e,t)=>e.querySelectorAll(bC(t)))(e,t),n=>{const o=M_fromDom(n);"all"===dn(o,"data-mce-bogus")?qt(o):re(t,s=>{Fr(o,s)&&xn(o,s)})})},xC=e=>e.cloneNode(!0),EC=(e,t)=>{let n=e;return(e=>null!==vC(e).nextNode())(e)?(n=xC(e),(e=>{const t=vC(e);let n=t.nextNode();for(;null!==n;){const o=t.currentNode;n=t.nextNode(),Fe(o.nodeValue)&&o.nodeValue.includes(Zn)&&qt(M_fromDom(o))}})(n),yC(n,t)&&CC(n,t)):yC(e,t)&&(n=xC(e),CC(n,t)),n},wC=e=>{const t=bn(e,"[data-mce-bogus]");re(t,n=>{"all"===dn(n,"data-mce-bogus")?qt(n):Ca(n)?(mo(n,M_fromText("\ufeff")),qt(n)):Us(n)})},SC=e=>{const t=bn(e,"input");re(t,n=>{xn(n,"name")})},EO=(e,t,n)=>{let o;return o="raw"===t.format?f.trim(Ws(EC(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?((e,t)=>{const n=e.getDoc(),o=cr(M_fromDom(e.getBody())),s=M_fromTag("div",n);un(s,"data-mce-bogus","all"),gl(s,{position:"fixed",left:"-9999999px",top:"0"}),h(s,t.innerHTML),wC(s),SC(s);const r=(e=>pl(e)?e:M_fromDom(qe(e).dom.body))(o);fn(r,s);const i=Ws(s.dom.innerText);return qt(s),i})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((e,t)=>{const n=ro(e),o=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(o,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!Fu(M_fromDom(n))&&Fe(o)?f.trim(o):o},_C=f.makeMap,TC=e=>{const t=[],n=(e=e||{}).indent,o=_C(e.indent_before||""),s=_C(e.indent_after||""),r=Ai.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="xhtml"!==e.element_format;return{start:(a,c,m)=>{if(n&&o[a]&&t.length>0){const v=t[t.length-1];v.length>0&&"\n"!==v&&t.push("\n")}if(t.push("<",a),c)for(let v=0,x=c.length;v<x;v++){const w=c[v];t.push(" ",w.name,'="',r(w.value,!0),'"')}if(t[t.length]=!m||i?">":" />",m&&n&&s[a]&&t.length>0){const v=t[t.length-1];v.length>0&&"\n"!==v&&t.push("\n")}},end:a=>{let c;t.push("</",a,">"),n&&s[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&"\n"!==c&&t.push("\n"))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("\x3c!--",a,"--\x3e")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push("\n")},doctype:a=>{t.push("<!DOCTYPE",a,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Bi=(e={},t=Ri())=>{const n=TC(e);return e.validate=!("validate"in e)||e.validate,{serialize:s=>{const r=e.validate,i={3:c=>{var m;n.text(null!==(m=c.value)&&void 0!==m?m:"",c.raw)},8:c=>{var m;n.comment(null!==(m=c.value)&&void 0!==m?m:"")},7:c=>{n.pi(c.name,c.value)},10:c=>{var m;n.doctype(null!==(m=c.value)&&void 0!==m?m:"")},4:c=>{var m;n.cdata(null!==(m=c.value)&&void 0!==m?m:"")},11:c=>{let m=c;if(m=m.firstChild)do{a(m)}while(m=m.next)}};n.reset();const a=c=>{var m;const v=i[c.type];if(v)v(c);else{const x=c.name,w=x in t.getVoidElements();let D=c.attributes;if(r&&D&&D.length>1){const O=[];O.map={};const A=t.getElementRule(c.name);if(A){for(let P=0,F=A.attributesOrder.length;P<F;P++){const z=A.attributesOrder[P];if(z in D.map){const q=D.map[z];O.map[z]=q,O.push({name:z,value:q})}}for(let P=0,F=D.length;P<F;P++){const z=D[P].name;if(!(z in O.map)){const q=D.map[z];O.map[z]=q,O.push({name:z,value:q})}}D=O}}if(n.start(x,D,w),!w){let O=c.firstChild;if(O){("pre"===x||"textarea"===x)&&3===O.type&&"\n"===(null===(m=O.value)||void 0===m?void 0:m[0])&&n.text("\n",!0);do{a(O)}while(O=O.next)}n.end(x)}}};return 1!==s.type||e.inner?3===s.type?i[3](s):i[11](s):a(s),n.getContent()}}},kC=new Set;re(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{kC.add(t)});const NC=["font","text-decoration","text-emphasis"],kp=(e,t)=>In(e.parseStyle(e.getAttrib(t,"style"))),kO=(e,t,n)=>{const o=kp(e,t),s=kp(e,n),r=i=>{var a,c;const m=null!==(a=e.getStyle(t,i))&&void 0!==a?a:"",v=null!==(c=e.getStyle(n,i))&&void 0!==c?c:"";return jo(m)&&jo(v)&&m!==v};return Kt(o,i=>{const a=c=>Kt(c,m=>m===i);if(!a(s)&&a(NC)){const c=(e=>Ve(e,t=>Kt(NC,n=>yn(t,n))))(s);return Kt(c,r)}return r(i)})},AC=(e,t,n)=>T.from(n.container()).filter(fe).exists(o=>{const s=e?0:-1;return t(o.data.charAt(n.offset()+s))}),Np=Te(AC,!0,Al),Ap=Te(AC,!1,Al),NO=e=>{const t=e.container();return fe(t)&&(0===t.data.length||$u(t.data)&&Uc.isBookmarkNode(t.parentNode))},Li=(e,t)=>n=>qm(e?0:-1,n).filter(t).isSome(),RC=e=>ob(e)&&"block"===Ss(M_fromDom(e),"display"),DC=e=>Zt(e)&&!(e=>we(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),AO=Li(!0,RC),RO=Li(!1,RC),qc=Li(!0,dr),Wc=Li(!1,dr),PC=Li(!0,Gr),OC=Li(!1,Gr),Fi=Li(!0,DC),$i=Li(!1,DC),MC=(e,t)=>((e,t,n)=>_e(t,e)?(e=>e.slice(0,-1))(Et(e,o=>n(o)||ne(o,t))):[])(e,t,jt),Jr=(e,t)=>[e].concat(MC(e,t)),Rp=(e,t,n)=>ny(e,t,n,NO),IC=(e,t)=>Jt(Jr(M_fromDom(t.container()),e),os),BC=(e,t,n)=>Rp(e,t.dom,n).forall(o=>IC(t,n).fold(()=>!mr(o,n,t.dom),s=>!mr(o,n,t.dom)&&_e(s,M_fromDom(o.container())))),LC=(e,t,n)=>IC(t,n).fold(()=>Rp(e,t.dom,n).forall(o=>!mr(o,n,t.dom)),o=>Rp(e,o.dom,n).isNone()),Dp=Te(LC,!1),FC=Te(LC,!0),OO=Te(BC,!1),MO=Te(BC,!0),IO=e=>od(e).exists(Ca),xd=(e,t,n)=>{const o=Ve(Jr(M_fromDom(n.container()),t),os),s=hn(o).getOr(t);return rs(e,s.dom,n).filter(IO)},Pp=(e,t)=>od(t).exists(Ca)||xd(!0,e,t).isSome(),Op=(e,t)=>(e=>T.from(e.getNode(!0)).map(M_fromDom))(t).exists(Ca)||xd(!1,e,t).isSome(),BO=Te(xd,!1),LO=Te(xd,!0),$C=e=>ee.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),UC=(e,t)=>{const n=Ve(Jr(M_fromDom(t.container()),e),os);return hn(n).getOr(e)},zC=(e,t)=>$C(t)?Ap(t):Ap(t)||Bo(UC(e,t).dom,t).exists(Ap),HC=(e,t)=>$C(t)?Np(t):Np(t)||So(UC(e,t).dom,t).exists(Np),Mp=e=>od(e).bind(t=>Hr(t,on)).exists(t=>(e=>kt(["pre","pre-wrap"],e))(Ss(t,"white-space"))),qC=(e,t)=>n=>(e=>ve(e)&&Zt(e)&&qv(e))(new mn(n,e)[t]()),WC=(e,t)=>!Mp(t)&&(((e,t)=>((e,t)=>Bo(e.dom,t).isNone())(e,t)||((e,t)=>So(e.dom,t).isNone())(e,t)||Dp(e,t)||FC(e,t)||Op(e,t)||Pp(e,t))(e,t)||zC(e,t)||HC(e,t)),jc=(e,t)=>!Mp(t)&&(Dp(e,t)||OO(e,t)||Op(e,t)||zC(e,t)||((e,t)=>{const n=Bo(e.dom,t).getOr(t),o=qC(e.dom,"prev");return t.isAtStart()&&(o(t.container())||o(n.container()))})(e,t)),Vc=(e,t)=>!Mp(t)&&(FC(e,t)||MO(e,t)||Pp(e,t)||HC(e,t)||((e,t)=>{const n=So(e.dom,t).getOr(t),o=qC(e.dom,"next");return t.isAtEnd()&&(o(t.container())||o(n.container()))})(e,t)),Ip=(e,t)=>jc(e,t)||Vc(e,(e=>{const t=e.container(),n=e.offset();return fe(t)&&n<t.data.length?ee(t,n+1):e})(t)),jC=(e,t)=>ad(e.charAt(t)),VC=(e,t)=>Al(e.charAt(t)),ZC=(e,t,n)=>{const o=t.data,s=ee(t,0);return n||!jC(o,0)||Ip(e,s)?!!(n&&VC(o,0)&&jc(e,s))&&(t.data=Un+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},GC=(e,t,n)=>{const o=t.data,s=ee(t,o.length-1);return n||!jC(o,o.length-1)||Ip(e,s)?!!(n&&VC(o,o.length-1)&&Vc(e,s))&&(t.data=o.slice(0,-1)+Un,!0):(t.data=o.slice(0,-1)+" ",!0)},YO=(e,t)=>{const n=t.container();if(!fe(n))return T.none();if((e=>{const t=e.container();return fe(t)&&Sn(t.data,Un)})(t)){const o=ZC(e,n,!1)||(e=>{const t=e.data,n=(e=>{const t=e.split("");return pt(t,(n,o)=>ad(n)&&o>0&&o<t.length-1&&Km(t[o-1])&&Km(t[o+1])?" ":n).join("")})(t);return n!==t&&(e.data=n,!0)})(n)||GC(e,n,!1);return B(o,t)}if(Ip(e,t)){const o=ZC(e,n,!0)||GC(e,n,!0);return B(o,t)}return T.none()},YC=(e,t,n)=>{if(0===n)return;const o=M_fromDom(e),s=Fs(o,os).getOr(o),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&Vc(s,ee(e,e.data.length)),a=0===t&&jc(s,ee(e,0));e.replaceData(t,n,mb(r,4,a,i))},Ed=(e,t)=>{const n=e.data.slice(t),o=n.length-ui(n).length;YC(e,t,o)},Bp=(e,t)=>{const n=e.data.slice(0,t),o=n.length-al(n).length;YC(e,t-o,o)},Lp=(e,t,n,o=!0)=>{const s=al(e.data).length,r=o?e:t,i=o?t:e;return o?r.appendData(i.data):r.insertData(0,i.data),qt(M_fromDom(i)),n&&Ed(r,s),r},QO=(e,t)=>((e,t)=>{const n=e.container(),o=e.offset();return!ee.isTextPosition(e)&&n===t.parentNode&&o>ee.before(t).offset()})(t,e)?ee(t.container(),t.offset()-1):t,KC=e=>_s(e.previousSibling)?T.some((e=>fe(e)?ee(e,e.data.length):ee.after(e))(e.previousSibling)):e.previousSibling?Ts(e.previousSibling):T.none(),JC=e=>_s(e.nextSibling)?T.some((e=>fe(e)?ee(e,0):ee.before(e))(e.nextSibling)):e.nextSibling?io(e.nextSibling):T.none(),iM=(e,t,n)=>((e,t,n)=>e?((e,t)=>JC(t).orThunk(()=>KC(t)).orThunk(()=>((e,t)=>So(e,ee.after(t)).orThunk(()=>Bo(e,ee.before(t))))(e,t)))(t,n):((e,t)=>KC(t).orThunk(()=>JC(t)).orThunk(()=>((e,t)=>T.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>Bo(e,ee.before(n))).orThunk(()=>So(e,ee.after(t))))(e,t)))(t,n))(e,t,n).map(Te(QO,n)),QC=(e,t,n)=>{n.fold(()=>{e.focus()},o=>{e.selection.setRng(o.toRange(),t)})},lM=(e,t)=>t&&Ge(e.schema.getBlockElements(),Rt(t)),cM=e=>{if(En(e)){const t=M_fromHtml('<br data-mce-bogus="1">');return Ei(e),fn(e,t),T.some(ee.before(t.dom))}return T.none()},La=(e,t,n,o=!0)=>{const s=iM(t,e.getBody(),n.dom),r=Fs(n,Te(lM,e),(e=>t=>t.dom===e)(e.getBody())),i=((e,t,n)=>{const o=Ft(e).filter(Bn),s=Nn(e).filter(Bn);return qt(e),((e,t,n,o)=>e.isSome()&&t.isSome()&&n.isSome()?T.some(o(e.getOrDie(),t.getOrDie(),n.getOrDie())):T.none())(o,s,t,(r,i,a)=>{const c=r.dom,m=i.dom,v=c.data.length;return Lp(c,m,n),a.container()===m?ee(c,v):a}).orThunk(()=>(n&&(o.each(r=>Bp(r.dom,r.dom.length)),s.each(r=>Ed(r.dom,0))),t))})(n,s,((e,t)=>Ge(e.schema.getTextInlineElements(),Rt(t)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(cM).fold(()=>{o&&QC(e,t,i)},a=>{o&&QC(e,t,T.some(a))})},fM=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Fa=(e,t)=>I(M_fromDom(t),GN(e))&&!xa(e.schema,t)&&e.dom.isEditable(t),XC=e=>{var t;return"rtl"===Ut.DOM.getStyle(e,"direction",!0)||(e=>fM.test(e))(null!==(t=e.textContent)&&void 0!==t?t:"")},Ui=(e,t,n)=>{const o=((e,t,n)=>Ve(Ut.DOM.getParents(n.container(),"*",t),e))(e,t,n);return T.from(o[o.length-1])},cs=(e,t)=>{const n=t.container(),o=t.offset();return e?ki(n)?fe(n.nextSibling)?ee(n.nextSibling,0):ee.after(n):im(t)?ee(n,o+1):t:ki(n)?fe(n.previousSibling)?ee(n.previousSibling,n.previousSibling.data.length):ee.before(n):am(t)?ee(n,o-1):t},e0=Te(cs,!0),t0=Te(cs,!1),n0=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Fp=e=>n0(e,"Delete"),CM=e=>ib(e)||mc(e),wd=(e,t)=>_e(e,t)?Hr(t,CM,(e=>t=>y(Je(t),e,ne))(e)):T.none(),$p=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},o0=(e,t,n)=>N(io(n),Ts(n),(o,s)=>{const r=cs(!0,o),i=cs(!1,s),a=cs(!1,t);return e?So(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):Bo(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),s0=e=>((e=>8===Mt(e)||"#comment"===Rt(e))(e)?Ft(e):cc(e)).bind(s0).orThunk(()=>T.some(e)),r0=(e,t,n,o=!0)=>{var s;t.deleteContents();const r=s0(n).getOr(n),i=M_fromDom(null!==(s=e.dom.getParent(r.dom,e.dom.isBlock))&&void 0!==s?s:n.dom);if(i.dom===e.getBody()?$p(e,o):En(i)&&(Ti(i),o&&e.selection.setCursorLocation(i.dom,0)),!ne(n,i)){const a=y(Je(i),n)?[]:(e=>Je(e).map(Vt).map(n=>Ve(n,o=>!ne(e,o))).getOr([]))(i);re(a.concat(Vt(n)),c=>{!ne(c,i)&&!_e(c,i)&&En(c)&&qt(c)})}},Up=e=>bn(e,"td,th"),zp=(e,t)=>({start:e,end:t}),Zc=fr_generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Sd=(e,t)=>qr(M_fromDom(e),"td,th",t),i0=e=>!ne(e.start,e.end),a0=(e,t)=>Lc(e.start,t).bind(n=>Lc(e.end,t).bind(o=>B(ne(n,o),n))),Hp=e=>t=>a0(t,e).map(n=>((e,t,n)=>({rng:e,table:t,cells:n}))(t,n,Up(n))),l0=(e,t,n,o)=>{if(n.collapsed||!e.forall(i0))return T.none();if(t.isSameTable){const s=e.bind(Hp(o));return T.some({start:s,end:s})}{const s=Sd(n.startContainer,o),r=Sd(n.endContainer,o),i=s.bind((e=>t=>Lc(t,e).bind(n=>ao(Up(n)).map(o=>zp(t,o))))(o)).bind(Hp(o)),a=r.bind((e=>t=>Lc(t,e).bind(n=>hn(Up(n)).map(o=>zp(o,t))))(o)).bind(Hp(o));return T.some({start:i,end:a})}},c0=(e,t)=>Ze(e,n=>ne(n,t)),qp=e=>N(c0(e.cells,e.rng.start),c0(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),u0=(e,t)=>{const{startTable:n,endTable:o}=t,s=e.cloneRange();return n.each(r=>s.setStartAfter(r.dom)),o.each(r=>s.setEndBefore(r.dom)),s},DM=(e,t)=>{const n=(e=>t=>ne(e,t))(e),o=((e,t)=>{const n=Sd(e.startContainer,t),o=Sd(e.endContainer,t);return N(n,o,zp)})(t,n),s=((e,t)=>{const n=m=>Lc(M_fromDom(m),t),o=n(e.startContainer),s=n(e.endContainer),r=o.isSome(),i=s.isSome(),a=N(o,s,ne).getOr(!1);return{startTable:o,endTable:s,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}})(t,n);return((e,t,n)=>e.exists(o=>((e,t)=>!i0(e)&&a0(e,t).exists(n=>{const o=n.dom.rows;return 1===o.length&&1===o[0].cells.length}))(o,n)&&ep(o.start,t)))(o,t,n)?o.map(r=>Zc.singleCellTable(t,r.start)):s.isMultiTable?((e,t,n,o)=>l0(e,t,n,o).bind(({start:s,end:r})=>{const i=s.bind(qp).getOr([]),a=r.bind(qp).getOr([]);if(i.length>0&&a.length>0){const c=u0(n,t);return T.some(Zc.multiTable(i,a,c))}return T.none()}))(o,s,t,n):((e,t,n,o)=>l0(e,t,n,o).bind(({start:s,end:r})=>s.or(r)).bind(s=>{const{isSameTable:r}=t,i=qp(s).getOr([]);if(r&&s.cells.length===i.length)return T.some(Zc.fullTable(s.table));if(i.length>0){if(r)return T.some(Zc.partialTable(i,T.none()));{const a=u0(n,t);return T.some(Zc.partialTable(i,T.some({...t,rng:a})))}}return T.none()}))(o,s,t,n)},d0=e=>re(e,t=>{xn(t,"contenteditable"),Ti(t)}),Wp=(e,t,n,o)=>{const s=n.cloneRange();o?(s.setStart(n.startContainer,n.startOffset),s.setEndAfter(t.dom.lastChild)):(s.setStartBefore(t.dom.firstChild),s.setEnd(n.endContainer,n.endOffset)),jp(e,s,t,!1).each(r=>r())},f0=e=>{const t=Rl(e),n=M_fromDom(e.selection.getNode());Iu(n.dom)&&En(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Kt(t,o=>ne(o,n))&&un(n,"data-mce-selected","1")},m0=(e,t,n)=>T.some(()=>{const o=e.selection.getRng(),s=n.bind(({rng:r,isStartInTable:i})=>{const a=((e,t)=>T.from(e.dom.getParent(t,e.dom.isBlock)).map(M_fromDom))(e,i?r.endContainer:r.startContainer);r.deleteContents(),((e,t,n)=>{n.each(o=>{t?qt(o):(Ti(o),e.selection.setCursorLocation(o.dom,0))})})(e,i,a.filter(En));const c=i?t[0]:t[t.length-1];return Wp(e,c,o,i),En(c)?T.none():T.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);d0(s),f0(e)}),MM=(e,t,n,o)=>T.some(()=>{const s=e.selection.getRng(),r=t[0],i=n[n.length-1];Wp(e,r,s,!0),Wp(e,i,s,!1);const a=En(r)?t:t.slice(1),c=En(i)?n:n.slice(0,-1);d0(a.concat(c)),o.deleteContents(),f0(e)}),jp=(e,t,n,o=!0)=>T.some(()=>{r0(e,t,n,o)}),IM=(e,t)=>T.some(()=>La(e,!1,t)),p0=(e,t)=>Jt(Jr(t,e),pc),Vp=(e,t)=>Jt(Jr(t,e),Vo("caption")),_d=(e,t)=>T.some(()=>{Ti(t),e.selection.setCursorLocation(t.dom,0)}),g0=(e,t)=>e?PC(t):OC(t),GM=(e,t,n)=>{const o=M_fromDom(e.getBody());return Vp(o,n).fold(()=>((e,t,n,o)=>{const s=ee.fromRangeStart(e.selection.getRng());return p0(n,o).bind(r=>En(r)?_d(e,r):((e,t,n,o,s)=>kl(n,e.getBody(),s).bind(r=>p0(t,M_fromDom(r.getNode())).bind(i=>ne(i,o)?T.none():T.some(et))))(e,n,t,r,s))})(e,t,o,n).orThunk(()=>B(((e,t)=>{const n=ee.fromRangeStart(e.selection.getRng());return g0(t,n)||rs(t,e.getBody(),n).exists(o=>g0(t,o))})(e,t),et)),s=>((e,t,n,o)=>{const s=ee.fromRangeStart(e.selection.getRng());return En(o)?_d(e,o):((e,t,n,o,s)=>kl(n,e.getBody(),s).fold(()=>T.some(et),r=>((e,t,n,o)=>io(e.dom).bind(s=>Ts(e.dom).map(r=>t?n.isEqual(s)&&o.isEqual(r):n.isEqual(r)&&o.isEqual(s))).getOr(!0))(o,n,s,r)?((e,t)=>_d(e,t))(e,o):((e,t,n)=>Vp(e,M_fromDom(n.getNode())).fold(()=>T.some(et),o=>B(!ne(o,t),et)))(t,o,r)))(e,n,t,o,s)})(e,t,o,s))},Zp=(e,t)=>{const n=M_fromDom(e.selection.getStart(!0)),o=Rl(e);return e.selection.isCollapsed()&&0===o.length?GM(e,t,n):((e,t,n)=>{const o=M_fromDom(e.getBody()),s=e.selection.getRng();return 0!==n.length?m0(e,n,T.none()):((e,t,n,o)=>Vp(t,o).fold(()=>((e,t,n)=>DM(t,n).bind(o=>o.fold(Te(jp,e),Te(IM,e),Te(m0,e),Te(MM,e))))(e,t,n),s=>((e,t)=>_d(e,t))(e,s)))(e,o,s,t)})(e,n,o)},$a=(e,t)=>{let n=t;for(;n&&n!==e;){if(qs(n)||Zt(n))return n;n=n.parentNode}return null},YM=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],KM=f.each,Gp=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=r=>Kt(YM,i=>yn(r,i))||n.has(r);return{compare:(r,i)=>{if(r.nodeName!==i.nodeName||r.nodeType!==i.nodeType)return!1;const a=m=>{const v={};return KM(t.getAttribs(m),x=>{const w=x.nodeName.toLowerCase();"style"!==w&&!s(w)&&(v[w]=t.getAttrib(m,w))}),v},c=(m,v)=>{for(const x in m)if(Ge(m,x)){const w=v[x];if(dt(w)||m[x]!==w)return!1;delete v[x]}for(const x in v)if(Ge(v,x))return!1;return!0};return!(we(r)&&we(i)&&(!c(a(r),a(i))||!c(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(i,"style"))))||is(r)||is(i))},isAttributeInternal:s}},h0=(e,t,n,o)=>{const s=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===s){const c=o.nodes[s];c?c.nodes.push(n):o.nodes[s]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const m=o.attributes[c];m?m.nodes.push(n):o.attributes[c]={filter:a,nodes:[n]}}}},b0=(e,t)=>{const n=(o,s)=>{Nt(o,r=>{const i=Jn(r.nodes);re(r.filter.callbacks,a=>{for(let c=i.length-1;c>=0;c--){const m=i[c];(!(s?void 0!==m.attr(r.filter.name):m.name===r.filter.name)||Gt(m.parent))&&i.splice(c,1)}i.length>0&&a(i,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},v0=(e,t,n,o={})=>{const s=((e,t,n)=>{const o={nodes:{},attributes:{}};return n.firstChild&&((e,t)=>{let n=e;for(;n=n.walk();)t(n)})(n,s=>{h0(e,t,s,o)}),o})(e,t,n);b0(s,o)},Yp=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new _o("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new _o("#text",3)).value=Un},y0=(e,t)=>{const n=null==e?void 0:e.firstChild;return ve(n)&&n===e.lastChild&&n.name===t},Gc=(e,t,n,o)=>o.isEmpty(t,n,s=>((e,t)=>{const n=e.getElementRule(t.name);return!0===(null==n?void 0:n.paddEmpty)})(e,s)),nI=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(t=n)}return T.from(t)},Kp=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const s of o)n&&!t.isValidChild(n.name,s.name)&&Kp(s,t,n);e.unwrap()}},Jp=(e,t,n,o=et)=>{const s=t.getTextBlockElements(),r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=f.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),c=new Set,m=v=>v!==n&&!a[v.name];for(let v=0;v<e.length;v++){const x=e[v];let w,D,O;if(!x.parent||c.has(x))continue;if(s[x.name]&&"li"===x.parent.name){let P=x.next;for(;P&&s[P.name];)P.name="li",c.add(P),x.parent.insert(P,x.parent),P=P.next;x.unwrap();continue}const A=[x];for(w=x.parent;w&&!t.isValidChild(w.name,x.name)&&m(w);w=w.parent)A.push(w);if(w&&A.length>1)if(t.isValidChild(w.name,x.name)){A.reverse(),D=A[0].clone(),o(D);let P=D;for(let F=0;F<A.length-1;F++){t.isValidChild(P.name,A[F].name)&&F>0?(O=A[F].clone(),o(O),P.append(O)):O=P;for(let z=A[F].firstChild;z&&z!==A[F+1];){const q=z.next;O.append(z),z=q}P=O}Gc(t,r,i,D)?w.insert(x,A[0],!0):(w.insert(D,A[0],!0),w.insert(x,D)),w=A[0],(Gc(t,r,i,w)||y0(w,"br"))&&w.empty().remove()}else Kp(x,t);else if(x.parent){if("li"===x.name){let P=x.prev;if(P&&("ul"===P.name||"ol"===P.name)){P.append(x);continue}if(P=x.next,P&&("ul"===P.name||"ol"===P.name)&&P.firstChild){P.insert(x,P.firstChild,!0);continue}const F=new _o("ul",1);o(F),x.wrap(F);continue}if(t.isValidChild(x.parent.name,"div")&&t.isValidChild("div",x.name)){const P=new _o("div",1);o(P),x.wrap(P)}else Kp(x,t)}}},C0=(e,t,n=t.parent)=>!(!n||!e.children[t.name]||e.isValidChild(n.name,t.name))||!(!n||"a"!==t.name||!((e,t)=>{let n=e;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n)),Qp=e=>e.collapsed?e:(e=>{const t=ee.fromRangeStart(e),n=ee.fromRangeEnd(e),o=e.commonAncestorContainer;return rs(!1,o,n).map(s=>!mr(t,n,o)&&mr(t,s,o)?((e,t,n,o)=>{const s=document.createRange();return s.setStart(e,t),s.setEnd(n,o),s})(t.container(),t.offset(),s.container(),s.offset()):e).getOr(e)})(e),uI=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((e,t)=>{const n=e.getNonEmptyElements();return ve(t)&&(t.isEmpty(n)||((e,t)=>e.getBlockElements()[t.name]&&(e=>ve(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===Un)(t.firstChild))(e,t))})(e,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)},bI=e=>e.length>0&&(e=>!e.firstChild||(e=>ve(null==e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&(e=>e.data===Un||ln(e))(e.firstChild))(e))(e[e.length-1])?e.slice(0,-1):e,Xp=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},x0=(e,t)=>{const n=ee.after(e),s=gr(t).prev(n);return s?s.toRange():null},SI=(e,t,n,o)=>{const s=((e,t,n)=>{const o=t.serialize(n);return(e=>{var t,n;const o=e.firstChild,s=e.lastChild;return o&&"META"===o.nodeName&&(null===(t=o.parentNode)||void 0===t||t.removeChild(o)),s&&"mce_marker"===s.id&&(null===(n=s.parentNode)||void 0===n||n.removeChild(s)),e})(e.createFragment(o))})(t,e,o),r=Xp(t,n.startContainer),i=bI((e=>{var t;return Ve(null!==(t=null==e?void 0:e.childNodes)&&void 0!==t?t:[],n=>"LI"===n.nodeName)})(s.firstChild)),m=t.getRoot(),v=x=>{const w=ee.fromRangeStart(n),D=gr(t.getRoot()),O=1===x?D.prev(w):D.next(w),A=null==O?void 0:O.getNode();return!A||Xp(t,A)!==r};return r?v(1)?((e,t,n)=>{const o=e.parentNode;return o&&f.each(t,s=>{o.insertBefore(s,e)}),((e,t)=>{const n=ee.before(e),s=gr(t).next(n);return s?s.toRange():null})(e,n)})(r,i,m):v(2)?((e,t,n,o)=>(o.insertAfter(t.reverse(),e),x0(t[0],n)))(r,i,m,t):((e,t,n,o)=>{const s=((e,t)=>{const n=t.cloneRange(),o=t.cloneRange();return n.setStartBefore(e),o.setEndAfter(e),[n.cloneContents(),o.cloneContents()]})(e,o),r=e.parentNode;return r&&(r.insertBefore(s[0],e),f.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(s[1],e),r.removeChild(e)),x0(t[t.length-1],n)})(r,i,m,n):null},_I=["pre"],eg=Iu,FI=(e,t,n)=>{var o,s;const r=e.selection,i=e.dom,a=e.parser,c=n.merge,m=Bi({validate:!0},e.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,v);let x=r.getRng();const w=x.startContainer,D=e.getBody();w===D&&r.isCollapsed()&&i.isBlock(D.firstChild)&&((e,t)=>ve(t)&&!e.schema.getVoidElements()[t.nodeName])(e,D.firstChild)&&i.isEmpty(D.firstChild)&&(x=i.createRng(),x.setStart(D.firstChild,0),x.setEnd(D.firstChild,0),r.setRng(x)),r.isCollapsed()||(e=>{const t=e.dom,n=Qp(e.selection.getRng());e.selection.setRng(n);const o=t.getParent(n.startContainer,eg);((e,t,n)=>!!ve(n)&&n===e.getParent(t.endContainer,eg)&&ep(M_fromDom(n),t))(t,n,o)?jp(e,n,M_fromDom(o)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&fe(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)})(e);const O=r.getNode(),A={context:O.nodeName.toLowerCase(),data:n.data,insert:!0},P=a.parse(t,A);if(!0===n.paste&&uI(e.schema,P)&&((e,t)=>!!Xp(e,t))(i,O))return x=SI(m,i,r.getRng(),P),x&&r.setRng(x),t;!0===n.paste&&((e,t,n,o)=>{var s;const r=t.firstChild,i=t.lastChild,c=r===("bookmark"===i.attr("data-mce-type")?i.prev:i),m=kt(_I,r.name);if(c&&m){const v="false"!==r.attr("contenteditable"),x=(null===(s=e.getParent(n,e.isBlock))||void 0===s?void 0:s.nodeName.toLowerCase())===r.name,w=T.from($a(o,n)).forall(qs);return v&&x&&w}return!1})(i,P,O,e.getBody())&&(null===(o=P.firstChild)||void 0===o||o.unwrap()),(e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(P);let F=P.lastChild;if(F&&"mce_marker"===F.attr("id")){const z=F;for(F=F.prev;F;F=F.walk(!0))if(3===F.type||!i.isBlock(F.name)){F.parent&&e.schema.isValidChild(F.parent.name,"span")&&F.parent.insert(z,F,"br"===F.name);break}}if(e._selectionOverrides.showBlockCaretContainer(O),A.invalid){e.selection.setContent(v);let q,z=r.getNode();const j=e.getBody();for(fc(z)?z=q=j:q=z;q&&q!==j;)z=q,q=q.parentNode;t=z===j?j.innerHTML:i.getOuterHTML(z);const ae=a.parse(t),be=(e=>{for(let t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return T.some(t);return T.none()})(ae),ye=be.bind(nI).getOr(ae);be.each(De=>De.replace(P));const Q=P.children(),K=null!==(s=P.parent)&&void 0!==s?s:ae;P.unwrap();const ce=Ve(Q,De=>C0(e.schema,De,K));Jp(ce,e.schema,ye),v0(a.getNodeFilters(),a.getAttributeFilters(),ae),t=m.serialize(ae),z===j?i.setHTML(j,t):i.setOuterHTML(z,t)}else t=m.serialize(P),((e,t,n)=>{var o;if("all"===n.getAttribute("data-mce-bogus"))null===(o=n.parentNode)||void 0===o||o.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild;!s||s===n.lastChild&&"BR"===s.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}})(e,t,O);return((e,t)=>{const n=e.schema.getTextInlineElements(),o=e.dom;if(t){const s=e.getBody(),r=Gp(e);f.each(o.select("*[data-mce-fragment]"),i=>{if(ve(n[i.nodeName.toLowerCase()])&&((e,t)=>hs(kp(e,t),n=>!(e=>kC.has(e))(n)))(o,i))for(let c=i.parentElement;ve(c)&&c!==s&&!kO(o,i,c);c=c.parentElement)if(r.compare(c,i)){o.remove(i,!0);break}})}})(e,c),((e,t)=>{var n,o,s;let r;const i=e.dom,a=e.selection;if(!t)return;a.scrollIntoView(t);const c=$a(e.getBody(),t);if(c&&"false"===i.getContentEditable(c))return i.remove(t),void a.select(c);let m=i.createRng();const v=t.previousSibling;if(fe(v)){m.setStart(v,null!==(o=null===(n=v.nodeValue)||void 0===n?void 0:n.length)&&void 0!==o?o:0);const D=t.nextSibling;fe(D)&&(v.appendData(D.data),null===(s=D.parentNode)||void 0===s||s.removeChild(D))}else m.setStartBefore(t),m.setEndBefore(t);const w=i.getParent(t,i.isBlock);if(i.remove(t),w&&i.isEmpty(w)){const D=eg(w);Ei(M_fromDom(w)),m.setStart(w,0),m.setEnd(w,0),D||(e=>!!e.getAttribute("data-mce-fragment"))(w)||!(r=(D=>{let O=ee.fromRangeStart(D);return O=gr(e.getBody()).next(O),null==O?void 0:O.toRange()})(m))?i.add(w,i.create("br",D?{}:{"data-mce-bogus":"1"})):(m=r,i.remove(w))}a.setRng(m)})(e,i.get("mce_marker")),(e=>{f.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})})(e.getBody()),((e,t)=>{T.from(e.getParent(t,"td,th")).map(M_fromDom).each(fT)})(i,r.getStart()),((e,t,n)=>{const s=Et(M_fromDom(n),r=>ne(r,M_fromDom(t)));Mn(s,s.length-2).filter(on).fold(()=>dm(e,t),r=>dm(e,r.dom))})(e.schema,e.getBody(),r.getStart()),t},Td=e=>e instanceof _o,tg=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),!0!==n&&(e=>{Ba(e)&&io(e.getBody()).each(t=>{const n=t.getNode(),o=Gr(n)?io(n).getOr(t):t;e.selection.setRng(o.toRange())})})(e)},WI=(e,t)=>((e,t)=>{const n=e.dom;return n.parentNode?((e,t)=>Jt(e.dom.childNodes,s=>t(M_fromDom(s))).map(M_fromDom))(M_fromDom(n.parentNode),o=>!ne(e,o)&&t(o)):T.none()})(e,t).isSome(),E0=e=>St(e)?e:jt,ng=(e,t,n)=>{const o=t(e),s=E0(n);return o.orThunk(()=>s(e)?T.none():((e,t,n)=>{let o=e.dom;const s=E0(n);for(;o.parentNode;){o=o.parentNode;const r=M_fromDom(o),i=t(r);if(i.isSome())return i;if(s(r))break}return T.none()})(e,t,s))},og=ip,w0=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let s=0;s<o.length;s++){const r=o[s];if(as(r)&&!1===r.inherit&&e.dom.is(t,r.selector))return!0}return!1},sg=(e,t,n,o,s)=>{const r=e.dom.getRoot();if(t===r)return!1;const i=e.dom.getParent(t,a=>!!w0(e,a,n)||a.parentNode===r||!!br(e,a,n,o,!0));return!!br(e,i,n,o,s)},kd=(e,t,n)=>!!(Dn(n)&&og(t,n.inline)||hr(n)&&og(t,n.block))||!!as(n)&&we(t)&&e.is(t,n.selector),S0=(e,t,n,o,s,r)=>{const i=n[o],a="attributes"===o;if(St(n.onmatch))return n.onmatch(t,n,o);if(i)if(nl(i)){for(let c=0;c<i.length;c++)if(a?e.getAttrib(t,i[c]):ud(e,t,i[c]))return!0}else for(const c in i)if(Ge(i,c)){const m=a?e.getAttrib(t,c):ud(e,t,c),v=Ii(i[c],r),x=Gt(m)||Os(m);if(x&&Gt(v))continue;if(s&&x&&!n.exact||(!s||n.exact)&&!og(m,ap(v,c)))return!1}return!0},br=(e,t,n,o,s)=>{const r=e.formatter.get(n),i=e.dom;if(r&&we(t))for(let a=0;a<r.length;a++){const c=r[a];if(kd(e.dom,t,c)&&S0(i,t,c,"attributes",s,o)&&S0(i,t,c,"styles",s,o)){const m=c.classes;if(m)for(let v=0;v<m.length;v++)if(!e.dom.hasClass(t,Ii(m[v],o)))return;return c}}},rg=(e,t,n,o,s)=>{if(o)return sg(e,o,t,n,s);if(o=e.selection.getNode(),sg(e,o,t,n,s))return!0;const r=e.selection.getStart();return!(r===o||!sg(e,r,t,n,s))},Il=Zn,_0=e=>(e=>{const t=[];let n=e;for(;n;){if(fe(n)&&n.data!==Il||n.childNodes.length>1)return[];we(n)&&t.push(n),n=n.firstChild}return t})(e).length>0,T0=e=>{if(e){const t=new mn(e,e);for(let n=t.current();n;n=t.next())if(fe(n))return n}return null},ig=e=>{const t=M_fromTag("span");return Ln(t,{id:Gm,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&fn(t,M_fromText(Il)),t},ag=(e,t,n=!0)=>{const o=e.dom,s=e.selection;if(_0(t))La(e,!1,M_fromDom(t),n);else{const r=s.getRng(),i=o.getParent(t,o.isBlock),a=r.startContainer,c=r.startOffset,m=r.endContainer,v=r.endOffset,x=(e=>{const t=T0(e);return t&&t.data.charAt(0)===Il&&t.deleteData(0,1),t})(t);o.remove(t,!0),a===x&&c>0&&r.setStart(x,c-1),m===x&&v>0&&r.setEnd(x,v-1),i&&o.isEmpty(i)&&Ti(M_fromDom(i)),s.setRng(r)}},lg=(e,t,n=!0)=>{const o=e.dom,s=e.selection;if(t)ag(e,t,n);else if(!(t=Da(e.getBody(),s.getStart())))for(;t=o.get(Gm);)ag(e,t,n)},k0=(e,t)=>(e.appendChild(t),t),N0=(e,t)=>{var n;const o=Nr(e,(r,i)=>k0(r,i.cloneNode(!1)),t),s=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return k0(o,s.createTextNode(Il))},nB=(e,t,n,o)=>{const s=e.dom,r=e.selection;let i=!1;const a=e.formatter.get(t);if(!a)return;const c=r.getRng(),m=c.startContainer,v=c.startOffset;let x=m;fe(m)&&(v!==m.data.length&&(i=!0),x=x.parentNode);const w=[];let D;for(;x;){if(br(e,x,t,n,o)){D=x;break}x.nextSibling&&(i=!0),w.push(x),x=x.parentNode}if(D)if(i){const O=r.getBookmark();c.collapse(!0);let A=Oa(s,c,a,!0);A=vd(A),e.formatter.remove(t,n,A,o),r.moveToBookmark(O)}else{const O=Da(e.getBody(),D),A=ig(!1).dom;((e,t,n)=>{var o,s;const r=e.dom,i=r.getParent(n,Te(sp,e.schema));i&&r.isEmpty(i)?null===(o=n.parentNode)||void 0===o||o.replaceChild(t,n):((e=>{const t=bn(e,"br"),n=Ve((e=>{const t=[];let n=e.dom;for(;n;)t.push(M_fromDom(n)),n=n.lastChild;return t})(e).slice(-1),Ca);t.length===n.length&&re(n,qt)})(M_fromDom(n)),r.isEmpty(n)?null===(s=n.parentNode)||void 0===s||s.replaceChild(t,n):r.insertAfter(t,n))})(e,A,null!=O?O:D);const P=((e,t,n,o,s,r)=>{const i=e.formatter,a=e.dom,c=Ve(In(i.get()),x=>x!==o&&!Sn(x,"removeformat")),m=((e,t,n)=>nn(n,(o,s)=>{const r=((e,t)=>lp(e,t,o=>{const s=r=>St(r)||r.length>1&&"%"===r.charAt(0);return Kt(["styles","attributes"],r=>$t(o,r).exists(i=>{const a=gn(i)?i:Rr(i);return Kt(a,s)}))}))(e,s);return e.formatter.matchNode(t,s,{},r)?o.concat([s]):o},[]))(e,n,c);if(Ve(m,x=>!((e,t,n)=>{const o=["inline","block","selector","attributes","styles","classes"],s=r=>Ds(r,(i,a)=>Kt(o,c=>c===a));return lp(e,t,r=>{const i=s(r);return lp(e,n,a=>{const c=s(a);return((e,t,n=tr)=>Qa(n).eq(e,t))(i,c)})})})(e,x,o)).length>0){const x=n.cloneNode(!1);return a.add(t,x),i.remove(o,s,x,r),a.remove(x),T.some(x)}return T.none()})(e,A,D,t,n,o),F=N0(w.concat(P.toArray()),A);O&&ag(e,O,!1),r.setCursorLocation(F,1),s.isEmpty(D)&&s.remove(D)}},A0=e=>{const t=ig(!1),n=N0(e,t.dom);return{caretContainer:t,caretPosition:ee(n,0)}},R0=(e,t)=>{const{caretContainer:n,caretPosition:o}=A0(t);return mo(M_fromDom(e),n),qt(M_fromDom(e)),o},D0=(e,t)=>{const n=e.schema.getTextInlineElements();return Ge(n,Rt(t))&&!ks(t.dom)&&!ya(t.dom)},P0=e=>ks(e.dom)&&_0(e.dom),Yc={},O0=Vn(["pre"]);((e,t)=>{Yc[e]||(Yc[e]=[]),Yc[e].push(e=>{const t=e.selection.getRng();if(!t.collapsed){const s=e.selection.getSelectedBlocks(),r=Ve(Ve(s,O0),(s=>r=>{const i=r.previousSibling;return O0(i)&&kt(s,i)})(s));re(r,i=>{((s,r)=>{const i=M_fromDom(r),a=qe(i).dom;qt(i),jr(M_fromDom(s),[M_fromTag("br",a),M_fromTag("br",a),...Vt(i)])})(i.previousSibling,i)})}})})("pre");const M0=["fontWeight","fontStyle","color","fontSize","fontFamily"],I0=(e,t)=>{const n=e.get(t);return gn(n)?(e=>Jt(e,t=>Dn(t)&&"span"===t.inline&&(e=>cn(e.styles)&&Kt(In(e.styles),t=>kt(M0,t)))(t)))(n):T.none()},B0=(e,t)=>Bo(t,ee.fromRangeStart(e)).isNone(),L0=(e,t)=>!1===So(t,ee.fromRangeEnd(e)).exists(n=>!ln(n.getNode())||So(t,n).isSome()),F0=e=>t=>Z1(t)&&e.isEditable(t),$0=e=>Ve(e.getSelectedBlocks(),F0(e.dom)),cg=f.each,ug=e=>we(e)&&!is(e)&&!ks(e)&&!ya(e),U0=(e,t)=>{for(let n=e;n;n=n[t]){if(fe(n)&&jo(n.data))return e;if(we(n)&&!is(n))return n}return e},z0=(e,t,n)=>{const o=Gp(e),s=we(t)&&Pa(t),r=we(n)&&Pa(n);if(s&&r){const i=U0(t,"previousSibling"),a=U0(n,"nextSibling");if(o.compare(i,a)){for(let c=i.nextSibling;c&&c!==a;){const m=c;c=c.nextSibling,i.appendChild(m)}return e.dom.remove(a),f.each(f.grep(a.childNodes),c=>{i.appendChild(c)}),i}}return n},H0=(e,t,n,o)=>{var s;if(o&&!1!==t.merge_siblings){const r=null!==(s=z0(e,gy(o),o))&&void 0!==s?s:o;z0(e,r,gy(r,!0))}},dg=(e,t,n)=>{cg(e.childNodes,o=>{ug(o)&&(t(o)&&n(o),o.hasChildNodes()&&dg(o,t,n))})},q0=(e,t)=>n=>!(!n||!ud(e,n,t)),W0=(e,t,n)=>o=>{e.setStyle(o,t,n),""===o.getAttribute("style")&&o.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,o)},Ua=fr_generate([{keep:[]},{rename:["name"]},{removed:[]}]),gB=/^(src|href|style)$/,fg=f.each,Nd=ip,j0=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),V0=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],s=t[n?"startOffset":"endOffset"];if(we(o)){const r=o.childNodes.length-1;!n&&s&&s--,o=o.childNodes[s>r?r:s]}return fe(o)&&n&&s>=o.data.length&&(o=new mn(o,e.getBody()).next()||o),fe(o)&&!n&&0===s&&(o=new mn(o,e.getBody()).prev()||o),o},Z0=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&o?"TR"===e.nodeName&&o[n]||o:e},mg=(e,t,n,o)=>{var s;const r=e.create(n,o);return null===(s=t.parentNode)||void 0===s||s.insertBefore(r,t),r.appendChild(t),r},G0=(e,t,n,o,s)=>{const r=M_fromDom(t),i=M_fromDom(e.create(o,s)),a=n?fo(r):Fn(r);return jr(i,a),n?(mo(r,i),Ou(i,r)):($s(r,i),fn(i,r)),i.dom},Y0=(e,t,n)=>{const o=t.parentNode;let s;const r=e.dom,i=ro(e);hr(n)&&o===r.getRoot()&&(!n.list_block||!Nd(t,n.list_block))&&re(Jn(t.childNodes),a=>{Dl(e,i,a.nodeName.toLowerCase())?s?s.appendChild(a):(s=mg(r,a,i),r.setAttribs(s,Ac(e))):s=null}),(!(e=>as(e)&&Dn(e)&&y($t(e,"mixed"),!0))(n)||Nd(n.inline,t))&&r.remove(t,!0)},K0=(e,t,n)=>_t(e)?{name:t,value:null}:{name:e,value:Ii(t,n)},J0=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Q0=(e,t,n,o,s)=>{let r=!1;fg(n.styles,(i,a)=>{const{name:c,value:m}=K0(a,i,o),v=ap(m,c);(n.remove_similar||C(m)||!we(s)||Nd(ud(e,s,c),v))&&e.setStyle(t,c,""),r=!0}),r&&J0(e,t)},X0=(e,t,n,o,s)=>{const r=e.dom,i=Gp(e),a=e.schema;if(Dn(t)&&mm(a,t.inline)&&xa(a,o)&&o.parentElement===e.getBody())return Y0(e,o,t),Ua.removed();if(!t.ceFalseOverride&&o&&"false"===r.getContentEditableParent(o)||o&&!kd(r,o,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(o,t))return Ua.keep();const c=o,m=t.preserve_attributes;if(Dn(t)&&"all"===t.remove&&gn(m)){const v=Ve(r.getAttribs(c),x=>kt(m,x.name.toLowerCase()));if(r.removeAllAttribs(c),re(v,x=>r.setAttrib(c,x.name,x.value)),v.length>0)return Ua.rename("span")}if("all"!==t.remove){Q0(r,c,t,n,s),fg(t.attributes,(x,w)=>{const{name:D,value:O}=K0(w,x,n);if(t.remove_similar||C(O)||!we(s)||Nd(r.getAttrib(s,D),O)){if("class"===D){const A=r.getAttrib(c,D);if(A){let P="";if(re(A.split(/\s+/),F=>{/mce\-\w+/.test(F)&&(P+=(P?" ":"")+F)}),P)return void r.setAttrib(c,D,P)}}if(gB.test(D)&&c.removeAttribute("data-mce-"+D),"style"===D&&Vn(["li"])(c)&&"none"===r.getStyle(c,"list-style-type"))return c.removeAttribute(D),void r.setStyle(c,"list-style-type","none");"class"===D&&c.removeAttribute("className"),c.removeAttribute(D)}}),fg(t.classes,x=>{x=Ii(x,n),(!we(s)||r.hasClass(s,x))&&r.removeClass(c,x)});const v=r.getAttribs(c);for(let x=0;x<v.length;x++)if(!i.isAttributeInternal(v[x].nodeName))return Ua.keep()}return"none"!==t.remove?(Y0(e,c,t),Ua.removed()):Ua.keep()},CB=(e,t,n,o)=>X0(e,t,n,o,o).fold(Ce(o),s=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,s)),Ce(null)),ex=(e,t,n,o,s)=>{(o||e.selection.isEditable())&&((e,t,n,o,s)=>{const r=e.formatter.get(t),i=r[0],a=e.dom,c=e.selection,m=A=>{const P=((e,t,n,o,s)=>{let r;return t.parentNode&&re(dd(e.dom,t.parentNode).reverse(),i=>{if(!r&&we(i)&&"_start"!==i.id&&"_end"!==i.id){const a=br(e,i,n,o,s);a&&!1!==a.split&&(r=i)}}),r})(e,A,t,n,s);return((e,t,n,o,s,r,i,a)=>{var c,m;let v,x;const w=e.dom;if(n){const D=n.parentNode;for(let O=o.parentNode;O&&O!==D;O=O.parentNode){let A=w.clone(O,!1);for(let P=0;P<t.length&&(A=CB(e,t[P],a,A),null!==A);P++);A&&(v&&A.appendChild(v),x||(x=A),v=A)}(!i.mixed||!w.isBlock(n))&&(o=null!==(c=w.split(n,o))&&void 0!==c?c:o),v&&x&&(null===(m=s.parentNode)||void 0===m||m.insertBefore(v,s),x.appendChild(s),Dn(i)&&H0(e,i,0,v))}return o})(e,r,P,A,A,0,i,n)},x=A=>Kt(r,P=>Kc(e,P,n,A,A)),w=A=>{const P=Jn(A.childNodes),z=x(A)||Kt(r,ae=>kd(a,A,ae)),q=A.parentNode;if(!z&&ve(q)&&cp(i)&&x(q),i.deep&&P.length)for(let ae=0;ae<P.length;ae++)w(P[ae]);re(["underline","line-through","overline"],ae=>{we(A)&&e.dom.getStyle(A,"text-decoration")===ae&&A.parentNode&&by(a,A.parentNode)===ae&&Kc(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ae}},void 0,A)})},D=A=>{const P=a.get(A?"_start":"_end");if(P){let F=P[A?"firstChild":"lastChild"];return(A=>is(A)&&we(A)&&("_start"===A.id||"_end"===A.id))(F)&&(F=F[A?"firstChild":"lastChild"]),fe(F)&&0===F.data.length&&(F=A?P.previousSibling||P.nextSibling:P.nextSibling||P.previousSibling),a.remove(P,!0),F}return null},O=A=>{let P,F,z=Oa(a,A,r,A.collapsed);if(i.split){if(z=vd(z),P=V0(e,z,!0),F=V0(e,z),P!==F){if(P=Z0(P,!0),F=Z0(F,!1),j0(a,P,F)){const j=T.from(P.firstChild).getOr(P);return m(G0(a,j,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void D(!0)}if(j0(a,F,P)){const j=T.from(F.lastChild).getOr(F);return m(G0(a,j,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void D(!1)}P=mg(a,P,"span",{id:"_start","data-mce-type":"bookmark"}),F=mg(a,F,"span",{id:"_end","data-mce-type":"bookmark"});const q=a.createRng();q.setStartAfter(P),q.setEndBefore(F),$c(a,q,j=>{re(j,ae=>{!is(ae)&&!is(ae.parentNode)&&m(ae)})}),m(P),m(F),P=D(!0),F=D()}else P=F=m(P);z.startContainer=P.parentNode?P.parentNode:P,z.startOffset=a.nodeIndex(P),z.endContainer=F.parentNode?F.parentNode:F,z.endOffset=a.nodeIndex(F)+1}$c(a,z,q=>{re(q,w)})};if(o){if(Fc(o)){const A=a.createRng();A.setStartBefore(o),A.setEndAfter(o),O(A)}else O(o);Oy(e,t,o,n)}else c.isCollapsed()&&Dn(i)&&!Rl(e).length?nB(e,t,n,s):(py(e,()=>np(e,O),A=>Dn(i)&&rg(e,t,n,A)),e.nodeChanged()),((e,t,n)=>{"removeformat"===t?re($0(e.selection),o=>{re(M0,s=>e.dom.setStyle(o,s,"")),J0(e.dom,o)}):I0(e.formatter,t).each(o=>{re($0(e.selection),s=>Q0(e.dom,s,o,n,null))})})(e,t,n),Oy(e,t,o,n)})(e,t,n,o,s)},Kc=(e,t,n,o,s)=>X0(e,t,n,o,s).fold(jt,r=>(e.dom.rename(o,r),!0),an),tx=f.each,Ad=f.each,nx=(e,t,n,o)=>{if(Ad(n.styles,(s,r)=>{e.setStyle(t,r,Ii(s,o))}),n.styles){const s=e.getAttrib(t,"style");s&&e.setAttrib(t,"data-mce-style",s)}},AB=(e,t,n,o)=>{const s=e.formatter.get(t),r=s[0],i=!o&&e.selection.isCollapsed(),a=e.dom,c=e.selection,m=(O,A=r)=>{St(A.onformat)&&A.onformat(O,A,n,o),nx(a,O,A,n),Ad(A.attributes,(P,F)=>{a.setAttrib(O,F,Ii(P,n))}),Ad(A.classes,P=>{const F=Ii(P,n);a.hasClass(O,F)||a.addClass(O,F)})},v=(O,A)=>{let P=!1;return Ad(O,F=>!(!as(F)||!("false"===a.getContentEditable(A)&&!F.ceFalseOverride||ve(F.collapsed)&&F.collapsed!==i)&&a.is(A,F.selector)&&!ks(A)&&(m(A,F),P=!0,1))),P},w=(O,A,P)=>{const F=[];let z=!0;const q=r.inline||r.block,j=(O=>{if(Fe(O)){const A=a.create(O);return m(A),A}return null})(q);$c(O,A,Q=>{let K;const ce=De=>{let Ie=!1,Ke=z,nt=!1;const wt=De.parentNode,Bt=wt.nodeName.toLowerCase(),Xt=O.getContentEditable(De);ve(Xt)&&(Ke=z,z="true"===Xt,Ie=!0,nt=hy(e,De));const Kn=z&&!Ie;if(ln(De)&&!((e,t,n,o)=>{if(nA(e)&&Dn(t)&&n.parentNode){const s=Ab(e.schema),r=WI(M_fromDom(n),i=>ks(i.dom));return Ao(s,o)&&En(M_fromDom(n.parentNode),!1)&&!r}return!1})(e,r,De,Bt))return K=null,void(hr(r)&&O.remove(De));if((Q=>(e=>hr(e)&&!0===e.wrapper)(r)&&br(e,Q,t,n))(De))K=null;else{if(((Q,K,ce)=>{const De=(e=>hr(e)&&!0!==e.wrapper)(r)&&sp(e.schema,Q)&&Dl(e,K,q);return ce&&De})(De,Bt,Kn)){const wn=O.rename(De,q);return m(wn),F.push(wn),void(K=null)}if(as(r)){let wn=v(s,De);if(!wn&&ve(wt)&&cp(r)&&(wn=v(s,wt)),!Dn(r)||wn)return void(K=null)}ve(j)&&((Q,K,ce,De)=>{const Ie=Q.nodeName.toLowerCase(),Ke=Dl(e,q,Ie)&&Dl(e,K,q),nt=!P&&fe(Q)&&$u(Q.data),wt=ks(Q),Bt=!Dn(r)||!O.isBlock(Q);return(ce||De)&&Ke&&!nt&&!wt&&Bt})(De,Bt,Kn,nt)?(K||(K=O.clone(j,!1),wt.insertBefore(K,De),F.push(K)),nt&&Ie&&(z=Ke),K.appendChild(De)):(K=null,re(Jn(De.childNodes),ce),Ie&&(z=Ke),K=null)}};re(Q,ce)}),!0===r.links&&re(F,Q=>{const K=ce=>{"A"===ce.nodeName&&m(ce,r),re(Jn(ce.childNodes),K)};K(Q)}),re(F,Q=>{const De=(Ie=>{let Ke=0;return re(Ie.childNodes,nt=>{!(e=>ve(e)&&fe(e)&&0===e.length)(nt)&&!is(nt)&&Ke++}),Ke})(Q);var Ie;!(F.length>1)&&O.isBlock(Q)||0!==De?(Dn(r)||hr(r)&&r.wrapper)&&(!r.exact&&1===De&&(Q=Jt((Ie=Q).childNodes,op).filter(nt=>"false"!==O.getContentEditable(nt)&&kd(O,nt,r)).map(nt=>{const wt=O.clone(nt,!1);return m(wt),O.replace(wt,Ie,!0),O.remove(nt,!0),wt}).getOr(Ie)),((e,t,n,o)=>{tx(t,s=>{Dn(s)&&tx(e.dom.select(s.inline,o),r=>{ug(r)&&Kc(e,s,n,r,s.exact?r:null)}),((e,t,n)=>{t.clear_child_styles&&cg(e.select(t.links?"*:not(a)":"*",n),s=>{ug(s)&&Pa(s)&&cg(t.styles,(r,i)=>{e.setStyle(s,i,"")})})})(e.dom,s,o)})})(e,s,n,Q),((e,t,n,o,s)=>{const r=s.parentNode;br(e,r,n,o)&&Kc(e,t,o,s)||t.merge_with_parents&&r&&e.dom.getParent(r,i=>!!br(e,i,n,o)&&(Kc(e,t,o,s),!0))})(e,r,t,n,Q),((e,t,n,o)=>{if(t.styles&&t.styles.backgroundColor){const s=q0(e,"fontSize");dg(o,r=>s(r)&&Pa(r),W0(e,"backgroundColor",Ii(t.styles.backgroundColor,n)))}})(O,r,n,Q),((e,t,n,o)=>{const s=r=>{if(we(r)&&we(r.parentNode)&&Pa(r)){const i=by(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(f.walk(o,s,"childNodes"),s(o))})(O,r,0,Q),((e,t,n,o)=>{if(Dn(t)&&("sub"===t.inline||"sup"===t.inline)){const s=q0(e,"fontSize");dg(o,i=>s(i)&&Pa(i),W0(e,"fontSize",""));const r=Ve(e.select("sup"===t.inline?"sub":"sup",o),Pa);e.remove(r,!0)}})(O,r,0,Q),H0(e,r,0,Q)):O.remove(Q,!0)})},D=Fc(o)?o:c.getNode();if("false"===a.getContentEditable(D)&&!hy(e,D))return v(s,o=D),void Py(e,t,o,n);if(r){if(o)if(Fc(o)){if(!v(s,o)){const O=a.createRng();O.setStartBefore(o),O.setEndAfter(o),w(a,Oa(a,O,s),!0)}}else w(a,o,!0);else i&&Dn(r)&&!Rl(e).length?((e,t,n)=>{let o;const s=e.selection,r=e.formatter.get(t);if(!r)return;const i=s.getRng();let a=i.startOffset;const m=i.startContainer.nodeValue;o=Da(e.getBody(),s.getStart());const v=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(m&&a>0&&a<m.length&&v.test(m.charAt(a))&&v.test(m.charAt(a-1))){const x=s.getBookmark();i.collapse(!0);let w=Oa(e.dom,i,r);w=vd(w),e.formatter.apply(t,n,w),s.moveToBookmark(x)}else{let x=o?T0(o):null;(!o||(null==x?void 0:x.data)!==Il)&&(o=((e,t)=>e.importNode(t,!0))(e.getDoc(),ig(!0).dom),x=o.firstChild,i.insertNode(o),a=1),e.formatter.apply(t,n,o),s.setCursorLocation(x,a)}})(e,t,n):(c.setRng(Qp(c.getRng())),py(e,()=>{np(e,(O,A)=>{const P=A?O:Oa(a,O,s);w(a,P,!1)})},an),e.nodeChanged()),I0(e.formatter,t).each(O=>{re((e=>Ve((e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return B0(n,t[0])&&L0(n,t[0])?t:[];{const o=hn(t).filter(i=>B0(n,i)).toArray(),s=ao(t).filter(i=>L0(n,i)).toArray(),r=t.slice(1,-1);return o.concat(r).concat(s)}})(e),F0(e.dom)))(e.selection),A=>nx(a,A,O,n))});((e,t)=>{Ge(Yc,e)&&re(Yc[e],n=>{n(t)})})(t,e)}Py(e,t,o,n)},ox=(e,t,n,o)=>{(o||e.selection.isEditable())&&AB(e,t,n,o)},sx=e=>Ge(e,"vars"),rx=e=>e.selection.getStart(),ix=(e,t,n,o,s)=>Ko(t,a=>{const c=e.formatter.matchNode(a,n,null!=s?s:{},o);return!dt(c)},a=>!!w0(e,a,n)||!o&&ve(e.formatter.matchNode(a,n,s,!0))),ax=(e,t)=>{const n=null!=t?t:rx(e);return Ve(dd(e.dom,n),o=>we(o)&&!ya(o))},lx=(e,t,n)=>{const o=ax(e,t);Nt(n,(s,r)=>{const i=a=>{const c=ix(e,o,r,a.similar,sx(a)?a.vars:void 0),m=c.isSome();if(a.state.get()!==m){a.state.set(m);const v=c.getOr(t);sx(a)?a.callback(m,{node:v,format:r,parents:o}):re(a.callbacks,x=>x(m,{node:v,format:r,parents:o}))}};re([s.withSimilar,s.withoutSimilar],i),re(s.withVars,i)})},cx=f.explode,ux=()=>{const e={};return{addFilter:(s,r)=>{re(cx(s),i=>{Ge(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>Rr(e),removeFilter:(s,r)=>{re(cx(s),i=>{if(Ge(e,i))if(ve(r)){const a=e[i],c=Ve(a.callbacks,m=>m!==r);c.length>0?a.callbacks=c:delete e[i]}else delete e[i]})}}},FB=(e,t,n)=>{var o;const s=xm();t.convert_fonts_to_spans&&((e,t,n)=>{e.addNodeFilter("font",o=>{re(o,s=>{const r=t.parse(s.attr("style")),i=s.attr("color"),a=s.attr("face"),c=s.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&Ms(c).each(m=>{r["font-size"]=n[m-1]}),s.name="span",s.attr("style",t.serialize(r)),((e,t)=>{re(["color","face","size"],n=>{e.attr(n,null)})})(s)})})})(e,s,f.explode(null!==(o=t.font_size_legacy_values)&&void 0!==o?o:"")),((e,t,n)=>{e.addNodeFilter("strike",o=>{const s="html4"!==t.type;re(o,r=>{if(s)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})})(e,n,s)},dx=(e,t,n)=>{t.addNodeFilter("br",(o,s,r)=>{const i=f.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();i.body=1;const m=v=>v.name in i||gm(n,v);for(let v=0,x=o.length;v<x;v++){let w=o[v],D=w.parent;if(D&&m(D)&&w===D.lastChild){let O=w.prev;for(;O;){const A=O.name;if("span"!==A||"bookmark"!==O.attr("data-mce-type")){"br"===A&&(w=null);break}O=O.prev}if(w&&(w.remove(),Gc(n,a,c,D))){const A=n.getElementRule(D.name);A&&(A.removeEmpty?D.remove():A.paddEmpty&&Yp(e,r,m,D))}}else{let O=w;for(;D&&D.firstChild===O&&D.lastChild===O&&(O=D,!i[D.name]);)D=D.parent;if(O===D){const A=new _o("#text",3);A.value=Un,w.replace(A)}}}})},pg=e=>{const[t,...n]=e.split(","),o=n.join(","),s=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(s){const r=";base64"===s[2],i=r?(e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(o):decodeURIComponent(o);return T.some({type:s[1],data:i,base64Encoded:r})}return T.none()},fx=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return T.none()}const s=new Uint8Array(o.length);for(let r=0;r<s.length;r++)s[r]=o.charCodeAt(r);return T.some(new Blob([s],{type:e}))},mx=e=>new Promise((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var s;n(null===(s=o.error)||void 0===s?void 0:s.message)},o.readAsDataURL(e)});let WB=0;const px=(e,t,n)=>pg(e).bind(({data:o,type:s,base64Encoded:r})=>{if(t&&!r)return T.none();{const i=r?o:btoa(o);return n(i,s)}}),gx=(e,t,n)=>{const o=e.create("blobid"+WB++,t,n);return e.add(o),o},hx=(e,t,n=!1)=>px(t,n,(o,s)=>T.from(e.getByData(o,s)).orThunk(()=>fx(s,o).map(r=>gx(e,r,o))));function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},za(e)}function gg(e,t){return(gg=Object.setPrototypeOf||function(o,s){return o.__proto__=s,o})(e,t)}function Rd(e,t,n){return(Rd=function JB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(s,r,i){var a=[null];a.push.apply(a,r);var m=new(Function.bind.apply(s,a));return i&&gg(m,i.prototype),m}).apply(null,arguments)}function Gs(e){return function QB(e){if(Array.isArray(e))return hg(e)}(e)||function XB(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function eL(e,t){if(e){if("string"==typeof e)return hg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hg(e,t)}}(e)||function tL(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var nL=Object.hasOwnProperty,bx=Object.setPrototypeOf,oL=Object.isFrozen,sL=Object.getPrototypeOf,rL=Object.getOwnPropertyDescriptor,Lo=Object.freeze,vr=Object.seal,iL=Object.create,vx=typeof Reflect<"u"&&Reflect,Dd=vx.apply,bg=vx.construct;Dd||(Dd=function(t,n,o){return t.apply(n,o)}),Lo||(Lo=function(t){return t}),vr||(vr=function(t){return t}),bg||(bg=function(t,n){return Rd(t,Gs(n))});var aL=Ys(Array.prototype.forEach),lL=Ys(Array.prototype.pop),Jc=Ys(Array.prototype.push),Pd=Ys(String.prototype.toLowerCase),cL=Ys(String.prototype.match),zi=Ys(String.prototype.replace),uL=Ys(String.prototype.indexOf),dL=Ys(String.prototype.trim),Fo=Ys(RegExp.prototype.test),vg=function fL(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return bg(e,n)}}(TypeError);function Ys(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return Dd(e,t,o)}}function It(e,t){bx&&bx(e,null);for(var n=t.length;n--;){var o=t[n];if("string"==typeof o){var s=Pd(o);s!==o&&(oL(t)||(t[n]=s),o=s)}e[o]=!0}return e}function Ha(e){var n,t=iL(null);for(n in e)Dd(nL,e,[n])&&(t[n]=e[n]);return t}function Od(e,t){for(;null!==e;){var n=rL(e,t);if(n){if(n.get)return Ys(n.get);if("function"==typeof n.value)return Ys(n.value)}e=sL(e)}return function o(s){return console.warn("fallback value for",s),null}}var yx=Lo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yg=Lo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Cg=Lo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mL=Lo(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xg=Lo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),pL=Lo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Cx=Lo(["#text"]),xx=Lo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Eg=Lo(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ex=Lo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Md=Lo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gL=vr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hL=vr(/<%[\w\W]*|[\w\W]*%>/gm),bL=vr(/^data-[\-\w.\u00B7-\uFFFF]/),vL=vr(/^aria-[\-\w]+$/),yL=vr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),CL=vr(/^(?:\w+script|data):/i),xL=vr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),EL=vr(/^html$/i),_L=function wx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,t=function(X){return wx(X)};if(t.version="2.3.8",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n=e.document,o=e.document,s=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,m=e.NamedNodeMap,v=void 0===m?e.NamedNodeMap||e.MozNamedAttrMap:m,x=e.HTMLFormElement,w=e.DOMParser,D=e.trustedTypes,O=a.prototype,A=Od(O,"cloneNode"),P=Od(O,"nextSibling"),F=Od(O,"childNodes"),z=Od(O,"parentNode");if("function"==typeof r){var q=o.createElement("template");q.content&&q.content.ownerDocument&&(o=q.content.ownerDocument)}var j=function(t,n){if("object"!==za(t)||"function"!=typeof t.createPolicy)return null;var o=null,s="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(s)&&(o=n.currentScript.getAttribute(s));var r="dompurify"+(o?"#"+o:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(D,n),ae=j?j.createHTML(""):"",ye=o.implementation,Q=o.createNodeIterator,K=o.createDocumentFragment,ce=o.getElementsByTagName,De=n.importNode,Ie={};try{Ie=Ha(o).documentMode?o.documentMode:{}}catch{}var Ke={};t.isSupported="function"==typeof z&&ye&&typeof ye.createHTMLDocument<"u"&&9!==Ie;var Zi,ti,nt=gL,wt=hL,Bt=bL,Xt=vL,Kn=CL,wn=xL,me=yL,Pe=null,ft=It({},[].concat(Gs(yx),Gs(yg),Gs(Cg),Gs(xg),Gs(Cx))),ct=null,Oe=It({},[].concat(Gs(xx),Gs(Eg),Gs(Ex),Gs(Md))),Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),he=null,He=null,rt=!0,Tt=!0,Ne=!1,ot=!1,Dt=!1,Yt=!1,Pt=!1,Pn=!1,fs=!1,$o=!1,Qs=!0,Wi=!0,Ka=!1,ji={},Vi=null,Of=It({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Mf=null,If=It({},["audio","video","img","source","image","track"]),vu=null,yu=It({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Cu="http://www.w3.org/1998/Math/MathML",xu="http://www.w3.org/2000/svg",Xs="http://www.w3.org/1999/xhtml",Gl=Xs,Ja=!1,Bf=["application/xhtml+xml","text/html"],Gi=null,Ff=o.createElement("form"),Jh=function(X){return X instanceof RegExp||X instanceof Function},$f=function(X){Gi&&Gi===X||((!X||"object"!==za(X))&&(X={}),X=Ha(X),Pe="ALLOWED_TAGS"in X?It({},X.ALLOWED_TAGS):ft,ct="ALLOWED_ATTR"in X?It({},X.ALLOWED_ATTR):Oe,vu="ADD_URI_SAFE_ATTR"in X?It(Ha(yu),X.ADD_URI_SAFE_ATTR):yu,Mf="ADD_DATA_URI_TAGS"in X?It(Ha(If),X.ADD_DATA_URI_TAGS):If,Vi="FORBID_CONTENTS"in X?It({},X.FORBID_CONTENTS):Of,he="FORBID_TAGS"in X?It({},X.FORBID_TAGS):{},He="FORBID_ATTR"in X?It({},X.FORBID_ATTR):{},ji="USE_PROFILES"in X&&X.USE_PROFILES,rt=!1!==X.ALLOW_ARIA_ATTR,Tt=!1!==X.ALLOW_DATA_ATTR,Ne=X.ALLOW_UNKNOWN_PROTOCOLS||!1,ot=X.SAFE_FOR_TEMPLATES||!1,Dt=X.WHOLE_DOCUMENT||!1,Pn=X.RETURN_DOM||!1,fs=X.RETURN_DOM_FRAGMENT||!1,$o=X.RETURN_TRUSTED_TYPE||!1,Pt=X.FORCE_BODY||!1,Qs=!1!==X.SANITIZE_DOM,Wi=!1!==X.KEEP_CONTENT,Ka=X.IN_PLACE||!1,me=X.ALLOWED_URI_REGEXP||me,Gl=X.NAMESPACE||Xs,X.CUSTOM_ELEMENT_HANDLING&&Jh(X.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=X.CUSTOM_ELEMENT_HANDLING.tagNameCheck),X.CUSTOM_ELEMENT_HANDLING&&Jh(X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),X.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Me.allowCustomizedBuiltInElements=X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zi=Zi=-1===Bf.indexOf(X.PARSER_MEDIA_TYPE)?"text/html":X.PARSER_MEDIA_TYPE,ti="application/xhtml+xml"===Zi?function(Ae){return Ae}:Pd,ot&&(Tt=!1),fs&&(Pn=!0),ji&&(Pe=It({},Gs(Cx)),ct=[],!0===ji.html&&(It(Pe,yx),It(ct,xx)),!0===ji.svg&&(It(Pe,yg),It(ct,Eg),It(ct,Md)),!0===ji.svgFilters&&(It(Pe,Cg),It(ct,Eg),It(ct,Md)),!0===ji.mathMl&&(It(Pe,xg),It(ct,Ex),It(ct,Md))),X.ADD_TAGS&&(Pe===ft&&(Pe=Ha(Pe)),It(Pe,X.ADD_TAGS)),X.ADD_ATTR&&(ct===Oe&&(ct=Ha(ct)),It(ct,X.ADD_ATTR)),X.ADD_URI_SAFE_ATTR&&It(vu,X.ADD_URI_SAFE_ATTR),X.FORBID_CONTENTS&&(Vi===Of&&(Vi=Ha(Vi)),It(Vi,X.FORBID_CONTENTS)),Wi&&(Pe["#text"]=!0),Dt&&It(Pe,["html","head","body"]),Pe.table&&(It(Pe,["tbody"]),delete he.tbody),Lo&&Lo(X),Gi=X)},Qh=It({},["mi","mo","mn","ms","mtext"]),Xh=It({},["foreignobject","desc","title","annotation-xml"]),$1=It({},["title","style","font","a","script"]),er=It({},yg);It(er,Cg),It(er,mL);var Yl=It({},xg);It(Yl,pL);var Z=function(X){Jc(t.removed,{element:X});try{X.parentNode.removeChild(X)}catch{try{X.outerHTML=ae}catch{X.remove()}}},ge=function(X,Ae){try{Jc(t.removed,{attribute:Ae.getAttributeNode(X),from:Ae})}catch{Jc(t.removed,{attribute:null,from:Ae})}if(Ae.removeAttribute(X),"is"===X&&!ct[X])if(Pn||fs)try{Z(Ae)}catch{}else try{Ae.setAttribute(X,"")}catch{}},de=function(X){var Ae,Ye;if(Pt)X="<remove></remove>"+X;else{var sn=cL(X,/^[\r\n\t ]+/);Ye=sn&&sn[0]}"application/xhtml+xml"===Zi&&(X='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+X+"</body></html>");var Yo=j?j.createHTML(X):X;if(Gl===Xs)try{Ae=(new w).parseFromString(Yo,Zi)}catch{}if(!Ae||!Ae.documentElement){Ae=ye.createDocument(Gl,"template",null);try{Ae.documentElement.innerHTML=Ja?"":Yo}catch{}}var ko=Ae.body||Ae.documentElement;return X&&Ye&&ko.insertBefore(o.createTextNode(Ye),ko.childNodes[0]||null),Gl===Xs?ce.call(Ae,Dt?"html":"body")[0]:Dt?Ae.documentElement:ko},Be=function(X){return Q.call(X.ownerDocument||X,X,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},zt=function(X){return"object"===za(i)?X instanceof i:X&&"object"===za(X)&&"number"==typeof X.nodeType&&"string"==typeof X.nodeName},On=function(X,Ae,Ye){Ke[X]&&aL(Ke[X],function(sn){sn.call(t,Ae,Ye,Gi)})},Hn=function(X){var Ae;if(On("beforeSanitizeElements",X,null),function(X){return X instanceof x&&("string"!=typeof X.nodeName||"string"!=typeof X.textContent||"function"!=typeof X.removeChild||!(X.attributes instanceof v)||"function"!=typeof X.removeAttribute||"function"!=typeof X.setAttribute||"string"!=typeof X.namespaceURI||"function"!=typeof X.insertBefore)}(X)||Fo(/[\u0080-\uFFFF]/,X.nodeName))return Z(X),!0;var Ye=ti(X.nodeName);if(On("uponSanitizeElement",X,{tagName:Ye,allowedTags:Pe}),X.hasChildNodes()&&!zt(X.firstElementChild)&&(!zt(X.content)||!zt(X.content.firstElementChild))&&Fo(/<[/\w]/g,X.innerHTML)&&Fo(/<[/\w]/g,X.textContent)||"select"===Ye&&Fo(/<template/i,X.innerHTML))return Z(X),!0;if(!Pe[Ye]||he[Ye]){if(!he[Ye]&&wu(Ye)&&(Me.tagNameCheck instanceof RegExp&&Fo(Me.tagNameCheck,Ye)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Ye)))return!1;if(Wi&&!Vi[Ye]){var sn=z(X)||X.parentNode,Yo=F(X)||X.childNodes;if(Yo&&sn)for(var ho=Yo.length-1;ho>=0;--ho)sn.insertBefore(A(Yo[ho],!0),P(X))}return Z(X),!0}return X instanceof a&&!function(X){var Ae=z(X);(!Ae||!Ae.tagName)&&(Ae={namespaceURI:Xs,tagName:"template"});var Ye=Pd(X.tagName),sn=Pd(Ae.tagName);return X.namespaceURI===xu?Ae.namespaceURI===Xs?"svg"===Ye:Ae.namespaceURI===Cu?"svg"===Ye&&("annotation-xml"===sn||Qh[sn]):!!er[Ye]:X.namespaceURI===Cu?Ae.namespaceURI===Xs?"math"===Ye:Ae.namespaceURI===xu?"math"===Ye&&Xh[sn]:!!Yl[Ye]:X.namespaceURI===Xs&&!(Ae.namespaceURI===xu&&!Xh[sn]||Ae.namespaceURI===Cu&&!Qh[sn])&&!Yl[Ye]&&($1[Ye]||!er[Ye])}(X)||("noscript"===Ye||"noembed"===Ye)&&Fo(/<\/no(script|embed)/i,X.innerHTML)?(Z(X),!0):(ot&&3===X.nodeType&&(Ae=zi(Ae=X.textContent,nt," "),Ae=zi(Ae,wt," "),X.textContent!==Ae&&(Jc(t.removed,{element:X.cloneNode()}),X.textContent=Ae)),On("afterSanitizeElements",X,null),!1)},Eu=function(X,Ae,Ye){if(Qs&&("id"===Ae||"name"===Ae)&&(Ye in o||Ye in Ff))return!1;if((!Tt||He[Ae]||!Fo(Bt,Ae))&&(!rt||!Fo(Xt,Ae)))if(!ct[Ae]||He[Ae]){if(!(wu(X)&&(Me.tagNameCheck instanceof RegExp&&Fo(Me.tagNameCheck,X)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(X))&&(Me.attributeNameCheck instanceof RegExp&&Fo(Me.attributeNameCheck,Ae)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(Ae))||"is"===Ae&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&Fo(Me.tagNameCheck,Ye)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Ye))))return!1}else if(!vu[Ae]&&!Fo(me,zi(Ye,wn,""))&&("src"!==Ae&&"xlink:href"!==Ae&&"href"!==Ae||"script"===X||0!==uL(Ye,"data:")||!Mf[X])&&(!Ne||Fo(Kn,zi(Ye,wn,"")))&&Ye)return!1;return!0},wu=function(X){return X.indexOf("-")>0},U1=function(X){var Ae,Ye,sn,Yo;On("beforeSanitizeAttributes",X,null);var ko=X.attributes;if(ko){var ho={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ct};for(Yo=ko.length;Yo--;){var bo=(Ae=ko[Yo]).name,z1=Ae.namespaceURI;Ye="value"===bo?Ae.value:dL(Ae.value),sn=ti(bo);var _Z=Ye;if(ho.attrName=sn,ho.attrValue=Ye,ho.keepAttr=!0,ho.forceKeepAttr=void 0,On("uponSanitizeAttribute",X,ho),Ye=ho.attrValue,!ho.forceKeepAttr){if(!ho.keepAttr){ge(bo,X);continue}if(Fo(/\/>/i,Ye)){ge(bo,X);continue}ot&&(Ye=zi(Ye,nt," "),Ye=zi(Ye,wt," "));var TZ=ti(X.nodeName);if(!Eu(TZ,sn,Ye)){ge(bo,X);continue}if(Ye!==_Z)try{z1?X.setAttributeNS(z1,bo,Ye):X.setAttribute(bo,Ye)}catch{ge(bo,X)}}}On("afterSanitizeAttributes",X,null)}},SZ=function st(X){var Ae,Ye=Be(X);for(On("beforeSanitizeShadowDOM",X,null);Ae=Ye.nextNode();)On("uponSanitizeShadowNode",Ae,null),!Hn(Ae)&&(Ae.content instanceof s&&st(Ae.content),U1(Ae));On("afterSanitizeShadowDOM",X,null)};return t.sanitize=function(st,X){var Ae,Ye,sn,Yo,ko;if((Ja=!st)&&(st="\x3c!--\x3e"),"string"!=typeof st&&!zt(st)){if("function"!=typeof st.toString)throw vg("toString is not a function");if("string"!=typeof(st=st.toString()))throw vg("dirty is not a string, aborting")}if(!t.isSupported){if("object"===za(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof st)return e.toStaticHTML(st);if(zt(st))return e.toStaticHTML(st.outerHTML)}return st}if(Yt||$f(X),t.removed=[],"string"==typeof st&&(Ka=!1),Ka){if(st.nodeName){var ho=ti(st.nodeName);if(!Pe[ho]||he[ho])throw vg("root node is forbidden and cannot be sanitized in-place")}}else if(st instanceof i)1===(Ye=(Ae=de("\x3c!----\x3e")).ownerDocument.importNode(st,!0)).nodeType&&"BODY"===Ye.nodeName||"HTML"===Ye.nodeName?Ae=Ye:Ae.appendChild(Ye);else{if(!Pn&&!ot&&!Dt&&-1===st.indexOf("<"))return j&&$o?j.createHTML(st):st;if(!(Ae=de(st)))return Pn?null:$o?ae:""}Ae&&Pt&&Z(Ae.firstChild);for(var Uf=Be(Ka?st:Ae);sn=Uf.nextNode();)3===sn.nodeType&&sn===Yo||Hn(sn)||(sn.content instanceof s&&SZ(sn.content),U1(sn),Yo=sn);if(Yo=null,Ka)return st;if(Pn){if(fs)for(ko=K.call(Ae.ownerDocument);Ae.firstChild;)ko.appendChild(Ae.firstChild);else ko=Ae;return ct.shadowroot&&(ko=De.call(n,ko,!0)),ko}var bo=Dt?Ae.outerHTML:Ae.innerHTML;return Dt&&Pe["!doctype"]&&Ae.ownerDocument&&Ae.ownerDocument.doctype&&Ae.ownerDocument.doctype.name&&Fo(EL,Ae.ownerDocument.doctype.name)&&(bo="<!DOCTYPE "+Ae.ownerDocument.doctype.name+">\n"+bo),ot&&(bo=zi(bo,nt," "),bo=zi(bo,wt," ")),j&&$o?j.createHTML(bo):bo},t.setConfig=function(st){$f(st),Yt=!0},t.clearConfig=function(){Gi=null,Yt=!1},t.isValidAttribute=function(st,X,Ae){Gi||$f({});var Ye=ti(st),sn=ti(X);return Eu(Ye,sn,Ae)},t.addHook=function(st,X){"function"==typeof X&&(Ke[st]=Ke[st]||[],Jc(Ke[st],X))},t.removeHook=function(st){if(Ke[st])return lL(Ke[st])},t.removeHooks=function(st){Ke[st]&&(Ke[st]=[])},t.removeAllHooks=function(){Ke={}},t}();const Sx=f.each,TL=f.trim,kL=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],NL={ftp:21,http:80,https:443,mailto:25},AL=["img","video"],_x=(e,t,n)=>{const o=(e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((e,t)=>ve(e)?!e:!ve(t)||!kt(AL,t))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Ks{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),s=/data:([^;]+)/.exec(o[0]);return s&&(n=s[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const s=Ai.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!_x(o,s,n)}}static getDocumentBaseUrl(t){var n;let o;return o=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(n=t.href)&&void 0!==n?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=TL(t),this.settings=n;const o=n.base_uri,s=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(s.source=t);const r=0===t.indexOf("//");if(0===t.indexOf("/")&&!r&&(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=o?o.path:new Ks(document.location.href).directory;if(""===(null==o?void 0:o.protocol))t="//mce_host"+s.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(o&&o.protocol||"http")+"://mce_host"+s.toAbsPath(a,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&Sx(kL,(a,c)=>{let m=i[c];m&&(m=m.replace(/\(mce_at\)/g,"@@")),s[a]=m}),o&&(s.protocol||(s.protocol=o.protocol),s.userInfo||(s.userInfo=o.userInfo),!s.port&&"mce_host"===s.host&&(s.port=o.port),(!s.host||"mce_host"===s.host)&&(s.host=o.host),s.source=""),r&&(s.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const n=new Ks(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),s=n.getURI();if(o===s||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===s)return o;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const o=new Ks(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?NL[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let r,i,o=0,s="";const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length)for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){o=r+1;break}if(a.length<c.length)for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){o=r+1;break}if(1===o)return n;for(r=0,i=a.length-(o-1);r<i;r++)s+="../";for(r=o-1,i=c.length;r<i;r++)s+=r!==o-1?"/"+c[r]:c[r];return s}toAbsPath(t,n){let o=0;const s=/\/$/.test(n)?"/":"",r=t.split("/"),i=n.split("/"),a=[];Sx(r,x=>{x&&a.push(x)});const c=[];for(let x=i.length-1;x>=0;x--)if(0!==i[x].length&&"."!==i[x]){if(".."===i[x]){o++;continue}if(o>0){o--;continue}c.push(i[x])}const m=a.length-o;let v;return v=m<=0?Ar(c).join("/"):a.slice(0,m).join("/")+"/"+Ar(c).join("/"),0!==v.indexOf("/")&&(v="/"+v),s&&v.lastIndexOf("/")!==v.length-1&&(v+=s),v}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const PL=f.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),wg="data-mce-type";let Tx=0;const kx=(e,t,n,o)=>{var s,r,i,a;const c=t.validate,m=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(s=e.nodeValue)&&void 0!==s?s:"")&&(e.nodeValue=" "+e.nodeValue);const v=null!==(r=null==o?void 0:o.tagName)&&void 0!==r?r:e.nodeName.toLowerCase();if(1!==e.nodeType||"body"===v)return;const x=M_fromDom(e),w=Fr(x,wg),D=dn(x,"data-mce-bogus");if(!w&&Fe(D))return void("all"===D?qt(x):Us(x));const O=n.getElementRule(v);if(!c||O){if(ve(o)&&(o.allowedTags[v]=!0),c&&O&&!w){if(re(null!==(i=O.attributesForced)&&void 0!==i?i:[],A=>{un(x,A.name,"{$uid}"===A.value?"mce_"+Tx++:A.value)}),re(null!==(a=O.attributesDefault)&&void 0!==a?a:[],A=>{Fr(x,A.name)||un(x,A.name,"{$uid}"===A.value?"mce_"+Tx++:A.value)}),O.attributesRequired&&!Kt(O.attributesRequired,A=>Fr(x,A)))return void Us(x);if(O.removeEmptyAttrs&&(e=>{const t=e.dom.attributes;return null==t||0===t.length})(x))return void Us(x);O.outputName&&O.outputName!==v&&((e,t)=>{const n=((e,t)=>{const n=M_fromTag(t),o=$r(e);return Ln(n,o),n})(e,t);$s(e,n);const o=Vt(e);jr(n,o),qt(e)})(x,O.outputName)}}else Ge(m,v)?qt(x):Us(x)},Nx=(e,t,n,o,s)=>!(o in PL&&_x(e,s,n))&&(!e.validate||t.isValid(n,o)||yn(o,"data-")||yn(o,"aria-")),Ax=(e,t)=>e.hasAttribute(wg)&&("id"===t||"class"===t||"style"===t),Rx=(e,t)=>e in t.getBoolAttrs(),OL=(e,t,n)=>{const{attributes:o}=e;for(let s=o.length-1;s>=0;s--){const r=o[s],i=r.name,a=r.value;Nx(t,n,e.tagName.toLowerCase(),i,a)||Ax(e,i)?Rx(i,n)&&e.setAttribute(i,i):e.removeAttribute(i)}},Dx=f.makeMap,Px=f.extend,Ox=(e,t,n)=>{const o=e.name,s=o in n&&"title"!==o&&"textarea"!==o,r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],m=new _o(c.nodeName.toLowerCase(),c.nodeType);if(we(c)){const v=c.attributes;for(let x=0,w=v.length;x<w;x++){const D=v[x];m.attr(D.name,D.value)}}else fe(c)?(m.value=c.data,s&&(m.raw=!0)):(Si(c)||W1(c)||j1(c))&&(m.value=c.data);Ox(m,c,n),e.append(m)}},Bl=(e={},t=Ri())=>{const n=ux(),o=ux(),s={validate:!0,root_name:"body",sanitize:!0,...e},r=new DOMParser,i=((e,t)=>{if(e.sanitize){const n=((e,t)=>{const n=_L();return n.addHook("uponSanitizeElement",(o,s)=>{kx(o,e,t,s)}),n.addHook("uponSanitizeAttribute",(o,s)=>{const r=o.tagName.toLowerCase(),{attrName:i,attrValue:a}=s;s.keepAttr=Nx(e,t,r,i,a),s.keepAttr?(s.allowedAttributes[i]=!0,Rx(i,t)&&(s.attrValue=i),e.allow_svg_data_urls&&yn(a,"data:image/svg+xml")&&(s.forceKeepAttr=!0)):Ax(o,i)&&(s.forceKeepAttr=!0)}),n})(e,t);return(o,s)=>{n.sanitize(o,((e,t)=>{const o={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return o.PARSER_MEDIA_TYPE=t,e.allow_script_urls?o.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(o.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),o})(e,s)),n.removed=[]}}return(n,o)=>{const s=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let r;for(;r=s.nextNode();)kx(r,e,t),we(r)&&OL(r,e,t)}})(s,t),m=n.getFilters,w=o.getFilters,A=(q,j)=>{const ae=Fe(j.attr(wg)),be=1===j.type&&!Ge(q,j.name)&&!gm(t,j);return 3===j.type||be&&!ae},z={schema:t,addAttributeFilter:o.addFilter,getAttributeFilters:w,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:m,removeNodeFilter:n.removeFilter,parse:(q,j={})=>{var ae;const be=s.validate,ye=null!==(ae=j.context)&&void 0!==ae?ae:s.root_name,Q=((q,j,ae="html")=>{const be="xhtml"===ae?"application/xhtml+xml":"text/html",ye=Ge(t.getSpecialElements(),j.toLowerCase()),Q=ye?`<${j}>${q}</${j}>`:q,ce=r.parseFromString("xhtml"===ae?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Q}</body></html>`:`<body>${Q}</body>`,be).body;return i(ce,be),ye?ce.firstChild:ce})(q,ye,j.format);dm(t,Q);const K=new _o(ye,11);Ox(K,Q,t.getSpecialElements()),Q.innerHTML="";const[ce,De]=((e,t,n,o)=>{const s=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=Px(Dx("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=Ab(t),m=/[ \t\r\n]+/g,v=/^[ \t\r\n]+/,x=/[ \t\r\n]+$/,w=z=>{let q=z.parent;for(;ve(q);){if(q.name in i)return!0;q=q.parent}return!1},O=z=>z.name in a||gm(t,z),A=(z,q)=>!ve(q?z.prev:z.next)&&!Gt(z.parent)&&O(z.parent)&&(z.parent!==e||!0===o.isRootContent);return[z=>{var q;if(3===z.type&&!w(z)){let j=null!==(q=z.value)&&void 0!==q?q:"";j=j.replace(m," "),(((e,t)=>ve(e)&&(t(e)||"br"===e.name))(z.prev,O)||A(z,!0))&&(j=j.replace(v,"")),0===j.length?z.remove():z.value=j}},z=>{var q;if(1===z.type){const j=t.getElementRule(z.name);if(s&&j){const ae=Gc(t,r,i,z);j.paddInEmptyBlock&&ae&&(z=>{let q=z;for(;ve(q);){if(q.name in c)return Gc(t,r,i,q);q=q.parent}return!1})(z)?Yp(n,o,O,z):j.removeEmpty&&ae?O(z)?z.remove():z.unwrap():j.paddEmpty&&(ae||(e=>{var t;return y0(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)===Un})(z))&&Yp(n,o,O,z)}}else if(3===z.type&&!w(z)){let j=null!==(q=z.value)&&void 0!==q?q:"";(z.next&&O(z.next)||A(z,!1))&&(j=j.replace(x,"")),0===j.length?z.remove():z.value=j}}]})(K,t,s,j),Ie=[],Ke=be?Xt=>((q,j)=>{C0(t,q)&&j.push(q)})(Xt,Ie):et,nt={nodes:{},attributes:{}},wt=Xt=>h0(m(),w(),Xt,nt);if(((e,t,n)=>{const o=[];for(let s=e,r=s;s;r=s,s=s.walk()){const i=s;re(t,a=>a(i)),Gt(i.parent)&&i!==e?s=r:o.push(i)}for(let s=o.length-1;s>=0;s--){const r=o[s];re(n,i=>i(r))}})(K,[ce,wt],[De,Ke]),Ie.reverse(),be&&Ie.length>0)if(j.context){const{pass:Xt,fail:Kn}=kr(Ie,wn=>wn.parent===K);Jp(Kn,t,K,wt),j.invalid=Xt.length>0}else Jp(Ie,t,K,wt);const Bt=((e,t)=>{var n;const o=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===o?"":!0===o?"p":o})(s,j);return Bt&&("body"===K.name||j.isRootContent)&&((q,j)=>{const ae=Px(Dx("script,style,head,html,body,title,meta,param"),t.getBlockElements()),be=/^[ \t\r\n]+/,ye=/[ \t\r\n]+$/;let Q=q.firstChild,K=null;const ce=De=>{var Ie,Ke;De&&(Q=De.firstChild,Q&&3===Q.type&&(Q.value=null===(Ie=Q.value)||void 0===Ie?void 0:Ie.replace(be,"")),Q=De.lastChild,Q&&3===Q.type&&(Q.value=null===(Ke=Q.value)||void 0===Ke?void 0:Ke.replace(ye,"")))};if(t.isValidChild(q.name,j.toLowerCase())){for(;Q;){const De=Q.next;A(ae,Q)?(K||(K=new _o(j,1),K.attr(s.forced_root_block_attrs),q.insert(K,Q)),K.append(Q)):(ce(K),K=null),Q=De}ce(K)}})(K,Bt),j.invalid||b0(nt,j),K}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&dx(t,e,n),e.addAttributeFilter("href",s=>{let r=s.length;const a=c=>{const m=c?f.trim(c):"";return/\b(noopener)\b/g.test(m)?m:(c=>c.split(" ").filter(v=>v.length>0).concat(["noopener"]).sort().join(" "))(m)};if(!t.allow_unsafe_link_target)for(;r--;){const c=s[r];"a"===c.name&&"_blank"===c.attr("target")&&c.attr("rel",a(c.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",s=>{let i,a,c,m,r=s.length;for(;r--;)if(m=s[r],"a"===m.name&&m.firstChild&&!m.attr("href"))for(c=m.parent,i=m.lastChild;i&&c;)a=i.prev,c.insert(i,m),i=a}),t.fix_list_elements&&e.addNodeFilter("ul,ol",s=>{let i,a,r=s.length;for(;r--;)if(i=s[r],a=i.parent,a&&("ul"===a.name||"ol"===a.name))if(i.prev&&"li"===i.prev.name)i.prev.append(i);else{const c=new _o("li",1);c.attr("style","list-style-type: none"),i.wrap(c)}});const o=n.getValidClasses();t.validate&&o&&e.addAttributeFilter("class",s=>{var r;let i=s.length;for(;i--;){const a=s[i],c=null!==(r=a.attr("class"))&&void 0!==r?r:"",m=f.explode(c," ");let v="";for(let x=0;x<m.length;x++){const w=m[x];let D=!1,O=o["*"];O&&O[w]&&(D=!0),O=o[a.name],!D&&O&&O[w]&&(D=!0),D&&(v&&(v+=" "),v+=w)}v.length||(v=null),a.attr("class",v)}}),((e,t)=>{const{blob_cache:n}=t;if(n){const o=s=>{const r=s.attr("src");(e=>e.attr("src")===gt.transparentSrc||ve(e.attr("data-mce-placeholder")))(s)||(e=>ve(e.attr("data-mce-bogus")))(s)||Gt(r)||hx(n,r,!0).each(i=>{s.attr("src",i.blobUri())})};e.addAttributeFilter("src",s=>re(s,o))}})(e,t)})(z,s),((e,t,n)=>{t.inline_styles&&FB(e,t,n)})(z,s,t),z},Mx=(e,t,n)=>{const o=(e=>Td(e)?Bi({validate:!1}).serialize(e):e)(e),s=t(o);if(s.isDefaultPrevented())return s;if(Td(e)){if(s.content!==o){const r=Bl({validate:!1,forced_root_block:!1,sanitize:n}).parse(s.content,{context:e.name});return{...s,content:r}}return{...s,content:e}}return s},Ix=(e,t)=>{if(t.no_events)return wo.value(t);{const n=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return n.isDefaultPrevented()?wo.error(Iy(e,{content:"",...n}).content):wo.value(n)}},Bx=(e,t,n)=>n.no_events?t:Mx(t,s=>Iy(e,{...n,content:s}),zm(e)).content,Sg=(e,t)=>{if(t.no_events)return wo.value(t);{const n=Mx(t.content,o=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,{...t,content:o}),zm(e));return n.isDefaultPrevented()?(My(e,n),wo.error(void 0)):wo.value(n)}},_g=(e,t,n)=>{n.no_events||My(e,{...n,content:t})},Tg=(e,t,n)=>({element:e,width:t,rows:n}),Lx=(e,t)=>({element:e,cells:t}),zL=(e,t)=>({x:e,y:t}),Fx=(e,t)=>Xo(e,t).bind(Ms).getOr(1),qL=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},$x=e=>nn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),Ux=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const s=n[o].cells;for(let r=0;r<s.length;r++)if(ne(s[r],t))return T.some(zL(r,o))}return T.none()},zx=(e,t,n,o,s)=>{const r=[],i=e.rows;for(let a=n;a<=s;a++){const c=i[a].cells,m=t<o?c.slice(t,o+1):c.slice(o,t+1);r.push(Lx(i[a].element,m))}return r},YL=e=>((e,t)=>{const n=_a(e.element),o=M_fromTag("tbody");return jr(o,t),fn(n,o),n})(e,(e=>pt(e.rows,t=>{const n=pt(t.cells,s=>{const r=qb(s);return xn(r,"colspan"),xn(r,"rowspan"),r}),o=_a(t.element);return jr(o,n),o}))(e)),tF=(e,t)=>{const n=M_fromDom(t.commonAncestorContainer),o=Jr(n,e),s=Ve(o,cT),r=((e,t)=>Jt(e,n=>"li"===Rt(n)&&ep(n,t)).fold(Ce([]),n=>(e=>Jt(e,t=>"ul"===Rt(t)||"ol"===Rt(t)))(e).map(o=>{const s=M_fromTag(Rt(o)),r=Ds(Du(o),(i,a)=>yn(a,"list-style"));return gl(s,r),[M_fromTag("li"),s]}).getOr([])))(o,t),i=s.concat(r.length?r:(e=>mc(e)?Je(e).filter(rm).fold(Ce([]),t=>[e,t]):rm(e)?[e]:[])(n));return pt(i,_a)},Hx=()=>mp([]),sF=(e,t)=>((e,t)=>ha(t,"table",Te(ne,e)))(e,t[0]).bind(n=>{const o=t[0],s=t[t.length-1],r=(e=>{const t=Tg(_a(e),0,[]);return re(bn(e,"tr"),(n,o)=>{re(bn(n,"td,th"),(s,r)=>{((e,t,n,o,s)=>{const r=Fx(s,"rowspan"),i=Fx(s,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=Lx(qb(o),[]));for(let m=t;m<t+i;m++)a[c].cells[m]=c===n&&m===t?s:_a(s)}})(t,((e,t,n)=>{for(;qL(e,t,n);)t++;return t})(t,r,o),o,n,s)})}),Tg(t.element,$x(t.rows),t.rows)})(n);return((e,t,n)=>Ux(e,t).bind(o=>Ux(e,n).map(s=>((e,t,n)=>{const o=t.x,s=t.y,r=n.x,i=n.y,a=s<i?zx(e,o,s,r,i):zx(e,o,i,r,s);return Tg(e.element,$x(a),a)})(e,o,s))))(r,o,s).map(i=>mp([YL(i)]))}).getOrThunk(Hx),iF=(e,t)=>{const n=dy(t,e);return n.length>0?sF(e,n):((e,t)=>t.length>0&&t[0].collapsed?Hx():((e,t)=>((e,t)=>{const n=nn(t,(o,s)=>(fn(s,o),s),e);return t.length>0?mp([n]):n})(M_fromDom(t.cloneContents()),tF(e,t)))(e,t[0]))(e,t)},Id=(e,t)=>t>=0&&t<e.length&&Al(e.charAt(t)),qx=e=>Ws(e.innerText),Ng=e=>we(e)?e.outerHTML:fe(e)?Ai.encodeRaw(e.data,!1):Si(e)?"\x3c!--"+e.data+"--\x3e":"",yF=(e,t)=>(((e,t)=>{let n=0;re(e,o=>{0===o[0]?n++:1===o[0]?(((e,t,n)=>{const o=(e=>{let t;const n=document.createElement("div"),o=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)o.appendChild(t);return o})(t);e.hasChildNodes()&&n<e.childNodes.length?e.insertBefore(o,e.childNodes[n]):e.appendChild(o)})(t,o[1],n),n++):2===o[0]&&((e,t)=>{e.hasChildNodes()&&t<e.childNodes.length&&e.removeChild(e.childNodes[t])})(t,n)})})(((e,t)=>{const n=e.length+t.length+2,o=new Array(n),s=new Array(n),i=(v,x,w,D,O)=>{const A=c(v,x,w,D);if(null===A||A.start===x&&A.diag===x-D||A.end===v&&A.diag===v-w){let P=v,F=w;for(;P<x||F<D;)P<x&&F<D&&e[P]===t[F]?(O.push([0,e[P]]),++P,++F):x-v>D-w?(O.push([2,e[P]]),++P):(O.push([1,t[F]]),++F)}else{i(v,A.start,w,A.start-A.diag,O);for(let P=A.start;P<A.end;++P)O.push([0,e[P]]);i(A.end,x,A.end-A.diag,D,O)}},a=(v,x,w,D)=>{let O=v;for(;O-x<D&&O<w&&e[O]===t[O-x];)++O;return((v,x,w)=>({start:v,end:x,diag:w}))(v,O,x)},c=(v,x,w,D)=>{const O=x-v,A=D-w;if(0===O||0===A)return null;const P=O-A,F=A+O,z=(F%2==0?F:F+1)/2;let q,j,ae,be,ye;for(o[1+z]=v,s[1+z]=x+1,q=0;q<=z;++q){for(j=-q;j<=q;j+=2){for(ae=j+z,o[ae]=j===-q||j!==q&&o[ae-1]<o[ae+1]?o[ae+1]:o[ae-1]+1,be=o[ae],ye=be-v+w-j;be<x&&ye<D&&e[be]===t[ye];)o[ae]=++be,++ye;if(P%2!=0&&P-q<=j&&j<=P+q&&s[ae-P]<=o[ae])return a(s[ae-P],j+v-w,x,D)}for(j=P-q;j<=P+q;j+=2){for(ae=j+z-P,s[ae]=j===P-q||j!==P+q&&s[ae+1]<=s[ae-1]?s[ae+1]-1:s[ae-1],be=s[ae]-1,ye=be-v+w-j;be>=v&&ye>=w&&e[be]===t[ye];)s[ae]=be--,ye--;if(P%2==0&&-q<=j&&j<=q&&s[ae]<=o[ae+P])return a(s[ae],j+v-w,x,D)}}return null},m=[];return i(0,e.length,0,t.length,m),m})(pt(Jn(t.childNodes),Ng),e),t),t),CF=Jo(()=>document.implementation.createHTMLDocument("undo")),Bd=e=>{const t=e.serializer.getTempAttrs(),n=EC(e.getBody(),t);return(e=>null!==e.querySelector("iframe"))(n)?(e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}))(((e,t)=>Ve(pt(Jn(e.childNodes),gs(Ws,Ng)),n=>n.length>0))(n)):(e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}))(Ws(n.innerHTML))},Ag=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?yF(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!ve(o)||!sy(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},Rg=e=>"fragmented"===e.type?e.fragments.join(""):e.content,Vx=e=>{const t=M_fromTag("body",CF());return h(t,Rg(e)),re(bn(t,"*[data-mce-bogus]"),Us),g(t)},Dg=(e,t)=>!(!e||!t)&&(!!((e,t)=>Rg(e)===Rg(t))(e,t)||((e,t)=>Vx(e)===Vx(t))(e,t)),Pg=e=>0===e.get(),Ld=(e,t,n)=>{Pg(n)&&(e.typing=t)},Zx=(e,t)=>{e.typing&&(Ld(e,!1,t),e.add())},Gx=e=>({init:{bindEvents:et},undoManager:{beforeChange:(t,n)=>((e,t,n)=>{Pg(t)&&n.set(Im(e.selection))})(e,t,n),add:(t,n,o,s,r,i)=>((e,t,n,o,s,r,i)=>{const a=Bd(e),c=f.extend(r||{},a);if(!Pg(o)||e.removed)return null;const m=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:m,originalEvent:i}).isDefaultPrevented()||m&&Dg(m,c))return null;t.data[n.get()]&&s.get().each(w=>{t.data[n.get()].beforeBookmark=w});const v=cA(e);if(v&&t.data.length>v){for(let w=0;w<t.data.length-1;w++)t.data[w]=t.data[w+1];t.data.length--,n.set(t.data.length)}c.bookmark=Im(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const x={level:c,lastLevel:m,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",x),e.dispatch("change",x)):e.dispatch("AddUndo",x),c})(e,t,n,o,s,r,i),undo:(t,n,o)=>((e,t,n,o)=>{let s;return t.typing&&(t.add(),t.typing=!1,Ld(t,!1,n)),o.get()>0&&(o.set(o.get()-1),s=t.data[o.get()],Ag(e,s,!0),e.setDirty(!0),e.dispatch("Undo",{level:s})),s})(e,t,n,o),redo:(t,n)=>((e,t,n)=>{let o;return t.get()<n.length-1&&(t.set(t.get()+1),o=n[t.get()],Ag(e,o,!1),e.setDirty(!0),e.dispatch("Redo",{level:o})),o})(e,t,n),clear:(t,n)=>((e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,n),reset:t=>(e=>{e.clear(),e.add()})(t),hasUndo:(t,n)=>((e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Dg(Bd(e),t.data[0]))(e,t,n),hasRedo:(t,n)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(t,n),transact:(t,n,o)=>((e,t,n)=>(Zx(e,t),e.beforeChange(),e.ignore(n),e.add()))(t,n,o),ignore:(t,n)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(t,n),extra:(t,n,o,s)=>((e,t,n,o,s)=>{if(t.transact(o)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];Ag(e,i,!0),t.transact(s)&&(t.data[n.get()-1].beforeBookmark=r)}})(e,t,n,o,s)},formatter:{match:(t,n,o,s)=>rg(e,t,n,o,s),matchAll:(t,n)=>((e,t,n)=>{const o=[],s={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!s[c]&&br(e,i,c,n)&&(s[c]=!0,o.push(c))}},e.dom.getRoot()),o})(e,t,n),matchNode:(t,n,o,s)=>br(e,t,n,o,s),canApply:t=>((e,t)=>{const n=e.formatter.get(t),o=e.dom;if(n&&e.selection.isEditable()){const s=e.selection.getStart(),r=dd(o,s);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!as(a))return!0;for(let c=r.length-1;c>=0;c--)if(o.is(r[c],a.selector))return!0}}return!1})(e,t),closest:t=>((e,t)=>{const n=s=>ne(s,M_fromDom(e.getBody()));return T.from(e.selection.getStart(!0)).bind(s=>ng(M_fromDom(s),r=>Qn(t,i=>((s,r)=>br(e,s.dom,r)?T.some(r):T.none())(r,i)),n)).getOrNull()})(e,t),apply:(t,n,o)=>ox(e,t,n,o),remove:(t,n,o,s)=>ex(e,t,n,o,s),toggle:(t,n,o)=>((e,t,n,o)=>{const s=e.formatter.get(t);s&&(!rg(e,t,n,o)||"toggle"in s[0]&&!s[0].toggle?ox(e,t,n,o):ex(e,t,n,o))})(e,t,n,o),formatChanged:(t,n,o,s,r)=>((e,t,n,o,s,r)=>(((e,t,n,o,s,r)=>{const i=t.get();re(n.split(","),a=>{const c=$t(i,a).getOrThunk(()=>{const v={withSimilar:{state:zn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:zn(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=v,v}),m=()=>{const v=ax(e);return ix(e,v,a,s,r).isSome()};if(dt(r)){const v=s?c.withSimilar:c.withoutSimilar;v.callbacks.push(o),1===v.callbacks.length&&v.state.set(m())}else c.withVars.push({state:zn(m()),similar:s,vars:r,callback:o})}),t.set(i)})(e,t,n,o,s,r),{unbind:()=>((e,t,n)=>{const o=e.get();re(t.split(","),s=>$t(o,s).each(r=>{o[s]={withSimilar:{...r.withSimilar,callbacks:Ve(r.withSimilar.callbacks,i=>i!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:Ve(r.withoutSimilar.callbacks,i=>i!==n)},withVars:Ve(r.withVars,i=>i.callback!==n)}})),e.set(o)})(t,n,o)}))(e,t,n,o,s,r)},editor:{getContent:t=>((e,t)=>T.from(e.getBody()).fold(Ce("tree"===t.format?new _o("body",11):""),n=>EO(e,t,n)))(e,t),setContent:(t,n)=>((e,t,n)=>T.from(e.getBody()).map(o=>Td(t)?((e,t,n,o)=>{v0(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const s=Bi({validate:!1},e.schema).serialize(n),r=Fu(M_fromDom(t))?s:f.trim(s);return tg(e,r,o.no_selection),{content:n,html:r}})(e,o,t,n):((e,t,n,o)=>{if(0===n.length||/^\s+$/.test(n)){const s='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+s+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+s+"</li>");const r=ro(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=s,n=e.dom.createHTML(r,Ac(e),n)):n||(n=s),tg(e,n,o.no_selection),{content:n,html:n}}{"raw"!==o.format&&(n=Bi({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const s=Fu(M_fromDom(t))?n:f.trim(n);return tg(e,s,o.no_selection),{content:s,html:s}}})(e,o,t,n)).getOr({content:t,html:Td(n.content)?"":n.content}))(e,t,n),insertContent:(t,n)=>FI(e,t,n),addVisual:t=>((e,t)=>{const n=e.dom,o=ve(t)?t:e.getBody();re(n.select("table,a",o),s=>{switch(s.nodeName){case"TABLE":const r=gA(e),i=n.getAttrib(s,"border");i&&"0"!==i||!e.hasVisual?n.removeClass(s,r):n.addClass(s,r);break;case"A":if(!n.getAttrib(s,"href")){const a=n.getAttrib(s,"name")||s.id,c=Ov(e);a&&e.hasVisual?n.addClass(s,c):n.removeClass(s,c)}}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((e,t,n={})=>{const o=((e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}))(n,t);return Ix(e,o).fold(rn,s=>{const r=((e,t)=>{if("text"===t.format)return(e=>T.from(e.selection.getRng()).map(t=>{var n;const o=T.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),s=e.getBody(),r=(e=>e.map(t=>t.nodeName).getOr("div").toLowerCase())(o),i=M_fromDom(t.cloneContents());wC(i),SC(i);const a=e.dom.add(s,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),c=qx(a),m=Ws(null!==(n=a.textContent)&&void 0!==n?n:"");if(e.dom.remove(a),Id(m,0)||Id(m,m.length-1)){const v=o.getOr(s),x=qx(v),w=x.indexOf(c);return-1===w?c:(Id(x,w-1)?" ":"")+c+(Id(x,w+c.length)?" ":"")}return c}).getOr(""))(e);{const n=((e,t)=>{const n=e.selection.getRng(),o=e.dom.create("body"),s=e.selection.getSel(),r=Tp(e,Qm(s)),i=t.contextual?iF(M_fromDom(e.getBody()),r).dom:n.cloneContents();return i&&o.appendChild(i),e.selection.serializer.serialize(o,t)})(e,t);return"tree"===t.format?n:e.selection.isCollapsed()?"":n}})(e,s);return Bx(e,r,s)})})(e,t,n)},autocompleter:{addDecoration:t=>fO(e,t),removeDecoration:()=>((e,t)=>gC(t).each(n=>{const o=e.selection.getBookmark();Us(n),e.selection.moveToBookmark(o)}))(e,M_fromDom(e.getBody()))},raw:{getModel:()=>T.none()}}),yr=e=>Ge(e.plugins,"rtc"),Og=e=>e.rtcInstance?e.rtcInstance:Gx(e),vn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Yx=e=>vn(e).init.bindEvents(),Kx=e=>0===e.dom.length?(qt(e),T.none()):T.some(e),Jx=(e,t,n,o)=>{e.bind(s=>((o?Bp:Ed)(s.dom,o?s.dom.length:0),t.filter(Bn).map(i=>((e,t,n,o)=>{const s=e.dom,r=t.dom,i=o?s.length:r.length;o?(Lp(s,r,!1,!o),n.setStart(r,i)):(Lp(r,s,!1,!o),n.setEnd(r,i))})(s,i,n,o)))).orThunk(()=>((e,t)=>e.filter(n=>Uc.isBookmarkNode(n.dom)).bind(t?Nn:Ft))(t,o).or(t).filter(Bn).map(r=>((e,t)=>{Je(e).each(n=>{const o=e.dom;t&&jc(n,ee(o,0))?Ed(o,0):!t&&Vc(n,ee(o,o.length))&&Bp(o,o.length)})})(r,o)))},Qx=(e,t,n)=>{if(Ge(e,t)){const o=Ve(e[t],s=>s!==n);0===o.length?delete e[t]:e[t]=o}};const Xx=e=>!(!e||!e.ownerDocument)&&_e(M_fromDom(e.ownerDocument),M_fromDom(e)),eE=(e,t,n,o)=>{let s,r;const{selectorChangedWithUnbind:i}=((e,t)=>{let n,o;const s=(a,c)=>Jt(c,m=>e.is(m,a)),r=a=>e.getParents(a,void 0,e.getRoot());return{selectorChangedWithUnbind:(a,c)=>(n||(n={},o={},t.on("NodeChange",a=>{const c=a.element,m=r(c),v={};Nt(n,(x,w)=>{s(w,m).each(D=>{o[w]||(re(x,O=>{O(!0,{node:D,selector:w,parents:m})}),o[w]=x),v[w]=x})}),Nt(o,(x,w)=>{v[w]||(delete o[w],re(x,D=>{D(!1,{node:c,selector:w,parents:m})}))})})),n[a]||(n[a]=[]),n[a].push(c),s(a,r(t.selection.getStart())).each(()=>{o[a]=n[a]}),{unbind:()=>{Qx(n,a,c),Qx(o,a,c)}})}})(e,o),m=(me,Pe)=>((e,t,n={})=>{const o=((e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}))(n,t);Sg(e,o).each(s=>{const r=((e,t)=>{if("raw"!==t.format){const n=e.selection.getRng(),o=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),s=o?{context:o.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...s,...t});return Bi({validate:!1},e.schema).serialize(r)}return t.content})(e,s),i=e.selection.getRng();((e,t)=>{const n=T.from(t.firstChild).map(M_fromDom),o=T.from(t.lastChild).map(M_fromDom);e.deleteContents(),e.insertNode(t);const s=n.bind(Ft).filter(Bn).bind(Kx),r=o.bind(Nn).filter(Bn).bind(Kx);Jx(s,n,e,!0),Jx(r,o,e,!1),e.collapse(!1)})(i,i.createContextualFragment(r)),e.selection.setRng(i),Hc(e,i),_g(e,r,s)})})(o,me,Pe),F=me=>{const Pe=q();Pe.collapse(!!me),j(Pe)},z=()=>t.getSelection?t.getSelection():t.document.selection,q=()=>{let me;const Pe=(ct,Oe,Me)=>{try{return Oe.compareBoundaryPoints(ct,Me)}catch{return-1}},ft=t.document;if(ve(o.bookmark)&&!Ba(o)){const ct=Cp(o);if(ct.isSome())return ct.map(Oe=>Tp(o,[Oe])[0]).getOr(ft.createRange())}try{const ct=z();ct&&!bl(ct.anchorNode)&&(me=ct.rangeCount>0?ct.getRangeAt(0):ft.createRange(),me=Tp(o,[me])[0])}catch{}if(me||(me=ft.createRange()),fc(me.startContainer)&&me.collapsed){const ct=e.getRoot();me.setStart(ct,0),me.setEnd(ct,0)}return s&&r&&(0===Pe(me.START_TO_START,me,s)&&0===Pe(me.END_TO_END,me,s)?me=r:(s=null,r=null)),me},j=(me,Pe)=>{if(!(e=>!!e&&Xx(e.startContainer)&&Xx(e.endContainer))(me))return;const ft=z();if(me=o.dispatch("SetSelectionRange",{range:me,forward:Pe}).range,ft){r=me;try{ft.removeAllRanges(),ft.addRange(me)}catch{}!1===Pe&&ft.extend&&(ft.collapse(me.endContainer,me.endOffset),ft.extend(me.startContainer,me.startOffset)),s=ft.rangeCount>0?ft.getRangeAt(0):null}if(!me.collapsed&&me.startContainer===me.endContainer&&null!=ft&&ft.setBaseAndExtent&&me.endOffset-me.startOffset<2&&me.startContainer.hasChildNodes()){const Oe=me.startContainer.childNodes[me.startOffset];Oe&&"IMG"===Oe.nodeName&&(ft.setBaseAndExtent(me.startContainer,me.startOffset,me.endContainer,me.endOffset),(ft.anchorNode!==me.startContainer||ft.focusNode!==me.endContainer)&&ft.setBaseAndExtent(Oe,0,Oe,1))}o.dispatch("AfterSetSelectionRange",{range:me,forward:Pe})},Q=()=>{const me=z(),Pe=null==me?void 0:me.anchorNode,ft=null==me?void 0:me.focusNode;if(!me||!Pe||!ft||bl(Pe)||bl(ft))return!0;const ct=e.createRng(),Oe=e.createRng();try{ct.setStart(Pe,me.anchorOffset),ct.collapse(!0),Oe.setStart(ft,me.focusOffset),Oe.collapse(!0)}catch{return!0}return ct.compareBoundaryPoints(ct.START_TO_START,Oe)<=0},Xt={dom:e,win:t,serializer:n,editor:o,expand:(me={type:"word"})=>j(Ia(e).expand(q(),me)),collapse:F,setCursorLocation:(me,Pe)=>{const ft=e.createRng();ve(me)&&ve(Pe)?(ft.setStart(me,Pe),ft.setEnd(me,Pe),j(ft),F(!1)):(tp(e,ft,o.getBody(),!0),j(ft))},getContent:me=>((e,t={})=>((e,t,n)=>vn(e).selection.getContent(t,n))(e,t.format?t.format:"html",t))(o,me),setContent:m,getBookmark:(me,Pe)=>Kn.getBookmark(me,Pe),moveToBookmark:me=>Kn.moveToBookmark(me),select:(me,Pe)=>(((e,t,n)=>T.from(t).bind(o=>T.from(o.parentNode).map(s=>{const r=e.nodeIndex(o),i=e.createRng();return i.setStart(s,r),i.setEnd(s,r+1),n&&(tp(e,i,o,!0),tp(e,i,o,!1)),i})))(e,me,Pe).each(j),me),isCollapsed:()=>{const me=q(),Pe=z();return!(!me||me.item)&&(me.compareEndPoints?0===me.compareEndPoints("StartToEnd",me):!Pe||me.collapsed)},isEditable:()=>{const me=q(),Pe=o.getBody().querySelectorAll('[data-mce-selected="1"]');return Pe.length>0?hs(Pe,ft=>e.isEditable(ft.parentElement)):me.startContainer===me.endContainer?e.isEditable(me.startContainer):e.isEditable(me.startContainer)&&e.isEditable(me.endContainer)},isForward:Q,setNode:me=>(m(e.getOuterHTML(me)),me),getNode:()=>((e,t)=>{if(!t)return e;let n=t.startContainer,o=t.endContainer;const s=t.startOffset,r=t.endOffset;let i=t.commonAncestorContainer;t.collapsed||(n===o&&r-s<2&&n.hasChildNodes()&&(i=n.childNodes[s]),fe(n)&&fe(o)&&(n=n.length===s?fC(n.nextSibling,!0):n.parentNode,o=0===r?fC(o.previousSibling,!1):o.parentNode,n&&n===o&&(i=n)));const a=fe(i)?i.parentNode:i;return we(a)?a:e})(o.getBody(),q()),getSel:z,setRng:j,getRng:q,getStart:me=>uC(o.getBody(),q(),me),getEnd:me=>dC(o.getBody(),q(),me),getSelectedBlocks:(me,Pe)=>((e,t,n,o)=>{const s=[],r=e.getRoot(),i=e.getParent(n||uC(r,t,t.collapsed),e.isBlock),a=e.getParent(o||dC(r,t,t.collapsed),e.isBlock);if(i&&i!==r&&s.push(i),i&&a&&i!==a){let c;const m=new mn(i,r);for(;(c=m.next())&&c!==a;)e.isBlock(c)&&s.push(c)}return a&&i!==a&&a!==r&&s.push(a),s})(e,q(),me,Pe),normalize:()=>{const me=q();if(!(e=>Qm(e).length>1)(z())&&cd(o)){const ft=hd(e,me);return ft.each(ct=>{j(ct,Q())}),ft.getOr(me)}return me},selectorChanged:(me,Pe)=>(i(me,Pe),Xt),selectorChangedWithUnbind:i,getScrollContainer:()=>{let me,Pe=e.getRoot();for(;Pe&&"BODY"!==Pe.nodeName;){if(Pe.scrollHeight>Pe.clientHeight){me=Pe;break}Pe=Pe.parentNode}return me},scrollIntoView:(me,Pe)=>{ve(me)?_P(o,me,Pe):Hc(o,q(),Pe)},placeCaretAt:(me,Pe)=>j(qy(me,Pe,o.getDoc())),getBoundingClientRect:()=>{const me=q();return me.collapsed?ee.fromRangeStart(me).getClientRects()[0]:me.getBoundingClientRect()},destroy:()=>{t=s=r=null,wn.destroy()}},Kn=Uc(Xt),wn=Fy(Xt,o);return Xt.bookmarkManager=Kn,Xt.controlSelection=wn,Xt},D$=(e,t,n)=>{-1===f.inArray(t,n)&&(e.addAttributeFilter(n,(o,s)=>{let r=o.length;for(;r--;)o[r].attr(s,null)}),t.push(n))},L$=(e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},s=t&&t.dom?t.dom:Ut.DOM,r=t&&t.schema?t.schema:Ri(o),i=Bl(o,r);return((e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(o,s)=>{let r=o.length;for(;r--;){const i=o[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(s,null)}}),e.addAttributeFilter("src,href,style",(o,s)=>{const r="data-mce-"+s,i=t.url_converter,a=t.url_converter_scope;let c=o.length;for(;c--;){const m=o[c];let v=m.attr(r);void 0!==v?(m.attr(s,v.length>0?v:null),m.attr(r,null)):(v=m.attr(s),"style"===s?v=n.serializeStyle(n.parseStyle(v),m.name):i&&(v=i.call(a,v,s,m.name)),m.attr(s,v.length>0?v:null))}}),e.addAttributeFilter("class",o=>{let s=o.length;for(;s--;){const r=o[s];let i=r.attr("class");i&&(i=i.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(o,s,r)=>{let i=o.length;for(;i--;){const a=o[i];"bookmark"===a.attr("data-mce-type")&&!r.cleanup&&(T.from(a.firstChild).exists(m=>{var v;return!$u(null!==(v=m.value)&&void 0!==v?v:"")})?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",o=>{var s;let r=o.length;for(;r--;){const i=o[r].firstChild;i&&(i.value=Ai.decode(null!==(s=i.value)&&void 0!==s?s:""))}}),e.addNodeFilter("script,style",(o,s)=>{var r;const i=c=>c.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let a=o.length;for(;a--;){const c=o[a],m=c.firstChild,v=null!==(r=null==m?void 0:m.value)&&void 0!==r?r:"";if("script"===s){const x=c.attr("type");x&&c.attr("type","mce-no/type"===x?null:x.replace(/^mce\-/,"")),"xhtml"===t.element_format&&m&&v.length>0&&(m.value="// <![CDATA[\n"+i(v)+"\n// ]]>")}else"xhtml"===t.element_format&&m&&v.length>0&&(m.value="\x3c!--\n"+i(v)+"\n--\x3e")}}),e.addNodeFilter("#comment",o=>{let s=o.length;for(;s--;){const r=o[s],i=r.value;t.preserve_cdata&&0===(null==i?void 0:i.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=n.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==i?void 0:i.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(i).substr(14))}}),e.addNodeFilter("xml:namespace,input",(o,s)=>{let r=o.length;for(;r--;){const i=o[r];7===i.type?i.remove():1===i.type&&"input"===s&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",o=>{re(o,s=>{"format-caret"===s.attr("data-mce-type")&&(s.isEmpty(e.schema.getNonEmptyElements())?s.remove():s.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(o,s)=>{let r=o.length;for(;r--;)o[r].attr(s,null)}),t.remove_trailing_brs&&dx(t,e,e.schema)})(i,o,s),{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(c,m={})=>{const v={format:"html",...m},x=((e,t,n)=>((e,t)=>ve(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,n)?((e,t,n)=>{let o;const s=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");f.each("BODY"===r.nodeName?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r="BODY"!==r.nodeName?a.body.firstChild:a.body,o=s.doc,s.doc=a}return((e,t)=>{e.dispatch("PreProcess",t)})(e,{...n,node:r}),o&&(s.doc=o),r})(e,t,n):t)(t,c,v),w=((e,t,n)=>{const o=Ws(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Fu(M_fromDom(t))?o:f.trim(o)})(s,x,v),D=((e,t,n)=>{const o=n.selection?{forced_root_block:!1,...n}:n,s=e.parse(t,o);return(e=>{const t=o=>"br"===(null==o?void 0:o.name),n=e.lastChild;if(t(n)){const o=n.prev;t(o)&&(n.remove(),o.remove())}})(s),s})(i,w,v);return"tree"===v.format?D:((e,t,n,o,s)=>{const r=((e,t,n)=>Bi(e,t).serialize(n))(t,n,o);return((e,t,n)=>!t.no_events&&e?((e,t)=>e.dispatch("PostProcess",t))(e,{...t,content:n}).content:n)(e,s,r)})(t,o,r,D,v)},addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:Te(D$,i,n),getTempAttrs:Ce(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},tE=(e,t)=>{const n=L$(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Mg=(e,t,n={})=>{const o=((e,t)=>({format:"html",...e,set:!0,content:t}))(n,t);return Sg(e,o).map(s=>{const r=((e,t,n)=>Og(e).editor.setContent(t,n))(e,s.content,s);return _g(e,r.html,s),r.content}).getOr(t)},q$="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),W$="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),j$="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),nE=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],oE=(e,t)=>{const n=Ve(t,o=>Ge(e,o));return Tn(n)},sE=(e,t)=>{const n=f.makeMap(e.plugins," "),s=Ve(t,r=>Ge(n,r));return Tn(s)},J$=e=>Jt(nE,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),Fd=Ut.DOM,$d=e=>T.from(e).each(t=>t.destroy()),Ud=(()=>{const e={};return{add:(s,r)=>{e[s]=r},get:s=>e[s]?e[s]:{icons:{}},has:s=>Ge(e,s)}})(),Ll=po.ModelManager,rE=(e,t)=>t.dom[e],iE=(e,t)=>parseInt(Ss(t,e),10),r2=Te(rE,"clientWidth"),i2=Te(rE,"clientHeight"),a2=Te(iE,"margin-top"),l2=Te(iE,"margin-left"),aE=e=>{const t=[],n=()=>{const w=e.theme;return w&&w.getNotificationManagerImpl?w.getNotificationManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},o=()=>T.from(t[0]),r=()=>{re(t,w=>{w.reposition()})},a=w=>{Ze(t,D=>D===w).each(D=>{t.splice(D,1)})},c=(w,D=!0)=>e.removed||!(e=>(e=>T.from(e).map(M_fromDom))(e.inline?e.getBody():e.getContentAreaContainer()).map(xi).getOr(!1))(e)?{}:(D&&e.dispatch("BeforeOpenNotification",{notification:w}),Jt(t,O=>((w,D)=>!(w.type!==D.type||w.text!==D.text||w.progressBar||w.timeout||D.progressBar||D.timeout))(n().getArgs(O),w)).getOrThunk(()=>{e.editorManager.setActive(e);const O=n().open(w,()=>{a(O),r(),o().fold(()=>e.focus(),A=>nC(M_fromDom(A.getEl())))});return(w=>{t.push(w)})(O),r(),e.dispatch("OpenNotification",{notification:{...O}}),O})),v=Ce(t);return(w=e).on("SkinLoaded",()=>{const D=JN(w);D&&c({text:D,type:"warning",timeout:0},!1),r()}),w.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),w.on("remove",()=>{re(t.slice(),D=>{n().close(D)})}),{open:c,close:()=>{o().each(w=>{n().close(w),a(w),r()})},getNotifications:v};var w},Fl=po.PluginManager,qa=po.ThemeManager,lE=e=>{let t=[];const n=()=>{const A=e.theme;return A&&A.getWindowManagerImpl?A.getWindowManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},o=(A,P)=>(...F)=>P?P.apply(A,F):void 0,a=A=>{(A=>{e.dispatch("CloseWindow",{dialog:A})})(A),t=Ve(t,P=>P!==A),0===t.length&&e.focus()},m=A=>{e.editorManager.setActive(e),yp(e),e.ui.show();const P=A();return(A=>{t.push(A),(A=>{e.dispatch("OpenWindow",{dialog:A})})(A)})(P),P};return e.on("remove",()=>{re(t,A=>{n().close(A)})}),{open:(A,P)=>m(()=>n().open(A,P,a)),openUrl:A=>m(()=>n().openUrl(A,a)),alert:(A,P,F)=>{const z=n();z.alert(A,o(F||z,P))},confirm:(A,P,F)=>{const z=n();z.confirm(A,o(F||z,P))},close:()=>{T.from(t[t.length-1]).each(A=>{n().close(A),a(A)})}}},cE=(e,t)=>{e.notificationManager.open({type:"error",text:t})},zd=(e,t)=>{e._skinLoaded?cE(e,t):e.on("SkinLoaded",()=>{cE(e,t)})},Qc=(e,t,n)=>{Dy(e,t,{message:n}),console.error(n)},Xc=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Hd=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},uE=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",s=`content${e.editorManager.suffix}.css`;return pt(t,r=>(e=>/^[a-z0-9\-]+$/i.test(e))(r)&&!e.inline?`${n}/${r}/${s}`:e.documentBaseURI.toAbsolute(r))},A2=(e,t)=>{const n={};return{findAll:(s,r=an)=>{const i=Ve((e=>e?Jn(e.getElementsByTagName("img")):[])(s),c=>{const m=c.src;return!(c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!m||m===gt.transparentSrc)&&(yn(m,"blob:")?!e.isUploaded(m)&&r(c):!!yn(m,"data:")&&r(c))}),a=pt(i,c=>{const m=c.src;if(Ge(n,m))return n[m].then(v=>Fe(v)?v:{image:c,blobInfo:v.blobInfo});{const v=((e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(yn(t,"blob:")){const o=e.getByUri(t);return ve(o)?Promise.resolve(o):(e=>yn(e,"blob:")?(e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(e):yn(e,"data:")?(e=>new Promise((t,n)=>{pg(e).bind(({type:o,data:s,base64Encoded:r})=>fx(o,s,r)).fold(()=>n("Invalid data URI"),t)}))(e):Promise.reject("Unknown URI format"))(t).then(s=>mx(s).then(r=>px(r,!1,i=>T.some(gx(e,s,i))).getOrThunk(n)))}return yn(t,"data:")?hx(e,t).fold(n,o=>Promise.resolve(o)):Promise.reject("Unknown image data format")})(t,m).then(x=>(delete n[m],{image:c,blobInfo:x})).catch(x=>(delete n[m],x));return n[m]=v,v}});return Promise.all(a)}}},dE=()=>{let n={};const o=(w,D)=>({status:w,resultUri:D}),s=w=>w in n;return{hasBlobUri:s,getResultUri:w=>{const D=n[w];return D?D.resultUri:null},isPending:w=>!!s(w)&&1===n[w].status,isUploaded:w=>!!s(w)&&2===n[w].status,markPending:w=>{n[w]=o(1,null)},markUploaded:(w,D)=>{n[w]=o(2,D)},removeFailed:w=>{delete n[w]},destroy:()=>{n={}}}};let R2=0;const M2=(e,t)=>{const n={},s=(A,P)=>new Promise((F,z)=>{const q=new XMLHttpRequest;q.open("POST",t.url),q.withCredentials=t.credentials,q.upload.onprogress=ae=>{P(ae.loaded/ae.total*100)},q.onerror=()=>{z("Image upload failed due to a XHR Transport error. Code: "+q.status)},q.onload=()=>{if(q.status<200||q.status>=300)return void z("HTTP Error: "+q.status);const ae=JSON.parse(q.responseText);ae&&Fe(ae.location)?F(((A,P)=>A?A.replace(/\/$/,"")+"/"+P.replace(/^\//,""):P)(t.basePath,ae.location)):z("Invalid JSON: "+q.responseText)};const j=new FormData;j.append("file",A.blob(),A.filename()),q.send(j)}),r=St(t.handler)?t.handler:s,a=(A,P)=>({url:P,blobInfo:A,status:!0}),c=(A,P)=>({url:"",blobInfo:A,status:!1,error:P}),m=(A,P)=>{f.each(n[A],F=>{F(P)}),delete n[A]};return{upload:(A,P)=>!t.url&&(A=>A===s)(r)?new Promise(A=>{A([])}):((A,P)=>(A=f.grep(A,F=>!e.isUploaded(F.blobUri())),Promise.all(f.map(A,F=>e.isPending(F.blobUri())?(A=>{const P=A.blobUri();return new Promise(F=>{n[P]=n[P]||[],n[P].push(F)})})(F):((A,P,F)=>(e.markPending(A.blobUri()),new Promise(z=>{let q,j;try{const ae=()=>{q&&(q.close(),j=et)},be=Q=>{ae(),e.markUploaded(A.blobUri(),Q),m(A.blobUri(),a(A,Q)),z(a(A,Q))},ye=Q=>{ae(),e.removeFailed(A.blobUri()),m(A.blobUri(),c(A,Q)),z(c(A,Q))};j=Q=>{Q<0||Q>100||T.from(q).orThunk(()=>T.from(F).map(oi)).each(K=>{q=K,K.progressBar.value(Q)})},P(A,j).then(be,Q=>{ye(Fe(Q)?{message:Q}:Q)})}catch(ae){z(c(A,ae))}})))(F,r,P)))))(A,P)}},fE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),mE=(e,t)=>M2(t,{url:FN(e),basePath:$N(e),credentials:UN(e),handler:zN(e)}),F2=e=>{const t=(()=>{let e=[];const t=x=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[x.toLowerCase()]||"dat"),o=x=>{if(!x.blob||!x.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const w=x.id||(e=>e+R2+++(()=>{const e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})())("blobid"),D=x.name||w,O=x.blob;return{id:Ce(w),name:Ce(D),filename:Ce(x.filename||D+"."+t(O.type)),blob:Ce(O),base64:Ce(x.base64),blobUri:Ce(x.blobUri||URL.createObjectURL(O)),uri:Ce(x.uri)}},r=x=>Jt(e,x).getOrUndefined(),i=x=>r(w=>w.id()===x);return{create:(x,w,D,O,A)=>{if(Fe(x))return o({id:x,name:O,filename:A,blob:w,base64:D});if(cn(x))return o(x);throw new Error("Unknown input type")},add:x=>{i(x.id())||e.push(x)},get:i,getByUri:x=>r(w=>w.blobUri()===x),getByData:(x,w)=>r(D=>D.base64()===x&&D.blob().type===w),findFirst:r,removeByUri:x=>{e=Ve(e,w=>w.blobUri()!==x||(URL.revokeObjectURL(w.blobUri()),!1))},destroy:()=>{re(e,x=>{URL.revokeObjectURL(x.blobUri())}),e=[]}}})();let n,o;const s=dE(),r=[],i=q=>j=>e.selection?q(j):[],a=q=>q+(-1===q.indexOf("?")?"?":"&")+(new Date).getTime(),c=(q,j,ae)=>{let be=0;do{be=q.indexOf(j,be),-1!==be&&(q=q.substring(0,be)+ae+q.substr(be+j.length),be+=ae.length-j.length+1)}while(-1!==be);return q},m=(q,j,ae)=>(q=c(q,`src="${j}"`,`src="${ae}"${ae===gt.transparentSrc?' data-mce-placeholder="1"':""}`),c(q,'data-mce-src="'+j+'"','data-mce-src="'+ae+'"')),v=(q,j)=>{re(e.undoManager.data,ae=>{"fragmented"===ae.type?ae.fragments=pt(ae.fragments,be=>m(be,q,j)):ae.content=m(ae.content,q,j)})},w=()=>(n||(n=mE(e,s)),P().then(i(q=>{const j=pt(q,ae=>ae.blobInfo);return n.upload(j,fE(e)).then(i(ae=>{const be=[];let ye=!1;const Q=pt(ae,(K,ce)=>{const{blobInfo:De,image:Ie}=q[ce];let Ke=!1;return K.status&&BN(e)?(K.url&&!Sn(Ie.src,K.url)&&(ye=!0),t.removeByUri(Ie.src),yr(e)||((q,j)=>{const ae=e.convertURL(j,"src");v(q.src,j),Ln(M_fromDom(q),{src:Sv(e)?a(j):j,"data-mce-src":ae})})(Ie,K.url)):K.error&&(K.error.remove&&(v(Ie.src,gt.transparentSrc),be.push(Ie),Ke=!0),((e,t)=>{zd(e,Vs.translate(["Failed to upload image: {0}",t]))})(e,K.error.message)),{element:Ie,status:K.status,uploadUri:K.url,blobInfo:De,removed:Ke}});return be.length>0&&!yr(e)?e.undoManager.transact(()=>{re(d(be),K=>{const ce=Je(K);qt(K),ce.each((e=>t=>{((e,t)=>e.dom.isEmpty(t.dom)&&ve(e.schema.getTextBlockElements()[Rt(t)]))(e,t)&&fn(t,M_fromHtml('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(K.dom.src)})}):ye&&e.undoManager.dispatchChange(),Q}))}))),D=()=>wv(e)?w():Promise.resolve([]),O=q=>hs(r,j=>j(q)),P=()=>(o||(o=A2(s,t)),o.findAll(e.getBody(),O).then(i(q=>{const j=Ve(q,ae=>Fe(ae)?(zd(e,ae),!1):"blob"!==ae.uriType);return yr(e)||re(j,ae=>{v(ae.image.src,ae.blobInfo.blobUri()),ae.image.src=ae.blobInfo.blobUri(),ae.image.removeAttribute("data-mce-src")}),j}))),z=q=>q.replace(/src="(blob:[^"]+)"/g,(j,ae)=>{const be=s.getResultUri(ae);if(be)return'src="'+be+'"';let ye=t.getByUri(ae);return ye||(ye=nn(e.editorManager.get(),(Q,K)=>Q||K.editorUpload&&K.editorUpload.blobCache.getByUri(ae),void 0)),ye?'src="data:'+ye.blob().type+";base64,"+ye.base64()+'"':j});return e.on("SetContent",()=>{wv(e)?D():P()}),e.on("RawSaveContent",q=>{q.content=z(q.content)}),e.on("GetContent",q=>{q.source_view||"raw"===q.format||"tree"===q.format||(q.content=z(q.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",q=>{re(q,j=>{const ae=j.attr("src");if(!ae||t.getByUri(ae))return;const be=s.getResultUri(ae);be&&j.attr("src",be)})})}),{blobCache:t,addFilter:q=>{r.push(q)},uploadImages:w,uploadImagesAuto:D,scanForImages:P,destroy:()=>{t.destroy(),s.destroy(),o=n=null}}},pE={remove_similar:!0,inherit:!1},$l={selector:"td,th",...pE},U2={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...$l},tablecellverticalalign:{styles:{"vertical-align":"%value"},...$l},tablecellbordercolor:{styles:{borderColor:"%value"},...$l},tablecellclass:{classes:["%value"],...$l},tableclass:{selector:"table",classes:["%value"],...pE},tablecellborderstyle:{styles:{borderStyle:"%value"},...$l},tablecellborderwidth:{styles:{borderWidth:"%value"},...$l}},z2=Ce(U2),qd=f.each,us=Ut.DOM,Ig=e=>ve(e)&&cn(e),gE=(e,t)=>{const n=t&&t.schema||Ri({}),s=c=>{const m=Fe(c)?{name:c,classes:[],attrs:{}}:c,v=us.create(m.name);return((c,m)=>{m.classes.length>0&&us.addClass(c,m.classes.join(" ")),us.setAttribs(c,m.attrs)})(v,m),v},i=(c,m,v)=>{let x;const w=m[0],D=Ig(w)?w.name:void 0,O=((c,m)=>{const v=n.getElementRule(c.nodeName.toLowerCase()),x=null==v?void 0:v.parentsRequired;return!(!x||!x.length)&&(m&&kt(x,m)?m:x[0])})(c,D);if(O)D===O?(x=w,m=m.slice(1)):x=O;else if(w)x=w,m=m.slice(1);else if(!v)return c;const A=x?s(x):us.create("div");A.appendChild(c),v&&f.each(v,F=>{const z=s(F);A.insertBefore(z,c)});const P=Ig(x)?x.siblings:void 0;return i(A,m,P)},a=us.create("div");if(e.length>0){const c=e[0],m=s(c),v=Ig(c)?c.siblings:void 0;a.appendChild(i(m,e.slice(1),v))}return a},q2=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=f.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,s,r,i,a)=>{switch(s){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==f.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},j2=(e,t)=>{let n="",o=tA(e);if(""===o)return"";const s=w=>Fe(w)?w.replace(/%(\w+)/g,""):"",r=(w,D)=>us.getStyle(null!=D?D:e.getBody(),w,!0);if(Fe(t)){const w=e.formatter.get(t);if(!w)return"";t=w[0]}if("preview"in t){const w=t.preview;if(!1===w)return"";o=w||o}let a,i=t.block||t.inline||"span";const c=(e=>Fe(e)?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),f.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=f.map(t.split(/(?:~\+|~|\+)/),q2),o=n.pop();return n.length&&(o.siblings=n),o}).reverse()):[])(t.selector);c.length>0?(c[0].name||(c[0].name=i),i=t.selector,a=gE(c,e)):a=gE([i],e);const m=us.select(i,a)[0]||a.firstChild;qd(t.styles,(w,D)=>{const O=s(w);O&&us.setStyle(m,D,O)}),qd(t.attributes,(w,D)=>{const O=s(w);O&&us.setAttrib(m,D,O)}),qd(t.classes,w=>{const D=s(w);us.hasClass(m,D)||us.addClass(m,D)}),e.dispatch("PreviewFormats"),us.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const v=r("fontSize"),x=/px$/.test(v)?parseInt(v,10):0;return qd(o.split(" "),w=>{let D=r(w,m);if(!("background-color"===w&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(D)&&(D=r(w),"#ffffff"===ld(D).toLowerCase())||"color"===w&&"#000000"===ld(D).toLowerCase())){if("font-size"===w&&/em|%$/.test(D)){if(0===x)return;D=parseFloat(D)/(/%$/.test(D)?100:1)*x+"px"}"border"===w&&D&&(n+="padding:0 2px;"),n+=w+":"+D+";"}}),e.dispatch("AfterPreviewFormats"),us.remove(a),n},hE=e=>{const t=(e=>{const t={},s=(i,a)=>{i&&(Fe(i)?(gn(a)||(a=[a]),re(a,c=>{dt(c.deep)&&(c.deep=!as(c)),dt(c.split)&&(c.split=!as(c)||Dn(c)),dt(c.remove)&&as(c)&&!Dn(c)&&(c.remove="none"),as(c)&&Dn(c)&&(c.mixed=!0,c.block_expand=!0),Fe(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):Nt(i,(c,m)=>{s(m,c)}))};return s((e=>{const t=e.dom,n=e.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:s=>{t.setStyle(s,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:s=>{t.setStyle(s,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const s={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[i,s,r]:[s,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(s,r,i)=>we(s)&&s.hasAttribute("href"),onformat:(s,r,i)=>{f.each(i,(a,c)=>{t.setAttrib(s,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":s=>{var r;return null!==(r=null==s?void 0:s.customValue)&&void 0!==r?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return f.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),s=>{o[s]={block:s,remove:"all"}}),o})(e)),s(z2()),s(eA(e)),{get:i=>ve(i)?t[i]:t,has:i=>Ge(t,i),register:s,unregister:i=>(i&&t[i]&&delete t[i],t)}})(e),n=zn({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(e=>{e.on("mouseup keydown",t=>{((e,t,n)=>{const o=e.selection,s=e.getBody();lg(e,null,n),(8===t||46===t)&&o.isCollapsed()&&o.getStart().innerHTML===Il&&lg(e,Da(s,o.getStart())),(37===t||39===t)&&lg(e,Da(s,o.getStart()))})(e,t.keyCode,(e=>fe(e)&&ci(e.data,Un))(e.selection.getRng().endContainer))})})(e),yr(e)||((e,t)=>{e.set({}),t.on("NodeChange",n=>{lx(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const o=T.from(n.node).map(s=>Fc(s)?s:s.startContainer).bind(s=>we(s)?T.some(s):T.from(s.parentElement)).getOrThunk(()=>rx(t));lx(t,o,e.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,s,r)=>{((e,t,n,o)=>{vn(e).formatter.apply(t,n,o)})(e,o,s,r)},remove:(o,s,r,i)=>{((e,t,n,o,s)=>{vn(e).formatter.remove(t,n,o,s)})(e,o,s,r,i)},toggle:(o,s,r)=>{((e,t,n,o)=>{vn(e).formatter.toggle(t,n,o)})(e,o,s,r)},match:(o,s,r,i)=>((e,t,n,o,s)=>vn(e).formatter.match(t,n,o,s))(e,o,s,r,i),closest:o=>((e,t)=>vn(e).formatter.closest(t))(e,o),matchAll:(o,s)=>((e,t,n)=>vn(e).formatter.matchAll(t,n))(e,o,s),matchNode:(o,s,r,i)=>((e,t,n,o,s)=>vn(e).formatter.matchNode(t,n,o,s))(e,o,s,r,i),canApply:o=>((e,t)=>vn(e).formatter.canApply(t))(e,o),formatChanged:(o,s,r,i)=>((e,t,n,o,s,r)=>vn(e).formatter.formatChanged(t,n,o,s,r))(e,n,o,s,r,i),getCssText:Te(j2,e)}},bE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},vE=e=>{const t=Di(),n=zn(0),o=zn(0),s={data:[],typing:!1,beforeChange:()=>{((e,t,n)=>{vn(e).undoManager.beforeChange(t,n)})(e,n,t)},add:(r,i)=>((e,t,n,o,s,r,i)=>vn(e).undoManager.add(t,n,o,s,r,i))(e,s,o,n,t,r,i),dispatchChange:()=>{e.setDirty(!0);const r=Bd(e);r.bookmark=Im(e.selection),e.dispatch("change",{level:r,lastLevel:Mn(s.data,o.get()).getOrUndefined()})},undo:()=>((e,t,n,o)=>vn(e).undoManager.undo(t,n,o))(e,s,n,o),redo:()=>((e,t,n)=>vn(e).undoManager.redo(t,n))(e,o,s.data),clear:()=>{((e,t,n)=>{vn(e).undoManager.clear(t,n)})(e,s,o)},reset:()=>{((e,t)=>{vn(e).undoManager.reset(t)})(e,s)},hasUndo:()=>((e,t,n)=>vn(e).undoManager.hasUndo(t,n))(e,s,o),hasRedo:()=>((e,t,n)=>vn(e).undoManager.hasRedo(t,n))(e,s,o),transact:r=>((e,t,n,o)=>vn(e).undoManager.transact(t,n,o))(e,s,n,r),ignore:r=>{((e,t,n)=>{vn(e).undoManager.ignore(t,n)})(e,n,r)},extra:(r,i)=>{((e,t,n,o,s)=>{vn(e).undoManager.extra(t,n,o,s)})(e,s,o,r,i)}};return yr(e)||((e,t,n)=>{const o=zn(!1),s=c=>{Ld(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{bE(c.command)||(Zx(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{bE(c.command)||s(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",s),e.on("dragend",s),e.on("keyup",c=>{const m=c.keyCode;if(c.isDefaultPrevented())return;const v=gt.os.isMacOS()&&"Meta"===c.key;(m>=33&&m<=36||m>=37&&m<=40||45===m||c.ctrlKey||v)&&(s(),e.nodeChanged()),(46===m||8===m)&&e.nodeChanged(),o.get()&&t.typing&&!Dg(Bd(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),o.set(!1),e.nodeChanged())}),e.on("keydown",c=>{const m=c.keyCode;if(!c.isDefaultPrevented()){if(!(m>=33&&m<=36||m>=37&&m<=40||45===m))return!(m<16||m>20)||224===m||91===m||t.typing||c.ctrlKey&&!c.altKey||c.metaKey?void((gt.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&t.beforeChange()):(t.beforeChange(),Ld(t,!0,n),t.add({},c),void o.set(!0));t.typing&&s(c)}}),e.on("mousedown",c=>{t.typing&&s(c)}),e.on("input",c=>{c.inputType&&((c=>"insertReplacementText"===c.inputType)(c)||(c=>"insertText"===c.inputType&&null===c.data)(c)||(c=>"insertFromPaste"===c.inputType||"insertFromDrop"===c.inputType)(c))&&s(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})})(e,s,n),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),s},Y2=[9,27,Ee.HOME,Ee.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ee.DOWN,Ee.UP,Ee.LEFT,Ee.RIGHT].concat(gt.browser.isFirefox()?[224]:[]),yE="data-mce-placeholder",CE=e=>"keydown"===e.type||"keyup"===e.type,xE=e=>{const t=e.keyCode;return t===Ee.BACKSPACE||t===Ee.DELETE},tU=(e,t)=>({from:e,to:t}),Bg=(e,t)=>{const n=M_fromDom(e),o=M_fromDom(t.container());return wd(n,o).map(s=>((e,t)=>({block:e,position:t}))(s,t))},EE=(e,t)=>Hr(t,s=>pc(s)||qs(s.dom),s=>ne(s,e)).filter(on).getOr(e),wE=e=>{const t=(e=>{const t=Vt(e);return Ze(t,os).fold(Ce(t),n=>t.slice(0,n))})(e);return re(t,qt),t},SE=(e,t)=>{const n=Jr(t,e);return Jt(n.reverse(),o=>En(o)).each(qt)},dU=(e,t,n,o)=>{if(En(n))return Ti(n),io(n.dom);(e=>0===Ve(Fn(e),t=>!En(t)).length)(o)&&En(t)&&mo(o,M_fromTag("br"));const s=Bo(n.dom,ee.before(o.dom));return re(wE(t),r=>{mo(o,r)}),SE(e,t),s},fU=(e,t,n)=>{if(En(n)){if(En(t)){const r=Nr((i=>{const a=(c,m)=>$n(c).fold(()=>m,v=>Lu(v)?a(v,m.concat(_a(v))):m);return a(i,[])})(n),(i,a)=>(Mu(i,a),a),gc());Ei(t),fn(t,r)}return qt(n),io(t.dom)}const o=Ts(n.dom);return re(wE(t),s=>{fn(n,s)}),SE(e,t),o},_E=(e,t)=>{Nl(e,t.dom).bind(n=>T.from(n.getNode())).map(M_fromDom).filter(Ca).each(qt)},TE=(e,t,n)=>(_E(!0,t),_E(!1,n),((e,t)=>_e(t,e)?((e,t)=>{const n=Jr(t,e);return T.from(n[n.length-1])})(t,e):T.none())(t,n).fold(Te(fU,e,t,n),Te(dU,e,t,n))),kE=(e,t,n,o)=>t?TE(e,o,n):TE(e,n,o),Lg=(e,t)=>{const n=M_fromDom(e.getBody());return((e,t,n)=>n.collapsed?((e,t,n)=>{const o=Bg(e,ee.fromRangeStart(n)),s=o.bind(r=>rs(t,e,r.position).bind(i=>Bg(e,i).map(a=>((e,t,n)=>ln(n.position.getNode())&&!En(n.block)?Nl(!1,n.block.dom).bind(o=>o.isEqual(n.position)?rs(t,e,o).bind(s=>Bg(e,s)):T.some(n)).getOr(n):n)(e,t,a))));return N(o,s,tU).filter(r=>(e=>!ne(e.from.block,e.to.block))(r)&&((e,t)=>{const n=M_fromDom(e);return ne(EE(n,t.from.block),EE(n,t.to.block))})(e,r)&&(e=>!1===Zt(e.from.block.dom)&&!1===Zt(e.to.block.dom))(r)&&(e=>{const t=n=>ib(n)||fm(n.dom);return t(e.from.block)&&t(e.to.block)})(r))})(e,t,n):T.none())(n.dom,t,e.selection.getRng()).map(s=>()=>{kE(n,t,s.from.block,s.to.block).each(r=>{e.selection.setRng(r.toRange())})})},NE=(e,t)=>{const n=M_fromDom(t),o=Te(ne,e);return Fs(n,pc,o).isSome()},yU=e=>{const t=M_fromDom(e.getBody());return((e,t)=>{const n=Bo(e.dom,ee.fromRangeStart(t)).isNone(),o=So(e.dom,ee.fromRangeEnd(t)).isNone();return!((e,t)=>NE(e,t.startContainer)||NE(e,t.endContainer))(e,t)&&n&&o})(t,e.selection.getRng())?(e=>T.some(()=>{e.setContent(""),e.selection.setCursorLocation()}))(e):((e,t)=>{const n=t.getRng();return N(wd(e,M_fromDom(n.startContainer)),wd(e,M_fromDom(n.endContainer)),(o,s)=>ne(o,s)?T.none():T.some(()=>{n.deleteContents(),kE(e,!0,o,s).each(r=>{t.setRng(r.toRange())})})).getOr(T.none())})(t,e.selection)},Fg=(e,t)=>e.selection.isCollapsed()?T.none():yU(e),Qr=(e,t,n,o,s)=>T.from(t._selectionOverrides.showCaret(e,n,o,s)),eu=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?T.none():T.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),$g=(e,t,n)=>t.collapsed?((e,t,n)=>{const o=Wm(1,e.getBody(),t),s=ee.fromRangeStart(o),r=s.getNode();if(Dc(r))return Qr(1,e,r,!s.isAtEnd(),!1);const i=s.getNode(!0);if(Dc(i))return Qr(1,e,i,!1,!1);const a=$a(e.dom.getRoot(),s.getNode());return Dc(a)?Qr(1,e,a,!1,n):T.none()})(e,t,n).getOr(t):t,EU=e=>Fi(e)||qc(e),wU=e=>$i(e)||Wc(e),AE=(e,t,n,o,s,r)=>{Qr(o,e,r.getNode(!s),s,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();s?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),((e,t)=>{fe(t)&&0===t.data.length&&e.remove(t)})(e.dom,n)},Ug=(e,t)=>((e,t)=>{const n=e.selection.getRng();if(!fe(n.commonAncestorContainer))return T.none();const o=t?Gn.Forwards:Gn.Backwards,s=gr(e.getBody()),r=Te(jm,t?s.next:s.prev),i=t?EU:wU,a=Bc(o,e.getBody(),n),c=r(a),m=c&&cs(t,c);if(!m||!sd(a,m))return T.none();if(i(m))return T.some(()=>AE(e,n,a.getNode(),o,t,m));const v=r(m);return v&&i(v)&&sd(m,v)?T.some(()=>AE(e,n,a.getNode(),o,t,v)):T.none()})(e,t),zg=(e,t)=>{const n=e.getBody();return t?io(n).filter(Fi):Ts(n).filter($i)},Hg=e=>{const t=e.selection.getRng();return!t.collapsed&&(zg(e,!0).exists(n=>n.isEqual(ee.fromRangeStart(t)))||zg(e,!1).exists(n=>n.isEqual(ee.fromRangeEnd(t))))},Zo=fr_generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),DE=(e,t,n)=>rs(t,e,n).bind(o=>(e=>ve(e)&&(pc(M_fromDom(e))||mc(M_fromDom(e))))(o.getNode())||((e,t,n,o)=>{const s=r=>Lu(M_fromDom(r))&&!mr(n,o,e);return Gv(!t,n).fold(()=>Gv(t,o).fold(jt,s),s)})(e,t,n,o)?T.none():t&&Zt(o.getNode())||!t&&Zt(o.getNode(!0))?((e,t,n,o)=>{const s=o.getNode(!t);return wd(M_fromDom(e),M_fromDom(n.getNode())).map(r=>En(r)?Zo.remove(r.dom):Zo.moveToElement(s)).orThunk(()=>T.some(Zo.moveToElement(s)))})(e,t,n,o):t&&$i(n)||!t&&Fi(n)?T.some(Zo.moveToPosition(o)):T.none()),PE=(e,t)=>T.from($a(e.getBody(),t)),BU=(e,t)=>{const n=e.selection.getNode();return PE(e,n).filter(Zt).fold(()=>((e,t,n)=>{const o=Wm(t?1:-1,e,n),s=ee.fromRangeStart(o),r=M_fromDom(e);return!t&&$i(s)?T.some(Zo.remove(s.getNode(!0))):t&&Fi(s)?T.some(Zo.remove(s.getNode())):!t&&Fi(s)&&Op(r,s)?BO(r,s).map(i=>Zo.remove(i.getNode())):t&&$i(s)&&Pp(r,s)?LO(r,s).map(i=>Zo.remove(i.getNode())):((e,t,n)=>((e,t)=>{const n=t.getNode(!e),o=e?"after":"before";return we(n)&&n.getAttribute("data-mce-caret")===o})(t,n)?((e,t)=>Gt(t)?T.none():e&&Zt(t.nextSibling)?T.some(Zo.moveToElement(t.nextSibling)):!e&&Zt(t.previousSibling)?T.some(Zo.moveToElement(t.previousSibling)):T.none())(t,n.getNode(!t)).orThunk(()=>DE(e,t,n)):DE(e,t,n).bind(o=>((e,t,n)=>n.fold(o=>T.some(Zo.remove(o)),o=>T.some(Zo.moveToElement(o)),o=>mr(t,o,e)?T.none():T.some(Zo.moveToPosition(o))))(e,n,o)))(e,t,s)})(e.getBody(),t,e.selection.getRng()).map(o=>()=>o.fold(((e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),La(e,t,M_fromDom(n)),!0))(e,t),((e,t)=>n=>{const o=t?ee.before(n):ee.after(n);return e.selection.setRng(o.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))),()=>T.some(et))},OE=e=>{const t=e.dom,n=e.selection,o=$a(e.getBody(),n.getNode());if(qs(o)&&t.isBlock(o)&&t.isEmpty(o)){const s=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(s),n.setRng(ee.before(s).toRange())}return!0},qg=(e,t)=>e.selection.isCollapsed()?BU(e,t):((e,t)=>{const n=e.selection.getNode();return Zt(n)&&!Iu(n)?PE(e,n.parentNode).filter(Zt).fold(()=>T.some(()=>{(e=>{re(bn(e,".mce-offscreen-selection"),qt)})(M_fromDom(e.getBody())),La(e,t,M_fromDom(e.selection.getNode())),$p(e)}),()=>T.some(et)):Hg(e)?T.some(()=>{r0(e,e.selection.getRng(),M_fromDom(e.getBody()))}):T.none()})(e,t),Wg=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=ee.fromRangeStart(e.selection.getRng());return rs(t,e.getBody(),n).filter(o=>t?AO(o):RO(o)).bind(o=>qm(t?0:-1,o)).map(o=>()=>e.selection.select(o))})(e,t):T.none(),Ul=fe,ME=e=>Ul(e)&&e.data[0]===Zn,IE=e=>Ul(e)&&e.data[e.data.length-1]===Zn,BE=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Zn)},Wd=(e,t)=>e?(e=>{var t;if(Ul(e.previousSibling))return IE(e.previousSibling)||e.previousSibling.appendData(Zn),e.previousSibling;if(Ul(e))return ME(e)||e.insertData(0,Zn),e;{const n=BE(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e),n}})(t):(e=>{var t,n;if(Ul(e.nextSibling))return ME(e.nextSibling)||e.nextSibling.insertData(0,Zn),e.nextSibling;if(Ul(e))return IE(e)||e.appendData(Zn),e;{const o=BE(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(o,e.nextSibling):null===(n=e.parentNode)||void 0===n||n.appendChild(o),o}})(t),HU=Te(Wd,!0),qU=Te(Wd,!1),LE=(e,t)=>fe(e.container())?Wd(t,e.container()):Wd(t,e.getNode()),FE=(e,t)=>{const n=t.get();return n&&e.container()===n&&ki(n)},jg=(e,t)=>t.fold(n=>{Aa(e.get());const o=HU(n);return e.set(o),T.some(ee(o,o.length-1))},n=>io(n).map(o=>{if(FE(o,e)){const s=e.get();return ee(s,1)}{Aa(e.get());const s=LE(o,!0);return e.set(s),ee(s,1)}}),n=>Ts(n).map(o=>{if(FE(o,e)){const s=e.get();return ee(s,s.length-1)}{Aa(e.get());const s=LE(o,!1);return e.set(s),ee(s,s.length-1)}}),n=>{Aa(e.get());const o=qU(n);return e.set(o),T.some(ee(o,1))}),$E=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return T.none()},go=fr_generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),UE=(e,t)=>Mi(t,e)||e,WU=(e,t,n)=>{const o=e0(n),s=UE(t,o.container());return Ui(e,s,o).fold(()=>So(s,o).bind(Te(Ui,e,s)).map(r=>go.before(r)),T.none)},jU=(e,t)=>null===Da(e,t),zE=(e,t,n)=>Ui(e,t,n).filter(Te(jU,t)),VU=(e,t,n)=>{const o=t0(n);return zE(e,t,o).bind(s=>Bo(s,o).isNone()?T.some(go.start(s)):T.none())},ZU=(e,t,n)=>{const o=e0(n);return zE(e,t,o).bind(s=>So(s,o).isNone()?T.some(go.end(s)):T.none())},GU=(e,t,n)=>{const o=t0(n),s=UE(t,o.container());return Ui(e,s,o).fold(()=>Bo(s,o).bind(Te(Ui,e,s)).map(r=>go.after(r)),T.none)},HE=e=>!XC(Vg(e)),Cr=(e,t,n)=>$E([WU,VU,ZU,GU],[e,t,n]).filter(HE),Vg=e=>e.fold(rn,rn,rn,rn),qE=e=>e.fold(Ce("before"),Ce("start"),Ce("end"),Ce("after")),jd=e=>e.fold(go.before,go.before,go.after,go.after),Zg=e=>e.fold(go.start,go.start,go.end,go.end),KU=(e,t,n,o,s,r)=>N(Ui(t,n,o),Ui(t,n,s),(i,a)=>i!==a&&((e,t,n)=>{const o=Mi(t,e),s=Mi(n,e);return ve(o)&&o===s})(n,i,a)?go.after(e?i:a):r).getOr(r),JU=(e,t)=>e.fold(an,n=>!((e,t)=>qE(e)===qE(t)&&Vg(e)===Vg(t))(n,t)),XU=(e,t)=>e?t.fold(gs(T.some,go.start),T.none,gs(T.some,go.after),T.none):t.fold(T.none,gs(T.some,go.before),T.none,gs(T.some,go.end)),WE=(e,t,n)=>{const o=e?1:-1;return t.setRng(ee(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Xr=function(e){return e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol",e}(Xr||{});const Vd=(e,t)=>e===Gn.Backwards?Ar(t):t,oz=(e,t,n)=>e===Gn.Forwards?t.next(n):t.prev(n),sz=(e,t,n,o)=>ln(o.getNode(t===Gn.Forwards))?Xr.Br:!1===mr(n,o)?Xr.Block:Xr.Wrap,jE=(e,t,n,o)=>{const s=gr(n);let r=o;const i=[];for(;r;){const a=oz(t,s,r);if(!a)break;if(ln(a.getNode(!1)))return t===Gn.Forwards?{positions:Vd(t,i).concat([a]),breakType:Xr.Br,breakAt:T.some(a)}:{positions:Vd(t,i),breakType:Xr.Br,breakAt:T.some(a)};if(a.isVisible()){if(e(r,a)){const c=sz(0,t,r,a);return{positions:Vd(t,i),breakType:c,breakAt:T.some(a)}}i.push(a),r=a}else r=a}return{positions:Vd(t,i),breakType:Xr.Eol,breakAt:T.none()}},VE=(e,t,n,o)=>t(n,o).breakAt.map(s=>{const r=t(n,s).positions;return e===Gn.Backwards?r.concat(s):[s].concat(r)}).getOr([]),Gg=(e,t)=>nn(e,(n,o)=>n.fold(()=>T.some(o),s=>N(hn(s.getClientRects()),hn(o.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?o:s}).or(n)),T.none()),Zd=(e,t)=>hn(t.getClientRects()).bind(n=>Gg(e,n.left)),tu=Te(jE,ee.isAbove,-1),nu=Te(jE,ee.isBelow,1),ZE=Te(VE,-1,tu),GE=Te(VE,1,nu),YE=(e,t)=>tu(e,t).breakAt.isNone(),KE=(e,t)=>nu(e,t).breakAt.isNone(),az=(e,t)=>Zd(ZE(e,t),t),lz=(e,t)=>Zd(GE(e,t),t),cz=Zt,JE=(e,t)=>Math.abs(e.left-t),QE=(e,t)=>Math.abs(e.right-t),XE=(e,t)=>vs(e,(n,o)=>{const s=Math.min(JE(n,t),QE(n,t)),r=Math.min(JE(o,t),QE(o,t));return r===s&&(e=>Ao(e,"node"))(o)&&cz(o.node)||r<s?o:n}),dz=e=>{const t=n=>pt(n,o=>{const s=ka(o);return s.node=e,s});if(we(e))return t(e.getClientRects());if(fe(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},ew=e=>yo(e,dz);var Gd=function(e){return e[e.Up=-1]="Up",e[e.Down=1]="Down",e}(Gd||{});const tw=(e,t,n,o,s,r)=>{let i=0;const a=[],c=x=>{let w=ew([x]);-1===e&&(w=w.reverse());for(let D=0;D<w.length;D++){const O=w[D];if(!n(O,m)){if(a.length>0&&t(O,ys(a))&&i++,O.line=i,s(O))return!0;a.push(O)}}return!1},m=ys(r.getClientRects());if(!m)return a;const v=r.getNode();return v&&(c(v),((e,t,n,o)=>{let s=o;for(;s=Oc(s,e,db,t);)if(n(s))return})(e,o,c,v)),a},gz=Te(tw,Gd.Up,_c,Tc),hz=Te(tw,Gd.Down,Tc,_c),nw=e=>ys(e.getClientRects()),ow=e=>t=>((e,t)=>t.line>e)(e,t),Yg=e=>t=>((e,t)=>t.line===e)(e,t),ei=(e,t)=>{e.selection.setRng(t),Hc(e,e.selection.getRng())},Kg=(e,t,n)=>T.some($g(e,t,n)),sw=(e,t,n,o,s,r)=>{const i=t===Gn.Forwards,a=gr(e.getBody()),c=Te(jm,i?a.next:a.prev),m=i?o:s;if(!n.collapsed){const O=Ku(n);if(r(O))return Qr(t,e,O,t===Gn.Backwards,!1);if(Hg(e)){const A=n.cloneRange();return A.collapse(t===Gn.Backwards),T.from(A)}}const v=Bc(t,e.getBody(),n);if(m(v))return eu(e,v.getNode(!i));let x=c(v);const w=lb(n);if(!x)return w?T.some(n):T.none();if(x=cs(i,x),m(x))return Qr(t,e,x.getNode(!i),i,!1);const D=c(x);return D&&m(D)&&sd(x,D)?Qr(t,e,D.getNode(!i),i,!1):w?Kg(e,x.toRange(),!1):T.none()},rw=(e,t,n,o,s,r)=>{const i=Bc(t,e.getBody(),n),a=ys(i.getClientRects()),c=t===Gd.Down,m=e.getBody();if(!a)return T.none();if(Hg(e)){const P=c?ee.fromRangeEnd(n):ee.fromRangeStart(n);return(c?lz:az)(m,P).orThunk(()=>T.from(P)).map(z=>z.toRange())}const x=(c?hz:gz)(m,ow(1),i),w=Ve(x,Yg(1)),D=a.left,O=XE(w,D);if(O&&r(O.node)){const P=Math.abs(D-O.left),F=Math.abs(D-O.right);return Qr(t,e,O.node,P<F,!1)}let A;if(A=o(i)?i.getNode():s(i)?i.getNode(!0):Ku(n),A){const P=((e,t,n,o)=>{const s=gr(t);let r,i,a,c;const m=[];let v=0;1===e?(r=s.next,i=Tc,a=_c,c=ee.after(o)):(r=s.prev,i=_c,a=Tc,c=ee.before(o));const x=nw(c);do{if(!c.isVisible())continue;const w=nw(c);if(a(w,x))continue;m.length>0&&i(w,ys(m))&&v++;const D=ka(w);if(D.position=c,D.line=v,n(D))return m;m.push(D)}while(c=r(c));return m})(t,m,ow(1),A);let F=XE(Ve(P,Yg(1)),D);if(F||(F=ys(Ve(P,Yg(0))),F))return Kg(e,F.position.toRange(),!1)}return 0===w.length?Jg(e,c).filter(c?s:o).map(P=>$g(e,P.toRange(),!1)):T.none()},Jg=(e,t)=>{const n=e.selection.getRng(),o=t?ee.fromRangeEnd(n):ee.fromRangeStart(n),s=((e,t)=>Fs(M_fromDom(e),s=>iR(s.dom),s=>s.dom===t).map(s=>s.dom).getOr(t))(o.container(),e.getBody());if(t){const r=nu(s,o);return ao(r.positions)}{const r=tu(s,o);return hn(r.positions)}},iw=(e,t,n)=>Jg(e,t).filter(n).exists(o=>(e.selection.setRng(o.toRange()),!0)),Yd=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},aw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},lw=(e,t,n)=>jg(t,n).map(o=>(Yd(e,o),n)),yz=(e,t,n)=>{const o=e.getBody(),s=((e,t,n)=>{const o=ee.fromRangeStart(e);if(e.collapsed)return o;{const s=ee.fromRangeEnd(e);return n?Bo(t,s).getOr(s):So(t,o).getOr(o)}})(e.selection.getRng(),o,n);return((e,t,n,o)=>{const s=cs(e,o),r=Cr(t,n,s);return Cr(t,n,s).bind(Te(XU,e)).orThunk(()=>((e,t,n,o,s)=>{const r=cs(e,s);return rs(e,n,r).map(Te(cs,e)).fold(()=>o.map(jd),c=>Cr(t,n,c).map(Te(KU,e,t,n,r,c)).filter(Te(JU,o))).filter(HE)})(e,t,n,r,o))})(n,Te(Fa,e),o,s).bind(a=>lw(e,t,a))},cw=(e,t,n)=>!!Rc(e)&&yz(e,t,n).isSome(),uw=(e,t,n)=>!!Rc(t)&&((e,t)=>{const n=t.selection.getRng(),o=e?ee.fromRangeEnd(n):ee.fromRangeStart(n);return!!(e=>St(e.selection.getSel().modify))(t)&&(e&&im(o)?WE(!0,t.selection,o):!(e||!am(o))&&WE(!1,t.selection,o))})(e,t),wz=e=>{const t=zn(null),n=Te(Fa,e);return e.on("NodeChange",o=>{Rc(e)&&(((e,t,n)=>{const o=pt(bn(M_fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),s=Ve(o,e),r=Ve(n,e);re(Lt(s,r),Te(aw,!1)),re(Lt(r,s),Te(aw,!0))})(n,e.dom,o.parents),((e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const o=ee.fromRangeStart(e.selection.getRng());ee.isTextPosition(o)&&!(e=>im(e)||am(e))(o)&&(Yd(e,XA(n,o)),t.set(null))}})(e,t),((e,t,n,o)=>{if(t.selection.isCollapsed()){const s=Ve(o,e);re(s,r=>{const i=ee.fromRangeStart(t.selection.getRng());Cr(e,t.getBody(),i).bind(a=>lw(t,n,a))})}})(n,e,t,o.parents))}),t},Sz=Te(uw,!0),_z=Te(uw,!1),Kd=(e,t,n)=>{if(Rc(e)){const o=Jg(e,t).getOrThunk(()=>{const s=e.selection.getRng();return t?ee.fromRangeEnd(s):ee.fromRangeStart(s)});return Cr(Te(Fa,e),e.getBody(),o).exists(s=>{const r=jd(s);return jg(n,r).exists(i=>(Yd(e,i),!0))})}return!1},dw=(e,t)=>n=>jg(t,n).map(o=>()=>Yd(e,o)),fw=(e,t,n,o)=>{const s=e.getBody(),r=Te(Fa,e);e.undoManager.ignore(()=>{e.selection.setRng(((e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n})(n,o)),Fp(e),Cr(r,s,ee.fromRangeStart(e.selection.getRng())).map(Zg).bind(dw(e,t)).each(_r)}),e.nodeChanged()},Qg=(e,t,n)=>{if(e.selection.isCollapsed()&&Rc(e)){const o=ee.fromRangeStart(e.selection.getRng());return((e,t,n,o)=>{const s=((e,t)=>Mi(t,e)||e)(e.getBody(),o.container()),r=Te(Fa,e),i=Cr(r,s,o);return i.bind(c=>n?c.fold(Ce(T.some(Zg(c))),T.none,Ce(T.some(jd(c))),T.none):c.fold(T.none,Ce(T.some(jd(c))),T.none,Ce(T.some(Zg(c))))).map(dw(e,t)).getOrThunk(()=>{const c=kl(n,s,o),m=c.bind(v=>Cr(r,s,v));return N(i,m,()=>Ui(r,s,o).bind(v=>(e=>N(io(e),Ts(e),(t,n)=>{const o=cs(!0,t),s=cs(!1,n);return So(e,o).forall(r=>r.isEqual(s))}).getOr(!0))(v)?T.some(()=>{La(e,n,M_fromDom(v))}):T.none())).getOrThunk(()=>m.bind(()=>c.map(v=>()=>{n?fw(e,t,o,v):fw(e,t,v,o)})))})})(e,t,n,o)}return T.none()},mw=(e,t)=>{const n=M_fromDom(e.getBody()),o=M_fromDom(e.selection.getStart()),s=Jr(o,n);return Ze(s,t).fold(Ce(s),r=>s.slice(0,r))},Dz=e=>1===uc(e),pw=(e,t)=>{const n=Te(D0,e);return yo(t,o=>n(o)?[o.dom]:[])},gw=e=>{const t=(e=>mw(e,os))(e);return pw(e,t)},Iz=(e,t)=>{const n=Ve((e=>mw(e,t=>os(t)||(e=>uc(e)>1)(t)))(e),Dz);return ao(n).bind(o=>{const s=ee.fromRangeStart(e.selection.getRng());return o0(t,s,o.dom)&&!P0(o)?T.some(()=>((e,t,n,o)=>{const s=pw(t,o);if(0===s.length)La(t,e,n);else{const r=R0(n.dom,s);t.selection.setRng(r.toRange())}})(t,e,o,n)):T.none()})},hw=(e,t)=>{const n=e.selection.getStart(),o=((e,t)=>{const n=t.parentElement;return ln(t)&&!C(n)&&e.dom.isEmpty(n)})(e,n)||(e=>P0(M_fromDom(e)))(n)?R0(n,t):((e,t)=>{const{caretContainer:n,caretPosition:o}=A0(t);return e.insertNode(n.dom),o})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},bw=e=>fe(e.startContainer),Vz=e=>{const t=e.selection.getRng();return(e=>0===e.startOffset&&bw(e))(t)&&((e,t)=>{const n=t.startContainer.parentElement;return!C(n)&&D0(e,M_fromDom(n))})(e,t)&&(e=>(e=>(e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!C(t)&&!C(n)&&t.isEqualNode(n)})(e)&&(e=>{const t=e.endContainer;return e.endOffset===(fe(t)?t.length:t.childNodes.length)})(e))(e)||(e=>!e.endContainer.isEqualNode(e.commonAncestorContainer))(e))(t)},Xg=(e,t)=>e.selection.isCollapsed()?Iz(e,t):(e=>{if(Vz(e)){const t=gw(e);return T.some(()=>{Fp(e),((e,t)=>{const n=Lt(t,gw(e));n.length>0&&hw(e,n)})(e,t)})}return T.none()})(e),Gz=e=>((e,t,n)=>Fs(e,t=>ks(t.dom),n).isSome())(e,0,os),ou=e=>((e=>{const t=e.selection.getRng();return t.collapsed&&(bw(t)||e.dom.isEmpty(t.startContainer))&&!(e=>Gz(M_fromDom(e.selection.getStart())))(e)})(e)&&hw(e,[]),!0),eh=(e,t,n)=>ve(n)?T.some(()=>{e._selectionOverrides.hideFakeCaret(),La(e,t,M_fromDom(n))}):T.none(),th=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=t?qc:Wc,s=Bc(t?Gn.Forwards:Gn.Backwards,e.getBody(),e.selection.getRng());return n(s)?eh(e,t,s.getNode(!t)):T.from(cs(t,s)).filter(r=>n(r)&&sd(s,r)).bind(r=>eh(e,t,r.getNode(!t)))})(e,t):((e,t)=>{const n=e.selection.getNode();return dr(n)?eh(e,t,n):T.none()})(e,t),nh=e=>Ms(null!=e?e:"").getOr(0),vw=(e,t)=>{const n=e||(e=>"table"===Rt(e))(t)?"margin":"padding";return n+("rtl"===Ss(t,"direction")?"-right":"-left")},yw=e=>{const t=xw(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>hs(t,n=>{const o=vw(kv(e),n),s=hl(n,o).map(nh).getOr(0);return"false"!==e.dom.getContentEditable(n.dom)&&s>0}))(e,t))},Cw=e=>rm(e)||mc(e),xw=e=>Ve(d(e.selection.getSelectedBlocks()),t=>!Cw(t)&&!(e=>Je(e).exists(Cw))(t)&&(e=>Hr(e,t=>qs(t.dom)||Zt(t.dom)).exists(t=>qs(t.dom)))(t)),Ew=(e,t)=>{var n,o;const{dom:s}=e,r=WN(e),i=null!==(o=null===(n=/[a-z%]+$/i.exec(r))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",a=nh(r),c=kv(e);re(xw(e),m=>{((e,t,n,o,s,r)=>{const i=vw(n,M_fromDom(r)),a=nh(e.getStyle(r,i));if("outdent"===t){const c=Math.max(0,a-o);e.setStyle(r,i,c?c+s:"")}else e.setStyle(r,i,a+o+s)})(s,t,c,a,i,m.dom)})},ww=e=>Ew(e,"outdent"),Sw=e=>{if(e.selection.isCollapsed()&&yw(e)){const t=e.dom,n=e.selection.getRng(),o=ee.fromRangeStart(n),s=t.getParent(n.startContainer,t.isBlock);if(null!==s&&Dp(M_fromDom(s),o))return T.some(()=>ww(e))}return T.none()},_w=(e,t,n)=>Qn([Sw,qg,Ug,(o,s)=>Qg(o,t,s),Lg,Zp,Wg,th,Fg,Xg],o=>o(e,n)).filter(o=>e.selection.isEditable()),iH=(e,t)=>{e.addCommand("delete",()=>{((e,t)=>{_w(e,t,!1).fold(()=>{Fp(e),$p(e)},_r)})(e,t)}),e.addCommand("forwardDelete",()=>{((e,t)=>{_w(e,t,!0).fold(()=>(e=>n0(e,"ForwardDelete"))(e),_r)})(e,t)})},kw=e=>void 0===e.touches||1!==e.touches.length?T.none():T.some(e.touches[0]),oh=(e,t)=>Ge(e,t.nodeName),uH=(e,t)=>!!fe(t)||!!we(t)&&!oh(e.getBlockElements(),t)&&!is(t)&&!xa(e,t),fH=(e,t)=>{if(fe(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||oh(e,t.nextSibling)))return!0}return!1},Nw=e=>e.dom.create(ro(e),Ac(e)),mH=e=>{const t=e.dom,n=e.selection,o=e.schema,s=o.getBlockElements(),r=n.getStart(),i=e.getBody();let a,c,m=!1;const v=ro(e);if(!r||!we(r))return;const x=i.nodeName.toLowerCase();if(!o.isValidChild(x,v.toLowerCase())||((e,t,n)=>Kt(MC(M_fromDom(n),M_fromDom(t)),o=>oh(e,o.dom)))(s,i,r))return;const w=n.getRng(),{startContainer:D,startOffset:O,endContainer:A,endOffset:P}=w,F=Ba(e);let z=i.firstChild;for(;z;)if(we(z)&&HT(o,z),uH(o,z)){if(fH(s,z)){c=z,z=z.nextSibling,t.remove(c);continue}a||(a=Nw(e),i.insertBefore(a,z),m=!0),c=z,z=z.nextSibling,a.appendChild(c)}else a=null,z=z.nextSibling;m&&F&&(w.setStart(D,O),w.setEnd(A,P),n.setRng(w),e.nodeChanged())},Aw=(e,t,n)=>{const o=M_fromDom(Nw(e)),s=gc();fn(o,s),n(t,o);const r=document.createRange();return r.setStartBefore(s.dom),r.setEndBefore(s.dom),r},Rw=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),gH=(e,t,n)=>function(o){const s=arguments,r=s[s.length-2],i=r>0?t.charAt(r-1):"";if('"'===i)return o;if(">"===i){const a=t.lastIndexOf("<",r);if(-1!==a&&-1!==t.substring(a,r).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(s[0])+'">'+e.dom.encode("string"==typeof s[1]?s[1]:s[0])+"</span>"},Dw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(lm(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},yH=(e,t)=>{const n=(e=>ba(M_fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull())(e);if(n){if("compositionstart"===t.type)return t.preventDefault(),t.stopPropagation(),void Dw(e,n);ab(n)&&(Dw(e,n),e.undoManager.add())}},Pw=Zt,Ow=(e,t,n)=>{const o=gr(e.getBody()),s=Te(jm,1===t?o.next:o.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!s(ee.fromRangeStart(n))){const a=M_fromDom((e=>{const t=e.dom.create(ro(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?$s(M_fromDom(r),a):mo(M_fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},Mw=(e,t)=>((e,t)=>{const n=t?Gn.Forwards:Gn.Backwards,o=e.selection.getRng();return((e,t,n)=>sw(t,e,n,Fi,$i,Pw))(n,e,o).orThunk(()=>(Ow(e,n,o),T.none()))})(e,((e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return XC(n)?!t:t})(e.selection,t)).exists(n=>(ei(e,n),!0)),Iw=(e,t)=>((e,t)=>{const n=t?1:-1,o=e.selection.getRng();return((e,t,n)=>rw(t,e,n,r=>Fi(r)||PC(r),r=>$i(r)||OC(r),Pw))(n,e,o).orThunk(()=>(Ow(e,n,o),T.none()))})(e,t).exists(n=>(ei(e,n),!0)),Bw=(e,t)=>iw(e,t,t?$i:Fi),Jd=(e,t)=>zg(e,!t).map(n=>{const o=n.toRange(),s=e.selection.getRng();return t?o.setStart(s.startContainer,s.startOffset):o.setEnd(s.endContainer,s.endOffset),o}).exists(n=>(ei(e,n),!0)),kH=e=>kt(["figcaption"],Rt(e)),Lw=(e,t)=>!!e.selection.isCollapsed()&&((e,t)=>{const n=M_fromDom(e.getBody()),o=ee.fromRangeStart(e.selection.getRng());return((e,t)=>{const n=Te(ne,t);return Hr(M_fromDom(e.container()),os,n).filter(kH)})(o,n).exists(()=>{if(((e,t,n)=>t?KE(e.dom,n):YE(e.dom,n))(n,t,o)){const r=Aw(e,n,t?fn:Ou);return e.selection.setRng(r),!0}return!1})})(e,t),Fw=(e,t)=>((e,t)=>t?T.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>((e,t)=>{const n=e.selection.getRng(),o=ee.fromRangeStart(n);return!(e.getBody().lastChild!==t||!KE(t,o)||(e.execCommand("InsertNewBlockAfter"),0))})(e,n)).getOr(!1):T.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>T.from(e.dom.getParent(n,"details")).map(o=>((e,t,n)=>{const o=e.selection.getRng(),s=ee.fromRangeStart(o);return!(e.getBody().firstChild!==t||!YE(n,s)||(e.execCommand("InsertNewBlockBefore"),0))})(e,o,n))).getOr(!1))(e,t),$w={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Uw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,je=(e,...t)=>()=>e.apply(null,t),su=(e,t)=>Jt(((e,t)=>yo((e=>pt(e,t=>({...$w,...t})))(e),n=>Uw(n,t)?[n]:[]))(e,t),n=>n.action()),zw=(e,t)=>Qn(((e,t)=>yo((e=>pt(e,t=>({...$w,...t})))(e),n=>Uw(n,t)?[n]:[]))(e,t),n=>n.action()),Hw=(e,t)=>{const n=t?Gn.Forwards:Gn.Backwards,o=e.selection.getRng();return sw(e,n,o,qc,Wc,dr).exists(s=>(ei(e,s),!0))},qw=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return rw(e,n,o,qc,Wc,dr).exists(s=>(ei(e,s),!0))},Ww=(e,t)=>iw(e,t,t?Wc:qc),jw=fr_generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ru={...jw,none:e=>jw.none(e)},Vw=(e,t,n)=>yo(Vt(e),o=>I(o,t)?n(o)?[o]:[]:Vw(o,t,n)),Zw=(e,t)=>qr(e,"table",t),sh=(e,t,n,o,s=an)=>{const r=1===o;if(!r&&n<=0)return ru.first(e[0]);if(r&&n>=e.length-1)return ru.last(e[e.length-1]);{const i=n+o,a=e[i];return s(a)?ru.middle(t,a):sh(e,t,i,o,s)}},Gw=(e,t)=>Zw(e,t).bind(n=>{const o=(e=>((e,t)=>Vw(e,"th,td",an))(e))(n);return Ze(o,r=>ne(e,r)).map(r=>({index:r,all:o}))}),Yw=(e,t,n,o,s)=>{const r=bn(M_fromDom(n),"td,th,caption").map(a=>a.dom),i=Ve(((e,t)=>yo(t,n=>{const o=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+-2,bottom:e.bottom+-2,width:e.width+t,height:e.height+t}))(ka(n.getBoundingClientRect()),-1);return[{x:o.left,y:e(o),cell:n},{x:o.right,y:e(o),cell:n}]}))(e,r),a=>t(a,s));return((e,t,n)=>nn(e,(o,s)=>o.fold(()=>T.some(s),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(s.x-t)+Math.abs(s.y-n));return T.some(a<i?s:r)}),T.none()))(i,o,s).map(a=>a.cell)},JH=Te(Yw,e=>e.bottom,(e,t)=>e.y<t),QH=Te(Yw,e=>e.top,(e,t)=>e.y>t),Kw=(e,t,n)=>{const o=e(t,n);return(e=>e.breakType===Xr.Wrap&&0===e.positions.length)(o)||!ln(n.getNode())&&(e=>e.breakType===Xr.Br&&1===e.positions.length)(o)?!((e,t,n)=>n.breakAt.exists(o=>e(t,o).breakAt.isSome()))(e,t,o):o.breakAt.isNone()},s3=Te(Kw,tu),r3=Te(Kw,nu),a3=(e,t,n,o)=>{const s=e.selection.getRng(),r=t?1:-1;return!(!Hv()||!((e,t,n)=>{const o=ee.fromRangeStart(t);return Nl(!e,n).exists(s=>s.isEqual(o))})(t,s,n)||(Qr(r,e,n,!t,!1).each(i=>{ei(e,i)}),0))},Qw=(e,t,n)=>{const o=((e,t)=>{const n=t.getNode(e);return Gr(n)?T.some(n):T.none()})(!!t,n),s=!1===t;o.fold(()=>ei(e,n.toRange()),r=>Nl(s,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>ei(e,n.toRange()),i=>((e,t,n)=>{t.undoManager.transact(()=>{const o=e?$s:mo,s=Aw(t,M_fromDom(n),o);ei(t,s)})})(t,e,r)))},d3=(e,t,n,o)=>{const s=e.selection.getRng(),r=ee.fromRangeStart(s),i=e.getBody();if(!t&&s3(o,r)){const a=((e,t,n)=>((e,t)=>hn(t.getClientRects()).bind(n=>JH(e,n.left,n.top)).bind(n=>Zd((e=>Ts(e).map(t=>tu(e,t).positions.concat(t)).getOr([]))(n),t)))(t,n).orThunk(()=>hn(n.getClientRects()).bind(o=>Gg(ZE(e,ee.before(t)),o.left))).getOr(ee.before(t)))(i,n,r);return Qw(e,t,a),!0}if(t&&r3(o,r)){const a=((e,t,n)=>((e,t)=>ao(t.getClientRects()).bind(n=>QH(e,n.left,n.top)).bind(n=>Zd((e=>io(e).map(t=>[t].concat(nu(e,t).positions)).getOr([]))(n),t)))(t,n).orThunk(()=>hn(n.getClientRects()).bind(o=>Gg(GE(e,ee.after(t)),o.left))).getOr(ee.after(t)))(i,n,r);return Qw(e,t,a),!0}return!1},Xw=(e,t,n)=>T.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(o=>T.from(e.dom.getParent(o,"table")).map(s=>n(e,t,s,o))).getOr(!1),eS=(e,t)=>Xw(e,t,a3),rh=(e,t)=>Xw(e,t,d3),tS=(e,t,n)=>n.fold(T.none,T.none,(o,s)=>(e=>((e,t)=>{const n=o=>{for(let s=0;s<o.childNodes.length;s++){const r=M_fromDom(o.childNodes[s]);if(t(r))return T.some(r);const i=n(o.childNodes[s]);if(i.isSome())return i}return T.none()};return n(e.dom)})(e,mC))(s).map(r=>(e=>{const t=Ol.exact(e,0,e,0);return nP(t)})(r)),o=>(e.execCommand("mceTableInsertRowAfter"),nS(e,t,o))),nS=(e,t,n)=>tS(e,t,((e,t,n)=>Gw(e,void 0).fold(()=>ru.none(e),s=>sh(s.all,e,s.index,1,t)))(n,Wr)),m3=(e,t,n)=>tS(e,t,((e,t,n)=>Gw(e,void 0).fold(()=>ru.none(),s=>sh(s.all,e,s.index,-1,t)))(n,Wr)),oS=(e,t)=>{const n=["table","li","dl"],o=M_fromDom(e.getBody()),s=a=>{const c=Rt(a);return ne(a,o)||kt(n,c)},r=e.selection.getRng();return((e,t)=>((e,t,n=jt)=>n(t)?T.none():kt(e,Rt(t))?T.some(t):ha(t,e.join(","),s=>I(s,"table")||n(s)))(["td","th"],e,t))(M_fromDom(t?r.endContainer:r.startContainer),s).map(a=>(Zw(a,s).each(v=>{e.model.table.clearSelectedCells(v.dom)}),e.selection.collapse(!t),(t?nS:m3)(e,s,a).each(v=>{e.selection.setRng(v)}),!0)).getOr(!1)},Js=(e,t)=>({container:e,offset:t}),Qd=Ut.DOM,Xd=e=>t=>e===t?-1:0,ih=(e,t,n)=>{if(fe(e)&&t>=0)return T.some(Js(e,t));{const o=Ta(Qd);return T.from(o.backwards(e,t,Xd(e),n)).map(s=>Js(s.container,s.container.data.length))}},ah=(e,t,n)=>{if(!fe(e))return T.none();if(t>=0&&t<=e.data.length)return T.some(Js(e,t));{const s=Ta(Qd);return T.from(s.backwards(e,t,Xd(e),n)).bind(r=>ah(r.container,t+r.container.data.length,n))}},sS=(e,t,n)=>{if(!fe(e))return T.none();const o=e.data;if(t<=o.length)return T.some(Js(e,t));{const s=Ta(Qd);return T.from(s.forwards(e,t,Xd(e),n)).bind(r=>sS(r.container,t-o.length,n))}},lh=(e,t,n,o,s)=>{const r=Ta(e,(e=>t=>e.isBlock(t)||kt(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return T.from(r.backwards(t,n,o,s))},rS=e=>Ws(e.toString().replace(/\u00A0/g," ")),iS=e=>""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e),ch=(e,t)=>e.substring(t.length),aS=(e,t,n,o=0)=>(e=>qr(e,pC))(M_fromDom(t.startContainer)).fold(()=>((e,t,n,o=0)=>{if(!(e=>e.collapsed&&fe(e.startContainer))(t))return T.none();const s={text:"",offset:0},i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return lh(e,t.startContainer,t.startOffset,(a,c,m)=>(s.text=m+s.text,s.offset+=c,((e,t,n)=>{let o;const s=n.charAt(0);for(o=t-1;o>=0;o--){const r=e.charAt(o);if(iS(r))return T.none();if(s===r&&Sn(e,n,o,t))break}return T.some(o)})(s.text,s.offset,n).getOr(c)),i).bind(a=>{const c=t.cloneRange();if(c.setStart(a.container,a.offset),c.setEnd(t.endContainer,t.endOffset),c.collapsed)return T.none();const m=rS(c);return 0!==m.lastIndexOf(n)||ch(m,n).length<o?T.none():T.some({text:ch(m,n),range:c,trigger:n})})})(e,t,n,o),s=>{const r=e.createRng();r.selectNode(s.dom);const i=rS(r);return T.some({range:r,text:ch(i,n),trigger:n})}),lS=e=>{if((e=>3===e.nodeType)(e))return Js(e,e.data.length);{const t=e.childNodes;return t.length>0?lS(t[t.length-1]):Js(e,t.length)}},cS=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?cS(n[t],0):n.length>0&&(e=>1===e.nodeType)(e)&&n.length===t?lS(n[n.length-1]):Js(e,t)},uS=(e,t,n,o={})=>{var s;const r=t(),a=null!==(s=e.selection.getRng().startContainer.nodeValue)&&void 0!==s?s:"",c=Ve(r.lookupByTrigger(n.trigger),v=>n.text.length>=v.minChars&&v.matches.getOrThunk(()=>(e=>t=>{const n=cS(t.startContainer,t.startOffset);return!((e,t)=>{var n;const o=null!==(n=e.getParent(t.container,e.isBlock))&&void 0!==n?n:e.getRoot();return lh(e,t.container,t.offset,(s,r)=>0===r?-1:r,o).filter(s=>{const r=s.container.data.charAt(s.offset-1);return!iS(r)}).isSome()})(e,n)})(e.dom))(n.range,a,n.text));if(0===c.length)return T.none();const m=Promise.all(pt(c,v=>v.fetch(n.text,v.maxResults,o).then(w=>({matchText:n.text,items:w,columns:v.columns,onAction:v.onAction,highlightOn:v.highlightOn}))));return T.some({lookupData:m,context:n})};var xr=function(e){return e[e.Error=0]="Error",e[e.Value=1]="Value",e}(xr||{});const uh=(e,t,n)=>e.stype===xr.Error?t(e.serror):n(e.svalue),Yn_svalue=e=>({stype:xr.Value,svalue:e}),Yn_serror=e=>({stype:xr.Error,serror:e}),Yn_fold=uh,dh=e=>cn(e)&&In(e).length>100?" removed due to size":JSON.stringify(e,null,2),ef=(e,t)=>Yn_serror([{path:e,getErrorInfo:t}]),F3=(e,t)=>({extract:(s,r)=>$t(r,e).fold(()=>((e,t)=>ef(e,()=>'Choice schema did not contain choice key: "'+t+'"'))(s,e),a=>((e,t,n,o)=>$t(n,o).fold(()=>((e,t,n)=>ef(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+dh(t)))(e,n,o),r=>r.extract(e.concat(["branch: "+o]),t)))(s,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+In(t)}),mS=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const s=t[o];for(const r in s)Ge(s,r)&&(n[r]=e(n[r],s[r]))}return n},tf=mS((e,t)=>Yi(e)&&Yi(t)?tf(e,t):t),gS=(mS((e,t)=>t),e=>(e=>({tag:"defaultedThunk",process:e}))(Ce(e))),j3_consolidateArr=e=>{const t=(e=>{const t=[],n=[];return re(e,o=>{uh(o,s=>n.push(s),s=>t.push(s))}),{values:t,errors:n}})(e);return t.errors.length>0?(e=>gs(Yn_serror,Wn)(e))(t.errors):Yn_svalue(t.values)},bS=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},fh=e=>({extract:(o,s)=>((e,t)=>e.stype===xr.Error?t(e.serror):e)(e(s),r=>((e,t)=>ef(e,Ce(t)))(o,r)),toString:Ce("val")}),G3=fh(Yn_svalue),vS=(e,t,n,o)=>o($t(e,t).getOrThunk(()=>n(e))),Q3=(e,t,n,o,s)=>{const r=a=>s.extract(t.concat([o]),a),i=a=>a.fold(()=>Yn_svalue(T.none()),c=>((e,t)=>e.stype===xr.Value?{stype:xr.Value,svalue:t(e.svalue)}:e)(s.extract(t.concat([o]),c),T.some));switch(e.tag){case"required":return((e,t,n,o)=>$t(t,n).fold(()=>((e,t,n)=>ef(e,()=>'Could not find valid *required* value for "'+t+'" in '+dh(n)))(e,n,t),o))(t,n,o,r);case"defaultedThunk":return vS(n,o,e.process,r);case"option":return((e,t,n)=>n($t(e,t)))(n,o,i);case"defaultedOptionThunk":return((e,t,n,o)=>o($t(e,t).map(r=>!0===r?n(e):r)))(n,o,e.process,i);case"mergeWithThunk":return vS(n,o,Ce({}),a=>{const c=tf(e.process(n),a);return r(c)})}},mh=e=>({extract:(o,s)=>((e,t,n)=>{const o={},s=[];for(const r of n)bS(r,(i,a,c,m)=>{const v=Q3(c,e,t,i,m);Yn_fold(v,x=>{s.push(...x)},x=>{o[a]=x})},(i,a)=>{o[i]=a(t)});return s.length>0?Yn_serror(s):Yn_svalue(o)})(o,s,e),toString:()=>"obj{\n"+pt(e,s=>bS(s,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")")).join("\n")+"}"}),yS=e=>({extract:(o,s)=>{const r=pt(s,(i,a)=>e.extract(o.concat(["["+a+"]"]),i));return j3_consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),nq=(e,t,n)=>(e=>uh(e,wo.error,wo.value))(((e,t,n)=>((e,t)=>e.stype===xr.Error?{stype:xr.Error,serror:t(e.serror)}:e)(t.extract([e],n),s=>({input:n,errors:s})))(e,t,n)),CS=(e,t)=>F3(e,bs(t,mh)),sq=Ce(G3),nf=(e,t)=>fh(n=>{const o=typeof n;return e(n)?Yn_svalue(n):Yn_serror(`Expected type: ${t} but got: ${o}`)}),rq=nf(_t,"number"),of=nf(Fe,"string"),iq=nf(qn,"boolean"),ph=nf(St,"function"),iu=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),xS=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),ES=(e,t)=>iu(e,e,{tag:"required",process:{}},t),wS=e=>ES(e,of),SS=e=>ES(e,ph),gh=(e,t)=>iu(e,e,{tag:"option",process:{}},t),sf=e=>gh(e,of),zl=(e,t,n)=>iu(e,e,gS(t),n),_S=(e,t)=>zl(e,t,rq),TS=(e,t,n)=>zl(e,t,(e=>(e=>fh(t=>e(t).fold(Yn_serror,Yn_svalue)))(t=>kt(e,t)?wo.value(t):wo.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)))(n)),hh=(e,t)=>zl(e,t,iq),bh=(e,t)=>zl(e,t,ph),mq=wS("type"),pq=SS("fetch"),vh=SS("onAction"),gq=bh("onSetup",()=>et),hq=sf("text"),bq=sf("icon"),vq=sf("tooltip"),yq=sf("label"),Cq=hh("active",!1),xq=hh("enabled",!0),kS=hh("primary",!1),au=e=>((e,t)=>zl("type",t,of))(0,e),wq=mh([mq,wS("trigger"),_S("minChars",1),((e,t)=>iu(e,e,gS(1),sq()))("columns"),_S("maxResults",10),gh("matches",ph),pq,vh,(n=of,zl("highlightOn",[],yS(n)))]),yh=[xq,vq,bq,hq,gq],NS=[Cq].concat(yh),_q=[bh("predicate",jt),TS("scope","node",["node","editor"]),TS("position","selection",["node","selection","line"])],Tq=yh.concat([au("contextformbutton"),kS,vh,xS("original",rn)]),kq=NS.concat([au("contextformbutton"),kS,vh,xS("original",rn)]),Nq=yh.concat([au("contextformbutton")]),Aq=NS.concat([au("contextformtogglebutton")]),Rq=CS("type",{contextformbutton:Tq,contextformtogglebutton:kq});var n;mh([au("contextform"),bh("initValue",Ce("")),yq,((e,t)=>iu(e,e,{tag:"required",process:{}},yS(t)))("commands",Rq),gh("launch",CS("type",{contextformbutton:Nq,contextformtogglebutton:Aq}))].concat(_q));const Dq=e=>{const t=e.ui.registry.getAll().popups,n=bs(t,i=>(e=>nq("Autocompleter",wq,{trigger:e.ch,...e}))(i).fold(a=>{throw new Error((e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ce("... (only showing first ten failures)")}]):e;return pt(t,n=>"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+dh(e.input))(a))},rn)),o=Pr(Ji(n,i=>i.trigger)),s=Rr(n);return{dataset:n,triggers:o,lookupByTrigger:i=>Ve(s,a=>a.trigger===i)}},Oq=e=>{const t=Di(),n=zn(!1),o=t.isSet,s=()=>{o()&&((e=>{vn(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},i=Jo(()=>Dq(e)),c=m=>{(m=>t.get().map(v=>aS(e.dom,e.selection.getRng(),v.trigger).bind(x=>uS(e,i,x,m))).getOrThunk(()=>((e,t)=>{const n=t(),o=e.selection.getRng();return((e,t,n)=>Qn(n.triggers,o=>aS(e,t,o)))(e.dom,o,n).bind(s=>uS(e,t,s))})(e,i)))(m).fold(s,v=>{(m=>{o()||(((e,t)=>{vn(e).autocompleter.addDecoration(t)})(e,m.range),t.set({trigger:m.trigger,matchLength:m.text.length}))})(v.context),v.lookupData.then(x=>{t.get().map(w=>{const D=v.context;w.trigger===D.trigger&&(D.text.length-w.matchLength>=10?s():(t.set({...w,matchLength:D.text.length}),n.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:x}):(n.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:x}))))})})})};e.addCommand("mceAutocompleterReload",(m,v)=>{const x=cn(v)?v.fetchOptions:{};c(x)}),e.addCommand("mceAutocompleterClose",s),((e,t)=>{const n=km(t.load,50);e.on("keypress compositionend",o=>{27!==o.which&&n.throttle()}),e.on("keydown",o=>{const s=o.which;8===s?n.throttle():27===s&&t.cancelIfNecessary()}),e.on("remove",n.cancel)})(e,{cancelIfNecessary:s,load:c})},Mq=Co().browser.isSafari(),AS=e=>Ti(M_fromDom(e)),RS=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},rf=(e,t)=>T.from(e.getParent(t.container(),"details")),DS=(e,t)=>rf(e,t).isSome(),PS=(e,t)=>{const n=t.getNode();dt(n)||e.selection.setCursorLocation(n,t.offset())},OS=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const s=e.dom.select("summary",o)[0];s&&(n?io(s):Ts(s)).each(i=>PS(e,i))}else PS(e,t)},MS=(e,t,n)=>{const{dom:o,selection:s}=e,r=e.getBody();if("character"===n){const i=ee.fromRangeStart(s.getRng()),a=o.getParent(i.container(),o.isBlock),c=rf(o,i),m=a&&o.isEmpty(a),v=C(null==a?void 0:a.previousSibling),x=C(null==a?void 0:a.nextSibling);return!!(m&&(t?x:v)&&kl(!t,r,i).exists(O=>DS(o,O)&&!_(c,rf(o,O))))||kl(t,r,i).fold(jt,w=>{const D=rf(o,w);if(DS(o,w)&&!_(c,D)){if(t||OS(e,w,!1),a&&m){if(t&&v)return!0;if(!t&&x)return!0;OS(e,w,t),e.dom.remove(a)}return!0}return!1})}return!1},qq=(e,t,n,o)=>{const r=e.selection.getRng(),i=ee.fromRangeStart(r),a=e.getBody();return"selection"===o?((e,t)=>{const s=t.startSummary.exists(c=>c.contains(e.startContainer)),r=t.startSummary.exists(c=>c.contains(e.endContainer)),i=t.startDetails.forall(c=>t.endDetails.forall(m=>c!==m));return(s||r)&&!(s&&r)||i})(r,t):n?((e,t)=>t.startSummary.exists(n=>((e,t)=>Ts(t).exists(n=>ln(n.getNode())&&Bo(t,n).exists(o=>o.isEqual(e))||n.isEqual(e)))(e,n)))(i,t)||((e,t,n)=>n.startDetails.exists(o=>So(e,t).forall(s=>!o.contains(s.container()))))(a,i,t):((e,t)=>t.startSummary.exists(n=>((e,t)=>io(t).exists(n=>n.isEqual(e)))(e,n)))(i,t)||((e,t)=>t.startDetails.exists(n=>Bo(n,e).forall(o=>t.startSummary.exists(s=>!s.contains(e.container())&&s.contains(o.container())))))(i,t)},Wa=(e,t,n)=>((e,t,n)=>((e,t)=>{const n=T.from(e.getParent(t.startContainer,"details")),o=T.from(e.getParent(t.endContainer,"details"));if(n.isSome()||o.isSome()){const s=n.bind(r=>T.from(e.select("summary",r)[0]));return T.some({startSummary:s,startDetails:n,endDetails:o})}return T.none()})(e.dom,e.selection.getRng()).fold(()=>MS(e,t,n),o=>qq(e,o,t,n)||MS(e,t,n)))(e,t,n)||Mq&&((e,t,n)=>{const o=e.selection,s=o.getNode(),r=o.getRng(),i=ee.fromRangeStart(r);return!!G1(s)&&("selection"===n&&RS(r,s)||o0(t,i,s)?AS(s):e.undoManager.transact(()=>{const a=o.getSel();let{anchorNode:c,anchorOffset:m,focusNode:v,focusOffset:x}=null!=a?a:{};const w=()=>{ve(c)&&ve(m)&&ve(v)&&ve(x)&&(null==a||a.setBaseAndExtent(c,m,v,x))},O=(P,F)=>{re(P.childNodes,z=>{Fc(z)&&F.appendChild(z)})},A=e.dom.create("span",{"data-mce-bogus":"1"});O(s,A),s.appendChild(A),w(),("word"===n||"line"===n)&&(null==a||a.modify("extend",t?"right":"left",n)),!o.isCollapsed()&&RS(o.getRng(),A)?AS(s):(e.execCommand(t?"ForwardDelete":"Delete"),c=null==a?void 0:a.anchorNode,m=null==a?void 0:a.anchorOffset,v=null==a?void 0:a.focusNode,x=null==a?void 0:a.focusOffset,O(A,s),w()),e.dom.remove(A)}),!0)})(e,t,n)?T.some(et):T.none(),IS=e=>(t,n,o={})=>{const s=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:s,currentTarget:s,eventPhase:Event.AT_TARGET,originalTarget:s,explicitOriginalTarget:s,isTrusted:!1,srcElement:s,cancelable:!1,preventDefault:et,inputType:n},i=Rb(new InputEvent(e));return t.dispatch(e,{...i,...r,...o})},lu=IS("input"),af=IS("beforeinput"),BS=Co(),LS=BS.os,FS=LS.isMacOS()||LS.isiOS(),Vq=BS.browser.isFirefox(),Hl=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=(e=>{for(;e;){if(we(e)||fe(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(Un),t.firstChild)}const s=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new mn(t,t);let a,i=t;for(;a=r.current();){if(fe(a)){s.setStart(a,0),s.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){s.setStartBefore(a),s.setEndBefore(a);break}i=a,a=r.next()}a||(s.setStart(i,0),s.setEnd(i,0))}else ln(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)):(s.setStart(t,0),s.setEnd(t,0));e.selection.setRng(s),Hc(e,s)},cu=(e,t)=>{const n=e.getRoot();let o,s=t;for(;s!==n&&s&&"false"!==e.getContentEditable(s);){if("true"===e.getContentEditable(s)){o=s;break}s=s.parentNode}return s!==n?o:n},Ch=e=>T.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),xh=e=>{e.innerHTML='<br data-mce-bogus="1">'},uu=(e,t)=>{ro(e).toLowerCase()===t.tagName.toLowerCase()&&((e,t,n)=>{const o=e.dom;T.from(n.style).map(o.parseStyle).each(c=>{const v={...Du(M_fromDom(t)),...c};o.setStyles(t,v)});const s=T.from(n.class).map(c=>c.split(/\s+/)),r=T.from(t.className).map(c=>Ve(c.split(/\s+/),m=>""!==m));N(s,r,(c,m)=>{const v=Ve(m,w=>!kt(c,w)),x=[...c,...v];o.setAttrib(t,"class",x.join(" "))});const i=["style","class"],a=Ds(n,(c,m)=>!kt(i,m));o.setAttribs(t,a)})(e,t,Ac(e))},$S=(e,t,n,o,s=!0,r)=>{const i=e.dom,a=e.schema,c=ro(e),m=n?n.nodeName.toUpperCase():"";let v=t;const x=a.getTextInlineElements();let w;w=r||"TABLE"===m||"HR"===m?i.create(r||c):n.cloneNode(!1);let D=w;if(s){do{if(x[v.nodeName]){if(ks(v)||is(v))continue;const O=v.cloneNode(!1);i.setAttrib(O,"id",""),w.hasChildNodes()?(O.appendChild(w.firstChild),w.appendChild(O)):(D=O,w.appendChild(O))}}while((v=v.parentNode)&&v!==o)}else i.setAttrib(w,"style",null),i.setAttrib(w,"class",null);return uu(e,w),xh(D),w},US=(e,t)=>{const n=null==e?void 0:e.parentNode;return ve(n)&&n.nodeName===t},zS=e=>ve(e)&&/^(OL|UL|LI)$/.test(e.nodeName),lf=e=>{const t=e.parentNode;return(e=>ve(e)&&/^(LI|DT|DD)$/.test(e.nodeName))(t)?t:e},cf=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!we(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},dW=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),Eh=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,wh=(e,t)=>ve(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),Sh=(e,t,n)=>fe(t)?e?1===n&&t.data.charAt(n-1)===Zn?0:n:n===t.data.length-1&&t.data.charAt(n)===Zn?t.data.length:n:n,HS={insert:(e,t)=>{let n,o,s,r,i=!1;const a=e.dom,m=e.schema.getNonEmptyElements(),v=e.selection.getRng(),x=ro(e),w=M_fromDom(v.startContainer),D=Eo(w,v.startOffset),O=D.exists(ce=>Lr(ce)&&!Wr(ce)),A=v.collapsed&&O,P=ce=>$S(e,n,be,ae,MN(e),ce),F=ce=>{const De=Sh(ce,n,o);if(fe(n)&&(ce?De>0:De<n.data.length))return!1;if(n.parentNode===be&&i&&!ce||ce&&we(n)&&n===be.firstChild)return!0;if(Eh(n,"TABLE")||Eh(n,"HR"))return i&&!ce||!i&&ce;const Ie=new mn(n,be);let Ke;for(fe(n)&&(ce&&0===De?Ie.prev():!ce&&De===n.data.length&&Ie.next());Ke=Ie.current();){if(we(Ke)){if(!Ke.getAttribute("data-mce-bogus")){const nt=Ke.nodeName.toLowerCase();if(m[nt]&&"br"!==nt)return!1}}else if(fe(Ke)&&!Ni(Ke.data))return!1;ce?Ie.prev():Ie.next()}return!0},z=()=>{let ce;return ce=/^(H[1-6]|PRE|FIGURE)$/.test(s)&&"HGROUP"!==ye?P(x):P(),((e,t)=>{const n=IN(e);return!Gt(t)&&(Fe(n)?kt(f.explode(n),t.nodeName.toLowerCase()):n)})(e,r)&&wh(a,r)&&a.isEmpty(be,void 0,{includeZwsp:!0})?ce=a.split(r,be):a.insertAfter(ce,be),Hl(e,ce),ce};hd(a,v).each(ce=>{v.setStart(ce.startContainer,ce.startOffset),v.setEnd(ce.endContainer,ce.endOffset)}),n=v.startContainer,o=v.startOffset;const q=!(!t||!t.shiftKey),j=!(!t||!t.ctrlKey);we(n)&&n.hasChildNodes()&&!A&&(i=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=i&&fe(n)?n.data.length:0);const ae=cu(a,n);if(!ae||((e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return null!==n&&"false"===e.dom.getContentEditableParent(n)})(e,n))return;q||(n=((e,t,n,o,s)=>{var r,i;const a=e.dom,c=null!==(r=cu(a,o))&&void 0!==r?r:a.getRoot();let m=a.getParent(o,a.isBlock);if(!m||!wh(a,m)){if(m=m||c,!m.hasChildNodes()){const D=a.create(t);return uu(e,D),m.appendChild(D),n.setStart(D,0),n.setEnd(D,0),D}let x,v=o;for(;v&&v.parentNode!==m;)v=v.parentNode;for(;v&&!a.isBlock(v);)x=v,v=v.previousSibling;const w=null===(i=null==x?void 0:x.parentElement)||void 0===i?void 0:i.nodeName;if(x&&w&&e.schema.isValidChild(w,t.toLowerCase())){const D=x.parentNode,O=a.create(t);for(uu(e,O),D.insertBefore(O,x),v=x;v&&!a.isBlock(v);){const A=v.nextSibling;O.appendChild(v),v=A}n.setStart(o,s),n.setEnd(o,s)}}return o})(e,x,v,n,o));let be=a.getParent(n,a.isBlock)||a.getRoot();r=ve(null==be?void 0:be.parentNode)?a.getParent(be.parentNode,a.isBlock):null,s=be?be.nodeName.toUpperCase():"";const ye=r?r.nodeName.toUpperCase():"";if("LI"!==ye||j||(be=r,r=r.parentNode,s=ye),we(r)&&((e,t,n)=>!t&&n.nodeName.toLowerCase()===ro(e)&&e.dom.isEmpty(n)&&((e,t,n)=>{let o=t;for(;o&&o!==e&&C(o.nextSibling);){const s=o.parentElement;if(!s||!n(s))return sb(s);o=s}return!1})(e.getBody(),n,o=>Ge(e.schema.getTextBlockElements(),o.nodeName.toLowerCase())))(e,q,be))return((e,t,n)=>{var o,s,r;const i=t(ro(e)),a=((e,t)=>e.dom.getParent(t,sb))(e,n);a&&(e.dom.insertAfter(i,a),Hl(e,i),(null!==(r=null===(s=null===(o=n.parentElement)||void 0===o?void 0:o.childNodes)||void 0===s?void 0:s.length)&&void 0!==r?r:0)>1&&e.dom.remove(n))})(e,P,be);if(/^(LI|DT|DD)$/.test(s)&&we(r)&&a.isEmpty(be))return void((e,t,n,o,s)=>{const r=e.dom,i=e.selection.getRng(),a=n.parentNode;if(n===e.getBody()||!a)return;(e=>zS(e)&&zS(e.parentNode))(n)&&(s="LI");let c=t(s);if(cf(n,o,!0)&&cf(n,o,!1))if(US(n,"LI")){const m=lf(n);r.insertAfter(c,m),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(n)?r.remove(m):r.remove(n)}else r.replace(c,n);else if(cf(n,o,!0))US(n,"LI")?(r.insertAfter(c,lf(n)),c.appendChild(r.doc.createTextNode(" ")),c.appendChild(n)):a.insertBefore(c,n),r.remove(o);else if(cf(n,o,!1))r.insertAfter(c,lf(n)),r.remove(o);else{n=lf(n);const m=i.cloneRange();m.setStartAfter(o),m.setEndAfter(n);const v=m.extractContents();"LI"===s&&((e,t)=>e.firstChild&&"LI"===e.firstChild.nodeName)(v)?(c=v.firstChild,r.insertAfter(v,n)):(r.insertAfter(v,n),r.insertAfter(c,n)),r.remove(o)}Hl(e,c)})(e,P,r,be,x);if(!(A||be!==e.getBody()&&wh(a,be)))return;const Q=be.parentNode;let K;if(A)K=P(x),D.fold(()=>{fn(w,M_fromDom(K))},ce=>{mo(ce,M_fromDom(K))}),e.selection.setCursorLocation(K,0);else if(Cl(be))K=lm(be),a.isEmpty(be)&&xh(be),uu(e,K),Hl(e,K);else if(F(!1))K=z();else if(F(!0)&&Q){K=Q.insertBefore(P(),be);const ce=(e=>e.dom.hasChildNodes())(M_fromDom(v.startContainer))&&v.collapsed;Hl(e,Eh(be,"HR")||ce?K:be)}else{const ce=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Sh(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Sh(!1,e.endContainer,e.endOffset)),t})(v).cloneRange();ce.setEndAfter(be);const De=ce.extractContents();(e=>{re(wi(M_fromDom(e),Bn),t=>{const n=t.dom;n.nodeValue=Ws(n.data)})})(De),(e=>{let t=e;do{fe(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(De),K=De.firstChild,a.insertAfter(De,be),((e,t,n)=>{var o;const s=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;we(r)&&!t[r.nodeName.toLowerCase()]&&s.push(r)}let i=s.length;for(;i--;)r=s[i],(!r.hasChildNodes()||r.firstChild===r.lastChild&&""===(null===(o=r.firstChild)||void 0===o?void 0:o.nodeValue)||dW(e,r))&&e.remove(r)})(a,m,K),((e,t)=>{t.normalize();const n=t.lastChild;(!n||we(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")})(a,be),a.isEmpty(be)&&xh(be),K.normalize(),a.isEmpty(K)?(a.remove(K),z()):(uu(e,K),Hl(e,K))}a.setAttrib(K,"id",""),e.dispatch("NewBlock",{newBlock:K})},fakeEventName:"insertParagraph"},qS=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),Hc(e,o)},CW=(e,t)=>{const n=M_fromTag("br");mo(M_fromDom(t),n),e.undoManager.add()},xW=(e,t)=>{wW(e.getBody(),t)||$s(M_fromDom(t),M_fromTag("br"));const n=M_fromTag("br");$s(M_fromDom(t),n),qS(e,n.dom,!1),e.undoManager.add()},wW=(e,t)=>!!(e=>ln(e.getNode()))(ee.after(t))||So(e,ee.after(t)).map(n=>ln(n.getNode())).getOr(!1),WS=e=>e&&"A"===e.nodeName&&"href"in e,SW=e=>e.fold(jt,WS,WS,jt),TW=(e,t)=>{t.fold(et,Te(CW,e),Te(xW,e),et)},jS={insert:(e,t)=>{const n=(e=>{const t=Te(Fa,e),n=ee.fromRangeStart(e.selection.getRng());return Cr(t,e.getBody(),n).filter(SW)})(e);n.isSome()?n.each(Te(TW,e)):((e,t)=>{const o=e.dom,s=e.selection.getRng();let r,i=!1;hd(o,s).each(D=>{s.setStart(D.startContainer,D.startOffset),s.setEnd(D.endContainer,D.endOffset)});let a=s.startOffset,c=s.startContainer;if(we(c)&&c.hasChildNodes()){const D=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,a=D&&fe(c)?c.data.length:0}let m=o.getParent(c,o.isBlock);const v=m&&m.parentNode?o.getParent(m.parentNode,o.isBlock):null;"LI"===(v?v.nodeName.toUpperCase():"")&&!(t&&t.ctrlKey)&&(m=v),fe(c)&&a>=c.data.length&&(((e,t,n)=>{const o=new mn(t,n);let s;const r=e.getNonEmptyElements();for(;s=o.next();)if(r[s.nodeName.toLowerCase()]||fe(s)&&s.length>0)return!0;return!1})(e.schema,c,m||o.getRoot())||(r=o.create("br"),s.insertNode(r),s.setStartAfter(r),s.setEndAfter(r),i=!0)),r=o.create("br"),Pm(o,s,r),qS(e,r,i),e.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},VS=(e,t)=>Ch(e).filter(n=>t.length>0&&I(M_fromDom(n),t)).isSome(),Go=fr_generate([{br:[]},{block:[]},{none:[]}]),AW=(e,t)=>(e=>VS(e,ON(e)))(e),ZS=e=>(t,n)=>(e=>Ch(e).filter(t=>mc(M_fromDom(t))).isSome())(t)===e,GS=(e,t)=>(n,o)=>(e=>Ch(e).fold(Ce(""),t=>t.nodeName.toUpperCase()))(n)===e.toUpperCase()===t,RW=e=>{const t=cu(e.dom,e.selection.getStart());return Gt(t)},du=e=>GS("pre",e),uf=e=>(t,n)=>RN(t)===e,PW=(e,t)=>(e=>VS(e,PN(e)))(e),df=(e,t)=>t,OW=e=>{const t=ro(e),n=cu(e.dom,e.selection.getStart());return ve(n)&&e.schema.isValidChild(n.nodeName,t)},MW=e=>{const t=e.selection.getRng(),n=M_fromDom(t.startContainer),s=Eo(n,t.startOffset).map(r=>Lr(r)&&!Wr(r));return t.collapsed&&s.getOr(!0)},ds=(e,t)=>(n,o)=>nn(e,(r,i)=>r&&i(n,o),!0)?T.some(t):T.none(),ff=(e,t,n)=>{t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),(!ve(n)||!af(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),ve(n)&&lu(t,e.fakeEventName))},YS=(e,t)=>{const n=()=>ff(jS,e,t),o=()=>ff(HS,e,t),s=((e,t)=>$E([ds([AW],Go.none()),ds([du(!0),RW],Go.none()),ds([GS("summary",!0)],Go.br()),ds([du(!0),uf(!1),df],Go.br()),ds([du(!0),uf(!1)],Go.block()),ds([du(!0),uf(!0),df],Go.block()),ds([du(!0),uf(!0)],Go.br()),ds([ZS(!0),df],Go.br()),ds([ZS(!0)],Go.block()),ds([PW],Go.br()),ds([df],Go.br()),ds([OW],Go.block()),ds([MW],Go.block())],[e,!(!t||!t.shiftKey)]).getOr(Go.none()))(e,t);switch(DN(e)){case"linebreak":s.fold(n,n,et);break;case"block":s.fold(o,o,et);break;case"invert":s.fold(o,n,et);break;default:s.fold(n,o,et)}},KS=Co(),BW=KS.os.isiOS()&&KS.browser.isSafari(),JS=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),(e=>{e.typing&&(e.typing=!1,e.add())})(e.undoManager),e.undoManager.transact(()=>{YS(e,t)}))},HW=Co(),QS=e=>e.stopImmediatePropagation(),XS=e=>e.keyCode===Ee.PAGE_UP||e.keyCode===Ee.PAGE_DOWN,e_=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",QS,!0):!n&&e.get()&&t.off("NodeChange",QS),e.set(n)},t_=(e,t)=>{const n=t.container(),o=t.offset();return fe(n)?(n.insertData(o,e),T.some(ee(n,o+e.length))):od(t).map(s=>{const r=M_fromText(e);return t.isAtEnd()?$s(s,r):mo(s,r),ee(r.dom,e.length)})},n_=Te(t_,Un),o_=Te(t_," "),s_=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},YW=e=>{const t=ee.fromRangeStart(e.selection.getRng()),n=M_fromDom(e.getBody());if(e.selection.isCollapsed()){const o=Te(Fa,e),s=ee.fromRangeStart(e.selection.getRng());return Cr(o,e.getBody(),s).bind((e=>t=>t.fold(n=>Bo(e.dom,ee.before(n)),n=>io(n),n=>Ts(n),n=>So(e.dom,ee.after(n))))(n)).map(r=>()=>((e,t)=>n=>WC(e,n)?n_(t):o_(t))(n,t)(r).each(s_(e)))}return T.none()},KW=e=>B(gt.browser.isFirefox()&&e.selection.isEditable()&&((e,t)=>e.isEditable(e.getParent(t,"summary")))(e.dom,e.selection.getRng().startContainer),()=>{const n=M_fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((e,t)=>WC(e,t)?n_(t):o_(t))(n,ee.fromRangeStart(e.selection.getRng())).each(s_(e))}),XW=e=>jA(e)?[{keyCode:Ee.TAB,action:je(oS,e,!0)},{keyCode:Ee.TAB,shiftKey:!0,action:je(oS,e,!1)}]:[],n6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Oq(e),yr(e))return zn(null);{const t=wz(e);return(e=>{e.on("keyup compositionstart",Te(yH,e))})(e),((e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const o=gt.os.isMacOS()||gt.os.isiOS();su([{keyCode:Ee.RIGHT,action:je(Mw,e,!0)},{keyCode:Ee.LEFT,action:je(Mw,e,!1)},{keyCode:Ee.UP,action:je(Iw,e,!1)},{keyCode:Ee.DOWN,action:je(Iw,e,!0)},...o?[{keyCode:Ee.UP,action:je(Jd,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Ee.DOWN,action:je(Jd,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ee.RIGHT,action:je(eS,e,!0)},{keyCode:Ee.LEFT,action:je(eS,e,!1)},{keyCode:Ee.UP,action:je(rh,e,!1)},{keyCode:Ee.DOWN,action:je(rh,e,!0)},{keyCode:Ee.UP,action:je(rh,e,!1)},{keyCode:Ee.UP,action:je(Fw,e,!1)},{keyCode:Ee.DOWN,action:je(Fw,e,!0)},{keyCode:Ee.RIGHT,action:je(Hw,e,!0)},{keyCode:Ee.LEFT,action:je(Hw,e,!1)},{keyCode:Ee.UP,action:je(qw,e,!1)},{keyCode:Ee.DOWN,action:je(qw,e,!0)},{keyCode:Ee.RIGHT,action:je(cw,e,t,!0)},{keyCode:Ee.LEFT,action:je(cw,e,t,!1)},{keyCode:Ee.RIGHT,ctrlKey:!o,altKey:o,action:je(Sz,e,t)},{keyCode:Ee.LEFT,ctrlKey:!o,altKey:o,action:je(_z,e,t)},{keyCode:Ee.UP,action:je(Lw,e,!1)},{keyCode:Ee.DOWN,action:je(Lw,e,!0)}],n).each(s=>{n.preventDefault()})})(e,t,n)})})(e,t),((e,t)=>{let n=!1;e.on("keydown",o=>{n=o.keyCode===Ee.BACKSPACE,o.isDefaultPrevented()||((e,t,n)=>{const o=n.keyCode===Ee.BACKSPACE?"deleteContentBackward":"deleteContentForward",s=e.selection.isCollapsed(),r=s?"character":"selection",i=a=>s?a?"word":"line":"selection";zw([{keyCode:Ee.BACKSPACE,action:je(Sw,e)},{keyCode:Ee.BACKSPACE,action:je(qg,e,!1)},{keyCode:Ee.DELETE,action:je(qg,e,!0)},{keyCode:Ee.BACKSPACE,action:je(Ug,e,!1)},{keyCode:Ee.DELETE,action:je(Ug,e,!0)},{keyCode:Ee.BACKSPACE,action:je(Qg,e,t,!1)},{keyCode:Ee.DELETE,action:je(Qg,e,t,!0)},{keyCode:Ee.BACKSPACE,action:je(Zp,e,!1)},{keyCode:Ee.DELETE,action:je(Zp,e,!0)},{keyCode:Ee.BACKSPACE,action:je(Wa,e,!1,r)},{keyCode:Ee.DELETE,action:je(Wa,e,!0,r)},...FS?[{keyCode:Ee.BACKSPACE,altKey:!0,action:je(Wa,e,!1,i(!0))},{keyCode:Ee.DELETE,altKey:!0,action:je(Wa,e,!0,i(!0))},{keyCode:Ee.BACKSPACE,metaKey:!0,action:je(Wa,e,!1,i(!1))}]:[{keyCode:Ee.BACKSPACE,ctrlKey:!0,action:je(Wa,e,!1,i(!0))},{keyCode:Ee.DELETE,ctrlKey:!0,action:je(Wa,e,!0,i(!0))}],{keyCode:Ee.BACKSPACE,action:je(Wg,e,!1)},{keyCode:Ee.DELETE,action:je(Wg,e,!0)},{keyCode:Ee.BACKSPACE,action:je(th,e,!1)},{keyCode:Ee.DELETE,action:je(th,e,!0)},{keyCode:Ee.BACKSPACE,action:je(Fg,e,!1)},{keyCode:Ee.DELETE,action:je(Fg,e,!0)},{keyCode:Ee.BACKSPACE,action:je(Lg,e,!1)},{keyCode:Ee.DELETE,action:je(Lg,e,!0)},{keyCode:Ee.BACKSPACE,action:je(Xg,e,!1)},{keyCode:Ee.DELETE,action:je(Xg,e,!0)}],n).filter(a=>e.selection.isEditable()).each(a=>{n.preventDefault(),af(e,o).isDefaultPrevented()||(a(),lu(e,o))})})(e,t,o)}),e.on("keyup",o=>{o.isDefaultPrevented()||((e,t,n)=>{su([{keyCode:Ee.BACKSPACE,action:je(OE,e)},{keyCode:Ee.DELETE,action:je(OE,e)},...FS?[{keyCode:Ee.BACKSPACE,altKey:!0,action:je(ou,e)},{keyCode:Ee.DELETE,altKey:!0,action:je(ou,e)},...n?[{keyCode:Vq?224:91,action:je(ou,e)}]:[]]:[{keyCode:Ee.BACKSPACE,ctrlKey:!0,action:je(ou,e)},{keyCode:Ee.DELETE,ctrlKey:!0,action:je(ou,e)}]],t)})(e,o,n),n=!1})})(e,t),(e=>{let t=T.none();e.on("keydown",s=>{s.keyCode===Ee.ENTER&&(BW&&(e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(fe(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,o=t.data.charAt(e.startOffset-1);return n.test(o)}return!1})(e.selection.getRng())?(s=>{t=T.some(s.selection.getBookmark()),s.undoManager.add()})(e):JS(e,s))}),e.on("keyup",s=>{s.keyCode===Ee.ENTER&&t.each(()=>((s,r)=>{s.undoManager.undo(),t.fold(et,i=>s.selection.moveToBookmark(i)),JS(s,r),t=T.none()})(e,s))})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{zw([{keyCode:Ee.SPACEBAR,action:je(YW,e)},{keyCode:Ee.SPACEBAR,action:je(KW,e)}],t).each(n=>{t.preventDefault(),af(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),lu(e,"insertText",{data:" "}))})})(e,t)})})(e),(e=>{e.on("input",t=>{t.isComposing||(e=>{const t=M_fromDom(e.getBody());e.selection.isCollapsed()&&YO(t,ee.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})})(e)})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{su([...XW(e)],t).each(n=>{t.preventDefault()})})(e,t)})})(e),((e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const o=gt.os.isMacOS()||gt.os.isiOS();su([{keyCode:Ee.END,action:je(Bw,e,!0)},{keyCode:Ee.HOME,action:je(Bw,e,!1)},...o?[]:[{keyCode:Ee.HOME,action:je(Jd,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ee.END,action:je(Jd,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ee.END,action:je(Ww,e,!0)},{keyCode:Ee.HOME,action:je(Ww,e,!1)},{keyCode:Ee.END,action:je(Kd,e,!0,t)},{keyCode:Ee.HOME,action:je(Kd,e,!1,t)}],n).each(s=>{n.preventDefault()})})(e,t,n)})})(e,t),((e,t)=>{if(HW.os.isMacOS())return;const n=zn(!1);e.on("keydown",o=>{XS(o)&&e_(n,e,!0)}),e.on("keyup",o=>{o.isDefaultPrevented()||((e,t,n)=>{su([{keyCode:Ee.PAGE_UP,action:je(Kd,e,!1,t)},{keyCode:Ee.PAGE_DOWN,action:je(Kd,e,!0,t)}],n)})(e,t,o),XS(o)&&n.get()&&(e_(n,e,!1),e.nodeChanged())})})(e,t),t}};class o6{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",s=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};("nodechange"===s.type||!pp(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const s=t.selection.getStart(!0);s&&cd(t)&&!o.isSameElementPath(s)&&t.dom.isChildOf(s,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",s=>{!s.isDefaultPrevented()&&cd(t)&&("IMG"===t.selection.getNode().nodeName?ls.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!uA(this.editor)&&!this.editor.mode.isReadOnly()){const s=this.editor.getBody();o=n.getStart(!0)||s,(o.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(o,s))&&(o=s);const r=[];this.editor.dom.getParent(o,i=>i===s||(r.push(i),!1)),this.editor.dispatch("NodeChange",{...t,element:o,parents:r})}}isSameElementPath(t){let n;const o=this.editor,s=Ar(o.dom.getParents(t,an,o.getBody()));if(s.length===this.lastPath.length){for(n=s.length;n>=0&&s[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=s,!0}return this.lastPath=s,!1}}const r_=Sc("image"),_h=Sc("event"),mf=e=>t=>{t[_h]=e},i_=mf(0),l6=mf(2),c6=mf(1),Th=Sc("mode"),pf=e=>t=>{t[Th]=e},a_=(e,t)=>pf(t)(e),l_=pf(0),kh=pf(2),m6=pf(1),c_=e=>t=>T.from(t[Th]).exists(o=>o===e),ql=c_(0),u_=c_(1),g6=["none","copy","link","move"],h6=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Nh=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(s){kt(g6,s)&&(t=s)},get effectAllowed(){return n},set effectAllowed(s){(t=>T.from(t[_h]).exists(o=>0===o))(o)&&kt(h6,s)&&(n=s)},get items(){return((e,t)=>({...t,get length(){return t.length},add:(n,o)=>{if(ql(e)){if(!Fe(n))return t.add(n);if(!dt(o))return t.add(n,o)}return null},remove:n=>{ql(e)&&t.remove(n)},clear:()=>{ql(e)&&t.clear()}}))(o,e.items)},get files(){return u_(o)?Object.freeze({length:0,item:e=>null}):e.files},get types(){return e.types},setDragImage:(s,r,i)=>{ql(o)&&(((e,t)=>{e[r_]=t})(o,{image:s,x:r,y:i}),e.setDragImage(s,r,i))},getData:s=>u_(o)?"":e.getData(s),setData:(s,r)=>{ql(o)&&e.setData(s,r)},clearData:s=>{ql(o)&&e.clearData(s)}};return l_(o),o},d_=(e,t)=>e.setData("text/html",t),f_="x-tinymce/html",gf=Ce(f_),Ah="\x3c!-- "+f_+" --\x3e",y6=e=>Ah+e,m_=e=>-1!==e.indexOf(Ah),p_="%MCEPASTEBIN%",Rh=e=>e.dom.get("mcepastebin"),T6=e=>ve(e)&&"mcepastebin"===e.id,g_=e=>e===p_,h_=(e,t)=>(f.each(t,n=>{e=Er(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),b_=e=>h_(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,o,s)=>o||s?Un:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),v_=(e,t)=>({content:e,cancelled:t}),Dh=(e,t)=>(e.insertContent(t,{merge:AA(e),paste:!0}),!0),Ph=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),$6=(e,t,n)=>!(e.selection.isCollapsed()||!Ph(t))&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0))(e,t,n),U6=(e,t,n)=>!!((e,t)=>Ph(t)&&Kt(Iv(e),n=>ci(t.toLowerCase(),`.${n.toLowerCase()}`)))(e,t)&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0))(e,t,n),q6=(e=>{let t=0;return()=>"mceclip"+t++})(),W6=e=>{const t=Nh();return d_(t,e),kh(t),t},y_=(e,t,n,o,s)=>{const r=((e,t,n)=>((e,t,n)=>{const o=((e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}))(e,t,n),s=((e,t)=>{const n=Bl({sanitize:zm(e)},e.schema);n.addNodeFilter("meta",s=>{f.each(s,r=>{r.remove()})});const o=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Bi({validate:!0},e.schema).serialize(o)})(e,o.content);return e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?((e,t,n)=>{const o=e.dom.create("div",{style:"display:none"},t),s=((e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}))(e,o,n);return v_(s.node.innerHTML,s.isDefaultPrevented())})(e,s,n):v_(s,o.isDefaultPrevented())})(e,t,n))(e,t,n);if(!r.cancelled){const i=r.content,a=()=>((e,t,n)=>{n||!RA(e)?Dh(e,t):((e,t)=>{f.each([$6,U6,Dh],n=>!n(e,t,Dh))})(e,t)})(e,i,o);s?af(e,"insertFromPaste",{dataTransfer:W6(i)}).isDefaultPrevented()||(a(),lu(e,"insertFromPaste")):a()}},hf=(e,t,n,o)=>{const s=n||m_(t);y_(e,(e=>e.replace(Ah,""))(t),s,!1,o)},Oh=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,"\n"),r=((e,t,n)=>{const o=e.split(/\n\n/),s=((e,t)=>{let n="<"+e;const o=Ji(t,(s,r)=>r+'="'+Ai.encodeAllRaw(s)+'"');return o.length&&(n+=" "+o.join(" ")),n+">"})(t,n),r="</"+t+">",i=pt(o,c=>c.split(/\n/).join("<br />"));return 1===i.length?i[0]:pt(i,c=>s+c+r).join("")})(mb(o,PA(e)),ro(e),Ac(e));y_(e,r,!1,!0,n)},C_=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Hi=(e,t)=>t in e&&e[t].length>0,x_=e=>Hi(e,"text/html")||Hi(e,"text/plain"),E_=(e,t,n)=>{const o=(e=>"paste"===e.type)(t)?t.clipboardData:t.dataTransfer;if(td(e)&&o){const s=((e,t)=>{const n=t.items?yo(Jn(t.items),s=>"file"===s.kind?[s.getAsFile()]:[]):[],o=t.files?Jn(t.files):[];return Ve(n.length>0?n:o,(e=>{const t=Iv(e);return n=>yn(n.type,"image/")&&Kt(t,o=>(e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return f.hasOwn(n,t)?"image/"+n[t]:"image/"+t})(o)===n.type)})(e))})(e,o);if(s.length>0)return t.preventDefault(),(e=>Promise.all(pt(e,t=>mx(t).then(n=>({file:t,uri:n})))))(s).then(r=>{n&&e.selection.setRng(n),re(r,i=>{((e,t)=>{pg(t.uri).each(({data:n,type:o,base64Encoded:s})=>{const r=s?n:btoa(n),i=t.file,a=e.editorUpload.blobCache,c=a.getByData(r,o),m=null!=c?c:((e,t,n,o)=>{const s=q6(),r=Sv(e)&&ve(n.name),i=r?((e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ve(n)?e.dom.encode(n[1]):void 0})(e,n.name):s,c=t.create(s,n,o,i,r?n.name:void 0);return t.add(c),c})(e,a,i,r);hf(e,`<img src="${m.blobUri()}">`,!1,!0)})})(e,i)})}),!0}return!1},Mh=(e,t,n,o,s)=>{let r=b_(n);const i=Hi(t,gf())||m_(n),a=!i&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(r),c=Ph(r);(g_(r)||!r.length||a&&!c)&&(o=!0),(o||c)&&(r=Hi(t,"text/plain")&&a?t["text/plain"]:(e=>{const t=Ri(),n=Bl({},t);let o="";const s=t.getVoidElements(),r=f.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const m=c.name,v=c;if("br"!==m){if("wbr"!==m){if(s[m]&&(o+=" "),r[m])return void(o+=" ");if(3===c.type&&(o+=c.value),!(c.name in t.getVoidElements())){let x=c.firstChild;if(x)do{a(x)}while(x=x.next)}i[m]&&v.next&&(o+="\n","p"===m&&(o+="\n"))}}else o+="\n"};return e=h_(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),o})(r)),!g_(r)&&(o?Oh(e,r,s):hf(e,r,i,s))},nj=(e,t,n)=>{((e,t,n)=>{let o;e.on("keydown",r=>{(e=>Ee.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(r)&&!r.isDefaultPrevented()&&(o=r.shiftKey&&86===r.keyCode)}),e.on("paste",r=>{if(r.isDefaultPrevented()||(e=>{var t,n;return gt.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)})(r))return;const i="text"===n.get()||o;o=!1;const a=C_(r.clipboardData);!x_(a)&&E_(e,r,t.getLastRng()||e.selection.getRng())||(Hi(a,"text/html")?(r.preventDefault(),Mh(e,a,a["text/html"],i,!0)):Hi(a,"text/plain")&&Hi(a,"text/uri-list")?(r.preventDefault(),Mh(e,a,a["text/plain"],i,!0)):(t.create(),ls.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),Mh(e,a,c,i,!1)},0)))})})(e,t,n),(e=>{const t=s=>yn(s,"webkit-fake-url"),n=s=>yn(s,"data:");e.parser.addNodeFilter("img",(s,r,i)=>{if(!td(e)&&(s=>{var r;return!0===(null===(r=s.data)||void 0===r?void 0:r.paste)})(i))for(const a of s){const c=a.attr("src");Fe(c)&&!a.attr("data-mce-object")&&c!==gt.transparentSrc&&(t(c)||!OA(e)&&n(c))&&a.remove()}})})(e)},w_=(e,t,n,o)=>{((e,t,n)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(gf(),t),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},S_=e=>(t,n)=>{const{dom:o,selection:s}=e,r=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},t);o.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),o.add(e.getBody(),r);const a=s.getRng();i.focus();const c=o.createRng();c.selectNodeContents(i),s.setRng(c),ls.setEditorTimeout(e,()=>{s.setRng(a),o.remove(r),n()},0)},__=e=>({html:y6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),T_=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),k_=(e,t)=>{var n,o;return Ia.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(o=t.clientY)&&void 0!==o?o:0,e.getDoc())},N_=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},bj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,A_=e=>f.trim(e).replace(bj,ld).toLowerCase(),vj=(e,t,n)=>{const o=kA(e);if(n||"all"===o||!NA(e))return t;const s=o?o.split(/[, ]/):[];if(s&&"none"!==o){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,m,v)=>{const x=r.parseStyle(r.decode(m)),w={};for(let O=0;O<s.length;O++){const A=x[s[O]];let P=A,F=r.getStyle(i,s[O],!0);/color/.test(s[O])&&(P=A_(P),F=A_(F)),F!==P&&(w[s[O]]=A)}const D=r.serializeStyle(w,"span");return D?c+' style="'+D+'"'+v:c+v})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c)},Cj=e=>{const t=zn(!1),n=zn(DA(e)?"text":"html"),o=(e=>{const t=zn(null);return{create:()=>((e,t)=>{const{dom:n,selection:o}=e,s=e.getBody();t.set(o.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},p_);gt.browser.isFirefox()&&n.setStyle(r,"left","rtl"===n.getStyle(s,"direction",!0)?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),o.select(r,!0)})(e,t),remove:()=>((e,t)=>{const n=e.dom;if(Rh(e)){let o;const s=t.get();for(;o=Rh(e);)n.remove(o),n.unbind(o);s&&e.selection.setRng(s)}t.set(null)})(e,t),getEl:()=>Rh(e),getHtml:()=>(e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[o,...s]=Ve(e.getBody().childNodes,T6);re(s,i=>{n(o,i)});const r=t.select("div[id=mcepastebin]",o);for(let i=r.length-1;i>=0;i--){const a=t.create("div");o.insertBefore(a,r[i]),n(a,r[i])}return o?o.innerHTML:""})(e),getLastRng:t.get}})(e);(e=>{(gt.browser.isChromium()||gt.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})})(e,vj)})(e),((e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{((e,t)=>{"text"===t.get()?(t.set("html"),By(e,!1)):(t.set("text"),By(e,!0)),e.focus()})(e,t)}),e.addCommand("mceInsertClipboardContent",(n,o)=>{o.html&&hf(e,o.html,o.internal,!1),o.text&&Oh(e,o.text,!1)})})(e,n),(e=>{const t=s=>r=>{s(e,r)},n=SA(e);St(n)&&e.on("PastePreProcess",t(n));const o=_A(e);St(o)&&e.on("PastePostProcess",t(o))})(e),e.on("PreInit",()=>{(e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&T_(e)&&w_(t,__(e),S_(e),()=>{if(gt.browser.isChromium()||gt.browser.isFirefox()){const n=e.selection.getRng();ls.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&T_(e)&&w_(t,__(e),S_(e),et)})(e))})(e),((e,t)=>{wA(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),td(e)||e.on("drop",n=>{const o=n.dataTransfer;o&&(e=>Kt(e.files,t=>/^image\//.test(t.type)))(o)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const o=k_(e,n);if(Gt(o))return;const s=C_(n.dataTransfer),r=Hi(s,gf());if((!x_(s)||(e=>{const t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(s))&&E_(e,n,o))return;const i=s[gf()],a=i||s["text/html"]||s["text/plain"],c=((e,t,n,o)=>{const s=e.getParent(n,i=>xa(t,i));if(!C(e.getParent(n,"summary")))return!0;if(s&&Ge(o,"text/html")){const i=(new DOMParser).parseFromString(o["text/html"],"text/html").body;return!C(i.querySelector(s.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,o.startContainer,s),m=t.get();m&&!c||a&&(n.preventDefault(),ls.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(i||m&&c)&&e.execCommand("Delete"),N_(e,o);const v=b_(a);s["text/html"]?hf(e,v,r,!0):Oh(e,v,!0)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{td(e)&&!t.get()&&(n.preventDefault(),N_(e,k_(e,n))),"dragend"===n.type&&t.set(!1)}),(e=>{e.on("input",t=>{const n=o=>C(o.querySelector("summary"));if("deleteByDrag"===t.inputType){const o=Ve(e.dom.select("details"),n);re(o,s=>{ln(s.firstChild)&&s.firstChild.remove();const r=e.dom.create("summary");r.appendChild(gc().dom),s.prepend(r)})}})})(e)})(e,t),nj(e,o,n)})},Sj=ln,R_=fe,_j=e=>Zt(e.dom),D_=e=>t=>ne(M_fromDom(e),t),P_=(e,t)=>Hr(M_fromDom(e),_j,D_(t)),O_=(e,t,n)=>{const o=new mn(e,t),s=n?o.next.bind(o):o.prev.bind(o);let r=e;for(let i=n?e:s();i&&!Sj(i);i=s())_s(i)&&(r=i);return r},Aj=e=>{const t=((e,t)=>{const o=ee.fromRangeStart(e).getNode(),s=((e,t)=>Hr(M_fromDom(e),n=>(e=>qs(e.dom))(n)||os(n),D_(t)).getOr(M_fromDom(t)).dom)(o,t),r=O_(o,s,!1),i=O_(o,s,!0),a=document.createRange();return P_(r,s).fold(()=>{R_(r)?a.setStart(r,0):a.setStartBefore(r)},c=>a.setStartBefore(c.dom)),P_(i,s).fold(()=>{R_(i)?a.setEnd(i,i.data.length):a.setEndAfter(i)},c=>a.setEndAfter(c.dom)),a})(e.selection.getRng(),e.getBody());e.selection.setRng(Qp(t))};var fu=function(e){return e.Before="before",e.After="after",e}(fu||{});const Dj=(e,t)=>Math.abs(e.left-t),Pj=(e,t)=>Math.abs(e.right-t),Bj=(e,t)=>{const n=Ve(e,o=>((e,t)=>e>=t.top&&e<=t.bottom)(t,o));return(e=>nn(e,(t,n)=>t.fold(()=>T.some(n),o=>{const s=Math.min(n.left,o.left),r=Math.min(n.top,o.top),i=Math.max(n.right,o.right),a=Math.max(n.bottom,o.bottom);return T.some({top:r,right:i,bottom:a,left:s,width:i-s,height:a-r})}),T.none()))(n).fold(()=>[[],e],o=>{const{pass:s,fail:r}=kr(e,i=>((e,t)=>{const n=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&n>.5})(i,o));return[s,r]})},Fj=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Ih=(e,t,n)=>{const o=v=>_s(v.node)?T.some(v):we(v.node)?Ih(Jn(v.node.childNodes),t,n):T.none(),r=(v,x)=>{const w=Tn(v,(D,O)=>x(D,t,n)-x(O,t,n));return((v,x)=>{if(v.length>=2){const w=o(v[0]).getOr(v[0]),D=o(v[1]).getOr(v[1]);if(Math.abs(x(w,t,n)-x(D,t,n))<2){if(fe(w.node))return T.some(w);if(fe(D.node))return T.some(D)}}return T.none()})(w,x).orThunk(()=>Qn(w,o))},[i,a]=Bj(ew(e),n),{pass:c,fail:m}=kr(a,v=>v.top<n);return r(i,Fj).orThunk(()=>r(m,Zb)).orThunk(()=>r(c,Zb))},M_=(e,t,n)=>((e,t,n)=>{const o=M_fromDom(e),s=qe(o),i=M_fromPoint(s,t,n).filter(a=>_e(o,a)).getOr(o);return((e,t,n,o)=>{const s=(r,i)=>{const c=Ve(r.dom.childNodes,wr(m=>we(m)&&m.classList.contains("mce-drag-container")));return i.fold(()=>Ih(c,n,o),m=>{const v=Ve(c,x=>x!==m.dom);return Ih(v,n,o)}).orThunk(()=>(ne(r,e)?T.none():at(r)).bind(v=>s(v,T.some(r))))};return s(t,T.none())})(o,i,t,n)})(e,t,n).filter(o=>Pc(o.node)).map(o=>((e,t)=>({node:e.node,position:Dj(e,t)<Pj(e,t)?fu.Before:fu.After}))(o,t)),I_=e=>{var t,n;const o=e.getBoundingClientRect(),s=e.ownerDocument,r=s.documentElement,i=s.defaultView;return{top:o.top+(null!==(t=null==i?void 0:i.scrollY)&&void 0!==t?t:0)-r.clientTop,left:o.left+(null!==(n=null==i?void 0:i.scrollX)&&void 0!==n?n:0)-r.clientLeft}},B_=e=>({target:e,srcElement:e}),Kj=(e,t,n,o)=>{const s=((e,t)=>{const n=(e=>{const t=Nh(),n=(e=>T.from(e[Th]))(e);return kh(e),i_(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,(e=>T.from(e[r_]))(e).each(o=>t.setDragImage(o.image,o.x,o.y)),re(e.types,o=>{"Files"!==o&&t.setData(o,e.getData(o))}),re(e.files,o=>t.items.add(o)),(e=>T.from(e[_h]))(e).each(o=>{((e,t)=>{mf(t)(e)})(t,o)}),n.each(o=>{a_(e,o),a_(t,o)}),t})(e);return"dragstart"===t?(i_(n),l_(n)):"drop"===t?(l6(n),kh(n)):(c6(n),m6(n)),n})(n,e);return dt(o)?((e,t,n)=>{const o=Sr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:o,initEvent:o,preventDefault:et,stopImmediatePropagation:et,stopPropagation:et,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:n,...B_(t)}})(e,t,s):((e,t,n,o)=>({...t,dataTransfer:o,type:e,...B_(n)}))(e,o,t,s)},L_=Zt,Qj=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(L_,qs),t4=(e,t,n,o)=>{const s=e.dom,r=t.cloneNode(!0);s.setStyles(r,{width:n,height:o}),s.setAttrib(r,"data-mce-selected",null);const i=s.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return s.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),s.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},Cf=(e,t)=>n=>()=>{n.scroll({[e]:("left"===e?n.scrollX:n.scrollY)+t,behavior:"smooth"})},F_=Cf("left",-32),$_=Cf("left",32),U_=Cf("top",-32),z_=Cf("top",32),H_=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},mu=(e,t,n,o,s)=>{"dragstart"===t&&d_(o,e.dom.getOuterHTML(n));const r=Kj(t,n,o,s);return e.dispatch(t,r)},c4=(e,t)=>{const n=Yu((s,r)=>((e,t,n)=>{e._selectionOverrides.hideFakeCaret(),M_(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),o=>{const s=e._selectionOverrides.showCaret(1,o.node,o.position===fu.Before,!1);s?e.selection.setRng(s):e.selection.placeCaretAt(t,n)})})(t,s,r),0);t.on("remove",n.cancel);const o=e;return s=>e.on(r=>{const i=Math.max(Math.abs(s.screenX-r.screenX),Math.abs(s.screenY-r.screenY));if(!r.dragging&&i>10){const a=mu(t,"dragstart",r.element,r.dataTransfer,s);if(ve(a.dataTransfer)&&(r.dataTransfer=a.dataTransfer),a.isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const a=s.currentTarget===t.getDoc().documentElement,c=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(r,((e,t)=>((e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}))((e=>e.inline?I_(e.getBody()):{left:0,top:0})(e),(e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=I_(e.getContentAreaContainer()),o=(e=>{const t=e.getBody(),n=e.getDoc().documentElement;return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop}})(e);return{left:t.pageX-n.left+o.left,top:t.pageY-n.top+o.top}}return{left:t.pageX,top:t.pageY}})(e,t)))(t,s));((e,t)=>{e.parentNode!==t&&t.appendChild(e)})(r.ghost,t.getBody()),((e,t,n,o,s,r,i,a,c,m,v,x)=>{let w=0,D=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>s&&(w=t.pageX+n-s),t.pageY+o>r&&(D=t.pageY+o-r),e.style.width=n-w+"px",e.style.height=o-D+"px";const O=c.clientHeight,A=c.clientWidth,P=i+c.getBoundingClientRect().top,F=a+c.getBoundingClientRect().left;v.on(z=>{z.intervalId.clear(),z.dragging&&x&&(i+8>=O?z.intervalId.set(z_(m)):i-8<=0?z.intervalId.set(U_(m)):a+8>=A?z.intervalId.set($_(m)):a-8<=0?z.intervalId.set(F_(m)):P+16>=window.innerHeight?z.intervalId.set(z_(window)):P-16<=0?z.intervalId.set(U_(window)):F+16>=window.innerWidth?z.intervalId.set($_(window)):F-16<=0&&z.intervalId.set(F_(window)))})})(r.ghost,c,r.width,r.height,r.maxX,r.maxY,s.clientY,s.clientX,t.getContentAreaContainer(),t.getWin(),o,a),n.throttle(s.clientX,s.clientY)}})},q_=(e,t,n)=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>mu(t,"dragend",o.element,o.dataTransfer),s=>mu(t,"dragend",o.element,o.dataTransfer,s))}),W_(e)},W_=e=>{e.on(t=>{t.intervalId.clear(),H_(t.ghost)}),e.clear()},m4=e=>{const t=Di(),n=Ut.DOM,o=document,s=((e,t)=>n=>{if((e=>0===e.button)(n)){const o=Jt(t.dom.getParents(n.target),Qj).getOr(null);if(ve(o)&&((e,t,n)=>L_(n)&&n!==t&&e.isEditable(n.parentElement))(t.dom,t.getBody(),o)){const s=t.dom.getPos(o),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:o,dataTransfer:Nh(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-s.x,relY:n.pageY-s.y,width:o.offsetWidth,height:o.offsetHeight,ghost:t4(t,o,o.offsetWidth,o.offsetHeight),intervalId:Ok(100)})}}})(t,e),r=c4(t,e),i=((e,t)=>n=>{e.on(o=>{var s;if(o.intervalId.clear(),o.dragging){if(((e,t,n)=>!Gt(t)&&t!==n&&!e.dom.isChildOf(t,n)&&e.dom.isEditable(t))(t,(e=>{const t=e.getSel();if(ve(t)){const o=t.getRangeAt(0).startContainer;return fe(o)?o.parentNode:o}return null})(t.selection),o.element)){const r=null!==(s=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==s?s:t.getBody();mu(t,"drop",r,o.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{((e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);H_(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&Ti(M_fromDom(n))})(t.dom,o.element),(e=>{const t=e.getData("text/html");return""===t?T.none():T.some(t)})(o.dataTransfer).each(a=>t.insertContent(a)),t._selectionOverrides.hideFakeCaret()})}mu(t,"dragend",t.getBody(),o.dataTransfer,n)}}),W_(e)})(t,e),a=((e,t)=>n=>q_(e,t,T.some(n)))(t,e);e.on("mousedown",s),e.on("mousemove",r),e.on("mouseup",i),n.bind(o,"mousemove",r),n.bind(o,"mouseup",a),e.on("remove",()=>{n.unbind(o,"mousemove",r),n.unbind(o,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===Ee.ESC&&q_(t,e,T.none())})},pu=Zt,j_=(e,t)=>$a(e.getBody(),t),v4=e=>{const t=e.selection,n=e.dom,o=e.getBody(),s=rR(e,o,n.isBlock,()=>Ba(e)),r="sel-"+n.uniqueId(),i="data-mce-selected";let a;const m=ye=>ye!==o&&(pu(ye)||dr(ye))&&n.isChildOf(ye,o)&&n.isEditable(ye.parentNode),x=(ye,Q,K,ce=!0)=>e.dispatch("ShowCaret",{target:Q,direction:ye,before:K}).isDefaultPrevented()?null:(ce&&t.scrollIntoView(Q,-1===ye),s.show(K,Q)),O=ye=>ss(ye)||Uu(ye)||zu(ye),A=ye=>O(ye.startContainer)||O(ye.endContainer),q=(ye,Q)=>{if(!ye)return null;if(ye.collapsed){if(!A(ye)){const Ie=Q?1:-1,Ke=Bc(Ie,o,ye),nt=Ke.getNode(!Q);if(ve(nt)){if(Pc(nt))return x(Ie,nt,!!Q&&!Ke.isAtEnd(),!1);if(ki(nt)&&Zt(nt.nextSibling)){const Bt=n.createRng();return Bt.setStart(nt,0),Bt.setEnd(nt,0),Bt}}const wt=Ke.getNode(Q);if(ve(wt)){if(Pc(wt))return x(Ie,wt,!Q&&!Ke.isAtEnd(),!1);if(ki(wt)&&Zt(wt.previousSibling)){const Bt=n.createRng();return Bt.setStart(wt,1),Bt.setEnd(wt,1),Bt}}}return null}let K=ye.startContainer,ce=ye.startOffset;const De=ye.endOffset;if(fe(K)&&0===ce&&pu(K.parentNode)&&(K=K.parentNode,ce=n.nodeIndex(K),K=K.parentNode),!we(K))return null;if(De===ce+1&&K===ye.endContainer){const Ie=K.childNodes[ce];if(m(Ie))return(ye=>{const Q=ye.cloneNode(!0),K=e.dispatch("ObjectSelected",{target:ye,targetClone:Q});if(K.isDefaultPrevented())return null;const ce=((ye,Q)=>{const K=M_fromDom(e.getBody()),ce=e.getDoc(),De=ba(K,"#"+r).getOrThunk(()=>{const nt=M_fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ce);return un(nt,"id",r),fn(K,nt),nt}),Ie=n.createRng();Ei(De),jr(De,[M_fromText(Un,ce),M_fromDom(Q),M_fromText(Un,ce)]),Ie.setStart(De.dom.firstChild,1),Ie.setEnd(De.dom.lastChild,0),gl(De,{top:n.getPos(ye,e.getBody()).y+"px"}),nC(De);const Ke=t.getSel();return Ke&&(Ke.removeAllRanges(),Ke.addRange(Ie)),Ie})(ye,K.targetClone),De=M_fromDom(ye);return re(bn(M_fromDom(e.getBody()),`*[${i}]`),Ie=>{ne(De,Ie)||xn(Ie,i)}),n.getAttrib(ye,i)||ye.setAttribute(i,"1"),a=ye,be(),ce})(Ie)}return null},j=()=>{a&&a.removeAttribute(i),ba(M_fromDom(e.getBody()),"#"+r).each(qt),a=null},be=()=>{s.hide()};return yr(e)||(e.on("click",Q=>{n.isEditable(Q.target)||(Q.preventDefault(),e.focus())}),e.on("blur NewBlock",j),e.on("ResizeWindow FullscreenStateChanged",s.reposition),e.on("tap",Q=>{const K=Q.target,ce=j_(e,K);pu(ce)?(Q.preventDefault(),eu(e,ce).each(q)):m(K)&&eu(e,K).each(q)},!0),e.on("mousedown",Q=>{const K=Q.target;if(K!==o&&"HTML"!==K.nodeName&&!n.isChildOf(K,o)||!((e,t,n)=>{const o=M_fromDom(e.getBody()),s=e.inline?o:(e=>M_fromDom(qe(e).dom.documentElement))(o),r=((e,t,n,o)=>{const s=(e=>e.dom.getBoundingClientRect())(t);return{x:n-(e?s.left+t.dom.clientLeft+l2(t):0),y:o-(e?s.top+t.dom.clientTop+a2(t):0)}})(e.inline,s,t,n);return((e,t,n)=>{const o=r2(e),s=i2(e);return t>=0&&n>=0&&t<=o&&n<=s})(s,r.x,r.y)})(e,Q.clientX,Q.clientY))return;j(),be();const ce=j_(e,K);pu(ce)?(Q.preventDefault(),eu(e,ce).each(q)):M_(o,Q.clientX,Q.clientY).each(De=>{var ye;Q.preventDefault(),(ye=x(1,De.node,De.position===fu.Before,!1))&&t.setRng(ye),we(ce)?ce.focus():e.getBody().focus()})}),e.on("keypress",Q=>{Ee.modifierPressed(Q)||pu(t.getNode())&&Q.preventDefault()}),e.on("GetSelectionRange",Q=>{let K=Q.range;if(a){if(!a.parentNode)return void(a=null);K=K.cloneRange(),K.selectNode(a),Q.range=K}}),e.on("SetSelectionRange",Q=>{Q.range=(ye=>{const Q=e.schema.getVoidElements(),K=n.createRng(),ce=ye.startContainer,De=ye.startOffset,Ie=ye.endContainer,Ke=ye.endOffset;return Ge(Q,ce.nodeName.toLowerCase())?0===De?K.setStartBefore(ce):K.setStartAfter(ce):K.setStart(ce,De),Ge(Q,Ie.nodeName.toLowerCase())?0===Ke?K.setEndBefore(Ie):K.setEndAfter(Ie):K.setEnd(Ie,Ke),K})(Q.range);const K=q(Q.range,Q.forward);K&&(Q.range=K)}),e.on("AfterSetSelectionRange",Q=>{const K=Q.range,ce=K.startContainer.parentElement;var ye;!A(K)&&!(Q=>we(Q)&&"mcepastebin"===Q.id)(ce)&&be(),ve(ye=ce)&&n.hasClass(ye,"mce-offscreen-selection")||j()}),(e=>{m4(e),mA(e)&&(e=>{const t=s=>{if(!s.isDefaultPrevented()){const r=s.dataTransfer;r&&(kt(r.types,"Files")||r.files.length>0)&&(s.preventDefault(),"drop"===s.type&&zd(e,"Dropped file type is not supported"))}},n=s=>{yd(e,s.target)&&t(s)},o=()=>{const s=Ut.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];re(c,m=>{s.bind(i,m,n),r.bind(a,m,t)}),e.on("remove",()=>{re(c,m=>{s.unbind(i,m,n),r.unbind(a,m,t)})})};e.on("init",()=>{ls.setEditorTimeout(e,o,0)})})(e)})(e),(e=>{const t=Yu(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const o=$g(e,n,!1);e.selection.setRng(o)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})})(e),(e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(dr(n)){const o=$a(e.getBody(),n),s=Zt(o)?o:n;e.selection.getNode()!==s&&eu(e,s).each(r=>e.selection.setRng(r))}})})})(e)),{showCaret:x,showBlockCaretContainer:ye=>{ye.hasAttribute("data-mce-caret")&&(lm(ye),t.scrollIntoView(ye))},hideFakeCaret:be,destroy:()=>{s.destroy(),a=null}}},y4=(e,t)=>{let n=t;for(let o=e.previousSibling;fe(o);o=o.previousSibling)n+=o.data.length;return n},V_=(e,t,n,o,s)=>{if(fe(n)&&(o<0||o>n.data.length))return[];const r=s&&fe(n)?[y4(n,o)]:[o];let i=n;for(;i!==t&&i.parentNode;)r.push(e.nodeIndex(i,s)),i=i.parentNode;return i===t?r.reverse():[]},Bh=(e,t,n,o,s,r,i=!1)=>({start:V_(e,t,n,o,i),end:V_(e,t,s,r,i)}),Z_=(e,t)=>{const n=t.slice(),o=n.pop();return _t(o)?nn(n,(r,i)=>r.bind(a=>T.from(a.childNodes[i])),T.some(e)).bind(r=>fe(r)&&(o<0||o>r.data.length)?T.none():T.some({node:r,offset:o})):T.none()},G_=(e,t)=>Z_(e,t.start).bind(({node:n,offset:o})=>Z_(e,t.end).map(({node:s,offset:r})=>{const i=document.createRange();return i.setStart(n,o),i.setEnd(s,r),i})),Wl=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,fe(t.firstChild)&&Ni(t.firstChild.data)),Wl(e,o,n)}},xf=(e,t,n,o=!0)=>{const s=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(fe(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),fe(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),Wl(e,s,n),s!==r&&Wl(e,r,n))},Lh=(e,t)=>T.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),Y_=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:hv(o).concat(e.blockPatterns),inlinePatterns:bv(o).concat(e.inlinePatterns)}},K_=(e,t,n,o)=>{const s=e.createRng();return s.setStart(t,0),s.setEnd(n,o),s.toString()},J_=(e,t,n)=>{((e,t,n)=>{if(fe(e)&&0>=e.length)return T.some(Js(e,0));{const o=Ta(Qd);return T.from(o.forwards(e,0,Xd(e),n)).map(s=>Js(s.container,0))}})(t,0,t).each(s=>{const r=s.container;sS(r,n.start.length,t).each(c=>{const m=e.createRng();m.setStart(r,0),m.setEnd(c.container,c.offset),xf(e,m,v=>v===t)});const i=M_fromDom(r),a=Bu(i);(e=>/^\s[^\s]/.test(e))(a)&&((e,t)=>{sm.set(e,t)})(i,a.slice(1))})},Q_=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Ef=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},X_=(e,t,n)=>{const o=G_(e.getRoot(),n).getOrDie("Unable to resolve path range"),s=o.startContainer,r=o.endContainer,i=0===o.endOffset?r:r.splitText(o.endOffset),a=0===o.startOffset?s:s.splitText(o.startOffset),c=a.parentNode;return{prefix:t,end:i.parentNode.insertBefore(Q_(e,t+"-end"),i),start:c.insertBefore(Q_(e,t+"-start"),a)}},e1=(e,t,n)=>{Wl(e,e.get(t.prefix+"-end"),n),Wl(e,e.get(t.prefix+"-start"),n)},Fh=e=>0===e.start.length,t1=(e,t,n,o)=>{const s=t.start;return lh(e,o.container,o.offset,(e=>(t,n)=>{const s=t.data.substring(0,n),r=s.lastIndexOf(e.charAt(e.length-1)),i=s.lastIndexOf(e);return-1!==i?i+e.length:-1!==r?r+1:-1})(s),n).bind(i=>{var a,c;const m=null!==(c=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(s))&&void 0!==c?c:-1;if(-1!==m&&i.offset>=m+s.length){const x=e.createRng();return x.setStart(i.container,i.offset-s.length),x.setEnd(i.container,i.offset),T.some(x)}return ah(i.container,i.offset-s.length,n).map(w=>{const D=e.createRng();return D.setStart(w.container,w.offset),D.setEnd(i.container,i.offset),D}).filter(w=>w.toString()===s).orThunk(()=>t1(e,t,n,Js(i.container,0)))})},A4=(e,t,n,o)=>{const s=e.dom,r=s.getRoot(),i=n.pattern,a=n.position.container,c=n.position.offset;return ah(a,c-n.pattern.end.length,t).bind(m=>{const v=Bh(s,r,m.container,m.offset,a,c,o);if(Fh(i))return T.some({matches:[{pattern:i,startRng:v,endRng:v}],position:m});{const x=wf(e,n.remainingPatterns,m.container,m.offset,t,o),w=x.getOr({matches:[],position:m}),D=w.position;return((e,t,n,o,s,r=!1)=>{if(0===t.start.length&&!r){const i=e.createRng();return i.setStart(n,o),i.setEnd(n,o),T.some(i)}return ih(n,o,s).bind(i=>t1(e,t,s,i).bind(c=>{var m;if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return T.none();if(0===i.offset&&(null===(m=c.endContainer.textContent)||void 0===m?void 0:m.length)===c.endOffset)return T.none()}return T.some(c)}))})(s,i,D.container,D.offset,t,x.isNone()).map(A=>{const P=((e,t,n,o=!1)=>Bh(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o))(s,r,A,o);return{matches:w.matches.concat([{pattern:i,startRng:P,endRng:v}]),position:Js(A.startContainer,A.startOffset)}})}})},wf=(e,t,n,o,s,r)=>{const i=e.dom;return ih(n,o,i.getRoot()).bind(a=>{const c=K_(i,s,n,o);for(let m=0;m<t.length;m++){const v=t[m];if(!ci(c,v.end))continue;const x=t.slice();x.splice(m,1);const w=A4(e,s,{pattern:v,remainingPatterns:x,position:a},r);if(w.isNone()&&o>0)return wf(e,t,n,o-1,s,r);if(w.isSome())return w}return T.none()})},n1=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?re(t.format,o=>{e.formatter.apply(o)}):e.execCommand(t.cmd,!1,t.value)},o1=(e,t,n,o,s,r)=>{const i=wf(e,s.inlinePatterns,n,o,t,r).fold(()=>[],c=>c.matches),a=wf(e,(e=>Tn(e,(t,n)=>n.end.length-t.end.length))(s.inlinePatterns),n,o,t,r).fold(()=>[],c=>c.matches);return((e,t)=>{const n=hs(e,o=>Kt(t,s=>o.pattern.start===s.pattern.start&&o.pattern.end===s.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t})(i,a)},s1=(e,t)=>{if(0===t.length)return;const n=e.dom,o=e.selection.getBookmark(),s=((e,t)=>{const n=Sc("mce_textpattern"),o=Nr(t,(s,r)=>{const i=X_(e,n+`_end${s.length}`,r.endRng);return s.concat([{...r,endMarker:i}])},[]);return Nr(o,(s,r)=>{const i=o.length-s.length-1,a=Fh(r.pattern)?r.endMarker:X_(e,n+`_start${i}`,r.startRng);return s.concat([{...r,startMarker:a}])},[])})(n,t);re(s,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;Fh(r.pattern)?((e,t,n,o)=>{const s=Ef(e.dom,n);xf(e.dom,s,o),n1(e,t,s)})(e,r.pattern,r.endMarker,a):((e,t,n,o,s)=>{const r=e.dom,i=Ef(r,o),a=Ef(r,n);xf(r,a,s),xf(r,i,s);const m=Ef(r,{prefix:n.prefix,start:n.end,end:o.start});n1(e,t,m)})(e,r.pattern,r.startMarker,r.endMarker,a),e1(n,r.endMarker,a),e1(n,r.startMarker,a)}),e.selection.moveToBookmark(o)},I4=(e,t)=>{const n=e.selection.getRng();return Lh(e,n).map(o=>{var s;const r=Math.max(0,n.startOffset),i=Y_(t,o,null!==(s=o.textContent)&&void 0!==s?s:""),a=o1(e,o,n.startContainer,r,i,!0),c=((e,t,n,o)=>{var s;const r=e.dom,i=ro(e);if(!r.is(t,i))return[];const a=null!==(s=t.textContent)&&void 0!==s?s:"";return((e,t)=>{const n=(e=>Tn(e,(t,n)=>n.start.length-t.start.length))(e),o=t.replace(Un," ");return Jt(n,s=>0===t.indexOf(s.start)||0===o.indexOf(s.start))})(n.blockPatterns,a).map(c=>f.trim(a).length===c.start.length?[]:[{pattern:c,range:Bh(r,r.getRoot(),t,0,t,0,true)}]).getOr([])})(e,o,i);return(c.length>0||a.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent("\ufeff"),s1(e,a),((e,t)=>{if(0===t.length)return;const n=e.selection.getBookmark();re(t,o=>((e,t)=>{const o=t.pattern,s=G_(e.dom.getRoot(),t.range).getOrDie("Unable to resolve path range");return Lh(e,s).each(i=>{"block-format"===o.type?((i,a)=>{const c=a.get(i);return gn(c)&&hn(c).exists(m=>Ge(m,"block"))})(o.format,e.formatter)&&e.undoManager.transact(()=>{J_(e.dom,i,o),e.formatter.apply(o.format)}):"block-command"===o.type&&e.undoManager.transact(()=>{J_(e.dom,i,o),e.execCommand(o.cmd,!1,o.value)})}),!0})(e,o)),e.selection.moveToBookmark(n)})(e,c);const m=e.selection.getRng(),v=ih(m.startContainer,m.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),v.each(x=>{const w=x.container;"\ufeff"===w.data.charAt(x.offset-1)&&(w.deleteData(x.offset-1,1),Wl(e.dom,w.parentNode,D=>D===e.dom.getRoot()))})}),!0)}).getOr(!1)},r1=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},$h=Ut.DOM,q4=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Uh=e=>Ds(e,t=>!1===dt(t)),i1=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Uh({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:q4(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},a1=e=>{const t=e.options.get;return Uh({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},l1=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,c1=e=>{const t=l1(e),n=Nv(e),o=e.contentCSS,s=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?s():e.on("remove",s)};if(e.contentStyles.length>0){let c="";f.each(e.contentStyles,m=>{c+=m+"\r\n"}),e.dom.addStyle(c)}const i=Promise.all(((e,t,n)=>{const o=[l1(e).loadAll(t)];return e.inline?o:o.concat([e.ui.styleSheetLoader.loadAll(n)])})(e,o,n)).then(r).catch(r),a=VN(e);return a&&((e,t)=>{const n=M_fromDom(e.getBody()),o=dc(cr(n)),s=M_fromTag("style");un(s,"type","text/css"),fn(s,M_fromText(t)),fn(o,s),e.on("remove",()=>{qt(s)})})(e,a),i},zh=e=>{!0!==e.removed&&((e=>{yr(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{const t=e.dom.getRoot();!e.inline&&(!cd(e)||e.selection.getStart(!0)===t)&&io(t).each(n=>{const o=n.getNode(),s=Gr(o)?io(o).getOr(n):n;e.selection.setRng(s.toRange())})})(e),e.nodeChanged({initial:!0});const t=vA(e);St(t)&&t.call(e,e),(e=>{const t=CA(e);t&&ls.setEditorTimeout(e,()=>{let n;n=!0===t?e:e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(e)})(e))},u1=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&($h.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=Dv(e),e._editableRoot=dA(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===$h.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=F2(e),e.schema=Ri(a1(e)),e.dom=Ut(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:HN(e),referrerPolicy:Fm(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=(e=>{const t=Bl(i1(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,o)=>{const s=e.dom,r="data-mce-"+o;let i=n.length;for(;i--;){const a=n[i];let c=a.attr(o);if(c&&!a.attr(r)){if(0===c.indexOf("data:")||0===c.indexOf("blob:"))continue;"style"===o?(c=s.serializeStyle(s.parseStyle(c),a.name),c.length||(c=null),a.attr(r,c),a.attr(o,c)):"tabindex"===o?(a.attr(r,c),a.attr(o,null)):a.attr(r,e.convertURL(c,o,a.name))}}}),t.addNodeFilter("script",n=>{let o=n.length;for(;o--;){const s=n[o],r=s.attr("type")||"no/type";0!==r.indexOf("mce-")&&s.attr("type","mce-"+r)}}),FA(e)&&t.addNodeFilter("#cdata",n=>{var o;let s=n.length;for(;s--;){const r=n[s];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode(null!==(o=r.value)&&void 0!==o?o:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let o=n.length;const s=e.schema.getNonEmptyElements();for(;o--;){const r=n[o];r.isEmpty(s)&&0===r.getAll("br").length&&r.append(new _o("br",1))}}),t})(e),e.serializer=tE((e=>{const t=e.options.get;return{...i1(e),...a1(e),...Uh({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(e),e),e.selection=eE(e.dom,e.getWin(),e.serializer,e),e.annotator=Ay(e),e.formatter=hE(e),e.undoManager=vE(e),e._nodeChangeDispatcher=new o6(e),e._selectionOverrides=v4(e),(e=>{const t=Di(),n=zn(!1),o=km(s=>{e.dispatch("longpress",{...s,type:"longpress"}),n.set(!0)},400);e.on("touchstart",s=>{kw(s).each(r=>{o.cancel();const i={x:r.clientX,y:r.clientY,target:s.target};o.throttle(s),n.set(!1),t.set(i)})},!0),e.on("touchmove",s=>{o.cancel(),kw(s).each(r=>{t.on(i=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>5||o>5})(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",s=>{o.cancel(),"touchcancel"!==s.type&&t.get().filter(r=>r.target.isEqualNode(s.target)).each(()=>{n.get()?s.preventDefault():e.dispatch("tap",{...s,type:"tap"})})},!0)})(e),(e=>{(e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})})(e),(e=>{e.parser.addNodeFilter("details",t=>{const n=VA(e);re(t,o=>{"expanded"===n?o.attr("open","open"):"collapsed"===n&&o.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=ZA(e);re(t,o=>{"expanded"===n?o.attr("open","open"):"collapsed"===n&&o.attr("open",null)})})})(e)})(e),(e=>{const t="contenteditable",n=" "+f.trim(BA(e))+" ",o=" "+f.trim(Mv(e))+" ",s=Rw(n),r=Rw(o),i=LA(e);i.length>0&&e.on("BeforeSetContent",a=>{((e,t,n)=>{let o=t.length,s=n.content;if("raw"!==n.format){for(;o--;)s=s.replace(t[o],gH(e,s,Mv(e)));n.content=s}})(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const m=a[c];s(m)?m.attr(t,"true"):r(m)&&m.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const m=a[c];!s(m)&&!r(m)||(i.length>0&&m.attr("data-mce-content")?(m.name="#text",m.type=3,m.raw=!0,m.value=m.attr("data-mce-content")):m.attr(t,null))}})})(e),yr(e)||((e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),Aj(e))})})(e),(e=>{(e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>((e,t)=>({inlinePatterns:bv(e),blockPatterns:hv(e),dynamicPatternsLookup:t}))(MA(e),IA(e)),s=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",i=>{if(13===i.keyCode&&!Ee.modifierPressed(i)&&e.selection.isCollapsed()){const a=o();(a.inlinePatterns.length>0||a.blockPatterns.length>0||s())&&I4(e,a)&&i.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const i=o();(i.inlinePatterns.length>0||s())&&((e,t)=>{const n=e.selection.getRng();Lh(e,n).map(o=>{const s=Math.max(0,n.startOffset-1),r=K_(e.dom,o,n.startContainer,s),i=Y_(t,o,r),a=o1(e,o,n.startContainer,s,i,!1);a.length>0&&e.undoManager.transact(()=>{s1(e,a)})})})(e,i)}};e.on("keyup",i=>{((e,t)=>r1(e,t,(n,o)=>n===o.keyCode&&!Ee.modifierPressed(o)))(n,i)&&r()}),e.on("keypress",i=>{((e,t)=>r1(e,t,(n,o)=>n.charCodeAt(0)===o.charCode))(t,i)&&ls.setEditorTimeout(e,r)})})(e)})(e));const s=n6(e);iH(e,s),(e=>{e.on("NodeChange",Te(mH,e))})(e),(e=>{var t;const n=e.dom,o=ro(e),s=null!==(t=KN(e))&&void 0!==t?t:"",r=(i,a)=>{if((e=>{if(CE(e)){const t=e.keyCode;return!xE(e)&&(Ee.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||kt(Y2,t))}return!1})(i))return;const c=e.getBody(),m=!(e=>CE(e)&&!(xE(e)||"keyup"===e.type&&229===e.keyCode))(i)&&((e,t,n)=>{if(En(M_fromDom(t),!1)){const o=t.firstElementChild;return!o||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1})(n,c,o);(""!==n.getAttrib(c,yE)!==m||a)&&(n.setAttrib(c,yE,m?s:null),n.setAttrib(c,"aria-placeholder",m?s:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,m),e.on(m?"keydown":"keyup",r),e.off(m?"keyup":"keydown",r))};jo(s)&&e.on("init",i=>{r(i,!0),e.on("change SetContent ExecCommand",r),e.on("paste",a=>ls.setEditorTimeout(e,()=>r(a)))})})(e),Cj(e);const r=(e=>{const t=e;return(e=>$t(e.plugins,"rtc").bind(t=>T.from(t.setup)))(e).fold(()=>(t.rtcInstance=Gx(e),T.none()),n=>(t.rtcInstance=(()=>{const e=Ce(null),t=Ce("");return{init:{bindEvents:et},undoManager:{beforeChange:et,add:e,undo:e,redo:e,clear:et,reset:et,hasUndo:jt,hasRedo:jt,transact:e,ignore:et,extra:et},formatter:{match:jt,matchAll:Ce([]),matchNode:Ce(void 0),canApply:jt,closest:t,apply:et,remove:et,toggle:et,formatChanged:Ce({unbind:et})},editor:{getContent:t,setContent:Ce({content:"",html:""}),insertContent:Ce(""),addVisual:et},selection:{getContent:t},autocompleter:{addDecoration:et,removeDecoration:et},raw:{getModel:Ce(T.none())}}})(),T.some(()=>n().then(o=>(t.rtcInstance=(e=>{const t=m=>cn(m)?m:{},{init:n,undoManager:o,formatter:s,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(m,v,x)=>o.transact(x),ignore:(m,v)=>o.ignore(v),extra:(m,v,x,w)=>o.extra(x,w)},formatter:{match:(m,v,x,w)=>s.match(m,t(v),w),matchAll:s.matchAll,matchNode:s.matchNode,canApply:m=>s.canApply(m),closest:m=>s.closest(m),apply:(m,v,x)=>s.apply(m,t(v)),remove:(m,v,x,w)=>s.remove(m,t(v)),toggle:(m,v,x)=>s.toggle(m,t(v)),formatChanged:(m,v,x,w,D)=>s.formatChanged(v,x,w,D)},editor:{getContent:m=>r.getContent(m),setContent:(m,v)=>({content:r.setContent(m,v),html:""}),insertContent:(m,v)=>(r.insertContent(m),""),addVisual:r.addVisual},selection:{getContent:(m,v)=>i.getContent(v)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>T.some(c.getRawModel())}}})(o),o.rtc.isRemote)))))})(e);(e=>{const t=e.getDoc(),n=e.getBody();(e=>{e.dispatch("PreInit")})(e),xA(e)||(t.body.spellcheck=!1,$h.setAttrib(n,"spellcheck","false")),e.quirks=(e=>{const t=f.each,n=Ee.BACKSPACE,o=Ee.DELETE,s=e.dom,r=e.selection,i=e.parser,a=gt.browser,c=a.isFirefox(),m=a.isChromium()||a.isSafari(),v=gt.deviceType.isiPhone()||gt.deviceType.isiPad(),x=gt.os.isMacOS()||gt.os.isiOS(),w=(Oe,Me)=>{try{e.getDoc().execCommand(Oe,!1,String(Me))}catch{}},D=Oe=>Oe.isDefaultPrevented(),A=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},P=()=>{e.inline||s.bind(e.getDoc(),"mousedown mouseup",Oe=>{let Me;if(Oe.target===e.getDoc().documentElement)if(Me=r.getRng(),e.getBody().focus(),"mousedown"===Oe.type){if(ss(Me.startContainer))return;r.placeCaretAt(Oe.clientX,Oe.clientY)}else r.setRng(Me)})},z=()=>{Range.prototype.getClientRects||e.on("mousedown",Oe=>{if(!D(Oe)&&"HTML"===Oe.target.nodeName){const Me=e.getBody();Me.blur(),ls.setEditorTimeout(e,()=>{Me.focus()})}})},q=()=>{const Oe=Ov(e);e.on("click",Me=>{const he=Me.target;/^(IMG|HR)$/.test(he.nodeName)&&s.isEditable(he.parentNode)&&(Me.preventDefault(),e.selection.select(he),e.nodeChanged()),"A"===he.nodeName&&s.hasClass(he,Oe)&&0===he.childNodes.length&&s.isEditable(he.parentNode)&&(Me.preventDefault(),r.select(he))})},ae=()=>{e.on("keydown",Oe=>{if(!D(Oe)&&Oe.keyCode===n&&r.isCollapsed()&&0===r.getRng().startOffset){const Me=r.getNode().previousSibling;if(Me&&Me.nodeName&&"table"===Me.nodeName.toLowerCase())return Oe.preventDefault(),!1}return!0})},ye=()=>{Dv(e)||e.on("BeforeExecCommand mousedown",()=>{w("StyleWithCSS",!1),w("enableInlineTableEditing",!1),Av(e)||w("enableObjectResizing",!1)})},Ie=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Ke=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},nt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Oe=>{let Me;"HTML"===Oe.target.nodeName&&(Me=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Me),e.selection.normalize(),e.nodeChanged())}))},wt=()=>{x&&e.on("keydown",Oe=>{Ee.metaKeyPressed(Oe)&&!Oe.shiftKey&&(37===Oe.keyCode||39===Oe.keyCode)&&(Oe.preventDefault(),e.selection.getSel().modify("move",37===Oe.keyCode?"backward":"forward","lineboundary"))})},Bt=()=>{e.on("click",Oe=>{let Me=Oe.target;do{if("A"===Me.tagName)return void Oe.preventDefault()}while(Me=Me.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Xt=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Oe=>{Oe.preventDefault()})})},wn=et;return yr(e)?(m&&(P(),q(),Xt(),A(),v&&(Ke(),nt(),Bt())),c&&(z(),ye(),Ie(),wt())):(e.on("keydown",Oe=>{if(D(Oe)||Oe.keyCode!==Ee.BACKSPACE)return;let Me=r.getRng();const he=Me.startContainer,He=Me.startOffset,rt=s.getRoot();let Tt=he;if(Me.collapsed&&0===He){for(;Tt.parentNode&&Tt.parentNode.firstChild===Tt&&Tt.parentNode!==rt;)Tt=Tt.parentNode;"BLOCKQUOTE"===Tt.nodeName&&(e.formatter.toggle("blockquote",void 0,Tt),Me=s.createRng(),Me.setStart(he,0),Me.setEnd(he,0),r.setRng(Me))}}),(()=>{const Oe=He=>{const rt=s.create("body"),Tt=He.cloneContents();return rt.appendChild(Tt),r.serializer.serialize(rt,{format:"html"})};e.on("keydown",He=>{const rt=He.keyCode;if(!D(He)&&(rt===o||rt===n)&&e.selection.isEditable()){const Tt=e.selection.isCollapsed(),Ne=e.getBody();if(Tt&&(!s.isEmpty(Ne)||(He=>{const rt=M_fromDom(He);return Kt(bn(rt,'[contenteditable="true"]'),Ne=>at(Ne).exists(ot=>!Wr(ot)))})(Ne))||!Tt&&!(He=>{const rt=Oe(He),Tt=s.createRng();return Tt.selectNode(e.getBody()),rt===Oe(Tt)})(e.selection.getRng()))return;He.preventDefault(),e.setContent(""),Ne.firstChild&&s.isBlock(Ne.firstChild)?e.selection.setCursorLocation(Ne.firstChild,0):e.selection.setCursorLocation(Ne,0),e.nodeChanged()}})})(),gt.windowsPhone||e.on("keyup focusin mouseup",Oe=>{!Ee.modifierPressed(Oe)&&!(Oe=>{const Me=Oe.getBody(),he=Oe.selection.getRng();return he.startContainer===he.endContainer&&he.startContainer===Me&&0===he.startOffset&&he.endOffset===Me.childNodes.length})(e)&&r.normalize()},!0),m&&(P(),q(),e.on("init",()=>{w("DefaultParagraphSeparator",ro(e))}),Xt(),ae(),i.addNodeFilter("br",Oe=>{let Me=Oe.length;for(;Me--;)"Apple-interchange-newline"===Oe[Me].attr("class")&&Oe[Me].remove()}),v?(Ke(),nt(),Bt()):A()),c&&(e.on("keydown",Oe=>{if(!D(Oe)&&Oe.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&0===r.getRng().startOffset){const Me=r.getNode(),he=Me.previousSibling;if("HR"===Me.nodeName)return s.remove(Me),void Oe.preventDefault();he&&he.nodeName&&"hr"===he.nodeName.toLowerCase()&&(s.remove(he),Oe.preventDefault())}}}),z(),(()=>{const Oe=()=>{const he=s.getAttribs(r.getStart().cloneNode(!1));return()=>{const He=r.getStart();He!==e.getBody()&&(s.setAttrib(He,"style",null),t(he,rt=>{He.setAttributeNode(rt.cloneNode(!0))}))}},Me=()=>!r.isCollapsed()&&s.getParent(r.getStart(),s.isBlock)!==s.getParent(r.getEnd(),s.isBlock);e.on("keypress",he=>{let He;return!(!(D(he)||8!==he.keyCode&&46!==he.keyCode)&&Me()&&(He=Oe(),e.getDoc().execCommand("delete",!1),He(),he.preventDefault(),1))}),s.bind(e.getDoc(),"cut",he=>{if(!D(he)&&Me()){const He=Oe();ls.setEditorTimeout(e,()=>{He()})}})})(),ye(),e.on("SetContent ExecCommand",Me=>{("setcontent"===Me.type||"mceInsertLink"===Me.command)&&t(s.select("a:not([data-mce-block])"),Me=>{var he;let He=Me.parentNode;const rt=s.getRoot();if((null==He?void 0:He.lastChild)===Me){for(;He&&!s.isBlock(He);){if((null===(he=He.parentNode)||void 0===he?void 0:he.lastChild)!==He||He===rt)return;He=He.parentNode}s.add(He,"br",{"data-mce-bogus":1})}})}),Ie(),wt(),ae(),e.on("drop",Oe=>{var Me;const he=null===(Me=Oe.dataTransfer)||void 0===Me?void 0:Me.getData("text/html");Fe(he)&&/^<img[^>]*>$/.test(he)&&e.dispatch("dragend",new window.DragEvent("dragend",Oe))}))),{refreshContentEditable:wn,isHidden:()=>{if(!c||e.removed)return!1;const Oe=e.selection.getSel();return!Oe||!Oe.rangeCount||0===Oe.rangeCount}}})(e),(e=>{e.dispatch("PostRender")})(e);const o=ZN(e);void 0!==o&&(n.dir=o);const s=EA(e);s&&e.on("BeforeSetContent",r=>{f.each(s,i=>{r.content=r.content.replace(i,a=>"\x3c!--mce:protected "+escape(a)+"--\x3e")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing="compositionstart"===r.type})})(e),r.fold(()=>{const i=(e=>{let t=!1;const n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}})(e);c1(e).then(()=>{zh(e),i()})},i=>{e.setProgressState(!0),c1(e).then(()=>{i().then(a=>{e.setProgressState(!1),zh(e),Yx(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),zh(e),Yx(e)})})})},X4=an,Hh=Ut.DOM,d1=Ut.DOM,f1=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),m1=e=>{const t=e.getElement();return e.inline?f1(null):(e=>{const t=d1.create("div");return d1.insertAfter(t,e),f1(t,t)})(t)},b5=function(){var e=vo(function*(t){t.dispatch("ScriptsLoaded"),(e=>{const t=f.trim(_v(e)),n=e.ui.registry.getAll().icons,o={...Ud.get("default").icons,...Ud.get(t).icons};Nt(o,(s,r)=>{Ge(n,r)||e.ui.registry.addIcon(r,s)})})(t),(e=>{const t=Sl(e);if(Fe(t)){const n=qa.get(t);e.theme=n(e,qa.urls[t])||{},St(e.theme.init)&&e.theme.init(e,qa.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(t),(e=>{const t=$m(e),n=Ll.get(t);e.model=n(e,Ll.urls[t])})(t),(e=>{const t=[];re(ed(e),n=>{((e,t,n)=>{const o=Fl.get(n),s=Fl.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=f.trim(n),o&&-1===f.inArray(t,n)){if(e.plugins[n])return;try{const r=o(e,s)||{};e.plugins[n]=r,St(r.init)&&(r.init(e,s),t.push(n))}catch(r){((e,t,n)=>{const o=Vs.translate(["Failed to initialize plugin: {0}",t]);Dy(e,"PluginLoadError",{message:o}),Hd(o,n),zd(e,o)})(e,n,r)}}})(e,t,(e=>e.replace(/^\-/,""))(n))})})(t);const n=yield(e=>{const t=e.getElement();return e.orgDisplay=t.style.display,Fe(Sl(e))?(e=>{const t=e.theme.renderUI;return t?t():m1(e)})(e):St(Sl(e))?(e=>{const t=e.getElement(),o=Sl(e)(e,t);return o.editorContainer.nodeType&&(o.editorContainer.id=o.editorContainer.id||e.id+"_parent"),o.iframeContainer&&o.iframeContainer.nodeType&&(o.iframeContainer.id=o.iframeContainer.id||e.id+"_iframecontainer"),o.height=o.iframeHeight?o.iframeHeight:t.offsetHeight,o})(e):m1(e)})(t);((e,t)=>{const n={show:T.from(t.show).getOr(et),hide:T.from(t.hide).getOr(et),isEnabled:T.from(t.isEnabled).getOr(an),setEnabled:o=>{e.mode.isReadOnly()||T.from(t.setEnabled).each(s=>s(o))}};e.ui={...e.ui,...n}})(t,T.from(n.api).getOr({})),t.editorContainer=n.editorContainer,(e=>{e.contentCSS=e.contentCSS.concat((e=>uE(e,jN(e)))(e),(e=>uE(e,Nv(e)))(e))})(t),t.inline?u1(t):((e,t)=>{((e,t)=>{const n=e.translate("Rich Text Area"),o=Xo(M_fromDom(e.getElement()),"tabindex").bind(Ms),s=((e,t,n,o)=>{const s=M_fromTag("iframe");return o.each(r=>un(s,"tabindex",r)),Ln(s,n),Ln(s,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Ls(s,"tox-edit-area__iframe"),s})(e.id,n,TN(e),o).dom;s.onload=()=>{s.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=s,e.iframeHTML=(e=>{let t=kN(e)+"<html><head>";xv(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=NN(e),o=AN(e),s=e.translate(hA(e));return Ev(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Ev(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${o}" data-id="${e.id}" aria-label="${s}"><br></body></html>`,t})(e),Hh.add(t.iframeContainer,s)})(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=Hh.isHidden(t.editorContainer)),e.getElement().style.display="none",Hh.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,(e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,u1(e)};if(UA(e)||gt.browser.isFirefox()){const o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close(),n()}else{const o=((e,t,n)=>te(e,"load",X4,n))(M_fromDom(t),0,()=>{o.unbind(),n()});t.srcdoc=e.iframeHTML}})(e)})(t,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})});return function(n){return e.apply(this,arguments)}}(),ja=Ut.DOM,p1=e=>"-"===e.charAt(0),g1=(e,t,n)=>T.from(t).filter(o=>jo(o)&&!Ud.has(o)).map(o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:T.some(o)})),T5=(e,t)=>{const n=Yr.ScriptLoader,o=()=>{!e.removed&&(e=>{const t=Sl(e);return!Fe(t)||ve(qa.get(t))})(e)&&(e=>{const t=$m(e);return ve(Ll.get(t))})(e)&&b5(e)};((e,t)=>{const n=Sl(e);if(Fe(n)&&!p1(n)&&!Ge(qa.urls,n)){const o=QN(e),s=o?e.documentBaseURI.toAbsolute(o):`themes/${n}/theme${t}.js`;qa.load(n,s).catch(()=>{((e,t,n)=>{Qc(e,"ThemeLoadError",Xc("theme",t,n))})(e,s,n)})}})(e,t),((e,t)=>{const n=$m(e);if("plugin"!==n&&!Ge(Ll.urls,n)){const o=XN(e),s=Fe(o)?e.documentBaseURI.toAbsolute(o):`models/${n}/model${t}.js`;Ll.load(n,s).catch(()=>{((e,t,n)=>{Qc(e,"ModelLoadError",Xc("model",t,n))})(e,s,n)})}})(e,t),((e,t)=>{const n=Tv(t),o=qN(t);if(!Vs.hasCode(n)&&"en"!==n){const s=jo(o)?o:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(s).catch(()=>{((e,t,n)=>{Qc(e,"LanguageLoadError",Xc("language",t,n))})(t,s,n)})}})(n,e),((e,t,n)=>{const o=g1(t,"default",n),s=(e=>T.from(LN(e)).filter(jo).map(t=>({url:t,name:T.none()})))(t).orThunk(()=>g1(t,_v(t),""));re((e=>{const t=[],n=o=>{t.push(o)};for(let o=0;o<e.length;o++)e[o].each(n);return t})([o,s]),r=>{e.add(r.url).catch(()=>{((e,t,n)=>{Qc(e,"IconsLoadError",Xc("icons",t,n))})(t,r.url,r.name.getOrUndefined())})})})(n,e,t),((e,t)=>{const n=(o,s)=>{Fl.load(o,s).catch(()=>{((e,t,n)=>{Qc(e,"PluginLoadError",Xc("plugin",t,n))})(e,s,o)})};Nt(fA(e),(o,s)=>{n(s,o),e.options.set("plugins",ed(e).concat(s))}),re(ed(e),o=>{(o=f.trim(o))&&!Fl.urls[o]&&!p1(o)&&n(o,`plugins/${o}/plugin${t}.js`)})})(e,t),n.loadQueue().then(o,o)},h1=Co().deviceType,b1=h1.isPhone(),P5=h1.isTablet(),gu=e=>{if(Gt(e))return[];{const t=gn(e)?e:e.split(/[ ,]/),n=pt(t,Ro);return Ve(n,jo)}},qh=(e,t)=>Ge(e.sections(),t),B5=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:$t(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),L5=(e,t)=>{var n;const o=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?f.extend({},e.external_plugins,o):o},H5=(e,t,n,o,s)=>{var r;const i=e?{mobile:B5(null!==(r=s.mobile)&&void 0!==r?r:{},t)}:{},a=((e,t)=>{const n=((e,t)=>{const n={},o={};return lo(e,t,ii(n),ii(o)),{t:n,f:o}})(t,(o,s)=>kt(e,s));return((e,t)=>({sections:Ce(e),options:Ce(t)}))(n.t,n.f)})(["mobile"],tf(i,s)),c=f.extend(n,o,a.options(),((e,t)=>e&&qh(t,"mobile"))(e,a)?((e,t,n={})=>{const o=e.sections(),s=$t(o,t).getOr({});return f.extend({},n,s)})(a,"mobile"):{},{external_plugins:L5(o,a.options())});return((e,t,n,o)=>{const s=gu(n.forced_plugins),r=gu(o.plugins),i=((e,t)=>qh(e,t)?e.sections()[t]:{})(t,"mobile"),c=((e,t,n,o)=>e&&qh(t,"mobile")?o:n)(e,t,r,i.plugins?gu(i.plugins):r),m=((e,t)=>[...gu(e),...gu(t)])(s,c);return f.extend(o,{forced_plugins:s,plugins:m})})(e,a,o,c)},Z5=e=>{(e=>{const n=o=>()=>{re("left,center,right,justify".split(","),s=>{o!==s&&e.formatter.remove("align"+s)}),"none"!==o&&((o,s)=>{e.formatter.toggle(o,void 0),e.nodeChanged()})("align"+o)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(e=>{const t=n=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return Kt(s,r=>ve(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},J5=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((e,t,n)=>{const o=M_fromDom(e.getRoot());return n=jc(o,ee.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),Vc(o,ee.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t):t},Sf=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(e=>{if("string"!=typeof e){const t=f.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);Sg(e,{...o,content:J5(e,n),format:"html",set:!1,selection:!0}).each(s=>{const r=((e,t,n)=>Og(e).editor.insertContent(t,n))(e,s.content,o);_g(e,r,s),e.addVisual()})}},X5={"font-size":"size","font-family":"face"},eV=Vo("font"),v1=e=>(t,n)=>T.from(n).map(M_fromDom).filter(on).bind(o=>((e,t,n)=>ng(M_fromDom(n),r=>(r=>hl(r,e).orThunk(()=>eV(r)?$t(X5,e).bind(i=>Xo(r,i)):T.none()))(r),r=>ne(M_fromDom(t),r)))(e,t,o.dom).or(((e,t)=>T.from(Ut.DOM.getStyle(t,e,!0)))(e,o.dom))).getOr(""),sV=v1("font-size"),rV=gs(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),v1("font-family")),iV=e=>io(e.getBody()).bind(t=>{const n=t.container();return T.from(fe(n)?n.parentNode:n)}),Wh=(e,t)=>((e,t)=>(e=>T.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&0===t.startOffset?T.none():T.from(e.selection.getStart(!0))}))(e).orThunk(Te(iV,e)).map(M_fromDom).filter(on).bind(t))(e,no(T.some,t)),y1=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(e=>f.explode(e.options.get("font_size_style_values")))(e),s=(e=>f.explode(e.options.get("font_size_classes")))(e);return s.length>0?s[n-1]||t:o[n-1]||t}return t}return t},cV=e=>{const t=e.split(/\s*,\s*/);return pt(t,n=>-1===n.indexOf(" ")||yn(n,'"')||yn(n,"'")?n:`'${n}'`).join(",")},C1=(e,t)=>{const n=e.dom,o=e.selection.getRng(),s=t?e.selection.getStart():e.selection.getEnd(),r=t?o.startContainer:o.endContainer,i=cu(n,r);if(!i||!i.isContentEditable)return;const a=t?mo:$s,c=ro(e);((e,t,n,o)=>{const s=e.dom,r=a=>s.isBlock(a)&&a.parentElement===n,i=r(t)?t:s.getParent(o,r,n);return T.from(i).map(M_fromDom)})(e,s,i,r).each(m=>{const v=$S(e,r,m.dom,i,!1,c);a(m,M_fromDom(v)),e.selection.setCursorLocation(v,0),e.dispatch("NewBlock",{newBlock:v}),lu(e,"insertParagraph")})},PV=e=>{Z5(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let o;try{n.execCommand(t)}catch{o=!0}if("paste"===t&&!n.queryCommandEnabled(t)&&(o=!0),o||!n.queryCommandSupported(t)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(gt.os.isMacOS()||gt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),r=>!we(r)||s++!==o||(e.selection.select(r),!1),e.getBody())},mceSelectNode:(t,n,o)=>{e.selection.select(o)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),qs);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,o)=>{Sf(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,o)=>{Sf(e,e.dom.encode(o))},insertHTML:(t,n,o)=>{Sf(e,o)},mceInsertContent:(t,n,o)=>{Sf(e,o)},mceSetContent:(t,n,o)=>{e.setContent(o)},mceReplaceContent:(t,n,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(TA(e))}})})(e),(e=>{const t=(n,o,s)=>{const r=Fe(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");cn(r)&&Fe(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");return void(n&&e.dom.remove(n,!0))}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(e),(e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{Ew(e,"indent")})(e)},Outdent:()=>{ww(e)}}),e.editorCommands.addCommands({Outdent:()=>yw(e)},"state")})(e),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{(e=>{C1(e,!0)})(e)},InsertNewBlockAfter:()=>{(e=>{C1(e,!1)})(e)}})})(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{ff(HS,e)},mceInsertNewLine:(t,n,o)=>{YS(e,o)},InsertLineBreak:(t,n,o)=>{ff(jS,e)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const o=n.parentNode;if(o&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)){const s=e.selection.getBookmark();e.dom.split(o,n),e.selection.moveToBookmark(s)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")})(e)})(e),(e=>{(e=>{const t=(n,o)=>{e.formatter.toggle(n,o),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,o,s)=>{t(n,{value:s})},BackColor:(n,o,s)=>{t("hilitecolor",{value:s})},FontName:(n,o,s)=>{((e,t)=>{const n=y1(e,t);e.formatter.toggle("fontname",{value:cV(n)}),e.nodeChanged()})(e,s)},FontSize:(n,o,s)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:y1(e,t)}),e.nodeChanged()})(e,s)},LineHeight:(n,o,s)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,s)},Lang:(n,o,s)=>{var r;t(n,{value:s.code,customValue:null!==(r=s.customCode)&&void 0!==r?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,o,s)=>{t(Fe(s)?s:"p")},mceToggleFormat:(n,o,s)=>{t(s)}})})(e),(e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>(e=>Wh(e,t=>rV(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>(e=>Wh(e,t=>sV(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>(e=>Wh(e,t=>{const n=M_fromDom(e.getBody());return ng(t,r=>hl(r,"line-height"),Te(ne,n)).getOrThunk(()=>{const r=parseFloat(Ss(t,"line-height")),i=parseFloat(Ss(t,"font-size"));return String(r/i)})}).getOr(""))(e))})(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,o)=>{const s=null!=o?o:e.selection.getNode();if(s!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,o)=>{((e,t)=>{e.removed||(t?_p(e):(e=>{const t=e.selection,n=e.getBody();let o=t.getRng();e.quirks.refreshContentEditable(),ve(e.bookmark)&&!Ba(e)&&Cp(e).each(r=>{e.selection.setRng(r),o=r});const s=((e,t)=>e.dom.getParent(t,n=>"true"===e.dom.getContentEditable(n)))(e,t.getNode());if(s&&e.dom.isChildOf(s,n))return Sp(s),lC(e,o),void _p(e);e.inline||(gt.browser.isOpera()||Sp(n),e.getWin().focus()),(gt.browser.isFirefox()||e.inline)&&(Sp(n),lC(e,o)),_p(e)})(e))})(e,!0===o)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},OV=["toggleview"],x1=e=>kt(OV,e.toLowerCase());class E1{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,s){const r=this.editor,i=t.toLowerCase(),a=null==s?void 0:s.skip_focus;if(r.removed||("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?(e=>{Cp(e).each(t=>e.selection.setRng(t))})(r):r.focus()),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;const m=this.commands.exec[i];return!!St(m)&&(m(i,n,o),r.dispatch("ExecCommand",{command:t,ui:n,value:o}),!0)}queryCommandState(t){if(!x1(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!St(o)&&o(n)}queryCommandValue(t){if(!x1(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return St(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;Nt(t,(s,r)=>{re(r.toLowerCase().split(","),i=>{o[n][i]=s})})}addCommand(t,n,o){const s=t.toLowerCase();this.commands.exec[s]=(r,i,a)=>n.call(null!=o?o:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}}const Va="data-mce-contenteditable",jh=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},_f=(e,t)=>{e.dom.contentEditable=t?"true":"false"},$V=(e,t)=>{const n=M_fromDom(e.getBody());((e,t,n)=>{zr(e,t)&&!n?ts(e,t):n&&Ls(e,t)})(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{T.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})})(e),e.readonly=!0,_f(n,!1),(e=>{re(bn(e,'*[contenteditable="true"]'),t=>{un(t,Va,"true"),_f(t,!1)})})(n)):(e.readonly=!1,e.hasEditableRoot()&&_f(n,!0),(e=>{re(bn(e,`*[${Va}="true"]`),t=>{xn(t,Va),_f(t,!0)})})(n),jh(e,"StyleWithCSS",!1),jh(e,"enableInlineTableEditing",!1),jh(e,"enableObjectResizing",!1),(e=>Ba(e)||(e=>{const t=cr(M_fromDom(e.getElement()));return vp(t).filter(n=>!Ep(n.dom)&&yd(e,n.dom)).isSome()})(e))(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},Za=e=>e.readonly,w1=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Za(e)&&re(t,n=>{n.attr(Va,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Va,t=>{Za(e)&&re(t,n=>{n.attr("contenteditable",n.attr(Va))})}),e.serializer.addTempAttr(Va)},HV=["copy"],ZV=f.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Vh{static isNative(t){return!!ZV[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||jt}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),s=Em(o,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(s);const r=this.bindings[o];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(o,c.func),s.isImmediatePropagationStopped())return s;if(!1===c.func.call(this.scope,s))return s.preventDefault(),s}}return s}on(t,n,o,s){if(!1===n&&(n=jt),n){const r={func:n,removed:!1};s&&f.extend(r,s);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let m=this.bindings[c];m||(m=[],this.toggleEvent(c,!0)),m=o?[r,...m]:[...m,r],this.bindings[c]=m}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let s=o.length;for(;s--;){const r=o[s];let i=this.bindings[r];if(!r)return Nt(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(n){const a=kr(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,re(a.pass,c=>{c.removed=!0})}else i.length=0;i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else Nt(this.bindings,(o,s)=>{this.toggleEvent(s,!1)}),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||0===n.length)}}const hu=e=>(e._eventDispatcher||(e._eventDispatcher=new Vh({scope:e,toggleEvent:(t,n)=>{Vh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Zh={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&"remove"!==e&&"detach"!==e)return Em(e.toLowerCase(),null!=t?t:{},o);const s=hu(o).dispatch(e,t);if(!1!==n&&o.parent){let r=o.parent();for(;r&&!s.isPropagationStopped();)r.dispatch(e,s,!1),r=r.parent?r.parent():void 0}return s},on(e,t,n){return hu(this).on(e,t,n)},off(e,t){return hu(this).off(e,t)},once(e,t){return hu(this).once(e,t)},hasEventListeners(e){return hu(this).has(e)}},Tf=Ut.DOM;let Ga;const kf=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Rv(e);return n?(e.eventRoot||(e.eventRoot=Tf.select(n)[0]),e.eventRoot):e.getBody()},S1=(e,t,n)=>{(e=>!e.hidden&&!Za(e))(e)?e.dispatch(t,n):Za(e)&&((e,t)=>{if((e=>"click"===e.type)(t)&&!Ee.metaKeyPressed(t)){const n=M_fromDom(t.target);((e,t)=>qr(t,"a",o=>ne(o,M_fromDom(e.getBody()))).bind(o=>Xo(o,"href")))(e,n).each(o=>{if(t.preventDefault(),/^#/.test(o)){const s=e.dom.select(`${o},[name="${oa(o,"#")}"]`);s.length&&e.selection.scrollIntoView(s[0],!0)}else window.open(o,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(e=>kt(HV,e.type))(t)&&e.dispatch(t.type,t)})(e,n)},_1=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=kf(e,t);if(Rv(e)){if(Ga||(Ga={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Ga&&(Nt(Ga,(s,r)=>{e.dom.unbind(kf(e,r))}),Ga=null)})),Ga[t])return;const o=s=>{const r=s.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||Tf.isChildOf(r,c))&&S1(i[a],t,s)}};Ga[t]=o,Tf.bind(n,t,o)}else{const o=s=>{S1(e,t,s)};Tf.bind(n,t,o),e.delegates[t]=o}},T1={...Zh,bindPendingEventDelegates(){const e=this;f.each(e._pendingNativeEvents,t=>{_1(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"===e||"blur"===e||n.removed||(t?n.initialized?_1(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(kf(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Nt(e.delegates,(o,s)=>{e.dom.unbind(kf(e,s),s,o)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},YV=e=>Fe(e)?{value:e.split(/[ ,]/),valid:!0}:zo(e,Fe)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},k1=(e,t)=>e+(Os(t.message)?"":`. ${t.message}`),N1=e=>e.valid,Gh=(e,t,n="")=>{const o=t(e);return qn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},eZ=["design","readonly"],A1=(e,t,n,o)=>{const s=n[t.get()],r=n[o];try{r.activate()}catch(i){return void console.error(`problem while activating editor mode ${o}:`,i)}s.deactivate(),s.editorReadOnly!==r.editorReadOnly&&$V(e,r.editorReadOnly),t.set(o),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,o)},Yh=f.each,Kh=f.explode,sZ={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},R1=f.makeMap("alt,ctrl,shift,meta,access"),iZ=e=>{const t={},n=gt.os.isMacOS()||gt.os.isiOS();Yh(Kh(e.toLowerCase(),"+"),r=>{(e=>e in R1)(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=sZ[r]||r.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let s;for(s in R1)t[s]?o.push(s):t[s]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class D1{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",o=>{(n.hasModifier(o)||n.isFunctionKey(o))&&!o.isDefaultPrevented()&&(Yh(n.shortcuts,s=>{n.matchShortcut(o,s)&&(n.pendingPatterns=s.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(s))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,o,s){const r=this,i=r.normalizeCommandFunc(o);return Yh(Kh(f.trim(t)),a=>{const c=r.createShortcut(a,n,i,s);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:f.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,s){const r=f.map(Kh(t,">"),iZ);return r[r.length-1]=f.extend(r[r.length-1],{func:o,scope:s||this.editor}),f.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!(!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey||!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)||(t.preventDefault(),0))}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const lZ=()=>{const e=(()=>{const e={},t={},n={},o={},s={},r={},i={},a={},c=(v,x)=>(w,D)=>{v[w.toLowerCase()]={...D,type:x}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(t,"menuitem"),addNestedMenuItem:c(t,"nestedmenuitem"),addToggleMenuItem:c(t,"togglemenuitem"),addAutocompleter:c(n,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(r,"contexttoolbar"),addContextForm:c(r,"contextform"),addSidebar:c(i,"sidebar"),addView:c(a,"views"),addIcon:(v,x)=>o[v.toLowerCase()]=x,getAll:()=>({buttons:e,menuItems:t,icons:o,popups:n,contextMenus:s,contextToolbars:r,sidebars:i,views:a})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Ya=Ut.DOM,P1=f.extend,cZ=f.each;class Nf{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,P1(this,T1);const s=this;this.id=t,this.hidden=!1;const r=((e,t)=>H5(b1||P5,b1,t,e,t))(o.defaultOptions,n);this.options=((e,t)=>{const n={},o={},s=(x,w,D)=>{const O=Gh(w,D);return N1(O)?(o[x]=O.value,!0):(console.warn(k1(`Invalid value passed for the ${x} option`,O)),!1)},i=x=>Ge(n,x);return{register:(x,w)=>{const D=(e=>Fe(e.processor))(w)?(e=>{const t=(()=>{switch(e){case"array":return gn;case"boolean":return qn;case"function":return St;case"number":return _t;case"object":return cn;case"string":return Fe;case"string[]":return YV;case"object[]":return n=>zo(n,cn);case"regexp":return n=>Er(n,RegExp);default:return an}})();return n=>Gh(n,t,`The value must be a ${e}.`)})(w.processor):w.processor,O=((e,t,n)=>{if(!dt(t)){const o=Gh(t,n);if(N1(o))return o.value;console.error(k1(`Invalid default value passed for the "${e}" option`,o))}})(x,w.default,D);n[x]={...w,default:O,processor:D},$t(o,x).orThunk(()=>$t(t,x)).each(P=>s(x,P,D))},isRegistered:i,get:x=>$t(o,x).orThunk(()=>$t(n,x).map(w=>w.default)).getOrUndefined(),set:(x,w)=>{if(i(x)){const D=n[x];return D.immutable?(console.error(`"${x}" is an immutable option and cannot be updated`),!1):s(x,w,D.processor)}return console.warn(`"${x}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:x=>{const w=i(x);return w&&delete o[x],w},isSet:x=>Ge(o,x)}})(0,r),(e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Cv(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Cv(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const o=Fe(n)&&jo(n);return o?{value:n,valid:o}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const o=kt(["block","linebreak","invert","default"],n);return o?{value:n,valid:o}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>qn(n)||Fe(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const o=!1===n||Fe(n)||zo(n,Fe);return o?Fe(n)?{value:pt(n.split(","),Ro),valid:o}:gn(n)?{value:n,valid:o}:!1===n?{value:[],valid:o}:{value:n,valid:o}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Um(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const o=Fe(n)||zo(n,Fe);return o?{value:gn(n)?n:pt(n.split(","),Ro),valid:o}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const o=qn(n)||Fe(n);return o?!1===n||Bm.isiPhone()||Bm.isiPad()?{value:"",valid:o}:{value:!0===n?"table,img,figure.image,div,video,iframe":n,valid:o}:{valid:!1,message:"Must be boolean or a string"}},default:!EN}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>!1===n||Fe(n)||St(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const o=!1===n||Fe(n);return o?{value:!1===n?"":n,valid:o}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Lm}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Lm}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Lm}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>Fe(n)||!0===n}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>zo(n,cn)||!1===n?{value:vv(!1===n?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:n=>St(n)?{value:xN(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>zo(n,yv)?{value:n,valid:!0}:yv(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:n=>{const o=kt(["inherited","collapsed","expanded"],n);return o?{value:n,valid:o}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:n=>{const o=kt(["inherited","collapsed","expanded"],n);return o?{value:n,valid:o}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:Vs.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:wN.getAttrib(e.getElement(),"placeholder")})})})(s);const i=this.options.get;i("deprecation_warnings")&&((e,t)=>{((e,t)=>{const n=(e=>{const t=oE(e,q$),n=e.forced_root_block;return(!1===n||""===n)&&t.push("forced_root_block (false only)"),Tn(t)})(e),o=(e=>sE(e,j$))(t),s=o.length>0,r=n.length>0,i="mobile"===t.theme;if(s||r||i){const a="\n- ",c=i?`\n\nThemes:${a}mobile`:"",m=s?`\n\nPlugins:${a}${o.join(a)}`:"",v=r?`\n\nOptions:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+m+v)}})(e,t),((e,t)=>{const n=(e=>oE(e,W$))(e),o=(e=>sE(e,nE.map(t=>t.name)))(t),s=o.length>0,r=n.length>0;if(s||r){const i="\n- ",a=s?`\n\nPlugins:${i}${o.map(J$).join(i)}`:"",c=r?`\n\nOptions:${i}${n.join(i)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+a+c)}})(e,t)})(n,r);const a=i("suffix");a&&(o.suffix=a),this.suffix=o.suffix;const c=i("base_url");c&&o._setBaseUrl(c),this.baseUri=o.baseURI;const m=Fm(s);m&&(Yr.ScriptLoader._setReferrerPolicy(m),Ut.DOM.styleSheetLoader._setReferrerPolicy(m));const v=Pv(s);ve(v)&&Ut.DOM.styleSheetLoader._setContentCssCors(v),po.languageLoad=i("language_load"),po.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Ks(xv(s),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Um(s),this.hasVisual=pA(s),this.shortcuts=new D1(this),this.editorCommands=new E1(this),PV(this);const x=i("cache_suffix");x&&(gt.cacheSuffix=x.replace(/^[\?\&]+/,"")),this.ui={registry:lZ(),styleSheetLoader:void 0,show:et,hide:et,setEnabled:et,isEnabled:an},this.mode=(e=>{const t=zn("design"),n=zn({design:{activate:et,deactivate:et,editorReadOnly:!1},readonly:{activate:et,deactivate:et,editorReadOnly:!0}});return(e=>{e.serializer?w1(e):e.on("PreInit",()=>{w1(e)})})(e),(e=>{e.on("ShowCaret",t=>{Za(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{Za(e)&&t.preventDefault()})})(e),{isReadOnly:()=>Za(e),set:o=>((e,t,n,o)=>{if(o!==n.get()){if(!Ge(t,o))throw new Error(`Editor mode '${o}' is invalid`);e.initialized?A1(e,n,t,o):e.on("init",()=>A1(e,n,t,o))}})(e,n.get(),t,o),get:()=>t.get(),register:(o,s)=>{n.set(((e,t,n)=>{if(kt(eZ,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(o){console.error(`problem while deactivating editor mode ${t}:`,o)}}}}})(n.get(),o,s))}}})(s),o.dispatch("SetupEditor",{editor:this});const w=bA(s);St(w)&&w.call(s,s)}render(){(e=>{const t=e.id;Vs.setCode(Tv(e));const n=()=>{ja.unbind(window,"ready",n),e.render()};if(!wa.Event.domLoaded)return void ja.bind(window,"ready",n);if(!e.getElement())return;const o=M_fromDom(e.getElement()),s=$r(o);e.on("remove",()=>{No(o.dom.attributes,i=>xn(o,i.name)),Ln(o,s)}),e.ui.styleSheetLoader=((e,t)=>Cb.forElement(e,{contentCssCors:Pv(t),referrerPolicy:Fm(t)}))(o,e),Um(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||ja.getParent(t,"form");r&&(e.formElement=r,rA(e)&&!tm(e.getElement())&&(ja.insertAfter(ja.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ja.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),iA(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=lE(e),e.notificationManager=aE(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",i=>{i.save&&(i.content=ja.encode(i.content))}),aA(e)&&e.on("submit",()=>{e.initialized&&e.save()}),lA(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),T5(e,e.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Ba(this)}translate(t){return Vs.translate(t)}getParam(t,n,o){const s=this.options;return s.isRegistered(t)||(ve(o)?s.register(t,{processor:o,default:n}):s.register(t,{processor:an,default:n})),s.isSet(t)||dt(n)?s.get(t):n}hasPlugin(t,n){return!(!kt(ed(this),t)||n&&void 0===Fl.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,s){this.shortcuts.add(t,n,o,s)}execCommand(t,n,o,s){return this.editorCommands.execCommand(t,n,o,s)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Ya.show(t.getContainer()),Ya.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Ya.hide(t.getContainer()),Ya.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const s={...t,load:!0},r=tm(o)?o.value:o.innerHTML,i=n.setContent(r,s);return s.no_events||n.dispatch("LoadContent",{...s,element:o}),i}return""}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const s={...t,save:!0,element:o};let r=n.getContent(s);const i={...s,content:r};if(i.no_events||n.dispatch("SaveContent",i),"raw"===i.format&&n.dispatch("RawSaveContent",i),r=i.content,tm(o))o.value=r;else{(t.is_removing||!n.inline)&&(o.innerHTML=r);const a=Ya.getParent(n.id,"form");a&&cZ(a.elements,c=>c.name!==n.id||(c.value=r,!1))}return i.element=s.element=o=null,!1!==i.set_dirty&&n.setDirty(!1),r}setContent(t,n){return Mg(this,t,n)}getContent(t){return((e,t={})=>{const o=((e,t)=>({...e,format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return Ix(e,o).fold(rn,s=>{const r=((e,t)=>Og(e).editor.getContent(t))(e,s);return Bx(e,r,s)})})(this,t)}insertContent(t,n){n&&(t=P1({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?Mg(this,this.startContent,{format:"raw"}):Mg(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Ya.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ya.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return null!==(n=null!==(t=this.bodyElement)&&void 0!==t?t:null==o?void 0:o.body)&&void 0!==n?n:null}convertURL(t,n,o){const s=this,r=s.options.get,i=yA(s);return St(i)?i.call(s,t,o,!0,n):!r("convert_urls")||"link"===o||cn(o)&&"LINK"===o.nodeName||0===t.indexOf("file:")||0===t.length?t:r("relative_urls")?s.documentBaseURI.toRelative(t):t=s.documentBaseURI.toAbsolute(t,r("remove_script_host"))}addVisual(t){((e,t)=>{((e,t)=>{vn(e).editor.addVisual(t)})(e,t)})(this,t)}setEditableRoot(t){((e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),((e,t)=>{e.dispatch("EditableRootStateChange",{state:t})})(e,t))})(this,t)}hasEditableRoot(){return(e=>this._editableRoot)()}remove(){(e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ve(null==s?void 0:s.nextSibling)&&Fd.remove(s.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&o&&(e=>{Fd.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),Fd.remove(e.getContainer()),$d(t),$d(n),e.destroy()}})(this)}destroy(t){((e,t)=>{const{selection:n,dom:o}=e;if(!e.destroyed){if(!t&&!e.removed)return void e.remove();t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),$d(n),$d(o)),(e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Fd.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;n&&(t.selection=n.win=n.dom=n.dom.doc=null)})(e),e.destroyed=!0}})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const jl=Ut.DOM,Af=f.each;let Rf,O1=!1,To=[];const Df=e=>{const t=e.type;Af(qi.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},M1=e=>{if(e!==O1){const t=Ut.DOM;e?(t.bind(window,"resize",Df),t.bind(window,"scroll",Df)):(t.unbind(window,"resize",Df),t.unbind(window,"scroll",Df)),O1=e}},I1=e=>{const t=To;return To=Ve(To,n=>e!==n),qi.activeEditor===e&&(qi.activeEditor=To.length>0?To[0]:null),qi.focusedEditor===e&&(qi.focusedEditor=null),t.length!==To.length},dZ="CSS1Compat"!==document.compatMode,qi={...Zh,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.2",releaseDate:"2023-10-25",i18n:Vs,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Ks.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const s=window.tinymce||window.tinyMCEPreInit;if(s)t=s.base||s.baseURL,n=s.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(""===a)continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!==c.indexOf(".min")&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new Ks(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Ks(e.baseURL),e.suffix=n,(e=>{e.on("AddEditor",Te(qP,e)),e.on("RemoveEditor",Te(WP,e))})(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;void 0!==o&&Nt(o,(s,r)=>{po.PluginManager.urls[r]=s})},init(e){const t=this;let n;const o=f.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let c=v=>{n=v};const m=()=>{let v=0;const x=[];let w;jl.unbind(window,"ready",m),(v=>{const x=e.onpageload;x&&x.apply(t,[])})(),w=((e,t)=>{const n=[],o=St(t)?s=>Kt(n,r=>t(r,s)):s=>kt(n,s);for(let s=0,r=e.length;s<r;s++){const i=e[s];o(i)||n.push(i)}return n})((v=>gt.browser.isIE()||gt.browser.isEdge()?(Hd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):dZ?(Hd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Fe(v.selector)?jl.select(v.selector):ve(v.target)?[v.target]:[])(e)),f.each(w,O=>{(e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(I1(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)})(t.get(O.id))}),w=f.grep(w,O=>!t.get(O.id)),0===w.length?c([]):Af(w,O=>{((v,x)=>v.inline&&x.tagName.toLowerCase()in o)(e,O)?Hd("Could not initialize inline editor on invalid inline target element",O):((O,A,P)=>{const F=new Nf(O,A,t);x.push(F),F.on("init",()=>{++v===w.length&&c(x)}),F.targetElm=F.targetElm||P,F.render()})((v=>{let x=v.id;return x||(x=$t(v,"name").filter(w=>!jl.get(w)).getOrThunk(jl.uniqueId),v.setAttribute("id",x)),x})(O),e,O)})};return jl.bind(window,"ready",m),new Promise(v=>{n?v(n):c=x=>{v(x)}})},get(e){return 0===arguments.length?To.slice(0):Fe(e)?Jt(To,t=>t.id===e).getOr(null):_t(e)&&To[e]?To[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&To.push(e),M1(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Rf||(Rf=o=>{const s=t.dispatch("BeforeUnload");if(s.returnValue)return o.preventDefault(),o.returnValue=s.returnValue,s.returnValue},window.addEventListener("beforeunload",Rf))),e},createEditor(e,t){return this.add(new Nf(e,t,this))},remove(e){const t=this;let n;if(e){if(!Fe(e))return n=e,C(t.get(n.id))?null:(I1(n)&&t.dispatch("RemoveEditor",{editor:n}),0===To.length&&window.removeEventListener("beforeunload",Rf),n.remove(),M1(To.length>0),n);Af(jl.select(e),o=>{n=t.get(o.id),n&&t.remove(n)})}else for(let o=To.length-1;o>=0;o--)t.remove(To[o])},execCommand(e,t,n){var o;const s=this,r=cn(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(e){case"mceAddEditor":return s.get(r)||new Nf(r,n.options,s).render(),!0;case"mceRemoveEditor":{const i=s.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=s.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(s.execCommand("mceAddEditor",!1,n),!0)}}return!!s.activeEditor&&s.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Af(To,e=>{e.save()})},addI18n:(e,t)=>{Vs.add(e,t)},translate:e=>Vs.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Ks(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Ks(this.baseURL)}};qi.setup();const fZ=(()=>{const e=Di();return{FakeClipboardItem:r=>({items:r,types:In(r),getType:i=>$t(r,i).getOrUndefined()}),write:r=>{e.set(r)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),B1=Math.min,Vl=Math.max,Pf=Math.round,L1=(e,t,n)=>{let o=t.x,s=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,m=(n||"").split("");return"b"===m[0]&&(s+=c),"r"===m[1]&&(o+=a),"c"===m[0]&&(s+=Pf(c/2)),"c"===m[1]&&(o+=Pf(a/2)),"b"===m[3]&&(s-=i),"r"===m[4]&&(o-=r),"c"===m[3]&&(s-=Pf(i/2)),"c"===m[4]&&(o-=Pf(r/2)),Zl(o,s,r,i)},Zl=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),bZ={inflate:(e,t,n)=>Zl(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:L1,findBestRelativePosition:(e,t,n,o)=>{for(let s=0;s<o.length;s++){const r=L1(e,t,o[s]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return o[s]}return null},intersect:(e,t)=>{const n=Vl(e.x,t.x),o=Vl(e.y,t.y),s=B1(e.x+e.w,t.x+t.w),r=B1(e.y+e.h,t.y+t.h);return s-n<0||r-o<0?null:Zl(n,o,s-n,r-o)},clamp:(e,t,n)=>{let o=e.x,s=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,m=Vl(0,t.x-o),v=Vl(0,t.y-s),x=Vl(0,r-a),w=Vl(0,i-c);return o+=m,s+=v,n&&(r+=m,i+=v,o-=x,s-=w),r-=x,i-=w,Zl(o,s,r-o,i-s)},create:Zl,fromClientRect:e=>Zl(e.left,e.top,e.width,e.height)},yZ=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==e[r])return e[r];{const m=new Promise((v,x)=>{const w=((e,t,n=1e3)=>{let o=!1,s=null;const r=m=>(...v)=>{o||(o=!0,null!==s&&(clearTimeout(s),s=null),m.apply(null,v))},i=r(e),a=r(t);return{start:(...m)=>{!o&&null===s&&(s=setTimeout(()=>a.apply(null,m),n))},resolve:i,reject:a}})(v,x);t[r]=w.resolve,Yr.ScriptLoader.loadScript(i).then(()=>w.start(c),()=>w.reject(a))});return e[r]=m,m}},add:(r,i)=>{void 0!==t[r]&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})();let bu;try{const e="__storage_test__";bu=window.localStorage,bu.setItem(e,e),bu.removeItem(e)}catch{bu=(()=>{let e={},t=[];const n={getItem:o=>e[o]||null,setItem:(o,s)=>{t.push(o),e[o]=String(s)},key:o=>t[o],removeItem:o=>{t=t.filter(s=>s===o),delete e[o]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})()}const EZ={geom:{Rect:bZ},util:{Delay:ls,Tools:f,VK:Ee,URI:Ks,EventDispatcher:Vh,Observable:Zh,I18n:Vs,LocalStorage:bu,ImageUploader:e=>{const t=dE(),n=mE(e,t);return{upload:(o,s=!0)=>n.upload(o,s?fE(e):void 0)}}},dom:{EventUtils:wa,TreeWalker:mn,TextSeeker:Ta,DOMUtils:Ut,ScriptLoader:Yr,RangeUtils:Ia,Serializer:tE,StyleSheetLoader:yb,ControlSelection:Fy,BookmarkManager:Uc,Selection:eE,Event:wa.Event},html:{Styles:xm,Entities:Ai,Node:_o,Schema:Ri,DomParser:Bl,Writer:TC,Serializer:Bi},Env:gt,AddOnManager:po,Annotator:Ay,Formatter:hE,UndoManager:vE,EditorCommands:E1,WindowManager:lE,NotificationManager:aE,EditorObservable:T1,Shortcuts:D1,Editor:Nf,FocusManager:aC,EditorManager:qi,DOM:Ut.DOM,ScriptLoader:Yr.ScriptLoader,PluginManager:Fl,ThemeManager:qa,ModelManager:Ll,IconManager:Ud,Resource:yZ,FakeClipboard:fZ,trim:f.trim,isArray:f.isArray,is:f.is,toArray:f.toArray,makeMap:f.makeMap,each:f.each,map:f.map,grep:f.grep,inArray:f.inArray,extend:f.extend,walk:f.walk,resolve:f.resolve,explode:f.explode,_addCacheSuffix:f._addCacheSuffix},F1=f.extend(qi,EZ);(e=>{window.tinymce=e,window.tinyMCE=e})(F1),(e=>{try{Ns.exports=e}catch{}})(F1)}()},7156:Ns=>{function ni(vo,Le,$e,tn,it,pn,ms){try{var Uo=vo[pn](ms),_n=Uo.value}catch(As){return void $e(As)}Uo.done?Le(_n):Promise.resolve(_n).then(tn,it)}Ns.exports=function en(vo){return function(){var Le=this,$e=arguments;return new Promise(function(tn,it){var pn=vo.apply(Le,$e);function ms(_n){ni(pn,tn,it,ms,Uo,"next",_n)}function Uo(_n){ni(pn,tn,it,ms,Uo,"throw",_n)}ms(void 0)})}},Ns.exports.__esModule=!0,Ns.exports.default=Ns.exports}}]);